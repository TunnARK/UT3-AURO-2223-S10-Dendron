{"keys":[{"path":["title"],"id":"title","weight":1,"src":"title","getFn":null},{"path":["body"],"id":"body","weight":1,"src":"body","getFn":null}],"records":[{"i":0,"$":{"0":{"v":"This page has not yet sprouted","n":0.408},"1":{"v":"[Dendron](https://dendron.so/) (the tool used to generate this site) lets authors selective publish content. You will see this page whenever you click on a link to an unpublished page\n\n![](https://foundation-prod-assetspublic53c57cce-8cpvgjldwysl.s3-us-west-2.amazonaws.com/assets/images/not-sprouted.png)","n":0.189}}},{"i":1,"$":{"0":{"v":"Portail Digital du M2 AURO 2022/2023 de RKA","n":0.354},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n# Idée\n\nCe projet a pour but de regrouper mes notes de cours en utilisant les outils offerts par [Dendron](dendron.so) pour structurer et hiérarchiser l'information.\n\nDe cette façon, ce portail devient un \"one-stop-shop\" pour accéder et/ou retrouver les connaissances acquises durant le master.\n\n# Liens utiles\n\nPour plus d'informations:\n- [Lien officiel du Master AURO de l'Université Paul Sabatier](https://www.univ-tlse3.fr/master-parcours-automatique-et-robotique-auro)\n- [Lien vers la page moodle des cours](https://moodle.univ-tlse3.fr/course/index.php?categoryid=1269)\n- [Dendron Official Website](dendron.so)\n- [Dendron Wiki](https://wiki.dendron.so/)\n- [Dendron's Discord](https://discord.com/invite/xrKTUStHNZ)\n\n\n\n# Remerciement\n\nUn grand merci à GEA pour avoir mis à disposition les scans de ses notes !\n\nJe tiens aussi à remercier mes enseignants pour m'autoriser à prendre en photo les tableaux.\n\nLastly, a big thank you to everyone in [Dendron](dendron.so)'s team and the community for all their support.\n\n# Contact\n\nUn salon [Element](https://element.io/) est mis à disposition des lecteurs pour toutes questions/sugesstions ou pour faire remonter des erreurs/typos.\n\n\n[`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org)\n\n---\n\n> This website has been generated using [Dendron](dendron.so) and [GitHub Actions](https://github.com/features/actions).\n\n","n":0.079}}},{"i":2,"$":{"0":{"v":"Projet","n":1},"1":{"v":"\n- [[Projet.P1K]]\n- [[Projet.PSH]]\n\n\n# Projet 1: Bloc 1 -> Bloc 2\n\n## Modalités\n\n- 3.5 semaines\n- 2 servers\n    - inca.(private).univ-tlse3.fr\n    - azteca.(private).univ-tlse3.fr\n- Implémenter un TP pour la première semaine\n    - Suivie animaux marins\n        - torture a cape constant avec des courants\n        - mesurer sa vitesse\n    - SLAM linéaire\n        - robot qui tourne en rond\n        - capteur qui bouge en translation rectiligne\n        - fermeture de boucle et SLAM\n- 2ème et 3ème semaine\n    - 4 par 4\n    - Pour les automaticiens -> Mission Appolo\n        - navette en orbite lacher avec une certaines conditions initiales\n        - position et orientation a estimer en regime libre\n        - chaque 6min il y a reperage des etoiles pour la mesure des amères\n        - il y a un papier de la NASA pour l'utilisation de kalman pour localiser la capsule\n        - Faire ces calculs\n    - Pour les roboticiens Localisation et Navigation probabiliste\n        - Landmark Base SLAM\n        - Robot dans une salle carree remplit d'objet\n        - SLAM Actif / Range & Bearing / Filtre kalman en melange de gausienne\n- Utiliser Jupyter Notebook\n- Vacances administratives du 10/31 au 11/04 -> fac fermée probablement du coup pb de salle\n\n## À Faire\n\n1. Etudier les videos\n    - [[Lecture 11 Probability Review, Bayes Filters, Gaussians -- CS287-FA19 Advanced Robotics|Projet.P1K.VideoLecture11]]\n    - [[Lecture 12 Kalman Filters -- CS287-FA19 Advanced Robotics at UC Berkeley|Projet.P1K.VideoLecture12]]\n    - [Lecture 14 Particle Filters -- CS287-FA19 Advanced Robotics at UC Berkeley](https://www.youtube.com/watch?v=8k--yWn8_ds&list=PLwRJQ4m4UJjNBPJdt8WamRAt4XKc639wF&index=15)\n    - Preparation pour les videos: revoir la partie II de [RMN.SLAM.CM.Poly.20220923.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/RMN.SLAM.CM.Poly.20220923.pdf)\n2. Deadline 10/21\n    - avoir compris le filtre de kalman (et le filtrage particulère)\n    - finir le TP\n3. Deadline 11/07\n    - Presentation des projets\n\n## Objectifs\n\n- **Estimation stochastique**\n- **Filtrage de Kalman** (linéaire + extensions)\n    - EKF\n    - UKF\n- **Filtrage particulaire**\n    - estimateur\n    - mesures ne sont pas jeter dans un jeux d'equations\n    - contruire la loi posterieur\n        - placer des objets\n        - et garder le nuages de particule credible\n\n\n# Projet 2 - Systèmes Hybirdes\n\n- cf [[Projet.PSH.Presentation]]\n\n# Projet 3 - Mapping ?\n\n...","n":0.056}}},{"i":3,"$":{"0":{"v":"Projet Systèmes Hybrides","n":0.577},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut et P. Ribot\n\n---\n\n# Cours\n\n- [[Présentation des Systèmes Hybrides|Projet.PSH.Presentation]]\n- [[Modélisation des Systèmes Hybrides|Projet.PSH.Modelisation]]\n- [[Trajectoires des Systèmes Hybrides|Projet.PSH.Trajectoires]]\n- [[Proprietes des Systèmes Hybrides|Projet.PSH.Proprietes]]\n\n# Bibliographie\n\n...","n":0.151}}},{"i":4,"$":{"0":{"v":"Trajectoires","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut et P. Ribot\n\n---\n\n> Notes du 2023/01/11 - Start\n\n\n![](/assets/images/PSH.Slide3.Trajectoires-01.png)\n\n# Sommaire\n\n![](/assets/images/PSH.Slide3.Trajectoires-02.png)\n\n\n# 1) Remarques sur les automates hybrides\n\n## Retour sur le modèle en SED\n\n![](/assets/images/PSH.Slide3.Trajectoires-03.png)\n\ntrajectoire en SED = séquence d'ev. du coup assez evidante comparé au STC car une fois un ev. passé on ne peut pas faire demi-tour\n\nCertains pb en SED :\n- deadlock\n- feuille non co-accessible\n\n## Deadlock\n\n![](/assets/images/PSH.Slide3.Trajectoires-04.png)\n\nPour eviter un deadlock, il faudrait respecter la formule suivante :\n$$\nx \\notin Inv\n$$\n\nC.à.d. que l'on définit l'$Inv$ selon l'union des gardes.\n\n## Comportement Zenon\n\n![](/assets/images/PSH.Slide3.Trajectoires-05.png)\n\nSolution:\nImplémenter un timer pour donner le temps  a un flot de s'établir (_waittime_)\n- Dans ce cas, le temps d'attente dépend de la dynamique du systeme\n- En fait ce délai rend le délai fini infini c'est ce qui fait tomber le phenomene zenon (on peut continuer a switcher sur un meme etat une infinité de temps mais comme a chaque fois on attend on ne fait plus c'est switch sur un temps fini)\n\n## Automate non déterministe\n\n![](/assets/images/PSH.Slide3.Trajectoires-06.png)\n\nLors de la modelisation on rajoute des incertitudes ce qui peut amener des indeterministes. Ce qui amene a donné les trois modification de définition ci-dessus.\n\nSi on veut faire une simulation on fait un model pour chaque CI.\n\nIci l'idée des etudes faites sur de tels models incertains est de partir de l'etat final et reconstruire le comportement.\n\n# 2) Notions de trajectoires en STC\n\n## Le temps hybride\n\n> Keywords: domaine temporel ; temps hybride/ordinaire\n\n![](/assets/images/PSH.Slide3.Trajectoires-07.png)\n\n## Remarques\n\n![](/assets/images/PSH.Slide3.Trajectoires-08.png)\n\n## Trajectoires Hybrides (STC)\n\n> Keywords: fonction absolument continue ; arc hybride\n\n![](/assets/images/PSH.Slide3.Trajectoires-09.png)\n\nReprésentation graphique :\n![](/assets/images/PSH.BB20230111-2.png)\n\n\n## Différents types d'arc hybride\n\n> Keywords: non trivial ; complet ; zéno ; eventuellement discret/continu ; continu\n\n> ERROR: J = $sup_j(dom\\phi)$\n![](/assets/images/PSH.Slide3.Trajectoires-10.png)\n\n- Zenon\n    ![](/assets/images/PSH.BB20230111-1.png)\n- Discret\n    ![](/assets/images/PSH.BB20230111-3.png)\n\n## Solutions\n\n![](/assets/images/PSH.Slide3.Trajectoires-11.png)\n\n> On a besoin d'ouvert pour potentiellement bien définir la dérivée\n\n## Exemple\n\n\n![](/assets/images/PSH.Slide3.Trajectoires-12.png)\n\n<!-- ![](/assets/images/PSH.BB20230111-4.png) -->\n![](/assets/images/PSH.BB20230111-5.png)\n\n![](/assets/images/PSH.Slide3.Trajectoires-13.png)\n\n![](/assets/images/PSH.BB20230111-6.png)\n\nQue se passe-t-il:\n\n- en (0,0) ?\n\n    On se trouve alors dans D mais on switch constament en restant sur le meme point (donc purement discret) comme une sorte de point d'équilibre (on ne passe jamais sur le flot)\n\n- en (2,-1) ?\n\n    On ne va jamais taper D donc on reste sur C donc diverge (attention on peut diverger tout en faisant des switch)\n\n- en (2,2) ?\n\n    On va se diriger vers la frontiere de D sans jamais (ou pas) le franchir. Pour fixer si il y a franchir il faut etudier la limite\n\n## Paradoxe de Zenon\n\n![](/assets/images/PSH.Slide3.Trajectoires-14.png)\n\n\nAchile donne de l'avance au lapin\n\nachile court 2x plus vite\n\npendant que achile court le lapin fait 50min\n\nachile court 50m et le lapin 25m de plus \n\net ainsi de suite\n\nmais ce ainsi de suite ne doit pas nous faire penser que le sup_t C est infini il se peut qu'il existe une limite\n\nen effet $lim_i \\sum (1/2)^i = 2$\n\n# Bibliographie\n\n![](/assets/images/PSH.Slide3.Trajectoires-15.png)\n\n\n\n\n> Notes du 2023/01/11 - End\n\n---","n":0.047}}},{"i":5,"$":{"0":{"v":"Proprietes","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut et P. Ribot\n\n---\n\n> Notes du 2023/01/12 - Start\n\n\n\n\n![](/assets/images/PSH.Slide4.Proprietes-01.png)\n\n# Sommaire\n\n![](/assets/images/PSH.Slide4.Proprietes-02.png)\n\n# Prop SED\n\n## Rappel\n\n> Keywords: Accessibilité , Coacessibilité, ...\n\n![](/assets/images/PSH.Slide4.Proprietes-03.png)\n\n\nAccessibilités:\n- chemin de $x_0$ à $x$\n\nCoAccessibilités:\n- chemin de $x$ à $x_{marqué}$\n- introduit la notion d'objectif\n\n## Analyse\n\n> Keywords: blocage ; observabilité ; contrôlabilité ; stabilité ; model-checking\n\n![](/assets/images/PSH.Slide4.Proprietes-04.png)\n\n## Contrôlabilité de la commande supervisée\n\n> Keywords: procédé ; commande supervisée ; contrôlabitié ; non-blocage\n\n![](/assets/images/PSH.Slide4.Proprietes-05.png)\n![](/assets/images/PSH.Slide4.Proprietes-06.png)\n\nAttention:\n- qand la commande supervisée ne contient pas des elemetns non controlable (comme un capteur) alors la commande concut pourra s'interrompre lors d'une apparition aléatoire d'un evenements non controlable\n- dans ce cas la commande supervisée ne sera plus controlable\n- pour la rendre controlable a nouveau il faudra complementer/inclure cette commande avec des elements non controlabe\n\n## Observabilités\n\n> Keywords: observabilités\n\n![](/assets/images/PSH.Slide4.Proprietes-07.png)\n\n## Stabilité\n\n> Keywords: commande supervisée de Ramadge & Wonham ; états autorisés/interdits\n\n![](/assets/images/PSH.Slide4.Proprietes-08.png)\n\n## Exemple\n\n### Etat vivant/bloquant\n\n> Keywords: dead state\n\n![](/assets/images/PSH.Slide4.Proprietes-09.png)\n\n### Etats autorisés/interdit\n\n> Keywords: superviseur ; stabilisabilité (stabilisability) ; régions d'attraction\n\n![](/assets/images/PSH.Slide4.Proprietes-10.png)\n\n# Stabilité en Syst. Hybrides\n\n## Définitions\n\n> Keywords: etat fictif ; globalement exponentiellement stable (GES) ; fonction de lyapunov ; moindres carrés\n\n![](/assets/images/PSH.Slide4.Proprietes-11.png)\n\nProblème:\n- comment définir la notion de stabilité d'un ensemble et non plus d'un point d'équilibre\n- Sii timer on peut pas montrer que x converge vers 0\n- comment définir la notion d'écartement vis-à-vis d'un ensemble ?\n    - il faudrait définir la distance minimale sur tous les points de l'ensemble\n    - or faire $\\min\\dfrac{1}{x}$ n'est pas défini car le min implique l'hypothèse d'existence\n    - du coup on utilise le $\\inf$\n    $$\n    | x |_{\\mathcal{A}} = \\inf_{y\\in\\mathcal{A}} |x-y|\n    $$\n    - au final cela est assimilable au moindres carrés !!!\n\n![](/assets/images/PSH.Slide4.Proprietes-12.png)\n\n## Utilisation d'une fonction de Lyapunov\n\n![](/assets/images/PSH.Slide4.Proprietes-13.png)\n\n$$\nV(\\phi(t,j)) \\quad tq \\\\\n\\begin{cases}\n\\dot V(\\phi) < 0 \\quad \\forall\\;\\phi\\in\\mathcal{C}\\\\\nV(G(\\phi)) < V(\\phi)\n\\end{cases}\n$$\n\ndu coup la fct le lyap. doit décroitre durant les flots et/ou durant les sauts\n\nmais si elle doit décroitre dans les flots cela impose que le procédé doit rester assez de temps dans le flot (_dwell-time_)\n\nmais si elle décroit seulement durant les sauts là il faut alors suffisament de sauts (donc le procédé ne peut pas s'arreter sur un flots)\n\n# Bibliographie\n\n![](/assets/images/PSH.Slide4.Proprietes-14.png)\n![](/assets/images/PSH.Slide4.Proprietes-15.png)\n\n\n\n\n> Notes du 2023/01/12 - End\n\n---","n":0.054}}},{"i":6,"$":{"0":{"v":"Présentation des Systèmes Hybrides","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut et P. Ribot\n\n---\n\n> Notes du 2023/01/05 - Start\n\n\n\n![](assets/images/PSH.Slide1.Presentation-01.png)\n\n# Sommaire\n\n![](assets/images/PSH.Slide1.Presentation-02.png)\n\n# 1) Introduction\n\n## Objectifs\n\n![](assets/images/PSH.Slide1.Presentation-03.png)\n\nSystème Hybride = Systeme mélangeant du formalisme STC et SED\n\nProbleme de theories et de simulations.\n\n## Modalités\n\n![](assets/images/PSH.Slide1.Presentation-04.png)\n\n\n# 2) Modélisation STC\n\n## Modélisation formelle\n\n![](assets/images/PSH.Slide1.Presentation-05.png)\n\nSTC = Systeme Temps Continu\n\nentrees/sorties\netats\nequation evolution\nequation de sortie\n\n## Hypothèses en TC\n\n![](assets/images/PSH.Slide1.Presentation-06.png)\n![](assets/images/PSH.Slide1.Presentation-07.png)\n\n# 3) Modélisation de SED\n\n## Caractéristiques des SED\n\n![](assets/images/PSH.Slide1.Presentation-08.png)\n\nSED = Syst. Evenement Discret\n\n\n## Concept d'évènement\n\n![](assets/images/PSH.Slide1.Presentation-09.png)\n\nattention evenement est tj instantanee\nexogene = exterieur\nendogene = interieur\n\nobsvble = mesurable\nnonobsvble = blackpox carte dont on connait le fonctionne mais ne mesure pas\n\n## Exemple syst. discret\n\n### Entrepôt\n\n![](assets/images/PSH.Slide1.Presentation-10.png)\n\n### Réservoir d'eau\n\n![](assets/images/PSH.Slide1.Presentation-11.png)\n\n\nProblematique du choix du niveau d'abstraction\n\nMaquette Bac Eaux tres dynamique mais peut aussi etre represente par un modele discret avec le bon niveau d'absatraction\nCapteur binaire donc $2^4$ etats\n\n**Mealy** tout est evenement (tout sur les transitions) front montant sans !!! front descendant avec !!!\nMoore sorties sont des niveaux (donc ne se trouve pas sur les transitions) [similaire au reseau de petri]\n\nsi plusieurs valeurs possible alors on cree plusieurs etat discret pour faire l'abstraction de la dynamique\n\n### Exemple syst discretisable: Air Conditionné\n\n![](assets/images/PSH.Slide1.Presentation-12.png)\n\n## Modélisation formelle d'un SED\n\n![](assets/images/PSH.Slide1.Presentation-13.png)\n\n## Modélisation par abstraction\n\n![](assets/images/PSH.Slide1.Presentation-14.png)\n\n# 4) Exemples\n\n## SED\n\n### Trains\n\n![](assets/images/PSH.Slide1.Presentation-15.png)\n\n### Bras manipulateur\n\n![](assets/images/PSH.Slide1.Presentation-16.png)\n\n## Automatique\n\n### Rebond de balle\n\n#### Principe fondamental\n\n![](assets/images/PSH.Slide1.Presentation-17.png)\n\nEn lair mode 1\n\n$\\ddot x  = -g$ les etats $z = [x , \\dot x]$ le systeme modelise est alors\n\n$$\n\\dot z_1 = z_2\\\\\n\\dot z_2 = -g\n$$\n\nAu sol mode 2\n\n$$\nm\\ddot x = -mg + F_{rsol} + F_{rebont}\\\\\n\\ddot x = - \\lambda \\dot x\n$$\n\n$$\n\\dot z_1 = 0\\\\\n\\dot z_2 = - \\lambda \\dot x\n$$\n\n#### Modélisation des modes\n\n![](assets/images/PSH.Slide1.Presentation-18.png)\n![](assets/images/PSH.Slide1.Presentation-19.png)\n\nEn lair\n$$\n\\mathcal{C} = \\{z\\in\\mathbb{R}^2 \\;|\\; z_1>0 \\;\\text{or}\\; (z_1 = 0 \\;\\text{and}\\; z_2>0)\\}\n$$\n\nAu sol\n$$\n\\mathcal{D} = \\{z\\in\\mathbb{R}^2|z_1 = 0 \\;\\text{and}\\; z_2\\leq0\\}\n$$\n\nPhenomene de ré-initialisation\n$$\nz_1^{+} = 0\\\\\nz_2^{+} = - \\lambda z_2\n$$\n\n\n1er modele\n![](assets/images/PSH.BB20230105-1.png)\n\n\n**phenomene de zenon** quand la CI est z_1=z_2=0\n\nmais vu que le mode sol est instantanee on peut le voir comme une action d'ou le 2eme modele\n\n### Les lucioles\n\n![](assets/images/PSH.Slide1.Presentation-20.png)\n![](assets/images/PSH.Slide1.Presentation-21.png)\n\nmeme si un flash est un evenement ici on realise un modele globale qui lui considere l'horloge = 1 comme evenement (alors que localement la luciole considere le flash comme evenement)\n\n![](assets/images/PSH.BB20230105-2.png)\n![](assets/images/PSH.BB20230105-3.png)\n![](assets/images/PSH.BB20230105-4.png)\n![](assets/images/PSH.Slide1.Presentation-22.png)\n\nsi les lucioles se fatigue a chaque flash il faut adapter le modele\n\nune option c'est de changer l'evolution $\\dot \\tau = a_i$ via une action conditionne sur $a_i$ (on change les parametres d'un meme modele au final)\n\nautre option est de changer de modele qui lui cree un nouvel etat pour chaque changement d'evolution\n\ncette derniere modelisation apporte l'advantage de garder trace de l'evolution des changements et donc pouvoir etudier le syst. d'un point de vue usage\n\n### Le bloqueur d'ordre zéro\n\n![](assets/images/PSH.Slide1.Presentation-23.png)\n\nPour l'automatique discrete, le bloqueur d'ordre zero fonctionne sur la theorie des SED\n\nIci ce modele est a temps continu du coup on s'affranchit l'approximation causer par une discretisation\n\n![](assets/images/PSH.BB20230105-5.png)\n![](assets/images/PSH.BB20230105-6.png)\n![](assets/images/PSH.BB20230105-7.png)\n\n# 5) Conclusion\n\n> Keywords pour la recherche bibliographique: hybrid automata ; hybrid dynamical system\n\n> termes à retenir\n\n![](assets/images/PSH.Slide1.Presentation-24.png)\n\n# 6) Bibliographie\n\n![](assets/images/PSH.Slide1.Presentation-25.png)\n\n\n\n\n> Notes du 2023/01/05 - End\n\n---","n":0.046}}},{"i":7,"$":{"0":{"v":"Modelisation","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut et P. Ribot\n\n---\n\n> Notes du 2023/01/06 - Start\n\n![](/assets/images/PSH.Slide2.Modelisation-01.png)\n\n> Syst. Hyb. au sens de Teel (mathematicien qui définit les syst. hyb.)\n\n> Cassandras a travaillé sur les syst. continu pour ensuite passé sur les syst. discret\n\n> Lafontaine a définit les automates\n\n# Sommaire\n\n![](/assets/images/PSH.Slide2.Modelisation-02.png)\n\n# 1) Balle rebondissante\n\n![](/assets/images/PSH.Slide2.Modelisation-03.png)\n\nNotation: \n- espace de flot pour décrire la dynamique continu\n- espace de saut pour décrire la ré-initialisation\n\n# 2) Observateur\n\n![](/assets/images/PSH.Slide2.Modelisation-04.png)\n\n$y(t) = y(t_k)$ indique que la mesure n'arrive pas continuement mais à des instants cadensés ou non (les mesures sont spontanées) sous l'hypothèse que des mesures sont bien captés\n\nObservateur = Syst dyn dont l'objectif est de poursuivre un etat\n\nObs naif:\n$$\n\\dot x = A x + B u\\\\\n\\hat x = A x + B u\\\\\n\\epsilon = x - \\hat x\\\\\n\\dot\\epsilon = e^{At} \\epsilon(0)\n$$\n\nOn peut alors crée un syst. hyb. avec une bulle contenant le simulateur (l'obs naif) avec à chaque mesure une ré-initiliasation de $\\epsilon$.\n\n> cf Ferrante FRANSCESCO \"observer\" 2016\n\n# 3) Thermostat\n\n![](/assets/images/PSH.Slide2.Modelisation-05.png)\n\n2 garde 1 etat continu 1 etat discret\n\ndans les etats il est en flot\n\nil n'y a pas de ré-initialisation\n\nce syst est hyb car le changement de mode dépend d'un etat continu\n\nc'est une hystéresis où il y a un moment nominal et des moments de changement donc le choix des CI devra respecter le domaine de définition de $x$ (sinon il y a ou bien un changement directe au depart ou un blocage du syst au quel cas la modelisation n'est pas la bonne)\n\n![](/assets/images/PSH.Slide2.Modelisation-06.png)\n\n$f$ et $\\phi$ sont des fonctions multivaluées\n\nLe phenomene de zenon (switch infinie) n'est pas désirée en général exception pour les convertisseurs d'énergie où le phénomène de zenon est l'objectif meme de ces procédés car le zenon au final mène la dynamique vers la variable de changement.\n\nPour le bac d'eau \"tout ou rien\" on aura un zenon et pour le faire disparaitre on peut inserer un interval pour donner le temps au syst de rester sur un flot ou autre facon on peut inserer un timer-dual pour cadenser le changement.\n\nAu final si un zenon est voulu on perd l'interet d'une modelisation hyb car les flots ne présente plus d'interets vu que la dynamique est dictée par la variable de changement\n\n![](/assets/images/PSH.Slide2.Modelisation-07.png)\n\n# 4) Réservoir avec délais\n\nOn pourrait modéliser ce procédé avec du temps invariant ou avec des automates temporisés (mais les deux options sont très difficiles).\n\n![](/assets/images/PSH.Slide2.Modelisation-08.png)\n\nDans Q1, le bac se vide s'il descend en dessous de 1 on réinitialise le timer à zero et dans Q2 on commence à compter. Si on atteint $\\tau \\geq 0.5$ alors on passe à Q3 pour ré-initialise le timer et on commence a remplir. Lorsque le niveau arrive à 2 on passe à Q4 qui correspond a continuer de remplir mais en commencant le count down.\n\nOn peut imaginer que l'intéret du timer virtuelle (d'où pourquoi on peut si facilement ré-initialiser les CI de $\\tau$ sans soucis) est de modéliser par exemple la dynamique de la pompe (qui nécessite du temps pour atteindre son régime permanant)\n\n![](/assets/images/PSH.Slide2.Modelisation-09.png)\n\n# 5) Machine avec réparation\n\n![](/assets/images/PSH.Slide2.Modelisation-10.png)\n![](/assets/images/PSH.Slide2.Modelisation-11.png)\n\nIci il y a une grande modification : l'invariant dans Q2 ainsi que l'apparition d'évènement exogène $\\alpha$, $\\beta$ et $\\gamma$\n\n![](/assets/images/PSH.Slide2.Modelisation-12.png)\n![](/assets/images/PSH.Slide2.Modelisation-13.png)\n\n# 6) Modélisation formelle\n\n## SED\n\n![](/assets/images/PSH.Slide2.Modelisation-14.png)\n\n$X$ à temps continu\n$f$ pour l'evolution du flot\n$\\phi$ pour les \"fleches\"\n$Inv$ continu ou discret\n\n## STC\n\n![](/assets/images/PSH.Slide2.Modelisation-15.png)\n\n$F$ et $G$ sont des fonctions mutlivaluées\n\n## Bilan\n\nOn retrouve en SED et STC :\n- C = flot\n- D = garde\n- F et G = $\\rho$\n\nGrosses différences entre hybride SED et STC :\n- les CI ne peuvent pas etre imposé en STC (c'est l'objectif meme d'analyse de stabilité où l'on fait varier les CIs pour etudier la robustesse du syst. ou meme dans un observateur où l'on estime les CI pour retrouver l'etat actuel à partir du CI trouvé)\n- even. et etat discret n'apparaissent pas en STC\n    - on fait les etats discret sont modéliser en etat continu (extension)\n    - durant le flot on maintient ou met a zero les etats discret\n    - les $q^+$ remplace le $\\phi$\n\nCes différences s'expliquent par la divergence des objectifs respectif en SED et STC.\n\nIci la STC va prouver la stabilité d'un ensemble plustôt que d'un point d'équilibre.\n\n![](/assets/images/PSH.Slide2.Modelisation-16.png)\n\n## Exercices\n\n![](/assets/images/PSH.Slide2.Modelisation-17.png)\n\n# 7) Simulation\n\n![](/assets/images/PSH.Slide2.Modelisation-18.png)\n\nzero crossing detection\n- pour le franchissement d'une guarde\n- comment faire algorithimiquement pour verifier et franchir les conditions de changement (inégalité et autres)\n\n# 8) A retenir\n\n![](/assets/images/PSH.Slide2.Modelisation-19.png)\n\n\n\n> Notes du 2023/01/06 - End\n\n---","n":0.037}}},{"i":8,"$":{"0":{"v":"Kalman","n":1},"1":{"v":"\n# Ressources\n\n- [[Projet.P1K.Interlude20221021]]\n\n# TPs\n\n- [[Projet.P1K.TPtortue]]\n- [[Projet.P1K.TPslam]]\n\n# Projet\n\n- [[Projet.P1K.SLAM]]\n- [[Projet.P1K.Apollo]]","n":0.333}}},{"i":9,"$":{"0":{"v":"Kalman Filters (for Advanced Robotics)","n":0.447},"1":{"v":"\nSource:\n\n- Video: [Lecture 12 Kalman Filters -- CS287-FA19 Advanced Robotics at UC Berkeley](https://www.youtube.com/watch?v=eCjffhEeQyw)\n- Slide: [CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters.pdf)\n- Course given by Ignasi CLAVERA\n\n---\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-01.png)\n\n<!--\n# Outline\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-02.png)\n-->\n\n# Gaussians\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-03.png)\n\n## Mutlivariate Gaussians\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-04.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-05.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-06.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-07.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-08.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-09.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-10.png)\n\n## Partitioned Multivariate Gaussian\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-11.png)\n\n### Dual Representation\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-12.png)\n\n## Marginalization\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-13.png)\n\n## Recap\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-14.png)\n\n### Self-quiz\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-15.png)\n\n### Conditioning\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-17.png)\n\n# Kalman Filtering\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-18.png)\n\n## Presentation\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-19.png)\n\n## Time Update\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-20.png)\n\n### Joint Distribution\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-21.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-22.png)\n\n### Recap\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-23.png)\n\n## Generality\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-24.png)\n\n## Observation Update\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-25.png)\n\n## Complete Kalman Filtering Algorithm\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-26.png)\n\n## Summary\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-27.png)\n\n# Extend Kalman Filter (EKF)\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-28.png)\n\n## Nonlinear Dynamical Systems\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-29.png)\n\n## Linearity Assumption Revisited\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-30.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-31.png)\n\n## Non-Linear Function\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-32.png)\n\n## EKF Linearization\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-33.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-34.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-35.png)\n\n### First Order Taylor Series Expansion\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-36.png)\n\n## EKF Algorithm\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-37.png)\n\n## Summary\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-38.png)\n\n# Unscented Kalman Filter (UKF)\n\n> **Also called \"_signma-point filter_\"**\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-39.png)\n\n## Linearization via Unscented Transform\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-40.png)\n\n## UKF Sigma-Point Estimate\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-41.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-42.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-43.png)\n\n## Intuition\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-44.png)\n\n## Original Unscented Transform\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-45.png)\n\n## UKF Algorithm\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-46.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-47.png)\n\n## Summary\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-48.png)\n\n# Forthcoming\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-49.png)\n\n## Things to be aware of\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-50.png)\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-51.png)\n\n## Kalman Filter Property\n\n![](/assets/images/CS287FA19-AdvancedRobotics.Lecture12-KalmanFilters-52.png)\n\n\n","n":0.099}}},{"i":10,"$":{"0":{"v":"Probability Review, Bayes Filters and Gaussians (for Advanced Robotics)","n":0.333},"1":{"v":"\nSource:\n- Video: [Lecture 11 Probability Review, Bayes Filters, Gaussians -- CS287-FA19 Advanced Robotics](https://www.youtube.com/watch?v=xamzdNUN1o0)\n- Slide: [CS287FA19-AdvancedRobotics.Lecture11-ProbabilityReviewBayesFiltersGaussians.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CS287FA19-AdvancedRobotics.Lecture11-ProbabilityReviewBayesFiltersGaussians.pdf)\n- Course given by Pieter Abbeel\n---\n\n![](/assets/images/P1K.Lecture11.Slide-01.png)\n\n- LQR\n- Shorcutting\n\n# Introduction\n\n## Why Probability in Robotics ?\n\n![](/assets/images/P1K.Lecture11.Slide-02.png)\n\n- Can take actions/decisions to search for more sensory information in order to improve state estimation.\n\n## Example 1: Helicopter\n\n![](/assets/images/P1K.Lecture11.Slide-03.png)\n\n- magnometer gives an idea of orientation \n- We don't have a direct knowledge of the state of the heli but can inderectly know its state through thoses instruments\n\n## Example 2: Mobile robot\n\n![](/assets/images/P1K.Lecture11.Slide-04.png)\n\n- Carefull with laser and reflecting surfaces as it renders the measures unusable\n\n# Probability Review\n\n![](/assets/images/P1K.Lecture11.Slide-05.png)\n\n## Probabilty Axioms\n\n![](/assets/images/P1K.Lecture11.Slide-06.png)\n![](/assets/images/P1K.Lecture11.Slide-07.png)\n![](/assets/images/P1K.Lecture11.Slide-08.png)\n\n## Discrete Random Variables\n\n![](/assets/images/P1K.Lecture11.Slide-09.png)\n\n## Continuous Random Variables\n\n![](/assets/images/P1K.Lecture11.Slide-10.png)\n\n- Continuum => Integration\n- In continuous proba space, we can't say that a probability takes an exact value but we should say that it lies in an interval\n\n## Joint and Conditional Probability\n\n![](/assets/images/P1K.Lecture11.Slide-11.png)\n\n- Very important in robotics because we will always compare the state of the robot with the measurements taken\n    - We indeed try to use the measurement to tell smth about the state\n    - Or we want to know the dynamic now and relate it to the dynamic in the future \n    - Both require joint distributions over two random variables instead of just one\n\n- If two variables are independent then you cannot tell anything about X when using Y since they are unrelated\n\n- Joint Distribution\n$$\nP(X=x\\;and\\;Y=y) = P(x,y)\n$$\n\n- Conditional Probability\n$$\nP(x\\;|\\;y) = \\dfrac{\\;P(x,y)\\;}{P(y)}\n$$\n\n## Law of Total Probability, Marginals\n\n![](/assets/images/P1K.Lecture11.Slide-12.png)\n<!--![](/assets/images/P1K.Lecture11.BB-01.png)-->\n\n## Bayes' Rule\n\n![](/assets/images/P1K.Lecture11.Slide-13.png)\n![](/assets/images/P1K.Lecture11.BB-02.png)\n\n- If there is a state, it will cause distribution of a reading\n- Therefore the conditional $P(y|x)$ reflect causal effect and $P(x)$ represent the state deduced from previous estimates\n- The division by $P(y)$ often written $\\dfrac{1}{z}$ or $\\eta$ is simply a normalisation\n\n## Normalisation\n\n![](/assets/images/P1K.Lecture11.Slide-14.png)\n\n## Conditionning\n\n![](/assets/images/P1K.Lecture11.Slide-15.png)\n![](/assets/images/P1K.Lecture11.Slide-16.png)\n<!--![](/assets/images/P1K.Lecture11.BB-03.png)\n![](/assets/images/P1K.Lecture11.BB-04.png)-->\n\n\n## Conditional Independance\n\n![](/assets/images/P1K.Lecture11.Slide-17.png)\n![](/assets/images/P1K.Lecture11.BB-05.png)\n<!--\n![](/assets/images/P1K.Lecture11.BB-06.png)-->\n\n## Example of State Estimation\n\n![](/assets/images/P1K.Lecture11.Slide-18.png)\n\n## Casual vs Diagnostic Reasoning\n\n![](/assets/images/P1K.Lecture11.Slide-19.png)\n\n## Door Example (one measurement)\n\n![](/assets/images/P1K.Lecture11.Slide-20.png)\n\n> Does it mean that the sensor measuring $z$ can detect the door is open at 67% chance ??? (if so the conditional probability would return the precision of the instrument ???)\n\n## Combining Evidence\n\n![](/assets/images/P1K.Lecture11.Slide-21.png)\n\n## Recursive Bayesian Updating \n\n![](/assets/images/P1K.Lecture11.Slide-22.png)\n\n**Posterior Distribution**\n$$\nP(x\\;|\\;z_1,\\dots,z_n) = \\eta \\times \\prod_{i=1}^n \\Big(\\; P(z_i\\;|\\;x) \\;\\Big) \\times P(x)\n$$\n\n## Door Example (second measurement)\n\n![](/assets/images/P1K.Lecture11.Slide-23.png)\n\n## A Typical Pitfall\n\n![](/assets/images/P1K.Lecture11.Slide-24.png)\n\n**BE CAREFUL ! Are the reading truly independent ? $\\implies$ OVERCONFIDENCE**\n\n# Bayes' Filters\n\n![](/assets/images/P1K.Lecture11.Slide-25.png)\n\n## Actions\n\n![](/assets/images/P1K.Lecture11.Slide-26.png)\n\n## Typical Actions \n\n![](/assets/images/P1K.Lecture11.Slide-27.png)\n\nActions increase uncertainty because they usually introduce new uncertainties.\n\n## Modeling Acitons\n\n![](/assets/images/P1K.Lecture11.Slide-28.png)\n\n## Example: Closing the door\n\n![](/assets/images/P1K.Lecture11.Slide-29.png)\n\n## State Transitions\n\n![](/assets/images/P1K.Lecture11.Slide-30.png)\n\n## Integrating Outcome of Actions\n\n![](/assets/images/P1K.Lecture11.Slide-31.png)\n\n## Example: The Resulting Belief\n\n![](/assets/images/P1K.Lecture11.Slide-32.png)\n\n## Measurements\n\n![](/assets/images/P1K.Lecture11.Slide-33.png)\n\n## Bayes Fitlers: Framework\n\n![](/assets/images/P1K.Lecture11.Slide-34.png)\n\n## Markov Assumption\n\n![](/assets/images/P1K.Lecture11.Slide-35.png)\n\n## Bayes Filters Development\n\n![](/assets/images/P1K.Lecture11.Slide-36.png)\n\n## Bayes Filters Algorithm\n\n![](/assets/images/P1K.Lecture11.Slide-37.png)\n\n## Summary\n\n![](/assets/images/P1K.Lecture11.Slide-38.png)\n\n## Example: Robot Localization\n\n![](/assets/images/P1K.Lecture11.Slide-39.png)\n\n# Gaussians\n\n![](/assets/images/P1K.Lecture11.Slide-40.png)\n\n## Outline\n\n![](/assets/images/P1K.Lecture11.Slide-41.png)\n\n## Univariate Gaussian\n\n![](/assets/images/P1K.Lecture11.Slide-42.png)\n\n## Properties of Gaussians\n\n![](/assets/images/P1K.Lecture11.Slide-43.png)\n\n## Central Limit Theorem\n\n![](/assets/images/P1K.Lecture11.Slide-44.png)\n\n## Multivariate Gaussians\n\n![](/assets/images/P1K.Lecture11.Slide-45.png)\n\n> **\"Symmetric Matrices are just a rotation away from being Diagonal Matrices\"**\n\n### Multivariate Gaussians Expectation\n\n![](/assets/images/P1K.Lecture11.Slide-46.png)\n\n### Multivariate Gaussians Examples\n\n![](/assets/images/P1K.Lecture11.Slide-47.png)\n![](/assets/images/P1K.Lecture11.Slide-48.png)\n![](/assets/images/P1K.Lecture11.Slide-49.png)\n![](/assets/images/P1K.Lecture11.Slide-50.png)\n![](/assets/images/P1K.Lecture11.Slide-51.png)","n":0.049}}},{"i":11,"$":{"0":{"v":"SLAM","n":1},"1":{"v":"\n# Ressources\n\n- [P1K.SLAM.Sujet.Highlighted.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/P1K.SLAM.Sujet.Highlighted.pdf)\n- [](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/)\n\n# Presentation du sujet\n\n## Scratch Notes du 2022/10/31\n\nrobot non holonome\n\nplustot que faire un vecteur qui connait deja tous les amers\n\non suppose que le nb damer n'est pas connu davance\n\njuste assurer qu'il voit 3 premiers \n\nau fur et a mesure que le robot il va decouvrir ou non de nouveau amers donc il devra augmenter le vecteur detat\n\nprobabilistic robotics thrun burgard fox\n\n## Objectifs\n\n![](/assets/images/P1K.SLAM.SujetObjectifs.png)\n![](/assets/images/P1K.SLAM.SujetProblemDef.png)\n\n## Rappels\n\n### Variables\n\n![](/assets/images/P1K.SLAM.SujetRappelVariables.png)\n\n### Models\n\n![](/assets/images/P1K.SLAM.SujetRappelModels.png)\n\n### Posterior Marginal\n\n![](/assets/images/P1K.SLAM.SujetRappelPostMargin.png)\n\n### Outline\n\n#### State/Control Input/Measurement Output Variables\n\n![](/assets/images/P1K.SLAM.SujetRappelStateVars.png)\n![](/assets/images/P1K.SLAM.SujetRappelStateVars2.png)\n\n#### Prior Dynamics\n\n![](/assets/images/P1K.SLAM.SujetRappelPriorDynamics.png)\n\n#### Observation Models\n\n![](/assets/images/P1K.SLAM.SujetRappelObsModels.png)\n\n#### SLAM Initialization\n\n![](/assets/images/P1K.SLAM.SujetRappelInitialization.png)\n\n#### SLAM Time Update\n\n![](/assets/images/P1K.SLAM.SujetRappelTimeUpdate.png)\n![](/assets/images/P1K.SLAM.SujetRappelTimeUpdate2.png)\n\n#### SLAM Measurement Update\n\n![](/assets/images/P1K.SLAM.SujetRappelMeasUpdate.png)\n![](/assets/images/P1K.SLAM.SujetRappelMeasUpdate2.png)\n\n#### Data Association Handling\n\n![](/assets/images/P1K.SLAM.SujetRappelDataAssociation.png)\n\n# Feuille de Route\n\n1. Description du scénario (pose d’hypothèses, nombre d’instants …)\n2. Trouver le modèle du robot (non holonome)\n3. Modélisation de l’environnement (la map)\n4. Définition des vecteurs : d’état, de mesure, la commande.\n5. Association de données (telle mesure pour telle amer)\n6. Construction d’un modèle des dépendances pour une boucle de\nfonctionnement du robot.\n7. Modélisation des évolutions des éléments du modèle de Kalman étendu\n(les jacobiennes, les vecteurs, les matrices de covariances, les autres\néléments qui interviennent durant le processus du SLAM)\n8. Elaboration de l’algorithme EKF-SLAM\n9. Programmation et simulation (si possible le robot en déplacement pour\neffectuer une boucle complète en passant entre les amers et tout).\n10. Résultats et discussion (lissage, filtrage, estimation, ……)\n11. Rédaction d’un Jupyter Notebook-Matlab (pour plus d’infos :\nhttps://am111.readthedocs.io/en/latest/jmatlab_install.html )","n":0.07}}},{"i":12,"$":{"0":{"v":"Interlude du 2022/10/21","n":0.577},"1":{"v":"> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Danès\n\n> Voir ce que **Grammien** veut dire\n\n**Supports:**\n- [Projet.P1K.Interlude.BB20221021.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/Projet.P1K.Interlude.BB20221021.pdf)\n\n---\n\n## Position du Problème\n\n![](assets/images/P1K.Interlude.BB20221021-01.png)\n\n- Processus d'état caché suit une équation d'état linéaire avec matrice F et G détermiste et un bruit de dynamique\n- Equation de mesures possède une structure similaire avec H deterministe et V le bruit dynamique\n- On assume que les conditions initiales sont gaussiennes donc les sous element du vecteur sont aussi gaussiens \n    - on veut que le système reste gaussien au cours de la recursivité\n- X état caché et Z mesures de X manifestant son existence\n- Pour le calcul de l'espérance, on assume que les valeurs moyennes des bruits (sinon on peut avoir des soucis d'observation)\n- Esperance d'intercovariance\n    - Attention $R_k$ est seulement **définie positive** du coup, dans certains cas, il faut faire attention à la dépendance statique lineaire entre les composant des bruits de mesure\n    - Kronecker indique que les bruits sur deux temps différents sont indépendants mutuellement\n\n![](assets/images/P1K.Interlude.BB20221021-02.png)\n\n## Conclusions Importantes\n\n![](assets/images/P1K.Interlude.BB20221021-03.png)\n\n\n- tout ce qui va etre construit sera gaussien\n- loi posterieure est gaussienne \n    - $k=k'$ filtrage trajectoriel\n        <!--\n        - sur toutes les experiences qui caracterise mon comportement\n        -->\n    - $k>k'$ prédiction trajectoriele renforcement ???\n    - $k<k'$ lissage -> estimation\n\n> cov à l'infi pour un syst stable tend vers une constante fini qui ressemblance à une fonction de lyapunov\n\n> Moment = ???\n\n![](assets/images/P1K.Interlude.BB20221021-04.png)\n\n## Equations du filtre\n\n![](assets/images/P1K.Interlude.BB20221021-05.png)\n![](assets/images/P1K.Interlude.BB20221021-06.png)\n\n> Attention: faire la différence entre equations 7 et 5 peut amener à ne plus avoir une structure semi-définie positive mais seulement définie\n\n## Problème du TUNING\n\nOn suppose avoir un modele a priori et essayer d'apprendre sur un tronçon de trajectoire donné\n\n> Tester sur le [[TP de la Tortue|Projet.P1K.TPtortue]]\n\n## Cas non linéaire\n\nLe modèle avec Q et R est approximé dans le cas non linéaire ce que peut amener un loi posterieure trop optimiste (trop ressérrée).\n\n## Statistiques de Erreurs\n\n![](assets/images/P1K.Interlude.BB20221021-07.png)\n\n> On pourra pas connaitre $x_k-\\^x_{k|k}$ car $\\^x_{k|k}$ lui est basé sur une séquence de mesure que l'on ne peut pas distingué mutuellement\n\n![](assets/images/P1K.Interlude.BB20221021-08.png)\n\n![](assets/images/P1K.Interlude.BB20221021-09.png)\n\n![](assets/images/P1K.Interlude.BB20221021-10.png)\n\n## Ellipsoides de l'erreur\n\n![](assets/images/P1K.Interlude.BB20221021-11.png)\n![](assets/images/P1K.Interlude.BB20221021-12.png)\n\nPour connaitre l'erreur d'estimation, il faut passer par des ellipsoides où l'on choisit la probabilité d'estimation sur l'$\\alpha$ et le $\\beta$\n\n> Ceci n'est pas comparable à un observateur où l'erreur converge sagement sur 0","n":0.052}}},{"i":13,"$":{"0":{"v":"Projet Apollo","n":0.707},"1":{"v":"\n# Consignes\n\nVous devrez donc simuler le mouvement idéal de la capsule spatiale depuis une orbite terrestre basse avec des conditions initiales émulant la poussée initiale, puis implémenter le système non linéaire global rendant compte de la dynamique bruitée et des observations bruitées également.  Un filtre de Kalman non linéaire tel que conçu par la NASA sera ensuite implémenté pour procéder à la localisation (intègre !) de l'engin.\n\nVoyez les fichiers attachés, et aussi\n- https://stjarnhimlen.se/comp/tutorial.html\n- https://opensource.gsfc.nasa.gov/projects/GMAT/index.php\n- https://sourceforge.net/projects/gmat/\n- https://qz.com/726338/the-code-that-took-america-to-the-moon-was-just-published-to-github-\n- http://klabs.org/history/build_agc/\n- https://www.ibiblio.org/apollo/index.html\n\n# Ressources","n":0.113}}},{"i":14,"$":{"0":{"v":"Bloc 3","n":0.707},"1":{"v":"\n- [[B3.RP]]\n- [[B3.AOH]]\n- [[B3.RIA]]\n- [[B3.CCTR]]\n- [[B3.AA]]","n":0.408}}},{"i":15,"$":{"0":{"v":"RP - Robotique Probabiliste","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Danès\n\n---\n\n\n\n<!-- # À Retenir\n\n- ... -->\n\n# Cours Magistraux\n\n- [[B3.RP.CM.FiltreParticulaire]]\n- [[...|...]]\n\n\n<!-- # Travaux Dirigés\n\n- [[...|...]] -->\n\n<!-- # Travaux Pratiques\n\n- [[...|...]] -->\n\n# Support de Cours\n\n<!-- ## Fichiers Moodles\n\n### CM\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TD\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TP\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle) -->\n\n\n## Scans\n\n### Blackbard\n\n- [B3.RP.CM.BB20230117.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.RP.CM.BB20230117.pdf)\n- [B3.RP.CM.BB20230118.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.RP.CM.BB20230118.pdf)\n\n### GEA\n\n- [B3.RP.CM.NotesGEA.20230117.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.RP.CM.NotesGEA.20230117.pdf)\n- [B3.RP.CM.NotesGEA.20230118.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.RP.CM.NotesGEA.20230118.pdf)\n\n\n<!-- ### RKA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle) -->\n\n\n","n":0.123}}},{"i":16,"$":{"0":{"v":"CM","n":1}}},{"i":17,"$":{"0":{"v":"Filtre Particulaire","n":0.707},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Danès\n\nSupport de cours:\n- BlackBoard:\n    - [B3.RP.CM.BB20230117.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.RP.CM.BB20230117.pdf)\n    - [B3.RP.CM.BB20230118.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.RP.CM.BB20230118.pdf)\n- Notes GEA:\n    - [B3.RP.CM.NotesGEA.20230117.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.RP.CM.NotesGEA.20230117.pdf)\n    - [B3.RP.CM.NotesGEA.20230118.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.RP.CM.NotesGEA.20230118.pdf)\n\n---\n\n> Notes RKA du 2023/01/17 - Start\n\n\n\n\n\n![](/assets/images/B3.RP.CM.BB20230117-01.png)\n\n- Sequential Monte Carlo methods\n- Particle filtering\n\n# Pourquoi ?\n\n- Très utilisé pour le filtrage Bayésien NL non Gaussien\n- Existence d'une solution emblématique du SLAM (algo FAST SLAM / \"gmapping\")\n\n# I- Rappels\n\n## 1) Filtrage Bayésien\n\n![](/assets/images/B3.RP.CM.BB20230117-02.png)\n\n<!-- graphe x_0 -->\n\n- séquence d'**états cachés** $x_{0:k} = (x_0, \\dots, x_k)$\n- séquence d'**observations** $z_{1:k} = (z_1, \\dots, z_k)$\n\n### Contexte incertain (approche probabiliste)\n\n![](/assets/images/B3.RP.CM.BB20230117-03.png)\n\n- $x_{0:k}$ réalisation de $X_{0:k}$ processus aléatoire d'**état** (séquence de variable aléatoire $X_0$, $\\dots$, $X_k$)\n- $x_{0:k} = X_{0:k}(\\omega)$ résultat de l'expérience en cours / **caché**\n- $z_{0:k}$ réalisation de $Z_{0:k}$ processus aléatoire de **mesure**\n    - $z_{0:k} = Z_{0:k}(\\omega)$ résultat de l'expérience en cours / **accessible**\n\n### Connaissance a priori\n\nDescription de la **connaissance a priori** en termes probabilistes\n\n- P.A. d'état caché Markonien\n    - loi de $X_{0:k}$ décrite par\n        - loi de $X_0$ (**loi initiale**)\n        - loi statistique entre $X_{k-1}$ et $X_k$ (**loi/modèle de dynamique a priori**)\n- P.A. de mesure\n    - loi entre $X_k$ caché et $Z_k$ la **loi/modèle d'observation**\n\n### Objectif: Loi A Posteriori/Postérieure\n\n$$\nP_{X_{0:k} \\,|\\, z_{1:k}}\\big( x_{0:k} \\,|\\, z_{1:k} \\big)\\\\\n\\ \\\\\\text{ou}\\\\ \\ \\\\\nP_{X_{k} \\,|\\, z_{1:k}}\\big( x_{k} \\,|\\, z_{1:k} \\big)\\\\\n$$\n\n![](/assets/images/B3.RP.CM.BB20230117-04.png)\n\n<!-- \n## Discussion\n\nimage graph + audio 1 \n-->\n\n### Exemple: Loi Postérieure\n\n![](/assets/images/B3.RP.CM.BB20230117-05.png)\n\n<!-- audio 2 -->\n\nImaginons que l'on sache trier les expériences qui donne pair, ceci nous permettrait d'avoir un modèle d'observation.\n\nIdem pour les impairs, en calculant $\\mathbb{P}(Z=z \\,|\\, X = 2)$ on peut en déduire un modèle d'observation.\n\nC'est à dire qu'ici on décrit notre connaissance a priori.\n\nMaintenant si on observe du vert quel est l'etat caché (le numéro sous la couleur verte) ?\n\nOn ne sait pas la valeur exacte mais on est sûr que cette valeur peut être 1, 3 ou 5.\n\nCeci est un problème d'estimation.\n\n<!-- Audio 3 -->\n\nOn peut faire de même pour la couleur rouge et bleu (avec la différence particulière que pour le bleu on connait l'état avec certitude).\n\nDans notre contexte, on va travailler sur un continium et non plus une \"grille\"/dans du discret. Ceci va nous amener à introduire la notion de densité probabliste.\n\n### MMSE - Estimé\n\n> MMSE = Minimum Mean Square (Error) Estimate\n\n![](/assets/images/B3.RP.CM.BB20230117-06.png)\n\n$$\n\\mathbb{E} \\big[ X_k \\,|\\, Z_{1:k}=z_{1:k} \\big] = \\int x_k \\, P_{X_k \\,|\\, Z_{1:k}} \\big( x_k \\,|\\, z_{1:k} \\big) \\, dx_k\n$$\n\n<!-- audio 4 -->\n\n### Densité de probabilité\n\n#### Continium\n\n![](/assets/images/B3.RP.CM.BB20230117-07.png)\n\nSoit $x \\in \\mathbb{R}$, $P_X(x)$ est une densité de probabilité (dont la variable est $x$ et $X$ sa réalisation possible) tel que :\n- $P_X(x) \\geq 0$\n- $\\int_{\\mathbb{R}} P_X(x)\\, dx = \\mathbb{P}(x\\in\\mathbb{R}) = 1$\n- $\\int_{\\epsilon} P_X(x)\\, dx = \\mathbb{P}(x\\in\\epsilon)$\n\n<!-- audio 5 -->\n\n![](/assets/images/B3.RP.CM.BB20230117-08.png)\n\nQuelle est l'**espérance de X** ? Est-ce la valeur moyenne des issues possibles de $X$ ?\n\n$$\n\\mathbb{E}\\big[X\\big] = \\mathbb{E}_{P_X(x)}\\big[X\\big] = \\int_{\\mathbb{R}} x\\,P_X(x)\\,dx = \\bar x\n$$\n\nComment se disperse $X$ autour de $\\mathbb{E}\\big[X\\big]$ ?\n\n$$\nVar\\big[X\\big] = \\mathbb{E}_{P_X(x)}\\Big[ \\big( X - \\mathbb{E}[X] \\big)^2 \\Big] = \\mathbb{E}\\big[ X^2 \\big] - \\Big(\\mathbb{E}\\big[ X \\big]\\Big)^2\n$$\n\n#### Discret\n\nSi maintenant $x\\in\\mathbb{R}$ est à valeurs discrètes.\n\n![](/assets/images/B3.RP.CM.BB20230117-09.png)\n\n\n<!-- audio 6\nimplusion de dirac pour passer du continu au discret -->\n\n![](/assets/images/B3.RP.CM.BB20230117-10.png)\n\n\n<!-- audio 7 -->\n\n\n$$\n\\int_{\\mathbb{R}} f(x)\\,\\delta(x-x_i)\\,dx = f(x_i)\\\\\n$$\n\nConvolution d'une impulsion de dirac\n$$\n\\int_{\\mathbb{R}} f(x)\\,\\delta(x-x_i)\\,dx = f(x-x_i)\\\\\n$$\n\n#### Multi-variable\n\n![](/assets/images/B3.RP.CM.BB20230117-11.png)\n![](/assets/images/B3.RP.CM.BB20230117-12.png)\n![](/assets/images/B3.RP.CM.BB20230117-13.png)\n<!-- audio 8 -->\n\n## 2) Lois Gaussiennes\n\n<!-- audio 9 -->\n\n### Mono-variable\n\n![](/assets/images/B3.RP.CM.BB20230117-14.png)\n\n- $m\\pm\\sigma$ correspond au point de flexion de la cloche gaussienne\n\n![](/assets/images/B3.RP.CM.BB20230117-15.png)\n\n### Multi-variable\n\n![](/assets/images/B3.RP.CM.BB20230117-16.png)\n\n\n\n> Notes RKA du 2023/01/17 - End\n\n---\n\n> Notes RKA du 2023/01/18 - Start\n\n\n\n### Comment échantillonner une loi Gaussienne multivariée ?\n\n> i.i.d. Indépendant Identiquement Distribué\n\nSe pose deux problèmes :\n- Comment tirer une colonne avec les variables voulues (e.g. `Y = randm(M,N)` )\n- Trouver le bon $L$ tq $LL^T = P$\n\n![](/assets/images/B3.RP.CM.BB20230118-01.png)\n![](/assets/images/B3.RP.CM.BB20230118-02.png)\n\n### Nota: Estimation Bayésienne\n\n##### Loi A Posteriori\n\n![](/assets/images/B3.RP.CM.BB20230118-03.png)\n![](/assets/images/B3.RP.CM.BB20230118-04.png)\n![](/assets/images/B3.RP.CM.BB20230118-05.png)\n\nL'estimateur $\\hat X_{MMSE}$ est indépendant de la métrique utilisé (i.e. $Q$ ) du coup il n'est pas possible d'affiner l'estimateur pour être plus précis sur un bloc de variable et pas un autre. On estime le tout d'office.\n\n##### Covariance A Posteriori\n\n![](/assets/images/B3.RP.CM.BB20230118-06.png)\n\n### Compléments Estimation Dynamique\n\n> Attention: pour simplifier les notations on ne va plus distinguer entre une var. al. et sa réalisation !!! \n\n> Sauf contre-indication tous les bruits seront considérés blanc (i.e. \"_indépendance des echantillons_\")\n\n> Attention: $\\quad P_0 \\geq 0 \\quad\\wedge\\quad Q_{k-1} \\geq 0 \\quad\\wedge\\quad W_{0:k}\\;\\;blanc$\n\n> Trois cas:\n- $k'\\leq k$ alors **prédiction**\n- $k'= k$ alors **filtrage**\n- $k'\\geq k$ alors **lissage**\n\n![](/assets/images/B3.RP.CM.BB20230118-07.png)\n![](/assets/images/B3.RP.CM.BB20230118-08.png)\n![](/assets/images/B3.RP.CM.BB20230118-09.png)\n![](/assets/images/B3.RP.CM.BB20230118-10.png)\n![](/assets/images/B3.RP.CM.BB20230118-11.png)\n![](/assets/images/B3.RP.CM.BB20230118-12.png)\n![](/assets/images/B3.RP.CM.BB20230118-13.png)\n\n# II- Approximation (ponctuelle) de Monte Carlo (d'une pdf)\n\n## Contexte de tirage\n\n![](/assets/images/B3.RP.CM.BB20230118-14.png)\n\n\n\n> Notes RKA du 2023/01/18 - End\n\n---\n\n> Notes RKA du 2023/01/25 - Start\n\n\n\n![](/assets/images/B3.RP.CM.BB20230125-01.png)\n![](/assets/images/B3.RP.CM.BB20230125-02.png)\n\n$\\bar x_{k|k}$ va se distribuer autour de $\\hat x_{k|k}$.\n\nOn tire des nuages de particules pondérées. Donc chaque run (chaque tirage donc chaque lot de $x_i$) donnera des estimées différents à chaque proche autour de la valeur réelle avec une certaine probablité.\n\nOn fait de la proba de proba.\n\n![](/assets/images/B3.RP.CM.BB20230125-03.png)\n\n## Echantillonage idéal\n\n![](/assets/images/B3.RP.CM.BB20230125-04.png)\n\nProblématique si on ne peut pas normaliser nos échantilons cette méthode ne marche pas. Mais si cela est possible \n\nCeci requiert de pouvoir connaître la cumulative distribution function cdf $P(x) = P(X\\leq x)$ qui suit:\n![](/assets/images/B3.RP.CM.BB20230125-05.png)\n\n$\\hat I$ est l'estimateur et $I$ est la vraie valeur.\n\nÉtonnament c'est la taille du nuage et non pas la dimension du vecteur \"qui fait la qualité\" --> \"_beat the curse of dimensionality ?_\"\n\n## Echantillonage d'importance\n\n![](/assets/images/B3.RP.CM.BB20230125-06.png)\n\n- loi du $\\chi 2$ de un degré de liberté\n    - c.à.d. tirer un échantillon d'une loi gaussienne standard\n    - puis fixer $q(x) = x^2$\n    - alors il est très difficile de déterminer la densité de proba de cette loi\n    - plus d'infos sur [Bibm@th.net](https://www.bibmath.net/dico/index.php?action=affiche&quoi=l/loichideux) ou [Wikipedia](https://fr.wikipedia.org/wiki/Loi_du_%CF%87%C2%B2)\n\n### Choix des poid non normalisés\n\n![](/assets/images/B3.RP.CM.BB20230125-07.png)\n\n### Propriétés de l'estimateur\n\n![](/assets/images/B3.RP.CM.BB20230125-08.png)\n\n### Nota\n\n![](/assets/images/B3.RP.CM.BB20230125-09.png)\n\n## Exercice\n\n![](/assets/images/B3.RP.CM.BB20230125-10.png)\n![](/assets/images/B3.RP.CM.BB20230125-11.png)\n\nOn est en présence d'un $p(x)$ que l'on ne peut pas calculer analytiquement.\n\nFaisant 3 approximation de Monte Carlo\n\n> À noter qu'il faudrait tracer des inflexions en $m\\pm\\sigma$ pour une courbe en pointiller plus correcte/précise\n![](/assets/images/B3.RP.CM.BB20230125-12.png)\n\nA. Ech. Ideal.\n![](/assets/images/B3.RP.CM.BB20230125-13.png)\n\nB. Ech. d'importance standard\n![](/assets/images/B3.RP.CM.BB20230125-14.png)\n\n- méchanisme d'**acceptation-rejet**\n    - si on a 100 particules dont 25 sont en dehors de la zone concerné\n    - alors les 25 hors zone seront mis à zéro et les 75 autres aurant un poids de $\\frac{1}{\\,75\\,}$\n\n**Rem.:**\n- En A. les echantillons sont tous dans la porte puisque qu'on tire un ech. selon $p(x)$ directement\n- En B. puisqu'on tire notre ech. selon $q(x)$ une partie des ech. sont à écarter/rejeter\n\nC. Ech. d'importance \"portique\"\n![](/assets/images/B3.RP.CM.BB20230125-15.png)\n![](/assets/images/B3.RP.CM.BB20230125-16.png)\n\n\n# III- Apllication au filtrage Bayésien\n\n## 1) Les équations récursives exactes\n\n![](/assets/images/B3.RP.CM.BB20230125-17.png)\n![](/assets/images/B3.RP.CM.BB20230125-18.png)\n\n\n\n\n\n> Notes RKA du 2023/01/25 - End\n\n---\n\n> Notes RKA du 2023/02/06 - Start\n\n\n\n\n### Rappel filtrage de kalman (linéaire gaussien)\n\n![](/assets/images/B3.RP.CM.WB20230206-01.png)\n\nDans le cas linéaire gausienne, Kalman permet de propager les moments et covariances au fil du temps. On a bien un osbservateur récursif de façon analytique.\n\n### Cas général\n\n![](/assets/images/B3.RP.CM.WB20230206-02.png)\n\nIci le dénominateur est une normalisation qui ne dépend pas de $x$ et il est très difficile à calculer dans le cas général (seulement dans le linéaire gaussien on est capable de calculer l'intégral pour la normaliser à 1). Le numérateur lui est accessible.\n\nOn s'en sort à une constante de normalisation près.\n\n### Lois marginals\n\n> Keywords: équation de Chapman-Kolmogorov\n\n![](/assets/images/B3.RP.CM.WB20230206-03.png)\n\n#### Idée de preuve\n\nPour la prédiction:\n![](/assets/images/B3.RP.CM.WB20230206-04.png)\n\nPour la mise à jour:\n![](/assets/images/B3.RP.CM.WB20230206-05.png)\n\n## 2) Approximation recursive de Monte Carlo de la loi jointe/marginale de filtrage\n\n### Le filtre particulaire \"SIS\" (Sequential Importance Sampling)\n\nPour la jointe:\n![](/assets/images/B3.RP.CM.WB20230206-06.png)\n\nPour la marginale:\n![](/assets/images/B3.RP.CM.WB20230206-07.png)\n![](/assets/images/B3.RP.CM.WB20230206-08.png)\n\nUne fois posée l'expression des approximations MC des lois jointes et marginales de filtrage, tout le problème est ramené à la définition des particules trajectorielles et à leur pondérations au fil du temps.\n\nSi $\\{\\;x_{0:k-1}^{(i)} \\,,\\, w_{0:k-1}^{(i)}\\;\\}_{i=0,\\dots,N}$ constitue $\\hat P_N(x_{0:k-1}\\,|\\,z_{1:k-1})$ une approximation MC de $p(x_{0:k-1}\\,|\\,z_{1:k-1})$ alors comment définit-on $\\{\\;x_{0:k}^{(i)} \\,,\\, w_{0:k}^{(i)}\\;\\}_{i=0,\\dots,N}$ qui constitue $\\hat P_N(x_{0:k}\\,|\\,z_{1:k})$ une approximation MC de $p(x_{0:k}\\,|\\,z_{1:k})\\;$ ?\n\n![](/assets/images/B3.RP.CM.WB20230206-09.png)\n![](/assets/images/B3.RP.CM.WB20230206-10.png)\n\n### Algorithme SIS - Sequential Importance Sampling\n\n![](/assets/images/B3.RP.CM.BB20230206-01.png)\n![](/assets/images/B3.RP.CM.BB20230206-02.png)\n![](/assets/images/B3.RP.CM.BB20230206-03.png)\n![](/assets/images/B3.RP.CM.BB20230206-04.png)\n\nPour eviter des problèmes numériques de types underflow, il est conseillé de calculer la somme des logs avant de passer à l'exponentielle (surtout dans le cas de particules \"très petites\").\n\nLa covaraince va très vite être à zéro. \n\n### Algorithme SIR - Sampling Importance Resampling\n\n![](/assets/images/B3.RP.CM.BB20230206-05.png)\n![](/assets/images/B3.RP.CM.BB20230206-06.png)\n![](/assets/images/B3.RP.CM.BB20230206-07.png)\n\nTout étape de réchantillionage rajoute de la variance/dispertion dans l'estimateur (ceci est appelé la variance de Monte Carlo).\n\nC'est pourquoi on evalue les estimés des moyennes et des covariances a posteriori avant le rééchantillionnage.\n\nEn outre, il est important que ce rééchantillionnage se réalise uniquement si on est en dessous du seuil.\n\n![](/assets/images/B3.RP.CM.BB20230206-08.png)\n\n### Remarques\n\nTout filtre particulère peut être vu comme une instance du filtre SIR pour un choix de la fonction d'importance et de la stratégie de rééchantillionage.\n\nPar contre, l'étape de rééchantillionage inhinibe la possibilité de parallélisme et il est plus difficile de prouver les propriétés de convergence du filtre (car après le rééchantillionage toutes les variables deviennent dépendente mutuellement).\n\n## 3) Choix de la fonction d'importance\n\n### A- Bootstrap Filter / CONDENSATION\n\n> CONDENSATION = Conditional Density Propagation\n\n> Likelihood = vraisemblance\n\n![](/assets/images/B3.RP.CM.BB20230206-09.png)\n![](/assets/images/B3.RP.CM.BB20230206-10.png)\n\n#### Illustration\n\n![](/assets/images/B3.RP.CM.BB20230206-11.png)\n![](/assets/images/B3.RP.CM.BB20230206-12.png)\n![](/assets/images/B3.RP.CM.BB20230206-13.png)\n![](/assets/images/B3.RP.CM.BB20230206-14.png)\n\nAttention de nombreuses de particules peuvent s'avérer intutiles si leur vraisemblance relative à la mesure est faible.\n\nL'effet est d'autant plus important que la dynamique a priori est peu bruitée et que la mesure est infomative.\n\nCe n'est pas une bonne stratégie que d'échantillonner le nuage sans tenir compte des observations disponibles.\n\n### B- Loi d'importance guidée par la mesure\n\n![](/assets/images/B3.RP.CM.BB20230206-15.png)\n\nLe lien de compatibilité est très importante pour ne pas perdre de l'information comme illustré dans le scénario pessimiste suivant:\n![](/assets/images/B3.RP.CM.BB20230206-16.png)\n\n### C- Exemple de mélange de lois   \n\n![](/assets/images/B3.RP.CM.BB20230206-17.png)\n\n\n\n\n> Notes RKA du 2023/02/06 - End\n\n---\n\n> Notes RKA du 2023/02/08 - Start\n\n\n\n![](/assets/images/B3.RP.CM.BB20230208-01.png)\n\nC'est trois valeurs H_i sont exclusives et exhaustives.\n\nÀ noter que $\\;\\mathbb{P}(H=H_h)\\;q(x_k|x_{k-1},z_k,H_h) = q(x_k\\;H_h|x_{k-1}z_k)$\n\nNota:\n- Il existe toute une litérature sur les GMM - Gaussian Mixture Model\n$$\np(x) = \\sum_{k=0}^{H-1} \\lambda_h \\; \\mathcal{N}(x,\\;m_h,\\;P_h) = \\sum_{k=0}^{H-1} \\mathbb{P}(H=h) \\; p(x|H=h)\n$$\noù $p(x|H=h)$ est la loi de $x$ sous l'hypothèse $H=h$ qui suit une loi gaussienne d'espérance $m_h$ et de covariance $P_h$\n\n![](/assets/images/B3.RP.CM.BB20230208-02.png)\n\n\n### D- Loi d'importance optimale\n\nOn a vu que la variance des poids $w_k^{(i)}$ augmente lorsque $k$ augmente (dûe à la stratégie récursive).\n\nLa loi d'imprtance optimale serait $q(x_{0:k}|z_{1:k}) = p(x_{0:k}|z_{1:k})$.  \n(On échantillionne les particules de trajectoires selon la loi postérieure.)\n\nOr cette loi d'importance est impossible car:\n- on ne connait pas $p(x_{0:k}|z_{1:k})$ ; et\n- ce schéma ne serait pas récursif.\n\nNota: ceci implique $N_{eff} = N\\;$ car $\\;\\forall h,\\;\\forall i,\\;w_k^{(i)}=\\frac{1}{\\;N\\;}$\n\nOn définit la loi d'importance optimale $q^*(x_k|x_{k-1},z_k)$ comme la loi $q(x_k|x_{k-1},z_k)$ qui minimise la variance des poids conditionnés à $x_{0:k-1}$ et $z_{1:k}$.\n\nOn montre que : \n$$\nq^*(x_k|x_{k-1},z_k) = p(x_k|x_{k-1},z_k) \\;\\varpropto\\; p(x_k|x_{k-1})\\cdot p(z_k|x_k)\\\\\n= \\dfrac{p(x_k|x_{k-1})\\cdot p(z_k|x_k)}{\\;\\int p(x_k|x_{k-1})\\cdot p(z_k|x_k) dx_k\\;} = \\dfrac{\\;p(x_k|x_{k-1})\\cdot p(z_k|x_k)\\;}{p(z_k|x_k)}\n$$\nde sorte que \n$$\nx_k^{(i)} \\sim q^*(x_k|x_{k-1}^{(i)},z_k)\\\\\nw_k^{(i)} \\varpropto w_{k-1}^{(i)}\\;p(z_k|x_{k-1}^{(i)})\n$$\n\n> $\\varpropto$ indique que le membre de gauche est proportionnelle égale au membre droite à une constante près.\n\nEn général, la loi d'importance $q^*(x_k|x_{k-1}^{(i)},z_k)$ ne peut pas être calculée analytiquement et/car la vraisemblance $p(z_k|x_{k-1})$ de $x_{k-1}$ p.r.à $z_k$ ne peut pas être évaluée. \n\nMais il existe de nombreuses approximations : _auxiliary particle filter_, _auxiliary unseential PF_.\n\n> **_Beat the curse of dimensionality_** marche bien mais le soucis est que l'on a du mal à produire des échantillonage propre dans des espaces de grandes dimensions.\n\n## 4) Exercice: application au cas linéaire gaussien\n\n![](/assets/images/B3.RP.CM.BB20230208-03.png)\n![](/assets/images/B3.RP.CM.BB20230208-04.png)\n![](/assets/images/B3.RP.CM.BB20230208-05.png)\n![](/assets/images/B3.RP.CM.BB20230208-06.png)\n![](/assets/images/B3.RP.CM.BB20230208-07.png)\n![](/assets/images/B3.RP.CM.BB20230208-08.png)\n![](/assets/images/B3.RP.CM.BB20230208-09.png)\n\nPour plus d'information : [Factorisation de Cholesky (wikipedia)](https://fr.wikipedia.org/wiki/Factorisation_de_Cholesky)\n\n<!-- ### Rappel (étapes pour CONDENSATION)\n\nÉtapes pour l'implémentation de l'algo CONDENSATION à N particules :\n1. Échantillonnage du nuage initial et Pondération ($k=0$)\n2. Condensation -->\n\n# IV - Filtre particulaire Rao-Blackwellisé\n\nPour plus d'information : [Rao-Blackwell Theorem (wikipedia)](https://en.wikipedia.org/wiki/Rao%E2%80%93Blackwell_theorem)\n\n## Position du problème\n\nConsidérant un robot paramétré par $x_k$ de dimension 20'003 (3 param. coord. du robot $r_k$ et 10'000 amers $m_k$ en $(x,y)\\;$).\n\n![](/assets/images/B3.RP.CM.BB20230208-10.png)\n![](/assets/images/B3.RP.CM.BB20230208-11.png)\n\n## \"FP classique\"\n\n![](/assets/images/B3.RP.CM.BB20230208-12.png)\n\n## Approximation\n\n![](/assets/images/B3.RP.CM.BB20230208-13.png)\n![](/assets/images/B3.RP.CM.BB20230208-14.png)\n\n## Illustration\n\nSur l'espace des amers on obtient avec cette approximation des données calculées analytiquement et sur l'espace du robot on aura des données de dirac.\n\n![](/assets/images/B3.RP.CM.BB20230208-15.png)\n\n\n\n![](/assets/images/B3.RP.CM.BB20230208-16.png)\n\n","n":0.024}}},{"i":18,"$":{"0":{"v":"RIA - Robotique Industrielle Avancée","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat et M. Thaix\n\n---\n\n# À Retenir\n\n...\n\n# Cours Magistraux\n\n- [[Modèle Géométrique Direct (Bras Manipulateurs)|B3.RIA.MGD]]\n- [[Modèle Différentiel et Cinématique|B3.RIA.MDC]]\n- [[Généralités|B3.RIA.CM]]\n- [[Generation de Mouvements|B3.RIA.CM.GM]]\n- [[Asservissement Visuel|B3.RIA.CM.AssVis]]\n\n# Travaux Dirigées\n\n- [[B3.RIA.TD1.MDD-PRRRRP]]","n":0.144}}},{"i":19,"$":{"0":{"v":"Modèle Géométrique Direct (Bras Manipulateurs)","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat\n\n---\n\n> Notes RKA du 2023/01/17 - Start\n\n\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-01.png)\n\n# But\n\nProblème principale du MGD c'est qu'il n'est pas générique d'un robot à l'autre.\nCe cours introduit la méthode pour obtenir un MGD générique indépendant du type de robot (qlq soit la chaine prisma-rotoidique simple).\n\n# Principe de la méthode\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-02.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-03.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-05.png)\n\nPrincipe:\n- Positionner les repères $\\mathcal{R}_0$ à $\\mathcal{R}_n$ en respectant un ensemble de règles.\n- Respecter ces règles permet l'automatisation du calcul des $T_{i-1,i}$\n\n# I- Règles de positionnement\n\n> Paramètres de Denavit-Hartengberg modifiés\n\n## Règles génériques pour $\\mathcal{R}_1$ et $\\mathcal{R}_{n-1}$\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-06.png)\n\nMise en place itérative de $\\mathcal{R}_1$ et $\\mathcal{R}_{n-1}$\n\n## Règles spécifiques pour $\\mathcal{R}_0$ et $\\mathcal{R}_n$\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-07.png)\n\n## Protocole\n\n1. Choisir le repère $\\mathcal{R}_0$\n\n    ![](/assets/images/B3.RIA.BB20230117-01.png)\n\n2. Définir les corps du robot\n\n    ![](/assets/images/B3.RIA.BB20230117-02.png)\n\n3. Donner un axes à chaque corps\n\n    ![](/assets/images/B3.RIA.BB20230117-03.png)\n\n4. Déterminer les perpendiculaires communes\n\n    ![](/assets/images/B3.RIA.BB20230117-04.png)\n\n    Perpendiculaire commune à $\\Delta_i$ et $\\Delta_j$ = droite perpendiculaire aux deux droites en mêmes temps !\n\n    Si les deux droites sont colinéaires alors on est libre de choisir n'importe quel droite (car infinité de solutions). Dans ce cas, on attend de trouver les autres perp. comm. pour faire un choix approprié.\n\n5. Définir les points d'intersections\n\n    ![](/assets/images/B3.RIA.BB20230117-05.png)\n    ![](/assets/images/B3.RIA.BB20230117-06.png)\n\n6. Fixer les axes $\\overrightarrow{z}$\n\n    Attention:\n    - Tous les mouvements se feront selon les axes $z$\n    - Formule: $\\overrightarrow{z}_{i-1}$ porté par $\\Delta_i$ selon la convention (avant,droite,haut)\n    - avant = de la feuille vers le lecteur\n\n    ![](/assets/images/B3.RIA.BB20230117-07.png)\n\n7. Fixer les axes $\\overrightarrow{x}$\n\n    Formule: $\\overrightarrow{x}_{i-1}$ porté par la perp. comm. $i-1$ selon la convention (avant,droite,haut)\n\n    ![](/assets/images/B3.RIA.BB20230117-08.png)\n\n8. Trouver le repère $\\mathcal{R}_n$\n\n    ![](/assets/images/B3.RIA.BB20230117-09.png)\n    ![](/assets/images/B3.RIA.BB20230117-10.png)\n\n\n\n> Notes RKA du 2023/01/17 - End\n\n---\n\n> Notes RKA du 2023/01/18 - Start\n\n\n\n# II- Calcul des $T_{i-1,i}$ avec les params. de D/H modifiés\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-08.png)\n\nBut:\n- Permettre d'automatiser le calcul des $T_{i-1,i}$\n- Permettre d'exprimer la situation du corps $C_i$ p.r.à $C_{i-1}$ (ou de $\\mathcal{R}_i$ p.r.à $\\mathcal{R}_{i-1}$)\n\nIl y a 4 params. au total:\n- 2 pour caractériser les **translations** entre les 2 repères\n- 2 pour caractériser les **ratoations** entre les 2 repères\n\n![](/assets/images/B3.RIA.CM.BB20230118-01.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-09.png)\n\nLes mouvements sur les liaisons se font sur les axes $\\overrightarrow{z}$ du coup $a_{i-1}$ et $\\alpha_{i-1}$ sont des paramètres de _formes_ car ils s'expriment selon $\\overrightarrow{x}$ alors que $r_{i}$ et $\\theta_{i}$ sont des paramètres de _liaison_ vu qu'ils s'expriment selon $\\overrightarrow{z}$.\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-10.png)\n![](/assets/images/B3.RIA.CM.BB20230118-02.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-11.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-12.png)\n\n## Exemple\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-20.png)\n![](/assets/images/B3.RIA.CM.BB20230118-03.png)\n\nEtapes pour remplir le tableau:\n1. Remplir $\\sigma_i$\n    ![](/assets/images/B3.RIA.CM.BB20230118-04.png)\n2. Définir $r_i$ et $\\theta_i$\n3. Calculer TOUS les $a_{i-1}$\n    ![](/assets/images/B3.RIA.CM.BB20230118-05.png)\n4. Calculer TOUS les $\\alpha_{i-1}$\n    ![](/assets/images/B3.RIA.CM.BB20230118-06.png)\n5. Calculer TOUS les $r_i$ non marqués par un $q_i$\n    ![](/assets/images/B3.RIA.CM.BB20230118-07.png)\n6. Calculer TOUS les $\\theta_i$ non marqués par un $q_i$\n7. Trouver les configurations figures\n    ![](/assets/images/B3.RIA.CM.BB20230118-08.png)\n\n<!-- ![](/assets/images/B3.RIA.CM.MGD.Slide-21.png) -->\n![](/assets/images/B3.RIA.CM.MGD.Slide-22.png)\n\nPour calculer les $T_{i-1,i}$m utiliser ce tableau pour faire correspondre les paramètres:\n![](/assets/images/B3.RIA.CM.BB20230118-09.png)\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-23.png)\n\n## Remarques\n\n![](/assets/images/B3.RIA.CM.MGD.Slide-24.png)\n\n# III- Calcul des $T_{0n}$ et de $x$\n\n![](/assets/images/B3.RIA.CM.BB20230118-10.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-25.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-26.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-27.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-28.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-29.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-30.png)\n![](/assets/images/B3.RIA.CM.MGD.Slide-31.png)\n![](/assets/images/B3.RIA.CM.BB20230118-11.png)\n![](/assets/images/B3.RIA.CM.BB20230118-12.png)\n\n\n\n> Notes RKA du 2023/01/18 - End\n\n---","n":0.048}}},{"i":20,"$":{"0":{"v":"MDC - Modèle Différentiel et Cinématique","n":0.408},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat\n\n---\n\n> Notes RKA du 2023/01/19 - Start\n\n\n\n![](/assets/images/B3.RIA.MDC.Slide-01.png)\n\n\n# I- Introduction\n\n![](/assets/images/B3.RIA.MDC.Slide-02.png)\n\n## Problématique\n\n![](/assets/images/B3.RIA.MDC.Slide-03.png)\n\nModèle géométrique utile mais insuffisant pour réaliser une tâche vu qu'il ne présente pas de mouvement, d'où l'utilité du Modèle Cinématique.\n\nIl existe deux modèles cinématique :\n- le MCD - Modèle Cinématique Direct qui part de l'évolution de la configuration $\\dot q$ pour exprimer l'évolution en $\\dot x$ ; et\n- le MCI - Modèle Cinématique Inverse qui part de l'évolution en $\\dot x$ pour donner l'évolution de la configuration $\\dot q$\n\nLe modèle différentiel se structure de la même façon mais avec des unités infinitésimales $dq$ et $dx$ qui représentent resp. le déplacement élémentaire sur les articulations et l'OT.\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-02.png)\n\nRemarque:\n- On retrouve le MC dans la génération de trajectoire et la commande de bras manipulateurs.\n- Mais Attention le MC ne prend pas en compte les effets dynamiques (inerties/frottements) !\n- Ceci a pour concéquence que l'on ne peut pas autoriser le BM  de se déplacer à de grande vitesse.\n\n## Structure du MC/MD\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-04.png)\n\nRemarque:\n- $dim(J) = (m,n)$ donc pas forcément carrée\n- $J$ est fonction de $q$\n- MDD est un système linéaire en $dq$\n- $dx = J(q)\\;dq$\n\nRésoudre le syst. lin. pour trouver $dq$ donne le MDI\n\nLe MCD est : $\\dot x = J(q)\\;\\dot q$\n\nEnfin, calculer le MDD revient à calculer le MCD et donc à calculer $J(q)$.\n\n## Comment calculer $J$ ?\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-06.png)\n\nCalcul numérique est très util pour les robots complexes (plusieurs bras) mais il reste basé sur le calcul analytique.\n\n# II- Calcul de $J$\n\n## II-1. Notions fondamentales\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-07.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-08.png)\n\n- $d\\overrightarrow{p}_{(0)}$: différentielle de position de l'OT\n- $d\\overrightarrow{\\phi}_{(0)}$: différentielle d'orientation de l'OT\n\n2 étapes:\n- des $dq_i$ on déduit $d\\overrightarrow{p}_{(0)}$ et $d\\overrightarrow{\\phi}_{(0)}$\n- de $d\\overrightarrow{p}_{(0)}$ et $d\\overrightarrow{\\phi}_{(0)}$ on obtient $dx$\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-09.png)\n\n> La rotation est le mouvement nécessaire pour obtenir une certaine orientation.\n\n## II-2. De $dq$ vers les différentiels de pos./orient.\n\n### II-2.1) Seule la liaison $L_k$ bouge de $dq_k$\n\nSi $L_k$ bouge de $dq_k$ alors l'OT se déplace de $d\\overrightarrow{p}_{k}$ et $d\\overrightarrow{\\phi}_{k}$\n\n**Cas:** $L_k$ est **prismatique**\n\n![](/assets/images/B3.RIA.MDC.Slide-04.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-11.png)\n\nQuand la liaison $L_k$ se déplace :\n- $O_k$ devient $O_{k'}$\n- $O_n$ devient $O_{n'}$\n- mais $O_0$ reste $O_{0}$.\n\nOn utilise alors la relation de Chasles pour trouver $d\\overrightarrow{p}_{k}$:\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-12.png)\n\n\n**Cas:** $L_k$ est **rotoide**\n\n![](/assets/images/B3.RIA.MDC.Slide-05.png)\n\nQuand la liaison $L_k$ se déplace :\n- $O_0$ reste $O_{0}$\n- $O_k$ reste aussi $O_{k}$\n- seul $O_n$ devient $O_{n'}$.\n\nMême idée que précédemment:\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-13.png)\n\n**Bilan:**\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-14.png)\n\nLes $\\sigma_k$ sont les mêmes que pour les params de D/H (ils indiquent si la liaison est rotoide ou prismatique).\n\n### II-2.2) Si toutes les liaisons se déplacent ?\n\n![](/assets/images/B3.RIA.MDC.Slide-06.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-15.png)\n\nLa matrice **Jacobienne vectorielle** se lit physiquement ainsi :\n- chaque colonne indique la contribution en translation et rotation de la liaison concernée\n- chaque ligne correspond à la contribution de toute les liaisons sur un déplacement\n    - par exemple pour la première ligne il s'agit de toutes les contributions de chaque liaison en translation sur seulement l'axe $x$\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-16.png)\n\nCependant plus on s'éloigne de $O_0$ plus les calculs deviennent compliqués puisque les repères au bout du robot dépendent des liaisons précédentes.\n\nPour simplifier les calculs (historiquement on cherchait à optimiser les calculs algébirques), on choisit de calculer la **matrice Jacobienne préférentielle**. L'expérience montre que si l'on choisit un repère de référence à $j = E(n/2)$ (partie entière inférieure) et une origine à $i=j+1$ on obtient la Jacobienne la plus facile à calculer.\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-17.png)\n![](/assets/images/B3.RIA.MDC.Slide-07.png)\n\n![](/assets/images/B3.RIA.MDC.Slide-08.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-18.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230119-19.png)\n\nPreuve entre la Jacobienne vectorielle et la référentielle : \n\n![](/assets/images/B3.RIA.CM.MDC.Slide-08-Preuve.png)\n\n\n> Notes RKA du 2023/01/19 - End\n\n---\n\n> Notes RKA du 2023/01/24 - Start\n\n\n\n\n# Rappels\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230124-1.png)\n- $\\dot X = J(q) \\dot q$ dépend de la configuration car \n- jacobienne géométrique: de $x$ vers $\\dot q$\n- jacobienne analytique: de $\\dot q$ vers $x$\n![](/assets/images/B3.RIA.CM.MDC.BB20230124-2.png)\n\n\n# III- Exemple MDD sur RRPRRR\n\n## Calcul de $J$\n![](/assets/images/B3.RIA.MDC.Slide-09.png)\n![](/assets/images/B3.RIA.MDC.Slide-10.png)\n![](/assets/images/B3.RIA.MDC.Slide-11.png)\n\n### ???\n\n![](/assets/images/B3.RIA.MDC.Slide-12.png)\n\n\n\n### Déterminiation des $\\overrightarrow{z}_{k(3)}$\n\n![](/assets/images/B3.RIA.MDC.Slide-13.png)\n\n- Point axe concurrant ==> les origines sont confondus ==> $\\overrightarrow{O_4O_5} = \\overrightarrow{O_5O_6} = 0$\n    - Point axe concurrant = trois rotoides ayant un point immobile qlqsoit la config des trois rotoides = similaire au fonctionnement du poignet\n\nPour calculer $\\overrightarrow{z}_1(3)$, on a deux options:\n1. - On part de $\\overrightarrow{z}_1(2) = s_2\\;\\overrightarrow{x}_{2(2)} + c_2\\;\\overrightarrow{y}_{2(2)}$ que l'on connait de $T_{12}$\n    - On utilise ensuite $T_{23}$ pour calculer $\\overrightarrow{z}_1(3) = s_2\\;x_{2(3)} + c_2\\;\\overrightarrow{y}_{2(3)}$\n2. On calcule directement la matrice de rotation $R_{13} = R_{12}\\times R_{23}$\n\nPour calculer $\\overrightarrow{z}_5(3)$:\n![](/assets/images/B3.RIA.CM.MDC.BB20230124-3.png)\n\nPour calculer $\\overrightarrow{z}_5(3)$:\n![](/assets/images/B3.RIA.CM.MDC.BB20230124-4.png)\n\nPour calculer $\\overrightarrow{{O_1O_4}_{(3)}}$:\n![](/assets/images/B3.RIA.CM.MDC.BB20230124-5.png)\n\n![](/assets/images/B3.RIA.MDC.Slide-14.png)\n![](/assets/images/B3.RIA.MDC.Slide-15.png)\n![](/assets/images/B3.RIA.MDC.Slide-16.png)\n![](/assets/images/B3.RIA.MDC.Slide-17.png)\n![](/assets/images/B3.RIA.MDC.Slide-18.png)\n\n\n![](/assets/images/B3.RIA.MDC.Slide-19.png)\n![](/assets/images/B3.RIA.MDC.Slide-20.png)\n![](/assets/images/B3.RIA.MDC.Slide-21.png)\n![](/assets/images/B3.RIA.MDC.Slide-22.png)\n\n> Attention: $X_3 = [...]\\;X_2$ et pas $X_3 = [...]\\;X_1$\n![](/assets/images/B3.RIA.MDC.Slide-23.png)\n\n> Attention: $[...] = [...]\\;X_3$ et pas $[...] = [...]\\;X_1$\n![](/assets/images/B3.RIA.MDC.Slide-24.png)\n![](/assets/images/B3.RIA.MDC.Slide-25.png)\n\n![](/assets/images/B3.RIA.MDC.Slide-26.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230124-6.png)\n\n\n![](/assets/images/B3.RIA.MDC.Slide-27.png)\n![](/assets/images/B3.RIA.MDC.Slide-28.png)\n\n## Validation\n\n![](/assets/images/B3.RIA.MDC.Slide-29.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230124-7.png)\n\n\n# Compléments\n\n![](/assets/images/B3.RIA.CM.MDC.BB20230125-1.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230125-2.png)\n![](/assets/images/B3.RIA.CM.MDC.BB20230125-3.png)\n\n\n\n> Notes RKA du 2023/01/24 - End\n\n---","n":0.038}}},{"i":21,"$":{"0":{"v":"Généralités","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix\n\n---\n\n> Notes RKA du 2023/01/25 - Start\n\n\n\n\n![](/assets/images/B3.RIA.CM.Slide-01.png)\n\n# I- Utilisation et intérêt de la jacobienne\n\n## I-1. MGI - Modèle Géométrique Inverse\n\n### Problème non-linéaire\n\n![](/assets/images/B3.RIA.CM.Slide-02.png)\n\n- un des 1er bras manipulateur envoyé dans l'espace ne possèdait pas de solution ; il fallait passer par des calucls numériques (ce qui prenait du temps)\n\n### Méthode de Newton\n\n![](/assets/images/B3.RIA.CM.Slide-03.png)\n\nDès que le robot réalise une manoeuvre qui passe par une singularité, les degrés de liberté et comme la jacobienne devient non inversible sur ces singularités le robot peut se bloquer et ne pas réaliser la manip.\n\n![](/assets/images/B3.RIA.CM.BB20230125-1.png)\n![](/assets/images/B3.RIA.CM.BB20230125-2.png)\n\n## I-2. MDI - Modèle Différentiel Inverse\n\n### Problématique\n\n![](/assets/images/B3.RIA.CM.Slide-04.png)\n\n### Méthode\n\n![](/assets/images/B3.RIA.CM.Slide-05.png)\n\n### Principe\n\n![](/assets/images/B3.RIA.CM.Slide-06.png)\n\n### Inversion du MDD\n\n![](/assets/images/B3.RIA.CM.Slide-07.png)\n\n#### Etape 1\n\n![](/assets/images/B3.RIA.CM.Slide-08.png)\n\n#### Etape 2 et 3\n\n![](/assets/images/B3.RIA.CM.Slide-09.png)\n\n### Résolution du MDI pour du non-redondants\n\n![](/assets/images/B3.RIA.CM.Slide-10.png)\n\n#### Système Compatible\n\n![](/assets/images/B3.RIA.CM.Slide-11.png)\n\nPour les syst. non compatible la solution la plus proche au sens des moindres carrées\n\n#### Inverse Généralisée & Pseudo-Inverse\n\n![](/assets/images/B3.RIA.CM.Slide-12.png)\n\nComme le montre l'équation de $X$, un robot redondant se trouve dans le cas $m<n$. Du coup il y aura tj un infinité de solution pour les robots redondants.\n\n#### SVD - Singular Value Decomposition\n\n![](/assets/images/B3.RIA.CM.Slide-13.png)\n![](/assets/images/B3.RIA.CM.Slide-14.png)\n\nGrand advantage de cette decomposition, c'est que la pseudo-inverse est très facile à calculer !\n\n### Exemple: RRPRRR\n\n#### Etape 1\n\n![](/assets/images/B3.RIA.CM.Slide-15.png)\n\n#### Etape 2\n\n![](/assets/images/B3.RIA.CM.Slide-16.png)\n![](/assets/images/B3.RIA.CM.Slide-17.png)\n\n#### Etape 3\n\n![](/assets/images/B3.RIA.CM.Slide-18.png)\n![](/assets/images/B3.RIA.CM.BB20230125-3.png)\n\n\n#### Cas non-inversible\n\n![](/assets/images/B3.RIA.CM.Slide-19.png)\n\nSi $q_3 = s_5 = 0$, alors le rang est de max 4.\n\n![](/assets/images/B3.RIA.CM.BB20230125-4.png)\n\nLorsqu'il y a une infinité de solution, on fera un choix de solution pour pouvoir implémenter la commande.\n\n## I-3. Définition des espaces des vitesses\n\n### Espaces des vitesses articulaires vs des vitesses opérationnelles\n\n> Nakamura-REdundancy and Optimization\n\n![](/assets/images/B3.RIA.CM.Slide-20.png)\n\nDans le cas de robots avec une jacobienne carrée, quelle est la conséquence des singularités ?\n- le noyau n'est pas nulle donc il existe un ensemble de vitesses qui ne vont pas faire évoluer la configuration ;\n- en effet si le rang de $J$ est plein alors le noyau sera nul et la question ne se pose pas.\n\n### Indice de manipulabitité\n\n#### Ellipsoide de vitesse\n\n![](/assets/images/B3.RIA.CM.Slide-21.png)\n![](/assets/images/B3.RIA.CM.BB20230125-5.png)\n![](/assets/images/B3.RIA.CM.BB20230125-6.png)\n\nCette ellipse indique combien de vitesse il faut pour réaliser une quantité de mouvement.\n\nSi l'ellipse est très resérrée on en conclut qu'il faut bcp de vitesse pour faire peu de mouvement (donc on force sur les articulations).\n\n$U$ donne l'orientation de l'ellipse et $\\Sigma$ donne son etallement (sachant que $\\sigma_1>\\dots>\\sigma_r$).\n\nC'est pourquoi les robots de nos jours ne marche pas encore comme les humains puisqu'on évite les singularités (d'où l'importance de l'indice de manipulabilité).\n\nUn robot qui se déplacerait proche des singularités comme nous apporterait l'advantage d'économiser énormément d'énergie (moins de liaisons utilisées).\n\n#### Indice en vitesse\n\n![](/assets/images/B3.RIA.CM.Slide-22.png)\n\n### Efforts statiques - Indice en effort\n\n![](/assets/images/B3.RIA.CM.Slide-23.png)\n\nPour générer bcp d'effort, il faudra évoluer sur des vitesses faibles.\n\n### Dualité vittesse effort\n\n![](/assets/images/B3.RIA.CM.Slide-24.png)\n\n\n\n\n> Notes RKA du 2023/01/25 - End\n\n---\n\n> Notes RKA du 2023/01/26 - Start\n\n\n\n\n# II- Les Robots redondants\n\n![](/assets/images/B3.RIA.CM.Slide-25.png)\n\n## II-1. Généralités et intérêt\n\n### Définitions\n\n![](/assets/images/B3.RIA.CM.Slide-26.png)\n![](/assets/images/B3.RIA.CM.Slide-27.png)\n![](/assets/images/B3.RIA.CM.BB20230126-1.png)\n\n- $J^+\\dot x$ correspond a la translation de la droite du kernel vers la droite de la tache\n- Le pojecteur sur le noyau de la jacobienne $\\mathbb{I} - J^+J$ lui va projeter $\\dot q_0$ sur la droite du kernel\n- on peut montrer au sens des moindres carrées que cette norme est minimale\n\n### Signification des espaces\n\n![](/assets/images/B3.RIA.CM.Slide-28.png)\n![](/assets/images/B3.RIA.CM.Slide-29.png)\n\n\n## II-2. Méthodes de résolution\n\n### Redondance vis-à-vis de la tâche\n\n![](/assets/images/B3.RIA.CM.Slide-30.png)\n\nTache de pointage m=2 site/azimut\n\n### Trois classe de méthode\n\n![](/assets/images/B3.RIA.CM.Slide-31.png)\n\nL'augmentation de tache est une méthode utilié historiquement mais plus aujourd'hui les deux autres méthodes sont plus adaptées.\n\n#### 1) Méthode basées Jacobienne\n\n##### Pseudo-inverse\n\n![](/assets/images/B3.RIA.CM.Slide-32.png)\n\nMathématiquement il n'y a rien à dire mais en pratique il y a peu d'intérêt car aucun choix n'est possible.\n\nDu coup mieux vaut utiliser la pseudo-inverse pondérée.\n\n##### Pseudo-inverse pondérée\n\n![](/assets/images/B3.RIA.CM.Slide-33.png)\n\nAttention J_W^+ n'est pas une pseudo-inverse seul deux des trois propriétés de la pseudo-inverse sont respectées.\n\nIdée résolution:\n![](/assets/images/B3.RIA.CM.BB20230126-2.png)\n\nExemple 2R:\n![](/assets/images/B3.RIA.CM.BB20230126-3.png)\n\nIntérêt de la pondération est de permettre un choix sur l'espace des configurations de telles sortes que l'on peut augmenter les possibilités de l'espace des vitesses.\n\nSouvent $b=0$m on prend une pondération diagonale.\n\nCependant cette méthode se comporte mal lorsqu'on est proche d'une singularité.\n\n##### DLS - Damped Least Square\n\nLe moindre carrées amortis :\n![](/assets/images/B3.RIA.CM.Slide-34.png)\n\nAussi calculable en SDD.\n\n![](/assets/images/B3.RIA.CM.BB20230126-4.png)\n\nÀ noter que ${U^T}^{-1} = U$\n\nMaintenant pourquoi cette méthode est robuste proche des singularités ?\n\nC'est somme des $\\sigma$ avec les $\\mu$ qui permet d'empêcher d'avoir une limite en 0 dans une singularité.\n\nDésadvantage de cette méthode c'est qu'elle introduit une erreur selon $\\dot q$ et $\\dot x$\n\n##### Interprétation géométrique: effet $\\mu$\n\n![](/assets/images/B3.RIA.CM.Slide-35.png)\n\n##### Pseudo-inverse vs DLS\n\n![](/assets/images/B3.RIA.CM.Slide-36.png)\n\nPar contre il n'a pas de garantie sur l'unicité des configs. D'un cycle à un autre on ne peut pas savoir qu'elle solution équivalente sera choisie.\n\n![](/assets/images/B3.RIA.CM.BB20230126-5.png)\n\n#### 2) Méthode basée sur le kernel\n\n![](/assets/images/B3.RIA.CM.Slide-37.png)\n\nIci on choisit $\\dot q_0$ loin des singularités pour s'éviter les soucis précédents.\n\nOn peut choisir ce $\\dot q_0$ selon l'indice de manipulabilité ou de sortes que les obstacles soient aussi évités.\n\n#### 3) Méthode par tâche augmentée\n\n![](/assets/images/B3.RIA.CM.Slide-38.png)\n\nExemple 2R :\n![](/assets/images/B3.RIA.CM.BB20230126-6.png)\n\nMais on introduit une _singularité algorithmique_ qui n'est pas liée au robot.\n\n## II-3. Tâches prioritaires\n\nAussi appelé piles de tâches (au-delà de 5 tâches on commence à être limitée).\n\n### Idée\n\n![](/assets/images/B3.RIA.CM.Slide-39.png)\n\n### Propriété\n\n![](/assets/images/B3.RIA.CM.Slide-40.png)\n\nComme on projète sur une tache, on peut réaliser au mieux une tache sans être embêté par la seconde et inversement.\n\n### Exemple/Illustration\n\n![](/assets/images/B3.RIA.CM.Slide-41.png)\n![](/assets/images/B3.RIA.CM.Slide-42.png)\n![](/assets/images/B3.RIA.CM.Slide-43.png)\n\n# III- Modèle dynamique\n\n## Équations\n\n![](/assets/images/B3.RIA.CM.Slide-44.png)\n\nQuand on dit modèle dynamique, on parle de l'inverse principalement.\n\n## Rappels - Effort Statiques\n\n> Attention: avant dernière equation --> $\\tau -(q)^T\\;f_e$ rajouter $J$ --> $\\tau -J(q)^T\\;f_e$\n![](/assets/images/B3.RIA.CM.Slide-45.png)\n\nLes librairies sont principalement basées sur les equations de Newton-Euler car on peut plus facilement calculer les couples d'effort.\n\n- [RNEA - Recursive Newton Euler Agolrithm](https://scaron.info/robot-locomotion/recursive-newton-euler-algorithm.html)\n\nSoucis la matrice $A$ est souvent de taille 40x40 et le calcul de l'inverse avait une complexité de $O(n^3)$ alors que l'on travaille sur de hautes fréquences mais depuis Featherstone la compléxité a été diminué sur du $O(n)$.\n\n\n## Equations d'Euler-Lagrange\n\n![](/assets/images/B3.RIA.CM.Slide-46.png)\n\n### Energie cinétique\n![](/assets/images/B3.RIA.CM.Slide-47.png)\n\n### Matrice d'inertie et Energie Potentielle\n\n![](/assets/images/B3.RIA.CM.Slide-48.png)\n\n### Lagrangien\n\n![](/assets/images/B3.RIA.CM.Slide-49.png)\n![](/assets/images/B3.RIA.CM.Slide-50.png)\n![](/assets/images/B3.RIA.CM.Slide-51.png)\n\n\n\n> Notes RKA du 2023/01/26 - End\n\n---","n":0.033}}},{"i":22,"$":{"0":{"v":"Generationn Mouvement (GM)","n":0.577},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat et M. Thaix\n\n---\n\n> Notes RKA du 2023/01/30 - Start\n\n\n\n# Sommaire\n\n![](/assets/images/B3.RIA.CM.Slide-53.png)\n\n# I- Introduction\n\n## Problématique\n\n![](/assets/images/B3.RIA.CM.Slide-54.png)\n\n## Définitions\n\n![](/assets/images/B3.RIA.CM.Slide-55.png)\n\n## Contraintes\n\n![](/assets/images/B3.RIA.CM.Slide-56.png)\n\n## Schéma général\n\n![](/assets/images/B3.RIA.CM.Slide-57.png)\n\n\n## Problèmes dans l'espace opérationnel\n\n![](/assets/images/B3.RIA.CM.Slide-58.png)\n\n# II- Calcul de GM dans l'espace généralisé\n\n## II-1. Loi Polynomiale\n\n![](/assets/images/B3.RIA.CM.Slide-59.png)\n\n### Problématique\n\nOn cherche\n$$\nq(t) = a_0 + a_1\\;t + \\dots + a_n\\;t^n\n$$\noù l'on ne connaît pas $n$ ni les $a_i$\nsous les contratintes\n$$\nq(0) = q_i\\\\\n\\dot q(0) = \\dot q_i\\\\\nq(t_f) = q_f\\\\\n\\dot q(t_f) = \\dot q_f\\\\\n$$\n\n$n$ dépend du nb de contraintes sur $q(t)$\n\nVu qu'on a 4 contraintes, on en déduit que $n = 3$ et donc il faut déterminer 4 $a_i$.\n\nLe problème deveint alors:\n![](/assets/images/B3.RIA.CM.GM.BB20230130-01.png)\n![](/assets/images/B3.RIA.CM.GM.BB20230130-02.png)\n![](/assets/images/B3.RIA.CM.GM.BB20230130-03.png)\n![](/assets/images/B3.RIA.CM.GM.BB20230130-04.png)\n\nIl ne reste plus qu'à déterminer $t_f$.\n\n### Calcul du $t_f$\n\n![](/assets/images/B3.RIA.CM.Slide-60.png)\n\nCette variable est en fonction de la vitesse maximale $K_v$ et de l'accélération maximale $K_a$.\n\nPour la contrainte de vitesse:\n![](/assets/images/B3.RIA.CM.GM.BB20230130-05.png)\n![](/assets/images/B3.RIA.CM.GM.BB20230130-06.png)\n\nOn a que $t_f$ ne doit pas être plus petit que $\\frac{\\,3\\,}{2}\\frac{\\;\\Delta q\\;}{K_v}$.\n\nPour la contrainte d'accélération:\n![](/assets/images/B3.RIA.CM.GM.BB20230130-07.png)\n\nOn a que $t_f$ ne peut pas être plus petit que $\\sqrt{6\\;\\frac{\\;\\Delta q\\;}{K_v}\\;}$\n\nDu coup, $\\quad t_f = \\max\\Big(\\; \\frac{\\,3\\,}{2}\\frac{\\;\\Delta q\\;}{K_v} , \\sqrt{6\\;\\frac{\\;\\Delta q\\;}{K_v}\\;} \\;\\Big)$\n\n### Discontinuité en accélération\n\n![](/assets/images/B3.RIA.CM.Slide-61.png)\n\n## II-2. Profile de vitesse trapezoidal\n\n> Keywords: loi bang-bang\n\n![](/assets/images/B3.RIA.CM.Slide-62.png)\n\n$\\tau$ représente les instants de communtation (l'instant auquel on augmente/maintient/diminue la vitesse).\n\nCalcul des $\\tau$:\n![](/assets/images/B3.RIA.CM.GM.BB20230130-08.png)\n\nIl ne nous reste plus qu'à calculer le $t_f$. Or, l'aire sous la courbe de $\\dot q$ correspond à $\\Delta q$. D'où,\n![](/assets/images/B3.RIA.CM.GM.BB20230130-09.png)\n\nTerminons:\n![](/assets/images/B3.RIA.CM.GM.BB20230130-10.png)\n![](/assets/images/B3.RIA.CM.GM.BB20230130-11.png)\n![](/assets/images/B3.RIA.CM.GM.BB20230130-12.png)\n\nÀ qu'il n'est pas possible de passer d'une vitesse nulle à une vitesse non nulle instantanément (car ceci requiererait une accélération infinie).\n\n![](/assets/images/B3.RIA.CM.Slide-64.png)\n\n## II-3. Synchronisation entre les axes\n\n![](/assets/images/B3.RIA.CM.Slide-65.png)\n![](/assets/images/B3.RIA.CM.Slide-66.png)\n![](/assets/images/B3.RIA.CM.Slide-67.png)\n\nSur les robots de TPs, le profile trapézoidale s'implémente sur l'accélération.\n\nDu coup le robot doit réaliser le calcul des $\\tau_i$ en plus de ceux liés au modèle MGI à chaque période. (on est en temps réel dur).\n\n## II-4. Points de passage\n\n![](/assets/images/B3.RIA.CM.Slide-68.png)\n![](/assets/images/B3.RIA.CM.GM.BB20230130-13.png)\n\n## Remarque\n\nEn général, on donne une loi en $\\dot q$ pour les vitesses faibles. Mais pour les vitesses grandes, les discontinuités en accélération générées par le profile trapézoidale en vitesse va causer des vibrations sur la structure. Dans ce cas, on utilise le profile trapézoidale sur l'accélération. Ce qui des portions parabolique sur la vitesse entre les passages linéaires, comme suit:\n![](/assets/images/B3.RIA.CM.GM.BB20230130-14.png)\n\n## Question typique Examen \n\n![](/assets/images/B3.RIA.CM.GM.BB20230130-15.png)\n\n\n\n> Notes RKA du 2023/01/30 - End\n\n---","n":0.053}}},{"i":23,"$":{"0":{"v":"AssVis","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat et M. Thaix\n\n---\n\n> Notes RKA du 2023/01/31 - Start\n\n\n\n\n![](/assets/images/B3.RIA.CM.AssVis-1.png)\n\nEn robotique, on applique un entre deux de l'automatique et de la commande trop simpliste.\n\nParfois une commande purement autom ne pourra pas être mise à jour en temps réelle car trop complexe. Ou encore la commande est trop sensible.\n\nMais on ne veut pas non-plus introduire trop de simplicité.\n\n# I- Introduction\n\n## Problématique: Approche Classique vs Approche Réf. Capteur\n\n![](/assets/images/B3.RIA.CM.AssVis-2.png)\n\n## Définition\n\nL'**Asservissement Visuel** ou la commande référencée vision consiste à contrôler un robot à partir des infos renvoyées par une ou plusieurs caméras embarquées ou déportées.\n\n## Application\n\n- Robotique mobile (agricole, sous-marine, drones, ...)\n- Robotique humanoïde\n- Robotique industrielle, médicale, mirco-robotique, ...\n\n## Structure de commande (historique)\n\nPremier travaux 3D environ 1972 avec des temps de calculs qui prenait plus de 5sec. Pour le 2D c'etait 1984 aussi avec des performances faibles.\n\n![](/assets/images/B3.RIA.CM.AssVis-3.png)\n\nDe nos jours on a abondonné l'idée de vouloir découplé position et image.\n\nDonc on a essayé la piste de la jacobienne ou du 2D et demi, et en ce moment c'est le photogramétrique et en environnement non contrôlée.\n\n### PBVS: Position-Based Visual Servoing (3D)\n\nOn raisonne sur la situation reconstruite avec la caméra.\n\nAdvantage:\n- maîtrise des trajectoirs du bras\n\nIncinvénient:\n- reconstruction prend du temps\n- reconstruction oblige à passer sur des modèles donc perte de robustesse (mais de nos jours les caméras 3D sont plus précise)\n\n### IBVS: Image-Based Visual Servoing (2D)\n\nOn raisonne dans l'image et donc sur les indices visuels.\n\nAdvantage:\n- plus de précision\n\nInconvénient:\n- plus difficile de gérer les singularités et autres puisqu'on est pas conscient de la structure\n\n# II- Focus sur l'IBVS\n\n> Les explications données ici seront en caméras embarquées.\n\n![](/assets/images/B3.RIA.CM.AssVis-4.png)\n\n\n## II-1. Étape 1\n\nL'étape 1 consiste à mettre en relation l'effet des mouvements sur l'image.\n\n### II-1.1) Modélisation Caméra\n\n> Keywords:\n- modèle sténopé ;\n- projection perspective ;\n- focal ;\n- centre optique ;\n- coordonnées métriques\n\n![](/assets/images/B3.RIA.CM.AssVis-5.png)\n![](/assets/images/B3.RIA.CM.BB20230131-01.png)\n\n### II-1.2) Modélisation Intéraction\n\n> Keywords:\n- $s$ indices visuels\n- $r$ situation caméra\n\n![](/assets/images/B3.RIA.CM.AssVis-6.png)\n![](/assets/images/B3.RIA.CM.BB20230131-02.png)\n![](/assets/images/B3.RIA.CM.BB20230131-03.png)\n![](/assets/images/B3.RIA.CM.BB20230131-04.png)\n![](/assets/images/B3.RIA.CM.BB20230131-05.png)\n\n$M$ peut se voir comme une matrice de conversion.\n\n### II-1.3) Modélisation Robot\n\n![](/assets/images/B3.RIA.CM.AssVis-7.png)\n![](/assets/images/B3.RIA.CM.BB20230131-06.png)\n![](/assets/images/B3.RIA.CM.BB20230131-07.png)\n![](/assets/images/B3.RIA.CM.BB20230131-08.png)\n\n## II-2. Étape 2\n\n### Détermination de la commande\n\n![](/assets/images/B3.RIA.CM.AssVis-8.png)\n\nLa tâche est définie par l'image de référence (c.à.d. la valeur des indices visuels quand la caméra est à la situation finale $s^*$).\n\nDonc la tâche est réalisée si $s=s^*\\;$.\n\nOn peut alors définir une erreur dans l'image: $e = s - s^*$ dans le but de faire converger cette erreur à 0.\n\nEn robotique, la commande en vitesse est donnée par $u(t) = \\dot q(t)\\;$.\n\n**Question:** Comment trouver $\\dot q(t)$ tel que $e(t) \\rightarrow 0\\;$ ?\n\nCeci est équivalent à chercher $\\dot q$ tel que $e = e_0\\;e^{-\\lambda t}\\;$  avec $\\;\\lambda>0\\;$.\n\n![](/assets/images/B3.RIA.CM.BB20230131-09.png)\n![](/assets/images/B3.RIA.CM.BB20230131-10.png)\n![](/assets/images/B3.RIA.CM.BB20230131-11.png)\n\n\n\n\n> Notes RKA du 2023/01/31 - End\n\n---","n":0.048}}},{"i":24,"$":{"0":{"v":"CCTR - Conception Commandes Temps Réel","n":0.408},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par S. Durola, N. Rivière\n\n---\n\n\n<!-- \n# À Retenir\n\n- ... -->\n\n# Cours Magistraux\n\n- [[B3.CCTR.CM]]\n- [[B3.CCTR.CM.Implementation]]\n\n<!-- \n# Travaux Dirigés\n\n- [[...|...]] -->\n\n# Travaux Pratiques\n\n- [[B3.CCTR.TP1]]\n- [[B3.CCTR.TP2]]\n- [[B3.CCTR.TP3]]\n\n\n\n# Support de Cours\n\n## Fichiers Moodles\n\n### CM\n\n- [B3.CCTR.CM.Modalites.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.CCTR.CM.Modalites.pdf)\n\n\n<!-- ### TD\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle) -->\n\n\n<!-- ### TP\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle) -->\n\n\n## Scans\n\n### Blackbard\n\n- [B3.CCTR.CM.BB20230118.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.CCTR.CM.BB20230118.pdf)\n\n### GEA\n\n- [B3.CCTR.CM.NotesGEA.20230118.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.CCTR.CM.NotesGEA.20230118.pdf)\n\n\n<!-- ### RKA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle) -->\n\n\n","n":0.121}}},{"i":25,"$":{"0":{"v":"TP2","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par S. Durola\n\n---\n\n> Notes RKA du 2023/02/01 - Start\n\n\n\n\n# Modèle d'ordre 4\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-01.png)\n\n# Réduction d'ordre\n\n## Réduction sur $i_2(t)$\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-02.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-03.png)\n\n## Réduction sur $i_1(t)$\n\n### Méthode 1\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-04.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-05.png)\n\n### Méthode 2\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-06.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-07.png)\n\n# Objectifs\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-08.png)\n\n# Observateur Identité\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-09.png)\n\nLe bouclage ne pourra modifier les modes de l'obs car un obs est concu expres avec des modes non-commandables\n\n**Quelle est la dynamique de l'intégrateur sur la partie obs ?**\n- Il y a deux boucles celle liée à $\\hat A$ et celle venant de l'observateur $-GC$\n- C'est pourquoi $F=A-GC$ !\n- Au final un obs identité (et ceci n'est applicable que pour l'identité) revient à simuler le système réel et étudier l'erreur sur la sortie réelle et la simulé pour la réinjecter avec un gain $G$\n\n# Effet Intégral et Retour d'État\n\nPour l'effet intégral:\n- on mesure l'erreur sur la sortie\n- on insert l'intégrateur sur l'erreur\n\nPour le retour d'état:\n- on boucle sur la sortie de l'obs\n- en ajoutant les précompensateurs sur la sortie et sur $x_i$\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-10.png)\n\n# Calcul de retour d'état\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-11.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-12.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-13.png)\n\nIl ne reste plus qu'à utiliser matlab pour trouver $K_a$ avec `Ka = acker(Aa, Ba, poles_des)`.\n\n# Calcul de l'observateur\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-14.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-15.png)\n\nOn trouve $G$ avec `G = acker(A2', C2', poles_des)`.\n\n\n# Exprimer les etats\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-16.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-17.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-18.png)\n\n## 1) Expression de $x_2$\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-19.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-20.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-21.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-22.png)\n![](/assets/images/B3.CCTR.TP2.BB20230201-23.png)\n\nOn vérifie bien que les modes du retour d'état s'appliquent sur le etats et pas l'erreur. La séparation est bien respectée (i.e. les bons modes désirés sont appliqués).\n\nEt de plus la dynamique est bien autonome.\n\n# Discretisation\n\n## Thm de Shanon\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-24.png)\n\nOn perd de l'information lorsque le signal périodisé se superpose sur le signal. Ceci n'est jamais le cas uniquement lorsque le signal est **borné**. Dans ce cas, il faut prendre une période au moins doublement supérieure à la borne max du signal.\n\n![](/assets/images/B3.CCTR.TP2.BB20230201-25.png)\n\n\n\n\n> Notes RKA du 2023/02/01 - End\n\n---","n":0.059}}},{"i":26,"$":{"0":{"v":"TP1","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par S. Durola\n\n---\n\n> Notes RKA du 2023/01/27 - Start\n\n\n\n## Modèle de connaissance\n\nLe modèle de connaissance correspond au processus de modélisation qui consiste à construire étape par étape un modèle.\n\nContrairement au modèle de comportement qui lui correspond à choisir une modélisation spécifique et réaliser des expériences en espérant que les propriétés du système se retrouve sur celles dictées par le modèle choisi.\n\n![](/assets/images/B3.CCTR.TP1.BB20230127-01.png)\n![](/assets/images/B3.CCTR.TP1.BB20230127-02.png)\n![](/assets/images/B3.CCTR.TP1.BB20230127-03.png)\n![](/assets/images/B3.CCTR.TP1.BB20230127-04.png)\n\n## 1) Représentation d'état\n\n### Etape 1 - Identification\n\nIdentifier les variables d'états, d'entrées et de sorties\n\n\n### Etape 2 - Restructuration\n\nRestructurer les equations pour aboutir vers un système de la forme:\n$$\n\\begin{cases}\n\\dot x(t) = f\\big(x(t), u(t), \\delta(t)\\big)\\\\\ny(t) = g\\big(x(t), u(t), \\delta(t)\\big)\n\\end{cases}\n$$\n\n### Etape 3 - Choix de simplification sur les incertitudes\n\n#### Couple de frottement sec\n\nCette caractéristique pose problème car elle est très compliquer à linéariser.\n\nLe syst. se trouverait après linéarisation dans une zone morte où tout serait égale à 0. Le moteur resterait immobile au point d'équilibre.\n\nOn va du coup rechercher à le négliger (en le considérant constant pour le moment) tout en gardant en tête\n\nPrimo le module sera toujours inférieure à C0\n\ndonc si la vitesse est grande il y a pas de soucis de le négliger\n\nprobleme pour des vitesses faibles ou on a pas le droit de le negliger\n\ndonc comme on aura des imprecisions en vitesse faible ile au point d'équilibre.\n\nOn va du coup rechercher à le négliger (en le considérant constant pour le moment) tout en gardant en tête\n\nPrimo le module sera toujours inférieure à C0\n\ndonc si la vitesse est grande il y a pas de soucis de le négliger\n\nprobleme pour des vitesses faibles ou on a pas le droit de le negliger\n\ndonc comme on aura des imprecisions en vitesse faible on va implémenter un commande par retour d'état avec effet intégrale à la question 6.\n\n![](/assets/images/B3.CCTR.TP1.BB20230127-05.png)\n\n## 3) Réduction d'ordre\n\nMéthodes pour la réduction d'ordre:\n- négiglér une variable p.r.à une autre\n- passer par la forme modale\n    - soit mode très rapide (bande aténuée)\n    - soit mode d'amplitude très faible (bande passante) (proche de zéro)\n\nPourquoi réduire l'ordre ?\n\n- c'est plus simple et comme on a une approche robuste cela ne poserait pas probleme\n\n- modele 4 valeur tres grande donc sur le microcontroleur on pourra pas gerer les approximation pour des valeurs s'y ecarter (apparition de saturation et la difficulté du microcontroleur pour gerer les quantifications)\n\n## 4) Analyse\n\n### Etude des valeurs propres\n\nOn a 4 valeurs propres une en 0 une en -4 et 2 très loin en -7'000 et -100'000.\n\nCela nous indique que l'on pourra négliger les deux valeurs propres en -7'000 et -100'000.\n\nCar surement que ces valeurs seront atténué par le filtre passe bas.\n\nDe plus si on analyse le fonction de transfert (entrées/états) on constate qu'ils sont aussi des zéros et donc peuvent être simplifier.\n\n### Etude des bodes\n\nOn peut aussi argumenter nos simplifications par l'analyse des diagrammes de bodes.\n\n...\n\nPour une pulsation $\\omega < \\omega_0$, le module de $\\dfrac{I_1(p)}{\\;U_m(p)\\;} = 0.085 \\;\\;\\Omega^{-1}$.\n\nCeci nous autorise de remplacer la première équation par:\n$$\ni_1(t) = {R_{eq}}^{-1}\\; U_m(t)\n$$\n\nAnalytiquement on écrirait:\n![](/assets/images/B3.CCTR.TP1.BB20230127-06.png)\n\nSimplification equation 2:\n\nBode\n\nAnaylitiquement sur les fonctions de transfert entrées sorties\n![](/assets/images/B3.CCTR.TP1.BB20230127-07.png)\n\n\nobservateur\n\nschema bloc\n\n\n\n\n> Notes RKA du 2023/01/27 - End\n\n---","n":0.044}}},{"i":27,"$":{"0":{"v":"CM","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par S. Durola\n\nSupport de Cours:\n- [B3.CCTR.CM.Modalites.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.CCTR.CM.Modalites.pdf)\n- [B3.CCTR.CM.BB20230118.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.CCTR.CM.BB20230118.pdf)\n- [B3.CCTR.CM.NotesGEA.20230118.pdf](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.CCTR.CM.NotesGEA.20230118.pdf)\n\n---\n\n> Notes RKA du 2023/01/18 - Start\n\n\n\n# Modalités\n\n![](/assets/images/B3.CCTR.CM.BB20230118-01.png)\n\n# Synthèse\n\n![](/assets/images/B3.CCTR.CM.BB20230118-02.png)\n\n# I- Positionnement du module\n\n![](/assets/images/B3.CCTR.CM.BB20230118-03.png)\n\n## Première Hypothèse: Causalité et Existence de l'état\n\n![](/assets/images/B3.CCTR.CM.BB20230118-04.png)\n\nEtat = representation interne suffisament riche pour expliquer un processus et son evolution de manière univoque et un???\n\nTemps = ensemble orienté et mono-dimensionnel\n\n## Représentation d'état\n\n![](/assets/images/B3.CCTR.CM.BB20230118-05.png)\n\n## Autres Hypothèses \n\n![](/assets/images/B3.CCTR.CM.BB20230118-06.png)\n![](/assets/images/B3.CCTR.CM.BB20230118-07.png)\n\n- $H_i$: Invariance Temporelle\n- $H_a$: Autonome\n- $H_d$: Déterministe\n- $H_{sm}$: Sans Mémoire (combinatoire ou séquencielle)\n\n## Exemple: la dérivée\n\n\n![](/assets/images/B3.CCTR.CM.BB20230118-08.png)\n![](/assets/images/B3.CCTR.CM.BB20230118-09.png)\n\n## Problématique\n\nSi un modèle asservi $i$ pose problème il faut revenir au modèle physique $i$ et corriger ce modèle. Ce ne sera pas toujours possible ensuite de poursuivre vers une simplification avec un modèle $i+1$. Dans ce cas, il faudra trouver la commande pour le modèle asservi $i$ directement du modèle physique $i$.\n\n# II- Prototypage\n\n## Simulation vs Emulation\n\n![](/assets/images/B3.CCTR.CM.BB20230118-10.png)\n\n> Emuler un vieux jeux video sur un nouveau PC puissant ne fera pas améliorer les performances du jeux ! Emulation conservera les performances telles qu'elles étaient dans le PC d'origine.\n\n- Modèle In the Loop --> Simulation\n- Système In the Loop --> Emulation\n- Hardware In the Loop --> Emulation avec le système physique\n\n## Hiérarchie\n\n![](/assets/images/B3.CCTR.CM.BB20230118-11.png)\n\n- $C_{(m)}$ Commande modèle\n- $P_{(m)}$ Procédé modèle\n\n### Stratégie 1: Prototypage rapide\n\n> Ce que nous faisant en salle de TP.\n\n![](/assets/images/B3.CCTR.CM.BB20230118-12.png)\n\n- La boite représente la carte d'acquisition.\n\nSi ce prototypage ne marche pas on passe à une stratégie itérative.\n\n### Stratégie 2: Prototypage itératif\n\n> Idée: découpler la commande et le procédé\n\n#### Etape 1: Tester l'échantillonage\n\n![](/assets/images/B3.CCTR.CM.BB20230118-13.png)\n\n#### Etape 2: Passer en temps concret\n\n![](/assets/images/B3.CCTR.CM.BB20230118-14.png)\n\nC'est ce que l'on peut faire sur Matlab en faisant tourner la simulation en temps externe.\n\n#### Etape 3: Tester la carte d'acquisition\n\n![](/assets/images/B3.CCTR.CM.BB20230118-15.png)\n\n#### Etape 4: Tester la communication de la carte\n\n![](/assets/images/B3.CCTR.CM.BB20230118-16.png)\n\n#### Etape 5: Tester sur deux ordinateurs\n\n![](/assets/images/B3.CCTR.CM.BB20230118-17.png)\n\n#### Etape 6: Retester sur deux ordinateurs\n\nRefaire le test mais avec des temps différents\n\n#### Etape 7: Fixer ou la commande ou le procédé\n\n![](/assets/images/B3.CCTR.CM.BB20230118-18.png)\n\n#### Etape 8: Fixer la composante restante\n\n![](/assets/images/B3.CCTR.CM.BB20230118-19.png)\n\n\n## Exemples\n\nSatellite présente 3 composantes:\n- l'environnement\n- le satelite\n- la commande\n\nCentrale Nucléaire peut aussi présenter 3 composantes:\n- Centrale\n- Commande\n- Comportement humain\n\n# III- Mise en Oeuvre temporel\n\nCeci est la dernière étape de la création de la commande.\n\nOn fait le choix du microcontroleur, des paramétrages, de la programmation et de l'expérimentation.\n\n## Problématique Temps réel\n\nOn est sousmis à des contraintes lié à la nature du microcontroleur.\n\nParmis celles-ci, il y a les contraintes liées aux :\n- temps: fréquence ; RDV ; ordonnancement ; ...\n- valeurs: quantification ; numérique ; saturation ; ...\n- compléxités: puissance de calcul ; mémoire ; ...\n\n# IV- Modèle 0\n\nOn considère ici le moteur à courant continu de la salle I1.\n\n## Dessin\n\n![](/assets/images/B3.CCTR.CM.BB20230118-20.png)\n\n## Schéma\n\n![](/assets/images/B3.CCTR.CM.BB20230118-21.png)\n\n- $J$ représente l'inertie de l'axe.\n\n## Equations\n\nOn néglige les changements de comportements liés à l'humidité de la salle ou la température du moteur.\n\n### Loi de la Mécanique\n$$\nu_m(t) = R_1\\;i_1(t) + L_1\\;d_t i_1(t) + e_1(t)\\\\\ne_2(t) = R_2\\;i_2(t) + R_{ch}\\;d_t i_1(t) + L_2\\;d_t i_2(t)\n$$\n\n### Principe Fondamental de la Dynamique\n$$\nJ\\;d_t\\omega(t) = C_1(t) + C_2(t) + C_f(t)\n$$\n\noù $\\quad \\omega(t) = d_t \\theta_m(t)$\n\n### Réducteur\n$$\n\\theta_s(t) = K_n\\;\\theta_m(t)\n$$\n\n### Forttements\n$$\nC_f(t) = - \\mu_\\omega(t) + C_S(t)\n$$\n\nSi $\\;\\;\\omega(t) = 0\\;\\;$ et $\\;\\; |C_1(t) + C_2(t)| < C_0 \\;\\;$ alors $\\;\\; C_S(t) = -C_1(t) - C_2(t) \\;\\;$ sinon $\\;\\; C_S(t) = \\pm C_0\\;\\;$.\n\nSi $\\;\\;\\omega(t) \\neq 0\\;\\;$ alors $\\;\\; C_S(t) = \\pm C_0\\;\\;$ opposé à $\\;\\omega(t)\\;$.\n\n### Electromécanique\n$$\ne_1(t) = K_{e_1}\\;\\omega(t)\\\\\ne_2(t) = K_{e_2}\\;\\omega(t)\\\\\nC_1(t) = K_{C_1}\\;\\omega(t)\\\\\nC_2(t) = K_{C_2}\\;\\omega(t)\\\\\n$$\n\n### Capteurs\n$$\nu_g(t) = K_g\\;\\omega(t)\\\\\nu_S(t) = \\Big( K_S\\;\\omega(t) + \\frac{\\;K_S\\;}{2} \\Big)\\;[K_S] - \\frac{\\;K_S\\;}{2}\n$$\n![](/assets/images/B3.CCTR.CM.BB20230118-22.png)\n\n### Incertitudes\n$$\nR_{ch} = R_{ch_0} + r_{R_{ch}}\\;\\delta_1\\\\\nC_0 = C_{0_0} + r_{C_0}\\;\\delta_2\n$$\n\navec $\\quad |\\delta_1|<1 \\quad\\wedge\\quad |\\delta_2|<1$\n\n\n\n> Notes RKA 2023/01/18 - End\n\n---","n":0.042}}},{"i":28,"$":{"0":{"v":"Implémentation sur cible microcontroleur","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par N. Rivière\n\n---\n\n> Notes RKA du 2023/02/13 - Start\n\n\n\n\n# Contraintes matérielles\n\n- Quantité de calcul\n- Discrétisation\n- Problématiques Temps Réel: ordonnancement, priorités, ...\n- Signaux: interfaces, ADC (Analog to Digital Converter), DAC (Digital to Analog Converter), PWM\n\n# Système d'acquisition numérique\n\nIl faut une fréquence $f$ deux fois supérieur à la fréquence max du signal analogique $f_{max}$.\n\n# Schéma\n\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-01.png)\n\n# Erreurs Possibles\n\n## Quantification de la tension\n\nDue à la longueur finie du mot de donnée en sortie de l'ADC.\n\n## Précision\n\nDéterminée par le nombre de bits de l'ADC.\n\n## Erreur de quantification\n\nÉcart entre le signal analogique échantillonné et le signal numérique issu de la conversion.\n\nLa durée d'échantillonnage pendant laquelle le signal d'entrée est bloquéinhibe les changements de ce signal.\n\n## Erreur sur un échantillon\n\n$\\pm\\, x \\; LSB$\n\n(aussi possible quand les cables sont endommagés ou mal cablés)\n\n# Reproduciton d'un signal\n\nLorsqu'on veut reproduire un signal échantillonné à $f_{ech} = 1600 Hz$:\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-02.png)\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-03.png)\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-04.png)\n\nEn Pratique, $f_{ech} = 10\\times f$ pour avoir une reconstruction propre.\n\n> Le choix d'un décalage de $100Hz$ pour $1500Hz$ permet d'avoir d'autre point que ceux sur l'abcisse.\n\n$f_{max}$ déterminée par analyse du système (analyseur de spectre)\n\nLa précision voulue permet de choisir l'ADC.\n\n# Gestion des mises en tension\n\nDans le cas d'un capteur non linéaire, privilégier un ADC à précision élevée.\n\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-05.png)\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-06.png)\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-07.png)\n\n> Sortie DAC arduino due: $[0.55V,2.75V]$\n\n# Ordonnancement\n\n## Micro C167\n\n### Échantillonnage\n\n$f = 20\\;MHz$\n\n$T_{CPU} = \\dfrac{1}{\\;20\\cdot 10^6\\;} = 50\\;ms$\n\nDu coup on a $200\\;ns$ d'attente à chaque début de séquence d'instructions.\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-08.png)\n\nSi la fréquence du moteur est : $f_{moteur} = 1'000\\; Hz\\;$ alors\n$$\nf_{ech} = 10 \\times f_{moteur} = 10\\; kHz\n$$\n\nTemps de conversion **min** de l'ADC (sur une voix) est de $9.7\\;\\mu s$ donc le nombre de conversion AD/s est de $\\dfrac{1}{\\;9.7\\cdot 10^{-6}\\;} = 100'000$ écahantillons.\n\nTemps de conversion **max** de l'ADC (sur une voix) est de $72.1\\;\\mu s$ donc le nombre de conversion AD/s est de $\\dfrac{1}{\\;72.1\\cdot 10^{-6}\\;} = 15'000$ écahantillons.\n\nDonc le processeur tourne à $10'000'000$ d'instructions par seconde (soit $10\\;Mips$)\n\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-09.png)\n\nIl faudra caractérisé (mesurer) les bornes min et max pour le DAC.\n\nSi $100\\;Hz$ ne suffit pas on pourrait passer à $200\\;Hz$ ce qui impliquerait que l'on divise par deux la fréquence d'échantillonnage à $5\\;kHz$ ce qui continue de respecter le thm de shannon.\n\n### Mise en oeuvre avec Timer et IRQ\n\n![](/assets/images/B3.CCTR.CM.Implementation.BB20230213-10.png)\n\n\n\n> Notes RKA du 2023/02/13 - End\n\n---","n":0.052}}},{"i":29,"$":{"0":{"v":"AOH - Aspect Organisation et Humains","n":0.408},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par C. Briand, B. Roussel\n\n---\n\n# À Retenir\n\n## Gestion par Processus\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-07.png)\n\n## Formules Methode Kanban\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-53.png)\n\n## Ordonnancement de Production\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-57.png)\n\n# Cours Magistraux\n\n- [[Gestion Production Logistique|B3.AOH.GestionProductionLogistique]]\n- [[Aspect Humains|B3.AOH.AH]]\n\n\n# Travaux Dirigés\n\n- [[TD1 - MRP/DRP/Ordonnancement|B3.AOH.GPL.TD1]]\n\n<!-- \n# Travaux Pratiques\n\n- [[...|...]] -->\n\n<!-- # Support de Cours\n\n## Fichiers Moodles\n\n### CM\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TD\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TP\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n## Scans\n\n### Blackbard\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n### GEA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### RKA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n -->\n","n":0.117}}},{"i":30,"$":{"0":{"v":"GPL","n":1}}},{"i":31,"$":{"0":{"v":"TD1 - MRP/DRP/Ordonnancement","n":0.577},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par C. Briand\n\n---\n\n> Notes RKA du 2023/01/19 - Start\n\n\n\n# Exercice 1 - MRP\n\n## Tableau\n\n![](/assets/images/B3.AOH.GPL.TD1.Sujet-Ex01-01.png)\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-01.png)\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-02.png)\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-03.png)\n\n## Méthode de Wagner Whitin\n\n![](/assets/images/B3.AOH.GPL.TD1.Sujet-Ex01-02.png)\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-04.png)\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-05.png)\n\n### Méthode de Bellman\n\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-06.png)\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-07.png)\n\n## Politique de fabrication\n\n![](/assets/images/B3.AOH.GPL.TD1.Sujet-Ex01-03.png)\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-08.png)\n\n# Exercice 2 - DRP\n\n> Attention le délai de fabrication est de deux périodes\n![](/assets/images/B3.AOH.GPL.TD1.Sujet-Ex02-04.png)\n\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-09.png)\n\n> Utiliser ce [fichier excel](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.AOH.GPL.TD1.DRP_vierge.xlsx)\n\n## 2-a) Tableau MRP\n\nDans le fichier excel,\n1. Remplir la formule du besoin net en C11 (pour toute la ligne 11)\n2. Remplir la formule du stock en C10\n3. Une fois ces lignes remplit, on obtient l'évolution des stocks sans intervention\n4. Remplir C13 par D12 (pour toute la ligne)\n5. Jouer avec la ligne 12 pour trouver les bonnes livraisons:\n    - Pour cela on prend le plus petit multiple du lot min (ici 20)supérieur au nombre dans le besoin net de la période suivante \n    - si le besoin est de 15 on garde un lot min de 20\n    - si le besoin est de 25 on prend un lot de 40\n6. Répéter ces étapes pour les autres centres de distribuiton\n\n## 2-b) Gestion de la flotte de véhicule\n\nLe nombre de véhicule en ligne 30 du fichier excel est déjà paramétré. Ce nombre est ici limité à 7 ce qui est aussi déjà implémenté en mettant en rouge tout nombre supérieur à 7.\n\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-10.png)\n![](/assets/images/B3.AOH.GPL.TD1.BB20230119-11.png)\n\nDans le fichier excel,\n1. Choisir un centre de distribution où l'on va livrer plustot\n2. Manuellement implémenter l'ajout de lot min dans la ligne de livraison pour la période concernée\n\n## 2-c) Besoin brut en PF1\n\nDans le fichier excel,\n1. Remplir le tableau violet\n2. Ligne 33 se calcule par la somme des commandes sur les trois distri\n3. B34 vaut 200 comme indiqué dans l'énoncé\n4. Appliquer les étapes pour le MRP comme vue précédemment\n\n\n\n> Notes RKA du 2023/01/19 - End\n\n---","n":0.058}}},{"i":32,"$":{"0":{"v":"Gestion Production Logistique","n":0.577},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par C. Briand\n\n---\n\n> Notes RKA du 2023/01/17 - Start\n\n\n\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-01.png)\n\n# 1- Introduction\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-02.png)\n\n## Définition: Logistique\n\n> Keywords:\n- logistique\n- planning\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-03.png)\n\n## Industrie et Chaine logistique\n\n> Keywords: \n- chaine logistique \n- réseau \n- maillon\n- frontières juridiques\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-04.png)\n\n## Structures de chaine logistique\n\n> Keywords:\n- réseau entreprise/logistique\n- entreprise étendue/virtuelle\n- type série/divergente/convergente/dyadique/réseau\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-05.png)\n\nLes arcs représentent à la fois les flux de produits mais aussi l'échange d'informations.\n\nPar contre, le flux de produits est unidirectionnelle contrairement aux échanges d'informations qui sont bidirectionnels.\n\n## Gestion de chaine logistique\n\n> Keywords:\n- Supply Chain Management (SCM)\n- système d'information \n- Progiciel de Gestion Intégré (PGI) / Enterprise Resource Planning (ERP)\n- ??? (BDD)\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-06.png)\n\n## Gestion par processus\n\n> Keywords:\n- Workflow\n- Processus\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-07.png)\n\nProcessus sont propres à l'entreprise (appliqué et adapté à son activité spécifique).\n\n<!-- extract chart -->\n\n## Systèmes d'informations et SCM\n\n> Keywords: \n- ERP / SCM / PLM\n- Manufacturing Execution Systeme (MES)\n- SCADA-HMI\n- SNCC-CN\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-08.png)\n\nMES est souvent utilisé dans les autres entreprises travaillant avec des automates.\n\nSCADA est composé d'une réplique 2D d'un outils pour gérer l'information\n\n## Niveaux de Décision\n\n> Keywords:\n- centres de décision\n- horizon/aggrégation de décision\n- stratégique/tactique/opérationnel\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-09.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-10.png)\n\n> La production est toujours régit par le triptyque : **coût**, **qualité** et **délai** !!!\n\nOn cherche aujourd'hui à intégrer (grâce au numérique) les trois niveaux (strat.tact./opér.) plustôt que de les séparer tant comme c'est le cas depuis longtemps.\n\n# 2- La 4ème Révolution Industrielle\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-11.png)\n\n## Un peu d'histoire\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-12.png)\n\n## Changement de paradigme\n\n> Keywords: \n- Modèles\n    - standardisation (taylor-fordien)\n    - variété\n    - réactivité\n    - global\n    - personnalisation de masse\n- Lean Manufacturing\n    \n![](/assets/images/B3.AOH.GPL.CM.Slide-13.png)\n\n## Les technologies supports\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-14.png)\n\n## Une vision globale\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-15.png)\n\n## Une vision centrée sur l'Homme\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-16.png)\n\n# 3- Robotique pour la logistique\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-17.png)\n\n## Facteurs du changement\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-18.png)\n\n## Exemples\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-19.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-20.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-21.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-22.png)\n\n# 4- Planification de la production et des approvisionnements\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-23.png)\n\n## Positionnement\n\n> Keywords:\n- besoin matières/en capacité\n- programmation prévisionnelle\n- méthode à flux poussés/tirés\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-24.png)\n\nFlux poussés = guidé par la prédiction\n\nFlux tirés = dynamique selon la demande\n\n## Manufacturing Resource Planning (MRP2)\n\n> Keywords:\n- Programme Directeur de Production (PDP)\n- Planification des Besoins en Composants (MRP)\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-25.png)\n\n## Calcul des Besoins Nets\n\n> Keywords:\n- Gammes (recette/protocol de production)\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-26.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-27.png)\n\n## Prise en compte des délais d'approvisionnement\n\n> Keywords:\n- délai d'approvisionnement/d'obtention\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-28.png)\n\n## Exemple: Fabrication d'une servante\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-29.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-30.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-31.png)\n\nLégendes:\n- BB: Besoin Brut\n- AD: À Disposition (stock)\n- BN: Besoin Net\n- OP: Ordre Production\n- SS: Stock Sécurité\n\nDécalage:\n$$\nOP_i = BN_{i+delai}\n$$\n\n## Intégration Planification production et distribution\n\n> Keywords:\n- synchronisation d'offres/demandes\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-32.png)\n\n## Exemple\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-33.png)\n\n## Détermination des commandes prévisionnelles\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-34.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-35.png)\n\nFormules:\n- Stockage\n    $$\n    Stock_i = Stock_{i-1} - BB_i + OP_{i-délai}\n    $$\n\n- Besoin Net\n    $$\n    BN_i = max(0 ; BB_i - Stock_{i-1} + SS_i)\n    $$\n\n# 5- Gestion d'inventaires\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-36.png)\n\n## Le stock: nature et fonctions\n\n> Keywords:\n- zéro stock\n- coincidence entre besoin et espace de production\n- stock de spéculation, d'approvisionnement/d'en-cours/de distribution\n- économie d'échelle\n- logique du juste-à-temps\n- gestion périodique/apériodique de la régulation\n- flux sortant interne/externe\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-37.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-38.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-39.png)\n\nLes bars en rouge représente les frontières juridiques de l'entreprise.\n\nUn flux sortant interne est une demande dépendante de la production (e.g. flêche à l'intérieur de la frontière juridique).\nUn flux sortant externe est une demande indépendante de la production.\n\n## Coûts associés à un stock\n\n> Keywords:\n- coûts d'acquisition/de possession/de rupture (de pénurie)\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-40.png)\n\n## Problématique\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-41.png)\n\n## Heuristique\n\n### Lot for Lot (LfL)\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-42.png)\n\n### Economic Order Quantity (EOQ)\n\n> Keywords:\n- Formule de Wilson\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-43.png)\n\nHypothèse:\n- La demande est constante de $k$ en moyenne.\n\nCoût de stockage sur la période $T$:\n-   $$\n    C(T) = \\dfrac{\\;C_c\\;}{T} + C_p\\;\\dfrac{\\;kT\\;}{2}\n    $$\n- c'est le cout de commande plus le cout de possession\n\n![](/assets/images/B3.AOH.BB20230117-1.png)\n\nLe minimum est obtenu pour:\n$$\nd_T\\;C(T) = 0 \\iff T^* = \\sqrt{\\dfrac{\\;2C_c\\;}{kC_p}} \\quad\\wedge\\quad Q^* = kT^* = \\sqrt{\\dfrac{\\;2kC_c\\;}{C_p}} \n$$\n\n## Méthode Exacte/Wagner\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-44.png)\n![](/assets/images/B3.AOH.BB20230117-2.png)\n![](/assets/images/B3.AOH.BB20230117-3.png)\n![](/assets/images/B3.AOH.BB20230117-4.png)\n![](/assets/images/B3.AOH.BB20230117-5.png)\n![](/assets/images/B3.AOH.BB20230117-6.png)\n![](/assets/images/B3.AOH.BB20230117-7.png)\n\nLa politique optimale peut être obtenue par l'algorithme de Bellman sans circuit en déterminant le chemin le plus court reliant le sommet 6 au sommet 13.\n\n## Planification à horizon glissant\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-45.png)\n\n## Autre exemple: alimentation automatique\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-46.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-47.png)\n\n\n\n\n> Notes RKA du 2023/01/17 - End\n\n---\n\n> Notes RKA du 2023/01/23 - Start\n\n\n\n\n# 6- Juste-à-Temps (JAT)\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-48.png)\n\n## Pourquoi le JAT\n\n> Keywords:\n- flux tirés (dépendance sur la demande)\n- petite/grande série\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-49.png)\n\nEn gestion à flux tirés (ou tendus), la production est **égale** à la demande.\n\n## Le paradigme JAT\n\n> Keywords:\n- réactivité\n- rationalisation\n- flexibilité quantitative/qualitative\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-50.png)\n\n## La méthode Kanban\n\n> Keywords: \n- kanban = étiquette\n\n### Idée\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-51.png)\n\n### Système à une boucle\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-52.png)\n\n### Formules\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-53.png)\n\n## Exemple: Plateforme Logistique\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-54.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-55.png)\n\n# 7- Ordonnancement\n\n> Keywords:\n- Atelier\n- Gamme de fabrication = recette/protocole/processus\n- Nommenclature = ingédrient\n- Travail(_Job_)\n- Operation = Tâche\n- Durée totale (_completion_)\n- Plus Grand Retard (_lateness_)\n- Cheminement unique/multiple/libre\n- Machines Parallèles/Flow Shop (hybride)/Job Shop/Open Shop\n- Temps de préparation \n\n![](/assets/images/B3.AOH.GPL.CM.Slide-56.png)\n\n## Contexte\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-57.png)\n\n- Gamme = séquence d'opérations $(i,j)$ du travail i\n- [NP-Difficles](https://waytolearnx.com/2019/03/difference-entre-un-probleme-np-complet-et-np-difficile.html) = existe pas de solution non polynomiale\n\n## Classification\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-58.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-59.png)\n\nOpen Shop surtout utilié dans les chaines de conformités où le produit doit passer par une batterie de tests sans ordre particulier.\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-60.png)\n\n## Machine Seule\n\n> Keywords:\n- SPT - Short Processing Time\n- Règle de Jackson\n- EDD - Earliest Due Date = EDF - Earliest Deadline First\n- Règle de Hodgson-Moore\n- Date de lancement\n- Date d'échéance (_Release Date_)\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-61.png)\n\n### Exemple: Une seule cellule robotisée\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-62.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-01.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-02.png)\n\n## Machine en parallèle\n\n> Keywords:\n- Heuristique LPT (_Longest Processing Time first_)\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-63.png)\n\n### Exemple\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-63-ExampleCase.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-03.png)\n\n$C_{max} = \\max_i f_i = \\max_i c_i \\quad$ où $c_i$ completion time of job $i$\n\n\n## Flow Shop\n\n> Keywords: contrainte de précédence ; diagramme de Gant\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-64.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-04.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-05.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-06.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-07.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-08.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-09.png)\n\n- $p_i$: processing time of job $i$\n\nIllustration du max:\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-10.png)\n\nIllustration du min:\n![](/assets/images/B3.AOH.GPL.CM.BB20230123-11.png)\n\n\n\n\n> Notes RKA du 2023/01/23 - End\n\n---\n\n> Notes RKA du 2023/01/31 - Start\n\n\n\n\n\n### Algorithme de Johnson\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-65.png)\n\n### Exemple\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-66.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230131-01.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230131-02.png)\n\nLes opérations de la machine 1 sont toutes critiques !\n\n## Job Shop\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-67.png)\n\nLes traits pleins représente une précédence.\nLes pointillés représente les opérations qui se font sur une même machine.\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-68.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230131-03.png)\n\nLes flèches horizentales indiquent que Travail 1 est en cours et Travail 2 en attente.\nLes flèches verticales indiquent que Travail 2 est en cours et Travail 1 en attente.\nLes flèches diagonales indiquent que les deux Travaux sont en cours en même temps.\n\n![](/assets/images/B3.AOH.GPL.CM.BB20230131-04.png)\n\nLe chemin C2 est optimal avec une longueur de 14 alors que le chemin C1 a une longueur de 16.\n\nOn pourrait faire le même exercice en 3D mais alors il n'est plus vrai que la diagonale est optimale en 3D.\n\n### Algorithme de Jackson\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-69.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230131-05.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230131-06.png)\n\n## SGS - Serial Generation Scheme\n\n> Keywords: itération ; tâche éligible capacité restante\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-70.png)\n\n### Exemple 1\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-71.png)\n![](/assets/images/B3.AOH.GPL.CM.Slide-72.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230131-07.png)\n\nMais il y a plus optimale:\n![](/assets/images/B3.AOH.GPL.CM.Slide-73.png)\n\n### Exemple 2\n\n![](/assets/images/B3.AOH.GPL.CM.Slide-74.png)\n![](/assets/images/B3.AOH.GPL.CM.BB20230131-08.png)\n\nCf [Excel File B3.AOH.GPL.CM.ORDO_vierge.xlsx](https://github.com/TunnARK/UT3-AURO-2223-S10-Dendron/blob/main/vault/assets/B3.AOH.GPL.CM.ORDO_vierge.xlsx)\n\n\n> Notes RKA du 2023/01/31 - End\n\n---","n":0.032}}},{"i":33,"$":{"0":{"v":"AA - Apprentissage Automatique","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Muller, T. Pellegrini\n\n---\n\n# À Retenir\n\n## Bilan Choix Fonction Coût/Activation\n\n![](/assets/images/B3.AA.CM.Slide1-103.png)\n\n## Résumé CNN\n\n![](/assets/images/B3.AA.CM.CNN.Slide-78.png)\n\n\n# Cours Magistraux\n\n- [[B3.AA.CM.Intro]]\n- [[B3.AA.CM.CNN]]\n- [[B3.AA.CM.RNN]]\n- [[B3.AA.CM.Limites]]\n\n\n# Travaux Dirigés\n\n- [[TD1 - Autodiff/MLP/Rétroprogation|B3.AA.TD1.Autodiff-MLP-Retropropagation]]\n- [[TD2 - Convolution/CNN|B3.AA.TD2.Convolution]]\n- [[TD3 - RNN|B3.AA.TD3.RNN]]\n- [[TD4 - Recapitulation|B3.AA.TD4.Recap]]\n\n# Travaux Pratiques\n\n> Les TPs se feront sur [CoLab](https://colab.research.google.com/)\n\n<!-- - [[...|...]] -->\n\n<!-- # Support de Cours\n\n## Fichiers Moodles\n\n### CM\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TD\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TP\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n## Scans\n\n### Blackbard\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n### GEA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### RKA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n -->\n","n":0.109}}},{"i":34,"$":{"0":{"v":"TD4","n":1}}},{"i":35,"$":{"0":{"v":"Recap","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Muller, T. Pellegrini\n\n---\n\n> Notes RKA du 2023/02/13 - Start\n\n\n\n\n# Exercice 1: étapes d'apprentissage\n\n![](/assets/images/B3.AA.TD4.Recap.Sujet-Ex01.png)\n\n- Epochs = on a vu toute les batch au moins une fois\n- Pour eviter de surapprendre on va aussi mesurer la validation sans la mettre a jour\n- Surapprentissage = model n'arrive plus a predire des objets generaux car trop different de ce qu'il apprit par coeur\n- Exemple typique: un étudiant qui apprend par coeur ces exos de TD et n'arrive pas à faire l'examen car le sujet est trop différent de celui du TD\n- Earlystopping = si validation ne diminue plus on va arreter l'apprentissage\n- Dropout =\n- Pour une classification, la loss diminue mais pas l'accurancy (nb error/nb prediction) pourquoi ?\n    - Souvent dans les classifications (surtout les binaires) on va être intéressé par d'identifier une seule classe\n    - Precision \"malade\" = Nb Correct / Nb Predic\n    - Rappel \"malade\" = Nb Correct / il fallait predire\n    - Cross Entropy = evalue aussi sa confiance en ses resultat donc la loss diminue car il gagne en confiance mais cela ne change pas ses décisions donc son acc ne change plus\n\n    ![](/assets/images/B3.AA.TD4.Recap.BB20230213-01.png)\n    ![](/assets/images/B3.AA.TD4.Recap.BB20230213-02.png)\n- Data Loarders = charger les données et les adaptés au réseau si besoin\n- Init Model = Donne les composants du reseau\n- Puis on ajoute dans le code un forward pour structurer le model en expliquant où appliquer les filtres et quelle fonction d'activation\n    ![](/assets/images/B3.AA.TD4.Recap.BB20230213-03.png)\n- Fuite de données\n    ![](/assets/images/B3.AA.TD4.Recap.BB20230213-04.png)\n\n\n\n# Exercice 2: \n\n![](/assets/images/B3.AA.TD4.Recap.Sujet-Ex02.png)\n\n- Classification d'un article de journal sur sa position politique\n    - Il faut des étiquettes et définir les catégories\n    - On définit un RNN (car c'est le seul qui n'a pas d'entrée fixe donc adapté aux articles de taille variable)\n        - On fait du one-hot encoding pour chaque mot (eviter le soucis de donner un poids et donc devoir specifier un ordre dans le lexique)\n        - On applique ensuite un [[LSTM|B3.AA.CM.RNN#long-short-term-memory-networks-lstms]]\n        ![](/assets/images/B3.AA.TD4.Recap.BB20230213-05.png)\n\n\n\n- Détection de nodules\n    - CNN en 3D donc les filtres seront aussi \n    - mais il risque d'avoir des problèmes de métriques (un oiseau chante vs il y a un oiseau) [problème de référence multiple]\n    ![](/assets/images/B3.AA.TD4.Recap.BB20230213-06.png)\n\n\n\n- Audio-Captioning\n    - encodeur/decodeur avec une sortie différente de l'entrée (many-to-many)\n\n\n\n- Question/Réponse:\n    - [[LSTM|B3.AA.CM.RNN#long-short-term-memory-networks-lstms]] on peut implémenter un encodeur et un decodeur avec un sortie de meme taille que l'entrée\n    - Comment collecter/constituer les données pour ce problème ?\n        - On lui donne la réponse à l'agent de choisir la question\n        - On a une doc contenant les réponses il ne reste plus qu'à avoir les questions\n        - On peut générer des questions ou bien récupérer des questions déjà enregistrer par le passé\n\n\n\n# Exercice 3:\n\n![](/assets/images/B3.AA.TD4.Recap.Sujet-Ex03-01.png)\n![](/assets/images/B3.AA.TD4.Recap.Sujet-Ex03-02.png)\n\n![](/assets/images/B3.AA.TD4.Recap.BB20230213-07.png)\n\nBiais de la bouge : si sourire probabilité forte de ne pas etre criminel\n\n\n\n> Notes RKA du 2023/02/13 - End\n\n---","n":0.046}}},{"i":36,"$":{"0":{"v":"TD3","n":1}}},{"i":37,"$":{"0":{"v":"RNN","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Muller, T. Pellegrini\n\n---\n\n> Notes RKA du 2023/02/08 - Start\n\n# Exercice 1: RNN \"Elman\"\n\n![](/assets/images/B3.AA.TD3.RNN.Sujet-Ex-01.png)\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-01.png)\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-02.png)\n\nPour $h_{-1}$ il existe un argument sur PyTorch (par défaut ce sera un vecteur de zéro).  (On peut même demander d'entrainer ce vecteur.)\n\nExemple de réseau qui nécessite tous les sorties: générer du texte.\n\nPour générer des mots c'est plus intéressant d'utiliser cette fonction :\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-03.png)\n\nExemple de réseau qui ne nécessite que la dernière sortie: detecter des sentiments à partir d'un texte, prédire le projet point sur une trajectoire, ...\n\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-04.png)\n\n\n\n# Exercice 2: Implantation Pytorch d'un RNN \"à la main\"\n\n![](/assets/images/B3.AA.TD3.RNN.Sujet-Ex-02-01.png)\n![](/assets/images/B3.AA.TD3.RNN.Sujet-Ex-02-02.png)\n\n## Question 1:\n![](/assets/images/B3.AA.TD3.RNN.Sujet-Ex-02-03.png)\n\n## Question 2:\n![](/assets/images/B3.AA.TD3.RNN.Sujet-Ex-02-04.png)\n![](/assets/images/B3.AA.TD3.RNN.Sujet-Ex-02-05.png)\n\n\n# Exercice 3: Backprop Through Time (BPTT)\n![](/assets/images/B3.AA.TD3.RNN.Sujet-Ex-03.png)\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-05.png)\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-06.png)\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-07.png)\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-08.png)\n![](/assets/images/B3.AA.TD3.RNN.BB20230208-09.png)\n\n\n\n\n> Notes RKA du 2023/02/08 - End\n\n---","n":0.089}}},{"i":38,"$":{"0":{"v":"TD2","n":1}}},{"i":39,"$":{"0":{"v":"TD2 - Convolution","n":0.577},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Muller, T. Pellegrini\n\n---\n\n> Notes RKA du 2023/02/02 - Start\n\n\nConvolution fait une synthese local de la region couverte par le kernel.\n\n# Exercice 1: VGG16\n\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex01-01.png)\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex01-02.png)\n\n## Question 1\n\n**Combien de paramètres ?**\n\n$\\text{nb params}\\\\\n= \\big(\\text{kernel cols}\\times\\text{kernel lines}\\times\\text{canals}+\\text{bias}\\big)\\times\\text{number of filters}\\\\\n= (3 \\times 3 \\times 3 + 1) \\times 16 = 448$\n\n## Question 2\n\n1. **Quelle fonction d'activation pour classification binaire ?**\n\n    On peut mettre n'importe qu'elle fonction entre 0 et 1 (par exemple [[sigmoide|B3.AA.CM.Intro#activation-sigmoide]]) puis une loss type [[BCE|B3.AA.CM.Intro#bce---binary-cross-entropy]]\n\n2. **Même question pour une classification avec 10 classes mutuellement exclusives à\ndistinguer.**\n    Avec plusieurs sorties, on utilise [[softmax|B3.AA.CM.Intro#softmax]]\n\n3. Toujours avec 10 classes différentes, comment coder ces classes pour un reseau de neuronnes ? Donner le nom de ce type d'encodage.\n\n    - Dans des applications discrètes (type catégories d'age pour les assurances), on définit un vecteur de taille 10 avec des 0 et un 1 pour la classe à prédire.\n    - On appele cette encodage le \"**_one-hot encoding_**\".\n\n4. **Donner deux pré-traitements possibles sur des images données en entrée d'un réseau de neurones.**\n\n    - Il faut normaliser l'image autrement le réseau de neuronnes peut être sensible ou variation de couleur/contraste\n    - Une méthode de normalisation serait de diviser par le nb total de valeurs possible pour avoir des valeurs entre 0 et 1\n    - Sinon on etale le spectre de l'image pour que la valeur min soit mise sur 0 et la valeur max soit mise sur 255.\n    - L'autre pré-traitement possible serait de s'assurer que chaque entrée soit de meme taille.\n\n## Question 3\n\n1. **Combien de classes à prédire ?**\n\n    - $1000$ classes vu que la sortie est de $1 \\times 1 \\times 1000$\n\n2. **Quelle loss utiliser sachant que les classes sont exclusivwes ?**  \nLa _cross-entropy loss_ se définit comme suit:\n$$\n\\mathcal{L}(y,\\hat y) = -log(\\hat y_c) = \\mathbb{I}\\{ i = c \\} \\overrightarrow{y} \\; log \\overrightarrow{\\hat y} \n$$\nC'est ici qu'il est intéréssant d'avoir du \"**_one-hot encoding_**\".\n\n3. Quelle est le rôle du [[maxpooling|B3.AA.CM.CNN#max-pooling]] ?\n\n    - Le rôle est de synthétiser l'entrée pour n'extraire que le plus important à la fin.\n    - C'est pourquoi on l'applique après plus couches de convolution (à noter que sur l'image les pavés représentent le résultat après application du maxpooling ou des autres fontions en légende).\n    - Voir ce site pour plus d'informations [step-by-step-vgg16-implementation-in-keras-for-beginners](https://towardsdatascience.com/step-by-step-vgg16-implementation-in-keras-for-beginners-a833c686ae6c).\n\n\n# Exercice 2: Convolution 1-d\n\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex02-01.png)\n\n1. Calculer le résultat de la [[convolution|B3.AA.CM.CNN#implémentation]] sur $x$ avec le kernel $w$.\n\n    - On assume pas padding et un slide de 1 et du coup une sortie de taille 2x1\n    - $x = [2, 3, 0, -1]$\n    - $w = [1, 2, -1]$\n    - $y = [ 1 \\times 2 + 2 \\times 3 + -1 \\times 0\\;,\\; 1 \\times 3 + 2 \\times 0 + -1 \\times -1 ] = [8, 4]$\n\n2. **Donner la matrice $W$ pour une multiplication $y = W x$**\n\n    - $\\begin{bmatrix} 8\\\\ 4\\end{bmatrix} = \\begin{bmatrix}1&2&-1&0\\\\0&1&2&-1\\end{bmatrix}\\times\\begin{bmatrix}2\\\\3\\\\0\\\\-1\\end{bmatrix}$\n\n3. **Quelle est la taille du résultat de cette convolution ?**\n    \n    - Elle est de $2\\times 1$.\n\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex02-02.png)\n\n1. Calculer $z = W^t\\times y$ (sans y transposée)\n\n    - Ceci est la **convolution transposée**\n    - Unet\n\n2. $4 \\times 1$\n\n<!-- # Exercice 3: Champ récepteur\n!!!\n... -->\n\n# Exercice 4: Convolution 2D Standard\n\n## Question 1)\n\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex04-01.png)\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex04-02.png)\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex04-03.png)\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex04-04.png)\n\n\n1. **Dimension du résultat ?**\n\n    - Le résultat de cette convolution serait de $4\\times 2$\n\n2. **Quel est le tenseur résultat `m(input,w)` ?**\n\n    ![](/assets/images/B3.AA.TD2.Convolution.BB20230202-1.png)\n    $a = 1 +2\\times 1/2 + 5/3 + 3/2 + (-1)\\times(-1) + 1 + 5/3 + 3/2 = 31/3$\n\n3. **Application matricielle:**\n\n    ![](/assets/images/B3.AA.TD2.Convolution.BB20230202-2.png)  \n\n\n<!-- ## Question 2)\n\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex04-05.png)\n![](/assets/images/B3.AA.TD2.Convolution.Sujet-Ex04-06.png) -->\n\n\n\n\n> Notes RKA du 2023/02/02 - End\n\n---","n":0.041}}},{"i":40,"$":{"0":{"v":"TD1","n":1}}},{"i":41,"$":{"0":{"v":"TD1 - Autodiff/MLP/Retropropagation","n":0.577},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par [P. Muller](philippe.muller@irit.fr)\n\n---\n\n> Notes RKA du 2023/01/23 - Start\n\n\n\n\n# Exercice 1: Fonction logistique-sigmoide\n\n![](/assets/images/B3.AA.TD1.Sujet-Ex01.png)\n\n![](/assets/images/B3.AA.TD1.BB20230123-01.png)\n![](/assets/images/B3.AA.TD1.BB20230123-02.png)\n![](/assets/images/B3.AA.TD1.BB20230123-03.png)\n\nGraphe de calcul pour $y = f(x,a) = \\dfrac{1}{\\; (1+e^{-ax}) \\;}$\n    \nMéthode pour faire le graphe de calcul:\n- Décomposer les opérations de telle sorte que chaque composante/noeux soit une opération ayant dérivée simple\n- Privilégier le mode \"reverse\"\n\nRemarque:\n- La fonction $y$ est symmétrique p.r.à $x$ et $a$ c'est pourquoi il n'est pas nécessaire de refaire les calcus pour la dérivée en $a$\n- L'intérêt du \"reverse\" c'est qu'il simplifie les calculs\n    - l'algo possède des outils matriciels pour calculer la dérivée de la fonction d'activation pour calculer la dérivée\n\n# Exercice 2: Perceptron Multicouche pour la régression\n\n![](/assets/images/B3.AA.TD1.Sujet-Ex02.png)\n![](/assets/images/B3.AA.TD1.Sujet-Ex02-02.png)\n![](/assets/images/B3.AA.TD1.Sujet-Ex02-03.png)\n\nLexique:\n- $a_i$: variable de pré-activation\n- $h_i$: variable de sortie des neuronnes\n- $b_i$: variable du biais\n- $\\sigma(x) = \\dfrac{1}{\\; 1+e^{-x} \\;}\\;$ : fonction sigmoïde \n\n![](/assets/images/B3.AA.TD1.BB20230123-04.png)\n![](/assets/images/B3.AA.TD1.BB20230123-05.png)\n\nIci on peut faire le graphe de calcul pour remonter (sinon on peut retrouver par exemple $w_{1A}$ en regardant les équations).\n\nMais ATTENTION ici les calculs prennent encore en compte les valeurs non corrigés par le gradient du loss.\n \n![](/assets/images/B3.AA.TD1.BB20230123-06.png)\n![](/assets/images/B3.AA.TD1.BB20230123-07.png)\n\nEn général (et pour un réseaux connecté) la dérivée se calcule ainsi:\n$$\n\\partial w_j = \\delta \\cdot w_{j+1} \\cdot \\text{activation}' \\cdot \\text{entrée neuronne courant}'\n$$\n\nEn faisant cela passe de l'erreur précédente (i.e. $0.3$) à une erreur de $0.1$.\n\nRemarques sur le taux d'apprentissage:\n- $\\alpha$ augmente la norme du gradient donc le gradient donne la direction et $\\alpha$ la vitesse de convergence\n- ainsi on va vouloir que $\\alpha$ soit grand à l'initialisation (si cette initialisation est éloignée de l'objectif) pour ensuite le rendre évolutif \n\n![](/assets/images/B3.AA.TD1.BB20230123-08.png)\n\n# Exercice 3: Mise en oeuvre d'une chaîne de classification\n\n![](/assets/images/B3.AA.TD1.Sujet-Ex03.png)\n\n\n\n> Notes RKA du 2023/01/23 - End\n\n---","n":0.06}}},{"i":42,"$":{"0":{"v":"CM","n":1}}},{"i":43,"$":{"0":{"v":"RNN","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Muller, T. Pellegrini\n\n---\n\n> Notes RKA du 2023/02/06 - Start\n\n\n\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-01.png)\n\n# Introduction\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-02.png)\n\n# Motivation\n\n## Analyse de sentiments\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-03.png)\n\n## Séries temporelles\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-04.png)\n\n## Reconnaissance de la parole\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-05.png)\n\n## Traduction automatique\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-06.png)\n\n## Génération de légendes à partir d'une image\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-07.png)\n\n## Création de résumés\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-08.png)\n\n## Entrée structurée\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-09.png)\n\n## Applications à taille variable\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-10.png)\n\n# Modélisation de séquences\n\n## Problème one-to-one\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-11.png)\n\n## Problème one-to-many\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-12.png)\n\n## Problème many-to-one\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-13.png)\n\n## Problème many-to-many\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-14.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-15.png)\n\n# Réseaux de Neurones Récurrents (RNN)\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-16.png)\n\nh ???\n\n## Illustration\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-17.png)\n\n## Formules\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-18.png)\n\n## Paramètres partagés\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-19.png)\n\n# Rétropropagation à travers le temps\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-20.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-21.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-22.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-23.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-24.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-25.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-26.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-27.png)\n\n# Limites des RNN\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-28.png)\n\n# Dépendances à longue distance\n\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-29.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-30.png) -->\n![](/assets/images/B3.AA.CM.Slide3.20230206-31.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-32.png)\n\n## Explosion du gradient (gradient clipping)\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-33.png)\n\n## Dissipation du gradient\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-34.png)\n\n## Remarques\n\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-35.png) -->\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-36.png) -->\n\n> Keywords:\n- connections résiduelles\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-37.png)\n\n# Mémoire (cell) dans le temps\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-38.png)\n\n## Portes\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-39.png)\n\n## Long Short Term Memory Networks (LSTMs)\n\n### LSTM Classique\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-40.png)\n\n### LSTM avec 4 couches cachées\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-41.png)\n\n### LSTM Idée principale\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-42.png)\n\n### LSTM Portes\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-43.png)\n\n### Produit Hadamard\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-44.png)\n\n### Forget Gate\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-45.png)\n\n### Input Gate Layer\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-46.png)\n\n### Mise à jour de la mémoire\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-47.png)\n\n### Output Gate Layer\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-48.png)\n\n> Le LSTM a pour advantage de ne pas présenter les problèmes de dissipation du gradient.\n\n## LSTMs Bidirectionnels\n\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-49.png) -->\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-50.png) -->\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-51.png) -->\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-52.png) -->\n![](/assets/images/B3.AA.CM.Slide3.20230206-53.png)\n\nCeci peut etre utile pour comprendre une phrase en allemand où souvent les deniers d'une phrase sont nécessaires pour comprendre le contexte de la phrase. Le bidirectionnelle pourra permettre de prendre en compte les derniers mots pour contextualiser les premiers mots.\n\n### Illustration\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-54.png)\n\n### Gate Recurrent Units (GRUs)\n\n#### Principe\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-55.png)\n\n#### Illustration\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-56.png)\n\n#### Formules\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-57.png)\n\n#### Remarques\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-58.png)\n\n# RNNs génératifs\n\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-59.png) -->\n![](/assets/images/B3.AA.CM.Slide3.20230206-60.png)\n\n## Illustration\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-61.png)\n\nOn réintroduit en entrée les charactères prédits précédemment.\n\n## Exemple Textes Journalistiques\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-62.png)\n\n## Exemple d'utilisation\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-63.png)\n\nPour la traduction automatique et la génération des résumés, la taille de sortie n'est pas la meme que l'entrée. Ceci se modélise par du seq2seq\n\n## Modèle Sequence to Sequence (seq2seq)\n\n> Aussi appelé:\n- n2n\n- bout en bout\n- encodeur/decodeu\n\n> cf. Réseau d'attention\n\n### Illustration\n\n> Keywords: génération de séquence\n\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-64.png) -->\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-65.png) -->\n![](/assets/images/B3.AA.CM.Slide3.20230206-66.png)\n\nComment le réseau s'arrête de prédire ?\n\nIl faut qu'il anticipe à quel moment la séquence s'arrête. Donc il prédira aussi un caractère \"stop\".\n\n### Entraînement et Test\n\n> Keywords:\n- prédiction structuré\n- Negative Log Likelihood (vraisemblance)\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-67.png)\n\n### Décodage\n\n> Keywords:\n- Score optimal / problème combinatoire\n- Approche glouton (greedy search) \n- Beam search\n- Top-K sampling\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-68.png)\n\nLe décodage va chercher la meilleur combinaison des sorties prédites (ces sorties sont des vecteurs de probabilités). Il existe plusieurs stratégies de décodage :\n- La Greedy Search va prendre le mot le plus probable localement (sans y revenir par après) comme premier mot et construire p.r.à ce mot.\n- Problème si ce premier n'est pas le bon (sans être corrigé), le reste sera mauvais\n- C'est pourquoi dans le Beam Search on va garder une liste des mots les plus possibles\n\n#### Recherche Exhaustive\n\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-69.png) -->\n<!-- ![](/assets/images/B3.AA.CM.Slide3.20230206-70.png) -->\n![](/assets/images/B3.AA.CM.Slide3.20230206-71.png)\n\n#### Greedy Decoding\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-72.png)\n\n#### Beam Search\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-73.png)\n![](/assets/images/B3.AA.CM.Slide3.20230206-74.png)\n\n#### Top-p Sampling\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-75.png)\n\nTirer parmi les k etaptes les plus probables va permettre d'introduire un peu de créativité dans la génération de texte.\n\n# Quiz\n\n![](/assets/images/B3.AA.CM.Slide3.20230206-76.png)\n\nLe nettoyage d'image ne sera pas fait avec du seq2seq.\n\nAutre exmple, le Q&A avec la particularité que l'on encode la question mais on décode la réponse.\n\n\n\n\n> Notes RKA du 2023/02/06 - End\n\n---","n":0.046}}},{"i":44,"$":{"0":{"v":"Limites","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Muller, T. Pellegrini\n\n---\n\n> Notes RKA du 2023/02/06 - Start\n\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-01.png)\n\n# Sommaire\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-02.png)\n\n# Limites\n\n> Keywords:\n- No free lunch theorem (Wolrpert)\n- modèle boite noire\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-03.png)\n\n# Alerte Hype\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-04.png)\n\n# Problèmes persistants et Objectifs\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-05.png)\n\n## Quizz\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-06.png)\n\n# Problème des biais\n\n## Exemple Bombardier\n<!-- ![](/assets/images/B3.AA.CM.Slide4.20230206-07.png) -->\n![](/assets/images/B3.AA.CM.Slide4.20230206-08.png)\n\n## Traitement d'image\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-09.png)\n\n## Reconnaissance faciale\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-10.png)\n\n## Justice prédictive\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-11.png)\n\n## Traduction automatique\n\n<!-- ![](/assets/images/B3.AA.CM.Slide4.20230206-12.png) -->\n![](/assets/images/B3.AA.CM.Slide4.20230206-13.png)\n\n## Mesures d'équité\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-14.png)\n\n## Machine à discrimination\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-15.png)\n![](/assets/images/B3.AA.CM.Slide4.20230206-17.png)\n\n### Chatbot\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-18.png)\n\n### Pourquoi ?\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-19.png)\n\n## Biais dans le cycle de développement ML\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-20.png)\n![](/assets/images/B3.AA.CM.Slide4.20230206-21.png)\n\n# Problèmen de robustesse\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-22.png)\n\n## Exemples adversariaux\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-23.png)\n\n## Attaque de systèmes\n\n### Vehicule autonome\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-24.png)\n\n### Reconnaissance vocale\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-25.png)\n\n### Analyse du sentiment\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-26.png)\n\n### Illustration\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-27.png)\n\n### Débugger\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-28.png)\n\nRéduire la longueur de la question pour détecter le fait que trop souvent lorsqu'on pose une question contenant le mot fleur le système déduit quand demande la couleur de la fleur.\n\n## Interpretabilité\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-29.png)\n\n## Objectifs\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-30.png)\n\n## Régression linéaire\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-31.png)\n\n## Arbre de décision (Random Forest)\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-32.png)\n\n## Plus proche voisins\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-33.png)\n\n# Modèles complexes\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-34.png)\n\n## Saliency Map\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-35.png)\n\n### Pixels pertinents\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-36.png)\n\n### Mots pertinents\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-37.png)\n\n## Perturbation locale\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-38.png)\n![](/assets/images/B3.AA.CM.Slide4.20230206-39.png)\n\n## Autres méthodes\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-40.png)\n\n# Données annotées\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-41.png)\n\n# Processus global\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-42.png)\n\n# Fiabilité des données\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-43.png)\n\n# Conclusion\n\n![](/assets/images/B3.AA.CM.Slide4.20230206-44.png)\n\n\n\n> Notes RKA du 2023/02/06 - End\n\n---","n":0.078}}},{"i":45,"$":{"0":{"v":"Introduction à l'apprentissage automaique","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par T. Pellegrini\n\n---\n\n> Notes RKA du 2023/01/18 - Start\n\n\n\n![](/assets/images/B3.AA.CM.Slide1-001.png)\n\n# Modalités\n\n![](/assets/images/B3.AA.CM.Slide1-002.png)\n\n# Objectifs généraux\n\n![](/assets/images/B3.AA.CM.Slide1-003.png)\n\nSi pas assez de données plustôt utiliser des graphes ou des mélanges de gaussiennes (AI n'est pas toujours le plus optimale).\n\n# Bibiliographie\n\n![](/assets/images/B3.AA.CM.Slide1-004.png)\n\n# Aperçu\n\n> Keywords:\n- MLP - Multi-Layer Perceptron\n- CNN - Connbolutional Neural Networks\n- RNN - Recurrent Neural Networks\n- seq2seq\n\n![](/assets/images/B3.AA.CM.Slide1-005.png)\n\nPerceptron est la base d'un réseau de neuronne.\n\nOn peut combiner un CNN avec un RNN.\n\nLes modèles séquences à séquences peuvent ne pas être non récurrent.\nLes transformeurs sont des MLP sans récurrences.\n\nLimites:\n- Interpratibilité: peut-on interpréter le resultat final\n- Biais: si les données fournis sont biaisées le resultat sera biaisées aussi donc il faut mettre en place des corrections pour les eviter si possible\n- Exemple adversaires: données un modèle erroné pour tester l'algo ???\n\n# Sommaire\n\n![](/assets/images/B3.AA.CM.Slide1-006.png)\n\n# I- Introduction\n\n## Qu'est-ce que l'apprentissage par Machine Learning ?\n\n![](/assets/images/B3.AA.CM.Slide1-007.png)\n\n### Définition\n\n![](/assets/images/B3.AA.CM.Slide1-008.png)\n\n### Terminologie\n\n> Keywords:\n- Observations\n- Attributs (Features)\n- Etiquettes (Labels)\n- Corpus (Train) \n\n![](/assets/images/B3.AA.CM.Slide1-009.png)\n\nExemple: trier des e-mails\n- Données = titres + texte d'email\n    - correspondent aux **observations**\n- Labels = Binaire --> Spam/Non-Spam\n    - y = +1 pour Spam\n    - y = 0  pour Non-Spam (**dans un perceptron on mettre à -1**)\n- Comment encoder le texte ?\n    - on cherche à travailler avec des réelles (il existe des algo binaires mais en général $x\\in\\mathbb{R}$)\n    - mais on ne veut pas biaisé l'attribution d'un nombre à un mot en y introduisant un ordre comme dans le cas où on liste les N mots présents dans les emails auquels on associe un nombre entier de $0$ à $N-1$\n    - ainsi on va préférer donner un vecteur de taille $N$ remplis de $0$ sauf pour la position du mot dans la liste de mots\n    \nAutre exemple: classification de chiffres manuscrites\n\n\n### Paradigmes d'apprentissage\n\n![](/assets/images/B3.AA.CM.Slide1-010.png)\n\n### Exemples Apprentrissage Supervisée\n\n> Keywords: Classification ; Régression\n\n![](/assets/images/B3.AA.CM.Slide1-011.png)\n\nUne classification s'applique à des problèmes discret (prédiction de classe) alors que la régression s'applique aux problèmes d'estimation on cherche à calculer un score (prédiction du cours du blé).\n\n## Deep Learning\n\nL'IA est composé de Machine Learning.\n\nLe Deep Leaerning une branche du Machine Learning où les réseaux de neurons sont profond (à plusieurs couches) [peut aussi être sur d'autres niveaux que sur les réseaux de neurones].\n\nOn ne sait pas encore à partir de quel seuil un réseau est profond.\n\n> Keywords: niveaux d'abstraction\n\n![](/assets/images/B3.AA.CM.Slide1-012.png)\n\n### Avant Gout - MLP/DNN\n\n> Keywords:\n- MLP - Multi-Layer Perceptron\n- FCNN - Fully Connected Neural Network\n- DNN - Deep Neural Network\n\n![](/assets/images/B3.AA.CM.Slide1-013.png)\n\nIci, on a un MLP ou aussi appelé FCNN.\n\nLa cellule $b$ introduit un biais.\n\nPar exmple, l'image d'un nombre 6 peut être encodé pixel par pixel\n\nCeci sera linéaire p.r.à. pixel du coup sur la prochaine couche on applique une fonction (la fonction d'activaiton) pour rendre la donnée non linéiare pour gagner en **expressivité**. En effet, ce serait pas intéressé d'avoir une combinaison linéaire des couches en sortir (dans le cas où toutes les couches sont linéaires).\n\n### Définition\n\n> Keywords:\n- Représentation distribuée (distributed representation)\n- Neurones activés\n- Partionnement de l'entrée\n\n![](/assets/images/B3.AA.CM.Slide1-014.png)\n\n### Origine\n\n![](/assets/images/B3.AA.CM.Slide1-015.png)\n\n## Application\n\n![](/assets/images/B3.AA.CM.Slide1-016.png)\n\n### Image Captioning\n\n![](/assets/images/B3.AA.CM.Slide1-017.png)\n![](/assets/images/B3.AA.CM.Slide1-018.png)\n\n### Segmentation sémantique\n\n![](/assets/images/B3.AA.CM.Slide1-019.png)\n![](/assets/images/B3.AA.CM.Slide1-020.png)\n\n### Génération d'images\n\n![](/assets/images/B3.AA.CM.Slide1-021.png)\n\nRepose sur les \"Diffusion Models\".\nLes photos ici sont créer et non pas choisis dans une base de données.\n\n### Remarques\n\n![](/assets/images/B3.AA.CM.Slide1-022.png)\n\nChatGPT\n\n# II- Les fondamentaux\n\n![](/assets/images/B3.AA.CM.Slide1-023.png)\n\n## Le Perceptron\n\nAlgorithme de classification\n\n![](/assets/images/B3.AA.CM.Slide1-024.png)\n![](/assets/images/B3.AA.CM.Slide1-025.png)\n\nIci le perceptron va calculer les points/scores et donner la classe.\n\n![](/assets/images/B3.AA.CM.Slide1-026.png)\n\n\nIl y a autant de $w$ que la taille de $x$ mais un seul seuil/threshold.\n\n![](/assets/images/B3.AA.CM.Slide1-027.png)\n\n$$\n\\overrightarrow{w} = [w0 ; w1 ; w2]\\\\\n\\overrightarrow{x} = [1 ; x1 ; x2]\\\\\n\\overrightarrow{z} = \\overrightarrow{w}^t \\cdot \\overrightarrow{x}\n$$\n\nSur Python, ceci se code:\n```python\nz = w.T @ x\nz = np.dot(w.T, x)\n```\n## Comment trouver $\\overrightarrow{w}$ ?\n\n![](/assets/images/B3.AA.CM.Slide1-030.png)\n\nGraphiquement on obtient:\n\n![](/assets/images/B3.AA.CM.Slide1-031.png)\n\nIci, $\\theta$ représente $\\overrightarrow{w}$.\n\nL'équation de la droite rouge est:\n$$\n\\mathcal{D} : w_1x_1 + w_2x_2 + w_0 =  0\n$$\n\nDu coup $\\overrightarrow{w}$ est perpendiculaire à cette droite.\n\nCette convergence a été démontré sous l'hypothèse que les données sont séparables (autrement il y aura oscillation).\n\nDu coup, si la droite existe il existera une solution (ou même plusieurs).\n\n## Variante équivalentes de la règle\n\n![](/assets/images/B3.AA.CM.Slide1-032.png)\n\n## Algorithme\n\n![](/assets/images/B3.AA.CM.Slide1-034.png)\n\n## Version Batch\n\n![](/assets/images/B3.AA.CM.Slide1-035.png)\n\n## Simuler des fonctions booléennes\n\n![](/assets/images/B3.AA.CM.Slide1-036.png)\n![](/assets/images/B3.AA.CM.Slide1-037.png)\n![](/assets/images/B3.AA.CM.BB20230118-1.png)\n\n$\\hat y$ est la prédiction que l'on compare au label $y$\n\n# III- Du Perceptron au MLP\n\n![](/assets/images/B3.AA.CM.Slide1-038.png)\n\n## MLP - Multi Layer Perceptron\n\n![](/assets/images/B3.AA.CM.Slide1-039.png)\n\nPour les couches internes sont dites cachés quand on ne sait pas comment reconnaître la vérité (contrairement à la dernière couche).\n\n## Frontières de décision\n\n### Exemple: Un polygone\n\n![](/assets/images/B3.AA.CM.Slide1-040.png)\n![](/assets/images/B3.AA.CM.Slide1-046.png)\n\n\nRégularisation = conserver des $w$ de norme faible\n\nMeme si avoir une grande norme donne une meilleur confiance\n\n### Exemple: Deux polygones\n\n![](/assets/images/B3.AA.CM.Slide1-047.png)\n\n## Problématique\n\n![](/assets/images/B3.AA.CM.Slide1-048.png)\n\n## Classification linéaire: cas multiclasse\n\n![](/assets/images/B3.AA.CM.Slide1-049.png)\n\n### Formule\n\n![](/assets/images/B3.AA.CM.Slide1-050.png)\n\n\n\n\n> Notes RKA du 2023/01/18 - End\n\n---\n\n> Notes RKA du 2023/01/19 - Start\n\n\n\n\nEn cas multi-class on prédit une seule classe gagnante. Du coup la classe prédite sera celle avec le meilleur score.\n\nSur Python, on code cela ainsi:\n\n```python\n# how to return the max value in scores\nnp.max(scores)\ny_pred = np.argmax(scores) # returns the index of the max value in the vector scores\n\n# other option\nimport torch\ny_pred = torch.argmax(scores)\n```\n\n$W$ est de taille $k\\times d$ et $x$ de taille $d$ et $scores$ est de taille $k$\n\n### Exemple\n\n![](/assets/images/B3.AA.CM.Slide1-051.png)\n\n\n### CIFAR-10\n\n![](/assets/images/B3.AA.CM.Slide1-052.png)\n\nOn peut faire un redimensionnement de W pour l'afficher avec `imshow` ce qui donne les images dans le slide\n\n```python\nimport matplotlib.pyplot as plt\n\nplt.imshow(W_fox_reshaped)\n```\n\nIci on a des images de taille 32x32.\n\nComme il y a de la couleur on a un tenseur de dimension 32x32x3.\n\nDu coup x est une superposition de 3 vecteurs 1024.\n\nOn peut interpréter l'image de la classe avion comme un filtre qui donnera un score elevé dès que l'image candidate possède un fond bleu.\n\nPour le cheval le filtre ne fait pas de différence si la tete du cheval est à gauche ou à droite.\n\n### Remarque technique\n\n![](/assets/images/B3.AA.CM.Slide1-053.png)\n![](/assets/images/B3.AA.CM.Slide1-054.png)\n\n### Comment trouver $\\overrightarrow{w}$ ?\n\n![](/assets/images/B3.AA.CM.Slide1-056.png)\n![](/assets/images/B3.AA.CM.Slide1-058.png)\n\n#### La descente du gradient (DG)\n\n> Keywords:\n- $\\alpha$: taux d'apprentissage\n- régularisation\n\n![](/assets/images/B3.AA.CM.Slide1-059.png)\n![](/assets/images/B3.AA.TP2.BB20230130-1.png)\n![](/assets/images/B3.AA.TP2.BB20230130-2.png)\n\nDans l'idée on cherche à approximer un nuage de point par une fonction qui passe aux plus proche de ces points. Plus la fonction sera précise plus cela induira de variance. C'est pourquoi il est parfois préférable de régulariser le taux d'apprentrissage pour éviter ces excès de variations tout en ayant un apprentissage efficace/optimal.\n\n### Quelle fonction _loss_ choisir ?\n\n![](/assets/images/B3.AA.CM.Slide1-060.png)\n\n#### Heaviside \n\n![](/assets/images/B3.AA.CM.Slide1-062.png)\n\n- si $y\\times w^t\\times x$ est negatif on fait une erreur (comme `heaviside` est en logique inverse il faut le moins pour obtenir le bon _loss_)\n\n#### Choix du _loss_\n\n![](/assets/images/B3.AA.CM.Slide1-063.png)\n\n##### Activation: Sigmoide\n\n> La fonction Sigmoide est aussi appelé fonction logistique\n\n![](/assets/images/B3.AA.CM.Slide1-064.png)\n![](/assets/images/B3.AA.CM.Slide1-065.png)\n![](/assets/images/B3.AA.CM.Slide1-066.png)\n\nHistoriquement la sigmoide a été utilisé c'est pourquoi les labels d'un perceptron étaient 0 ou +1 (on aurait tangente hyperbolique qui donne -1 +1 mais la sigmoide a été utilisé).\n\nMaintenant une autre fonction est utilisé que l'on verra plus tard.\n\n##### Critère de choix\n\n![](/assets/images/B3.AA.CM.Slide1-068.png)\n\n##### BCE - Binary Cross-Entropy\n\n![](/assets/images/B3.AA.CM.Slide1-069.png)\n\nDans le cas $y=1$ la loss pénalise lorsque le score est proche de 0 via sa divergence en 0.\n\nLe reseau aura ou bien 1 seul neuronne binaire de sortie ou 2 neurones un pour la classe à 0 et un pour celle à 1.\n\nIci le dernier neurone aura une sigmoide pour fonction d'activation (relu/gelu sont utilisées en général pour les couches cachées).\n\n\n##### Régression logistique (ou classification logistique)\n\n![](/assets/images/B3.AA.CM.Slide1-070.png)\n![](/assets/images/B3.AA.CM.Slide1-071.png)\n\n```python\nimport torch\nimport torch.nn as nn\n\nclass LogisticRegression(nn.Module):\n    # Constructor\n    def __init__(self, input_dim):\n        super(LogiticRegression, self).__init__()\n        # we need a linear layer with weight of input_dim and a bias of 1\n        self.linear = torch.nn.Linear(input_dim, 1)\n        # if need several layers we have to define a self.linear2\n\n    # Method\n    def forward(self, x): # forward is reserved this is why we do not need to write .forward when calling it\n        # We apply the function linear defined in the constructor\n        a = self.linear(x)\n        # with several layers we would code:\n        # x = self.linear(x)\n        # We use sigmoid to compute our prediction\n        y_pred = torch.sigmoid(a)\n        return y_pred\n\n# Object Creation of input_dim = 10\nmodel = LogiticRegression(10)\n\n# Random Matrix of size 100x10 filled with numbers center in 0 with variance -1:1\ninput = torch.randn(100, 10) # this is a tensor\noutput = model(input) # works better (regarding memory's management) than model.forward(input)\nprint(output.size())\n```\n\n\n##### Fonctions d'activation $g$ et $o$\n\n![](/assets/images/B3.AA.CM.Slide1-073.png)\n\nLe choix de la fonction d'activaiton peut se trouver dans la doc:\n- [TORCH.NN](https://pytorch.org/docs/stable/nn.html#non-linear-activations-weighted-sum-nonlinearity)\n\n> Fonctions: tanh ; hardthanh ; sigmoid ; softplus ; relu ; leakyrelu\n![](/assets/images/B3.AA.CM.Slide1-074.png)\n\nSigmoide n'est plus utilisé car lorsque la fonction est 'platte' la dérivée est nulle ce qui signifie que le gradient \"s'evapore\" et donc ne fait plus évoluer le W du coup le réseau n'apprend plus.\n\nRelu (Rectifier Linear Unit) est facile à coder `max(0,x)`\n\nMais de nos jours la plus utilisé est `nn.GELU` (cf [doc](https://pytorch.org/docs/stable/generated/torch.nn.GELU.html#torch.nn.GELU))\n\n![](/assets/images/B3.AA.CM.Slide1-074.GELU.png)\n\nC'est une fonction d'activation basée sur erf = lagaussienne\n\n##### Softmax\n\n![](/assets/images/B3.AA.CM.Slide1-075.png)\n\n![](/assets/images/B3.AA.CM.BB20230119-1.png)\n\n$a = w^t \\times x$ est aussi appelé la préactivation\n\nL'activation est noté $h$\n\n![](/assets/images/B3.AA.CM.BB20230119-2.png)\n\nLa couche de sortie présente des resultats probabiliste.\n\n## Apprentissage \n\n### Cas: MLP\n\n![](/assets/images/B3.AA.CM.Slide1-079.png)\n\n### Cas: réseau de neuronne\n\n![](/assets/images/B3.AA.CM.Slide1-080.png)\n\n`forward` passe les exemples dans le model\n\n`backword` (algorithme rétropropragation _backpropagation_) calcule le gradient de la _loss_ pour chaque couches en partant de la sortie\n\nune fois le réseau entrainé il n'y a plus besoin de faire un `backward`\n\n### Algo\n\n![](/assets/images/B3.AA.CM.Slide1-085.png)\n\n## Classification\n\n### Quelle _loss_ ?\n\n![](/assets/images/B3.AA.CM.Slide1-086.png)\n![](/assets/images/B3.AA.CM.Slide1-087.png)\n\nLa _loss_ (cf [doc](https://pytorch.org/docs/stable/nn.html#loss-functions) ) n'est pas à confondre avec la fonction d'activation ! La fct d'activaiton s'applique dans les couches (et peut être différent à chaque couche) elle prend pour valeur les sorties des couches. La _loss_ elle prend les labels et les sorties pour mesuser l'erreur.\n\nLa _cross-entropy loss_ se définit comme suit:\n$$\n\\mathcal{L}(y,\\hat y) = -log(\\hat y_c) = \\mathbb{I}\\{ i = c \\} \\overrightarrow{y} \\; log \\overrightarrow{\\hat y} \n$$\n\n\n> Notes RKA du 2023/01/19 - End\n\n---\n\n> Notes RKA du 2023/01/26 - Start\n\n\n\n### Binary Cross-Entropy loss\n\n![](/assets/images/B3.AA.CM.Slide1-088.png)\n![](/assets/images/B3.AA.CM.Slide1-089.png)\n![](/assets/images/B3.AA.CM.Slide1-090.png)\n![](/assets/images/B3.AA.CM.Slide1-091.png)\n![](/assets/images/B3.AA.CM.Slide1-092.png)\n![](/assets/images/B3.AA.CM.Slide1-093.png)\n\n- [Documentation tensorflow](https://github.com/tensorflow/tensorflow/blob/r1.10/tensorflow/python/ops/nn_impl.py)\n\n---\n\n> Hors Programme - Start\n\n### Divergence de Kullback-Leibler\n\n![](/assets/images/B3.AA.CM.Slide1-094.png)\n![](/assets/images/B3.AA.CM.Slide1-095.png)\n![](/assets/images/B3.AA.CM.Slide1-096.png)\n![](/assets/images/B3.AA.CM.Slide1-097.png)\n![](/assets/images/B3.AA.CM.Slide1-098.png)\n\n> Hors Programme - End\n\n---\n\n## Régression\n\n### Erreur quadratique moyenne\n\n![](/assets/images/B3.AA.CM.Slide1-099.png)\n\n### BCE vs MSE\n\n![](/assets/images/B3.AA.CM.Slide1-100.png)\n![](/assets/images/B3.AA.CM.Slide1-101.png)\n\n### Régression logistique\n\n![](/assets/images/B3.AA.CM.Slide1-102.png)\n\n## Bilan Choix Fonction Coût/Activation\n\n![](/assets/images/B3.AA.CM.Slide1-103.png)\n\n\n# IV- Compléments\n\n## Apprentissage\n\n![](/assets/images/B3.AA.CM.Slide1-104.png)\n\n## Notations\n\n### 1 neurone\n\n![](/assets/images/B3.AA.CM.Slide1-105.png)\n\n### Caclul des gradients pour 1 neurone\n\n![](/assets/images/B3.AA.CM.Slide1-106.png)\n![](/assets/images/B3.AA.CM.Slide1-108.png)\n\n### MLP à couches cachées\n\n![](/assets/images/B3.AA.CM.Slide1-109.png)\n\n### Calcul des gradient pour un MLP\n\n![](/assets/images/B3.AA.CM.Slide1-110.png)\n![](/assets/images/B3.AA.CM.Slide1-111.png)\n\n- [torch.autograd](https://pytorch.org/docs/stable/autograd.html)\n\n```python\nimport torch\n\nx = torch.ones(1, requires_grad=True)\ny = x + 2\nz = y * y * 2\nz.backward() # computes the gradient automatically\nprint(x.grad) # \\partial_z x = 12\n```\n## Graphes computationnels\n\n![](/assets/images/B3.AA.CM.Slide1-112.png)\n![](/assets/images/B3.AA.CM.Slide1-114.png)\n\n## Actualisation des poids d'un réseau\n\n> SDG - Stochastic Gradient Descent\n\n![](/assets/images/B3.AA.CM.Slide1-115.png)\n![](/assets/images/B3.AA.CM.Slide1-116.png)\n![](/assets/images/B3.AA.CM.Slide1-117.png)\n\n## Importance de l'initialisation des poids\n\n![](/assets/images/B3.AA.CM.Slide1-118.png)\n\nhttp://www.deeplearning.ai/ai-notes/initialization/\n\n![](/assets/images/B3.AA.CM.Slide1-119.png)\n![](/assets/images/B3.AA.CM.Slide1-120.png)\n![](/assets/images/B3.AA.CM.Slide1-121.png)\n\nhttp://playground.tensorflow.org/\n\n\n> Notes RKA du 2023/01/26 - End\n\n---","n":0.025}}},{"i":46,"$":{"0":{"v":"CNN - Convolutional Neural Networks","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par P. Muller, T. Pellegrini\n\n---\n\n> Notes RKA du 2023/01/30 - Start\n\n\n\n\n\n![](/assets/images/B3.AA.CM.CNN.Slide-01.png)\n\n# Problématique\n\n## Qu'est-ce qu'une image pour l'ordinateur ?\n\n![](/assets/images/B3.AA.CM.CNN.Slide-02.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-05.png)\n\nLa problématique est de pourvoir reconnaître des motifs à partir de cette information.\n\n## Exemple de tâche en Computer Vision\n\n![](/assets/images/B3.AA.CM.CNN.Slide-06.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-07.png)\n\nPour reconnaitre des motifs, il faut d'abord définir ces motifs. C'est le role des _features_ (i.e. des descripteurs).\n\n## Premières approches possibles\n\n![](/assets/images/B3.AA.CM.CNN.Slide-08.png)\n\n- Approche par descripteurs --> dépendant des choix descripteurs\n- Approche vectorielle --> pb changement d'échelle\n\n### Approche connectée\n\n![](/assets/images/B3.AA.CM.CNN.Slide-10.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-11.png)\n\n### Approche hiérarchique/convolutive\n\n> Keywords: Representation Learning\n\n![](/assets/images/B3.AA.CM.CNN.Slide-13.png)\n\n# Sommaire\n\n![](/assets/images/B3.AA.CM.CNN.Slide-14.png)\n\n# I- Introduction\n\n## Suivre ISS\n\n![](/assets/images/B3.AA.CM.CNN.Slide-15.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-16.png)\n\n## Terminologie\n\n> Keywords:\n- entrée ; \n- noyau/kernel ;\n- carte de caractéristiques/feature map\n\n![](/assets/images/B3.AA.CM.CNN.Slide-17.png)\n\nOn n'utilise pas la convolution sur des entrées de mots ou de texte car il existe de meilleurs algorithmes (même si on peut classifier des mots avec un CNN).\n\n## Implémentation\n\n> Keywords:\n- Tenseurs\n\n![](/assets/images/B3.AA.CM.CNN.Slide-18.png)\n\n## Propriétés\n\n> Keywords:\n- Corrélation croisée\n- commutative (non pertinente ici)\n\n![](/assets/images/B3.AA.CM.CNN.Slide-19.png)\n\n## Illustration\n\n> Keywords:\n- Activation map = feature map\n\nIci on fait de la convolution valide (l'algo s'éxécute jusqu'à qu'il n'y ait plus de pixel). D'où le fait que l'image de sortie n'est pas la même taille (il existe des formules pour connaître la taille de la sortie à l'avance).\n\n![](/assets/images/B3.AA.CM.CNN.Slide-20.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-21.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-22.png)\n\n## Ex: Détection de bords verticaux\n\n### Bords Verticaux\n\n![](/assets/images/B3.AA.CM.CNN.Slide-24.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-25.png)\n\n### Bords Horizentaux\n\n![](/assets/images/B3.AA.CM.CNN.Slide-26.png)\n\n### Bords Complexes\n\n![](/assets/images/B3.AA.CM.CNN.Slide-27.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-28.png)\n\n## Apprentissage\n\n![](/assets/images/B3.AA.CM.CNN.Slide-29.png)\n\n### Exemple\n\n![](/assets/images/B3.AA.CM.CNN.Slide-30.png)\n\n## Couche de convolution\n\n> Keywords:\n- connectivité locale ;\n- partage des poids ;\n- invariance par translation\n\n![](/assets/images/B3.AA.CM.CNN.Slide-31.png)\n\n## Multicanal\n\n![](/assets/images/B3.AA.CM.CNN.Slide-32.png)\n\nUn filtre ici est composé de 3 matrices (et optionnellement un biai). C'est pour appliquer un ou des filtres sur chaque canal. Ici il y a deux filtres donc la sortie est à deux canaux et donc la couche suivante appliquerait un filte à 2 canaux.\n\n![](/assets/images/B3.AA.CM.CNN.Slide-33.png)\n\n- [source](https://cs231n.github.io/convolutional-networks/)\n\n\n## Conv2d en Pytorch\n\n![](/assets/images/B3.AA.CM.CNN.Slide-34.png)\n\n```python\nimport torch\nimport torch.nn as nn\n\nm = nn.Conv2d(8, 16, 3)\n# 8 canals\n# 16 filters\n# kernel size of 3 by 3\n\nx = torch.randn(2, 8, 50, 100)\n# 2 images\n# with 8 canals\n# of size 50 by 100\n\nout = m(x)\nout.size()\n```\n\nCombien de paramètres ?\n\n$\\text{nb params}\\\\\n= \\big(\\text{kernel cols}\\times\\text{kernel lines}\\times\\text{canals}+\\text{bias}\\big)\\times\\text{number of filters}\\\\\n= (3 \\times 3 \\times 8 + 1) \\times 16 = 1168$\n\n![](/assets/images/B3.AA.CM.CNN.Slide-35.png)\n\n```python\nimport torch\nimport torch.nn as nn\n\nm = nn.Conv2d(8, 16, 3)\n# 8 canals\n# 16 filters\n# kernel size of 3 by 3\n\nx = torch.randn(2, 8, 50, 100)\n# 2 images\n# with 8 canals\n# of size 50 by 100\n\nout = m(x)\n\nprint(\"Taille de la sortie:\", out.size())\nprint(\"Taille des tenseurs de m:\")\nprint(\"  Poids: \", m.weight.shape)\nprint(\"  Biais: \", m.bias.shape)\n```\n\n\n## Convolition Vizualizer\n\n![](/assets/images/B3.AA.CM.CNN.Slide-36.png)\n\nDans ce [Convolition Vizualizer](https://ezyang.github.io/convolution-visualizer/), on peut visualiser:\n- comment se calcul la convolution ;\n- l'utilité de la dilation (dilater le filtre)\n- l'utilité de la stride (sauter le pas)\n- l'utilité du zero-padding (rajouter des pixels à zero pour contrôler la taille de l'image en sortie)\n\n```python\nnn.Conv2d(\n    in_channels = 3, # RGB\n    out_channels = 32, # 32 filters each with 3 layers\n    kernel_size = (3,5), # filter of size 3 by 5\n    bias = True, # bias is by default at true !\n    padding = 0, # no zero-padding\n    dilation = 2 # weights spread each 2 pixels\n)\n```\n\n## Implémentation sous-jacente de PyTorch\n\n### GEMM - General Matrix Multiplication\n\n> Keywords: Matrices denses\n\n![](/assets/images/B3.AA.CM.CNN.Slide-37.png)\n\n### Im2Col\n\n![](/assets/images/B3.AA.CM.CNN.Slide-38.png)\n\n### Forward\n\n> Keywords: poids ; flatten operation\n\n![](/assets/images/B3.AA.CM.CNN.Slide-39.png)\n\n### Backward\n\n> Keywords: gradient de la sortie ; cuBlas\n\n![](/assets/images/B3.AA.CM.CNN.Slide-40.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-41.png)\n\n### Winograd\n\n![](/assets/images/B3.AA.CM.CNN.Slide-42.png)\n\nCela peut être intéressant en fonction de la taille du kernel de faire la transformée de fourrier pour que le calcul de la convolution deviennent une simple opération matricielle.\n\n## Bilan\n\n![](/assets/images/B3.AA.CM.CNN.Slide-43.png)\n\n## Max-Pooling\n\n![](/assets/images/B3.AA.CM.CNN.Slide-44.png)\n\nCe n'est plus de la convolution, on calcul ici le max des 4 pixels de la zone rouge et ainsi de suite.\n\n## Champ réceptif (Receptive Field)\n\n![](/assets/images/B3.AA.CM.CNN.Slide-45.png)\n\n## Réseau LeNet\n\n![](/assets/images/B3.AA.CM.CNN.Slide-46.png)\n\n## Réseau AlexNet\n\n![](/assets/images/B3.AA.CM.CNN.Slide-47.png)\n\n## Réseau VGGNet\n\n![](/assets/images/B3.AA.CM.CNN.Slide-48.png)\n\n## Démo en ligne\n\n![](/assets/images/B3.AA.CM.CNN.Slide-49.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-50.png)\n\n## Couche de Batch-normalisation\n\n![](/assets/images/B3.AA.CM.CNN.Slide-51.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-52.png)\n\n## Autres couches de normalisation\n\n![](/assets/images/B3.AA.CM.CNN.Slide-53.png)\n\n## FCN - Fully convolutional Network\n![](/assets/images/B3.AA.CM.CNN.Slide-54.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-55.png)\n\n## Residual Networks (ResNet)\n\n![](/assets/images/B3.AA.CM.CNN.Slide-56.png)\n\nsur-apprentissage\n\n![](/assets/images/B3.AA.CM.CNN.Slide-57.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-58.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-59.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-60.png)\n\n## Autres types de convolution\n\n![](/assets/images/B3.AA.CM.CNN.Slide-61.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-62.png)\n\ndepthwise c'est rajouté le groups = 8\n\n![](/assets/images/B3.AA.CM.CNN.Slide-63.png)\n\non somme comb lin\n\n## L'architecture Xception\n\n![](/assets/images/B3.AA.CM.CNN.Slide-64.png)\n\n## L'architecture Convmixer\n\n![](/assets/images/B3.AA.CM.CNN.Slide-65.png)\n\n## La convolution dilatée\n\n![](/assets/images/B3.AA.CM.CNN.Slide-66.png)\n\n## La convolution sur un signal sonore\n\n![](/assets/images/B3.AA.CM.CNN.Slide-67.png)\n\n## La convolution sur des données textuelles\n\n![](/assets/images/B3.AA.CM.CNN.Slide-68.png)\n\n### Plongements de mots (word embeddings)\n\n![](/assets/images/B3.AA.CM.CNN.Slide-69.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-70.png)\n\n### Remarques\n\n![](/assets/images/B3.AA.CM.CNN.Slide-71.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-72.png)\n\n## Vers l'interpratibilité des CNN\n\n> Keywords:\n- visualisation de cartes par maximisation des activations\n- Deepviz: Deep Visualization Toolbox\n- Images adversaires\n- Softmax\n- Régularisation\n- Flouttage gaussien\n- Mise à zéro\n\n![](/assets/images/B3.AA.CM.CNN.Slide-73.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-74.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-75.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-76.png)\n![](/assets/images/B3.AA.CM.CNN.Slide-77.png)\n![](/assets/images/B3.AA.TP2.BB20230130-1.png)\n![](/assets/images/B3.AA.TP2.BB20230130-2.png)\n\nDans l'idée on cherche à approximer un nuage de point par une fonction qui passe aux plus proche de ces points. Plus la fonction sera précise plus cela induira de variance. C'est pourquoi il est parfois préférable de régulariser le taux d'apprentrissage pour éviter ces excès de variations tout en ayant un apprentissage efficace/optimal.\n\n## Résumé CNN\n\n![](/assets/images/B3.AA.CM.CNN.Slide-78.png)\n\n\n\n\n> Notes RKA du 2023/01/30 - End\n\n---","n":0.038}}},{"i":47,"$":{"0":{"v":"Bloc 2","n":0.707},"1":{"v":"\n<!--\n[[Optimisation Programmation Linéaire en Nombres Entiers|B2.OPLNE]]\n[[B2.SATR]]\n-->","n":0.408}}},{"i":48,"$":{"0":{"v":"SATR - Systèmes et Architectures Temps Réels","n":0.378},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\n---\n\n\n# À Retenir\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-27.png)\n\n\n# Cours Magistraux\n\n- [[B2.SATR.CM.Partie1]]\n\n\n# Travaux Dirigés\n\n- [[B2.SATR.TD1]]\n\n# Travaux Pratiques\n\n- [[B2.SATR.TP1]]\n\n# Support de Cours\n\n## Fichiers Moodles\n\n### CM\n\n- [B2.SATR.CM.Partie1.Slide2020.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.SATR.CM.Partie1.Slide2020.pdf)\n\n\n\n### TD\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TP\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n## Scans\n\n### Blackbard\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n### GEA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### RKA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n","n":0.139}}},{"i":49,"$":{"0":{"v":"CM","n":1}}},{"i":50,"$":{"0":{"v":"Partie 1","n":0.707},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel et H. Demmou\n\nSupport de cours:\n- [B2.SATR.CM.Partie1.Slide2020.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.SATR.CM.Partie1.Slide2020.pdf)\n- [B2.SATR.CM.Partie1.Slide2021.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.SATR.CM.Partie1.Slide2021.pdf)\n\n\n---\n\n> Notes du 2022/11/16 - Start\n\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-01.png)\n\n# Premiere Partie\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-02.png)\n\n## I-1. Définition et Caractéristiques des STR\n\n### Définitions\n\n> Keywords: Embedded System, Real-Time System, Safety Critical System, Reactive System\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-03.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-04.png)\n\nDrone ou robot en général sont de types Safety Critical System\n\n### Quel choix ?\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-05.png)\n\n### Caractéristiques\n\n> Keywords: Contraintes Temporelles, Temps Logique, Temps Physique\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-06.png)\n\n- HTR:\n    - Horloge plus précise et non variable (donc indépendante de la fréquence du CPU qui elle est variable)\n    - ne retourne pas une heure mais ne fait que donner des tics à interval régulier\n- syst. asynchrone: capacité d'attendre un evenement tout en agissant sur n'importe quel temps indépendamment des tics d'horloge\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-07.png)\n\n### Types (Soft vs Hard Real Time)\n\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-08.png)\n\n\n### Systèmes Multitâches\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-09.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-10.png)\n\n### Exemple: Véhicule Automobile\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-11.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-12.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-13.png)\n\nÀ l'époque, CAN (controller Area Network) était reservé pour les modules critiques et VAN (Vehicule Area Network) pour les autres modules [de nos jours tous est sur CAN]\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-14.png)\n\n### Mise en Oeuvre\n\n> hors programme ici\n\n#### Synchrone\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-15.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-16.png)\n\n#### Asynchrone\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-17.png)\n\n## I-2. RTOS Systèmes d'Exploitation Temps Réel\n\n### Fonctions Principales\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-18.png)\n\n### Exemple d'OS\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-19.png)\n\n### Définitions\n\n> Keywords: OS, exécutif et noyau temps réel\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-20.png)\n\n### Illustrations\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-21.png)\n\n\n\n\n\n> Notes du 2022/11/16 - End\n\n---\n\n> Notes du 2022/11/22 - Start\n\n\n\n\n\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-22.png)\n\n### Calculateur pour la commande\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-23.png)\n\n### Noyau Temps Réel\n\n> Keywords: Interface ; Ordonnanceur ; Dispatcher (Lanceur) ; Gestionnaire Objet/Interruptions \n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-24.png)\n\nAttention que les taches ne sont pas conscientes si d'autres taches accedent à des ressources communes ce qui peut amener à des problématiques de gestion de zone critique pour des ressources partagées.\n\n### Objets d'un noyau\n\n> Keywords: Tâches ; Messages ; Pipes ; Sémaphores\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-25.png)\n\n### Etats d'une tâche\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-26.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-27.png)\n\n- préempte connu dans le jargon des développeurs\n\n### Commutation de contexte\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-28.png)\n\nAttention en Temps Réel ce n'est pas toujours intéressant de chercher à optimiser un programme et ainsi perdre la connaissance sur la durée d'exécution d'un processus (car l'optimisation rend incertain cette durée). En effet, le temps gagné ne pourra peut etre meme pas être profiter par l'ordannceur car l'ordonnancement des tâches ne permet pas toujours d'être flexible.\n\n### Critères de performances\n\n> Keywords: latence ; occurence ; scrutation\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-29.png)\n\nSouvent les contraintes liée à la gestion des protocoles rend inutile l'utilisation du procole Ethernet. Du coup, d'autre protocol réseau ont été conçu pour garantir le temps réel.\n\n### Délai de latence\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-30.png)\n\n### Les interruptions\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-31.png)\n\n## I-3. Les ordonnancements\n\n> Keywords: [gigue (fr) / jitter (en)](https://fr.wikipedia.org/wiki/Gigue_(informatique)) ; ordonnançabilité ; hors/en ligne ; Préemptif ; Statique ; Dynamique\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-32.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-33.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-34.png)\n\n## I-4. Ordannacement de tâches avec partage de ressources\n\n### I-4.a) Inversion de priorité \n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-35.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-36.png)\n\n#### Exemple\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-37.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-38.png)\n\n### I-4.b) Algorithms\n\n#### Heritage de priorité\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-39.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-40.png)\n\nAttention ceci n'est pas une solution miracle car l'implémentation d'une telle méthode nécessite la mémorisation des dépendances entre tâches ainsi que la modification de priorité à la volée ce qui prend du temps.\n\n#### Priority Ceiling Protocol (PCP)\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-41.png)\n\n> Attention Erreur sur T1 où ~~R1~~ --> R2\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-42.png)\n\n#### Imeediate Priority Ceiling Protocol (IPCP)\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-43.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-44.png)\n\n## I-5. Ordonnancement Temps Réel\n\n#### Caractéristiques temporelles d'une tâche\n \n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-45.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-46.png)\n\n#### Configuration de tâches\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-47.png)\n\n#### Tâches Non Périodiques\n\n> Keywords: sporadique ; apériodique \n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-48.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-49.png)\n\n\n\n\n> Notes du 2022/11/22 - End\n\n---\n\n> Notes du 2022/11/23 - Start\n\n\n\n\n\n#### Qlqs algorithms classiques\n\n> Keywords: Firs In First Out (FIFO) ; Shortest Job First (SJF)\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-50.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-51.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-52.png)\n\n![](/assets/images/B2.SATR.CM.BB20221123-01.png)\n\n### I-5.a) Rate Monotonic Algorithm (RMA)\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-53.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-54.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-55.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-56.png)\n\n### I-5.b) Inverse Deadline or Deadline Monotonic (DM)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-57.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-58.png)\n\n### I-5.c) Earliest Deadline First (EDF)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-59.png)\n\n## I-6. Worst Case Response Time (WCRT)\n \n### Tâche à priorité fixe et indépendantes\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-60.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-61.png)\n![](/assets/images/B2.SATR.CM.BB20221123-02.png)\n![](/assets/images/B2.SATR.CM.BB20221123-03.png)\n![](/assets/images/B2.SATR.CM.BB20221123-04.png)\n\n### Tâche avec partage de ressources\n\n#### Durée de blocage\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-62.png)\n\n#### Usage \n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-63.png)\n\n#### Exemple\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-64.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-65.png)\n\n### Exercices d'ordonnancements\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-66.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-67.png)\n\n## I-7. Worst Case Execution Time (WCET)\n\n### Forumula\n\n> error --> recheck formula\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-68.png)\n\n### Illustration\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-69.png)\n\n### Méthodologie\n\n> Keywords: combinaison des entrées ; marge de sécurité\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-70.png)\n\nEn aviation, on parle du critère $6\\;\\sigma$.\n\n\n### Problème\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-71.png)\n\n### Méthodes d'analyse statique\n\n#### Méthode à base de flot\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-72.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-73.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-74.png)\n\n#### Influences du matériel\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-75.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-76.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-77.png)\n\nFaire attention que cette méthode hiérarchique présente une faiblaisse où il est possible de récupérer des mot de passe en claire en envoyant une bonne attaque sur le système (ce qui fut le cas il y a 2, 3 ans)\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-78.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-79.png)\n\n#### Méthode à base d'arbres\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-80.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-81.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-82.png)\n\n#### Méthode à base de chemins\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-83.png)\n\n#### Implicit Path Enumeration Technique (IPET)\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-84.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-85.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-86.png)\n\n### Exercices d'ordonnancements\n\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-87.png)\n![](/assets/images/B2.SATR.CM.Partie1.Slide2021-88.png)\n\n\n\n\n> Notes du 2022/11/23 - End\n\n---","n":0.039}}},{"i":51,"$":{"0":{"v":"TP1 - RTOS/ESP-IDF","n":0.577},"1":{"v":"\nMore information on the github repo: [SATR-TP1-ESPBank](https://github.com/TunnARK/UT3-AURO-2223-S10-Coding/tree/master/SATR-TP1-ESPBank)\n\n# Préparation du TP\n\nSe familiariser avec :\n- [FreeRTOS - Tasks and Co-Routines](https://freertos.org/taskandcr.html)\n\n    --> API Reference > Task Creation\n    - vsStackDepth\n    - vTaskDelay\n    - xTaskCreate\n    - vTaskSuspend\n\n- [les exemples d'esp-idf](https://github.com/espressif/esp-idf/tree/master/examples)\n\n# Prérequis/Installations\n\nInstaller ESP-IDF et suivre le `Get Started`:\n- [Repo GitHub ESP-IDF](github.com/espressif/esp-idf)\n- [Docs - Get-Started: Manual Install (linux-macos)](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/linux-macos-setup.html)\n\n> Possibilité d'utiliser VS Code\n\n# Slide\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-01.png)\n\n## This Presentation\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-02.png)\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-03.png)\n\n## FreeRTOS\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-04.png)\n\n## ESP-IDF\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-05.png)\n\n## Hello World\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-06.png)\n\n\n## Generic GPIO\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-07.png)\n\n## Bank: Server\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-08.png)\n\n## Bank: UART\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-09.png)\n\n## Messages\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-10.png)\n\n## Queues\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-11.png)\n\n## Tasks\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-12.png)\n\n## Rx Task\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-13.png)\n\n## Bank Task\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-14.png)\n\n## Tx Task\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-15.png)\n\n## Client\n\n![](/assets/images/B2.SATR.TP1.RTOSESPIDF-16.png)\n\n\n# Suppléments\n\n## Code C\n\n> Pour de l'embarquer le RUST est plus robuste que le C\n\n[Le code à utiliser ici :](http://cliffle.com/blog/not-thread-safe/#the-bank-account-example)\n```c++\n/*\n * Stores information about a bank account.\n */\nstruct bank_account {\n    /* How much money is in the account. */\n    int balance; /* never use floats for managing money (too much approximation) */\n};\n\n/*\n * Deposits 'amt' into the 'account' and returns the new balance.\n */\nint deposit(struct bank_account *account, int amt) {\n    account->balance += amt;\n    return account->balance;\n}\n\n/*\n * Tries to withdraw 'amt' from the account. Returns 'true' if it\n * succeeded, 'false' if the account didn't contain enough.\n */\nbool withdraw(struct bank_account *account, int amt) {\n    if (account->balance >= amt) {\n        account->balance -= amt;\n        return true;\n    } else {\n        return false;\n    }\n}\n```\nRemarque:\n- pour connaitre l'état du compte il suffit de faire `deposit(0)` est la fct retournera ce qui reste dans le compte\n\n\n## Python\n\n```Python\ndef deposit(amt int) -> int\ndef withdraw(amt int) -> int\n```\n\n\n## Interruptions\n\n### GPIO\n\nLe code de gestion des interruptions`~/esp/generic_gpio/main/gpio_example_main.c`\n```C\nstatic QueueHandle_t gpio_evt_queue = NULL;\n\nstatic void IRAM_ATTR gpio_isr_handler(void* arg)\n{\n    uint32_t gpio_num = (uint32_t) arg;\n    xQueueSendFromISR(gpio_evt_queue, &gpio_num, NULL);\n}\n\nstatic void gpio_task_example(void* arg)\n{\n    uint32_t io_num;\n    for(;;) {\n        if(xQueueReceive(gpio_evt_queue, &io_num, portMAX_DELAY)) {\n            printf(\"GPIO[%\"PRIu32\"] intr, val: %d\\n\", io_num, gpio_get_level(io_num));\n        }\n    }\n}\n```\n\n## UART - Universal Asynchronus Receiver/Transmitter\n\n- [lien vers la doc UART](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/uart.html)\n- Un UART n'est pas un bus temps réel\n    buffer entre le code et les files om gere pas ca\n- Chaque UART a sa propre horloge (dans le cas d'un USRT (synchronus) on rajoute une clock de référence)\n- equivalence reseau: 2eme couche du modele OSI donc similaire a une tram avec son protocle\n\n<!--8 data graph-->\n<!-- ![](/assets/images/B2.SATR.TP1.RTOSESPIDF.NotesGEA-01.png) -->\n\n<!-- ![](/assets/images/B2.SATR.TP1.RTOSESPIDF.NotesGEA-02.png) -->\n\n<!-- ![](/assets/images/B2.SATR.TP1.RTOSESPIDF.NotesGEA-03.png) -->\n\nATTETNION: \n- le pc est en 64 bit mais l'ESP32 est sur du 32 bit donc la taille d'un `int` n'est pas la meme\n- cepedant avec un `int` en 32 bit on peut gérer jusqu'à 40 millions d'euros i.e. $(2*32-1)/100=42\\;millions$\n\n### Messages\n\nCes messages devront prendre en compte :\n- Header: [OxCA,OxFE,OxCA,OxFE]\n- type: REQ/REP\n- Client ID\n- Req ID\n- Operation\n- Ammount (32 bit int)\n\nExemple:\n- 1 client et 1 serveur pour le moment\n- le client fait une requete:\n    - `M1(type=REQ, CID=1, RID=1, Amount=100, Op=1)`\n- Il recoit alors la réponse:\n    - `M1(type=REP, CID=1, RID=1, Amount=200, Op=1)`\n- On remarque alors qu'il peut y avoir un probleme avec ce jeu de parametres car on ne sait pas comment gérer l'absence et l'attente de réponse --> introduire du coup un param `time out` de 1 sec\n- Autre soucis c'est la synchronisation des canaux --> ajouter un `HEADER`\n    - une autre option aurait été de faire un `3handshake` (soit `Sync>Sync/Ack>Ack`)\n- Du coup on reprend l'échange précédant avec le header, on envoit dans l'ordre :\n    1. 4 oct(s): Header\n    2. 1 oct(s): Type\n    3. 1 oct(s): Client ID (ou mieux un **numéro de port** ! attention ceci est valide si il n'y a pas de bus commun entre les pc)\n    4. 1 oct(s): Req ID \n        - ici peut etre 1 oct suffit pas mais en vrai avec 1 oct on doit avoir plus de 256 requetes non répondus en moins d'une seconde donc ça ira\n    5. 1 oct(s): Operation\n    6. 4 oct(s): Amount\n- Une autre organisation plus optimale niveau mémoire et temps d'envoi/recpetion (mais cela rend la programmation plus risquée lors de la conception du coup on va plustot préférencer l'option précédente)\n    1. 4 oct(s): Header\n    2. 1 oct(s): Type + Operation\n    3. 1 oct(s): Client ID\n    4. 1 oct(s): Req ID\n    5. 4 oct(s): Amount\n\n<!-- Un exemple de séquence de message : -->\n<!-- ![](/assets/images/B2.SATR.TP1.RTOSESPIDF.NotesGEA-04.png) -->\n- La configuration python avec `dep/withdraw/tx/rx` ne permettra pas d'envoyer plusieurs requetes en meme temps car les fcts `dep` et `with` appel `tx` et `rx` (si on a le temps on verra comment gerer de l'asynchrone en python)\n\n### Files d'attentes\n\nOn crée un pointeur contenant toute les files d'attentes (`Rx`,`Tx1`, `Tx2`, `Tx3`, ...).\n\nChaque files nécessite une capacité (nombre de requete qu'elle contient ici 10) et d'une taille pour chaque requete\n```C\n//create a queue to handle gpio event from isr\n    gpio_evt_queue = xQueueCreate(10, sizeof(uint32_t));\n```\n### Priorités\n\nMaintenant quelles priorités données aux tâches, il y a 3 philosophies :\n- Back Pressure: donner la prior. à Tx pour eviter des bottle neck\n- Conservative : donner la prior. à Rx pour ne pas perdre de donner\n- Fairly: donner la priorité à la tache la plus solicité ici bank puisque qu'il a 3 copie de Tx/Rx qui l'appelle\n\n## Test Unitaire\n\nTDD - Test Driver Development\n\n# Compte Rendu de TP du 2022/11/30\n\n## Hello World\n\n1. Suivre le [guide d'installation](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/linux-macos-setup.html#) jusqu'à l'étape `Configure Your Project` (etape exclue).\n2. Ignorer cette étape, mais à la place modifier le fichier `/workspace/esp/hello_world/sdkconfig` pour reconfigurer la fréquence de $40MHz$ à $26MHz$ (cf slide 6 pour plus d'info).\n3. Continuer les étapes restantes du [guide d'installation](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/linux-macos-setup.html#)\n    - Une fois le `Build Project` terminé, lancer le flash\n    - Si vous recevez une erreur du style \"port introuvalbe\", s'assurer que la session utilisateur a acces au groupe\n        1. `ll \\dev\\ttyUSB0` (ou `ll \\dev\\PORT`) pour connaitre les droits d'accès du port\n        2. `sudo usermod -aG GROUP USERNAME` pour ajouter un user dans un groupe\n        3. `groups` ne se met pas à jour directement (visuellement) donc faire `newgrp GROUP` pour mettre à jour le groupe et relancer `groups` pour lister les utilisateurs (vérifier que l'utilisateur ajouter et bien présent).\n\n## Generic GPIO\n\n1. Se placer dans le workspace (ici `/esp/`) et copier-coller le dossier exemple gpio `cp -r $IDF_PATH/examples/peripherals/gpio/generic_gpio .`\n2. Se placer dans `/workspace/generic_gpio` et lancer `idf.py set-target esp32`\n3. Modifier le fichier `/workspace/generic_gpio/sdkconfig` pour reconfigurer la fréquence de $40MHz$ à $26MHz$ (cf slide 7 pour plus d'info).\n4. Lancer le build `idf.py build`\n5. Flasher la carte `idf.py flash` (ou `idf.py -p PORT flash`)\n6. Le code est déjà en train de s'exécuter en background pour le voir lancer `idf.py monitor` (ou `idf.py -p PORT monitor`)\n7. Se familiariser avec le code de communication `/workspace/generic_gpio/main/`\n\n# Compte Rendu de TP du 2022/12/09\n\n## Sys. Emb.\n\n### Liens utiles\n\n- [Get Started](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/index.html#)\n- [Docs UART](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/uart.html)\n\n### Booting\n\n1. Se placer dans le workspace (ici `/esp/`) et copier-coller le dossier exemple gpio\n`cp -r /esp/esp-idf/examples/peripherals/uart/uart_async_rxtxtasks/ .`\n2. Se placer dans `/workspace/uart_async_rxtxtasks` et lancer `idf.py set-target esp32`\n3. Modifier le fichier `/workspace/uart_async_rxtxtasks/sdkconfig` pour reconfigurer la fréquence de $40MHz$ à $26MHz$ (cf slide 7 pour plus d'info).\n4. Lancer le build `idf.py build`\n5. Flasher la carte `idf.py flash` (ou `idf.py -p PORT flash`)\n6. Le code est déjà en train de s'exécuter en background pour le voir lancer `idf.py monitor` (ou `idf.py -p PORT monitor`)\n\n### Configuration des ports\n\n1. Ouvrir le fichier `main/uart_async_rxtxtasks_main.c`\n2. Modifier les ports par défaut par :\n    - ```C\n        // Dans /main/uart_async_rxtxtasks_main.c\n        #define TXD_PIN (GPIO_NUM_1)\n        #define RXD_PIN (GPIO_NUM_3)\n        ```\n3. De plus, remplacer dans ce code toute apparition de `UART_NUM_1` par `UART_NUM_0`\n\n### Codage\n\n\n\n\n## Python\n\n### Objectif\n\nCréer un code python pour instancier et visualiser les fonctionnalités du projet Bank\n    - une fonciton `Création/Suppression` de compte bancaire\n    - une fonction `Deposit`\n    - une fonction `Withdraw`\n\n### Module recommandé\n\nModule `struct`, `bserial`\n\n### Creation d'une interface\n\nLien Utile: [Interface Python avec Tkinter](https://www.cours-gratuit.com/tutoriel-python/tutoriel-python-programmer-une-interface-graphique-avec-tkinter-partie-1#_Toc52998640)\n\n### Class Client\n\n- sur python le typage est dynamic donc le type est assigné selon ce qui arrive\n- le header n'est pas a mettre dans le struct.pack car il précéde le message\n\n### Class Message\n\nclass message\n\n# Testings on 2023/01/08\n\n## Coding on ESP32\n\n### How to run the code\n\n1. Open New Terminal \n2. Install Environment\n    - `cd /workspace/esp-idf/`\n    - `./install.sh esp32`\n    - `. ./export.sh`\n3. Sett up UART Environment\n    - `cd /workspace/uart_async_rxtxtasks/`\n    - `idf.py set-target esp32`\n    - `idf.py build`\n    - `idf.py -p /dev/ttyUSB0 flash` (check Port ID in `/dev/` before running the command)\n    - `idf.py -p /dev/ttyUSB0 monitor`\n\n### Results\n\nRunning `idf.py build` returns :\n```shell\nExecuting action: all (aliases: build)\nRunning ninja in directory /home/tunn/esp/uart_async_rxtxtasks/build\nExecuting \"ninja all\"...\n[1/1] cd /home/tunn/esp/uart_async_rxtxtasks/build/bootloader/esp-idf/e...000 /home/tunn/esp/uart_async_rxtxtasks/build/bootloader/bootloader.binBootloader binary size 0x6720 bytes. 0x8e0 bytes (8%) free.\n[2/7] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/uart_async_rxtxtasks_main.c.obj/home/tunn/esp/uart_async_rxtxtasks/main/uart_async_rxtxtasks_main.c: In function 'tx_task':\n/home/tunn/esp/uart_async_rxtxtasks/main/uart_async_rxtxtasks_main.c:98:19: warning: unused variable 'nb_transmit' [-Wunused-variable]\n   98 |         const int nb_transmit=uart_write_bytes(UART_NUM_0, transmit, sizeof(transmit));\n      |                   ^~~~~~~~~~~\n/home/tunn/esp/uart_async_rxtxtasks/main/uart_async_rxtxtasks_main.c:93:19: warning: unused variable 'nb_transmitH' [-Wunused-variable]\n   93 |         const int nb_transmitH=uart_write_bytes(UART_NUM_0, Header, sizeof(Header));\n      |                   ^~~~~~~~~~~~\n/home/tunn/esp/uart_async_rxtxtasks/main/uart_async_rxtxtasks_main.c: In function 'rx_task':\n/home/tunn/esp/uart_async_rxtxtasks/main/uart_async_rxtxtasks_main.c:143:19: warning: unused variable 'nb_bitM' [-Wunused-variable]\n  143 |         const int nb_bitM=uart_read_bytes(UART_NUM_0, message, sizeof(message_t), 1000 / portTICK_PERIOD_MS);\n      |                   ^~~~~~~\n/home/tunn/esp/uart_async_rxtxtasks/main/uart_async_rxtxtasks_main.c: In function 'bank_task':\n/home/tunn/esp/uart_async_rxtxtasks/main/uart_async_rxtxtasks_main.c:156:9: warning: unused variable 'balance' [-Wunused-variable]\n  156 |     int balance; //Solde du compte\n      |         ^~~~~~~\n[6/7] Generating binary image from built executableesptool.py v4.5.dev0\nCreating esp32 image...\nMerged 2 ELF sections\nSuccessfully created esp32 image.\nGenerated /home/tunn/esp/uart_async_rxtxtasks/build/uart_async_rxtxtasks.bin\n[7/7] cd /home/tunn/esp/uart_async_rxtxtasks/build/esp-idf/esptool_py &....bin /home/tunn/esp/uart_async_rxtxtasks/build/uart_async_rxtxtasks.binuart_async_rxtxtasks.bin binary size 0x31b00 bytes. Smallest app partition is 0x100000 bytes. 0xce500 bytes (81%) free.\n\nProject build complete. To flash, run this command:\n/home/tunn/.espressif/python_env/idf5.1_py3.10_env/bin/python ../esp-idf/components/esptool_py/esptool/esptool.py -p (PORT) -b 460800 --before default_reset --after hard_reset --chip esp32  write_flash --flash_mode dio --flash_size 2MB --flash_freq 40m 0x1000 build/bootloader/bootloader.bin 0x8000 build/partition_table/partition-table.bin 0x10000 build/uart_async_rxtxtasks.bin\nor run 'idf.py -p (PORT) flash'\n```\n\nRunning `idf.py -p /dev/ttyUSB0 flash` returns:\n```shell\nExecuting action: flash\nRunning ninja in directory /home/tunn/esp/uart_async_rxtxtasks/build\nExecuting \"ninja flash\"...\n[1/5] cd /home/tunn/esp/uart_async_rxtxtasks/build/esp-idf/esptool_py && /home/tunn/.espressif/python_env/idf5.1_py3.10_env/bin/python /home/tunn/esp/esp-idf/components/partition_table/check_sizes.py --offset 0x8000 partition --type app /home/tunn/esp/uart_async_rxtxtasks/build/partition_table/partition-table.bin /home/tunn/esp/uart_async_rxtxtasks/build/uart_async_rxtxtasks.bin\nuart_async_rxtxtasks.bin binary size 0x31b00 bytes. Smallest app partition is 0x100000 bytes. 0xce500 bytes (81%) free.\n[2/5] Performing build step for 'bootloader'\n[1/1] cd /home/tunn/esp/uart_async_rxtxtasks/build/bootloader/esp-idf/esptool_py && /home/tunn/.espressif/python_env/idf5.1_py3.10_env/bin/python /home/tunn/esp/esp-idf/components/partition_table/check_sizes.py --offset 0x8000 bootloader 0x1000 /home/tunn/esp/uart_async_rxtxtasks/build/bootloader/bootloader.bin\nBootloader binary size 0x6720 bytes. 0x8e0 bytes (8%) free.\n[2/3] cd /home/tunn/esp/esp-idf/components/esptool_py && /usr/bin/cmake -D IDF_PATH=/home/tunn/esp/esp-idf -D \"SERIAL_TOOL=/home/tunn/.espressif/python_env/idf5.1_py3.10_env/bin/python;;/home/tunn/esp/esp-idf/components/esptool_py/esptool/esptool.py;--chip;esp32\" -D \"SERIAL_TOOL_ARGS=--before=default_reset;--after=hard_reset;write_flash;@flash_args\" -D WORKING_DIRECTORY=/home/tunn/esp/uart_async_rxtxtasks/build -P /home/tunn/esp/esp-idf/components/esptool_py/run_serial_tool.cmake\nesptool esp32 -p /dev/ttyUSB0 -b 460800 --before=default_reset --after=hard_reset write_flash --flash_mode dio --flash_freq 40m --flash_size 2MB 0x1000 bootloader/bootloader.bin 0x10000 uart_async_rxtxtasks.bin 0x8000 partition_table/partition-table.bin\nesptool.py v4.5.dev0\nSerial port /dev/ttyUSB0\nConnecting.....\nChip is ESP32-D0WDQ6 (revision v1.0)\nFeatures: WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None\nCrystal is 26MHz\nMAC: 84:0d:8e:07:4c:fc\nUploading stub...\nRunning stub...\nStub running...\nChanging baud rate to 460800\nChanged.\nConfiguring flash size...\nFlash will be erased from 0x00001000 to 0x00007fff...\nFlash will be erased from 0x00010000 to 0x00041fff...\nFlash will be erased from 0x00008000 to 0x00008fff...\nCompressed 26400 bytes to 16472...\nWriting at 0x00001000... (50 %)\nWriting at 0x000076ac... (100 %)\nWrote 26400 bytes (16472 compressed) at 0x00001000 in 0.7 seconds (effective 288.5 kbit/s)...\nHash of data verified.\nCompressed 203520 bytes to 107510...\nWriting at 0x00010000... (14 %)\nWriting at 0x0001ca42... (28 %)\nWriting at 0x0002230b... (42 %)\nWriting at 0x0002810b... (57 %)\nWriting at 0x0002e59c... (71 %)\nWriting at 0x00038b81... (85 %)\nWriting at 0x0003e481... (100 %)\nWrote 203520 bytes (107510 compressed) at 0x00010000 in 2.6 seconds (effective 614.6 kbit/s)...\nHash of data verified.\nCompressed 3072 bytes to 103...\nWriting at 0x00008000... (100 %)\nWrote 3072 bytes (103 compressed) at 0x00008000 in 0.1 seconds (effective 490.8 kbit/s)...\nHash of data verified.\n\nLeaving...\nHard resetting via RTS pin...\nDone\n```\n\nRunning `idf.py -p /dev/ttyUSB0 monitor` returns:\n```shell\n[...]\nHello world\nI (46335) TX_TASK: Wrote 13 bytes\n\n\n�'�?Hello worldI (48335) TX_TASK: Wrote 13 bytes\n\n\n�'�?Hello worldI (50335) TX_TASK: Wrote 13 bytes\n```\n\n### Our main.c\n\n```c\n/* UART asynchronous example, that uses separate RX and TX tasks\n\n   This example code is in the Public Domain (or CC0 licensed, at your option.)\n\n   Unless required by applicable law or agreed to in writing, this\n   software is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n   CONDITIONS OF ANY KIND, either express or implied.\n*/\n\n#include \"freertos/FreeRTOS.h\"\n#include \"freertos/task.h\"\n#include \"esp_system.h\"\n#include \"esp_log.h\"\n#include \"driver/uart.h\"\n#include \"string.h\"\n#include \"driver/gpio.h\"\n\n\nstatic const int RX_BUF_SIZE = 1024;\n\n#define TXD_PIN (GPIO_NUM_1)\n#define RXD_PIN (GPIO_NUM_3)\n\n//Declaration d une structure pour le message\ntypedef struct \n{\nuint8_t Type;\nuint8_t  Action;\nuint8_t RequestID;\nuint8_t PortID;\nuint32_t Amount;\n} message_t ;\n\n\n//Declaration des queues\nstatic QueueHandle_t rx_queue = NULL;\nstatic QueueHandle_t tx_queue = NULL;\n\n//Declaration du HEADER pour verifier le bon etat de la communication\nconst uint8_t HEADER[4] = {0xCA, 0xFE, 0xCA, 0xFE};\n\n\n\n\nvoid init(void) {\n    const uart_config_t uart_config = {\n        .baud_rate = 115200,\n        .data_bits = UART_DATA_8_BITS,\n        .parity = UART_PARITY_DISABLE,\n        .stop_bits = UART_STOP_BITS_1,\n        .flow_ctrl = UART_HW_FLOWCTRL_DISABLE,\n        .source_clk = UART_SCLK_DEFAULT,\n    };\n    // We won't use a buffer for sending data.\n    uart_driver_install(UART_NUM_0, RX_BUF_SIZE * 2, 0, 0, NULL, 0);\n    uart_param_config(UART_NUM_0, &uart_config);\n    uart_set_pin(UART_NUM_0, TXD_PIN, RXD_PIN, UART_PIN_NO_CHANGE, UART_PIN_NO_CHANGE);\n  \n    //Initialisation des queues\n     rx_queue = xQueueCreate(10, sizeof(uint32_t));\n     tx_queue=xQueueCreate(10, sizeof(uint32_t));\n}\n\n\n\n\n\nint sendData(const char* logName, const char* data)\n{\n    const int len = strlen(data);\n    const int txBytes = uart_write_bytes(UART_NUM_0, data, len);\n    ESP_LOGI(logName, \"Wrote %d bytes\\n\\n\", txBytes);\n    return txBytes;\n}\n\nstatic void tx_task(void *arg)\n{\n    static const char *TX_TASK_TAG = \"TX_TASK\";\n    ////Allocation dynamique de la memoire pour les buffers de messages\n     uint32_t *transmit=(uint32_t*) malloc(sizeof(message_t)); \n      uint8_t *Header=(uint8_t*) malloc(4*sizeof(uint8_t)); \n    esp_log_level_set(TX_TASK_TAG, ESP_LOG_INFO);\n    while (1) {\n    \t//Stockage du premier message sur la queue dans le buffer avant envoi\n    \t xQueueReceive(tx_queue,transmit,1000 / portTICK_PERIOD_MS);\n    \t \n    \t //Envoi du header\n    \tconst int nb_transmitH=uart_write_bytes(UART_NUM_0, Header, sizeof(Header));\n    \t\n    \tvTaskDelay(2000 / portTICK_PERIOD_MS);\n    \t\n    \t//Envoi du message\n        const int nb_transmit=uart_write_bytes(UART_NUM_0, transmit, sizeof(transmit));\n        vTaskDelay(2000 / portTICK_PERIOD_MS);\n    }\n    \n    //Liberation des buffers\n    free(transmit);\n    free(Header);\n}\n\nstatic void rx_task(void *arg)\n{\t\n    int i;\n    static const char *RX_TASK_TAG = \"RX_TASK\";\n    esp_log_level_set(RX_TASK_TAG, ESP_LOG_INFO);\n    //Allocation dynamique de la memoire pour les buffers de messages\n    uint8_t* data = (uint8_t*) malloc(RX_BUF_SIZE+1);\n    uint8_t *R_Head=(uint8_t*) malloc(4*sizeof(uint8_t)); \n    uint32_t *message=(uint32_t*) malloc(4*sizeof(uint32_t)); \n    \n    while (1) {\n        const int rxBytes = uart_read_bytes(UART_NUM_0, data, RX_BUF_SIZE, 1000 / portTICK_PERIOD_MS);\n        if (rxBytes > 0) {\n            data[rxBytes] = 0;\n            ESP_LOGI(RX_TASK_TAG, \"Read %d bytes: '%s'\\n\\n\", rxBytes, data);\n            ESP_LOG_BUFFER_HEXDUMP(RX_TASK_TAG, data, rxBytes, ESP_LOG_INFO);\n        }\n        \n        //Reception du header\n        const int nb_bitH=uart_read_bytes(UART_NUM_0, R_Head, 4*sizeof(uint8_t), 1000 / portTICK_PERIOD_MS);\n        \n        if(nb_bitH==4)\n        {\n        \tfor(i=0;i<nb_bitH;i++)\n        \t{        \t\n        \t\tif(R_Head[i]!=HEADER[i])\n        \t\t\t{\n        \t\t\tprintf(\"Wrong Header ! Communication Failed !\");\n        \t\t\tbreak;\t\n        \t\t\t}\n        \t        \t        \t\t\n        \t}\n        \t       \n        }\n        \n        //Reception du message et stockage dans la queue        \n        const int nb_bitM=uart_read_bytes(UART_NUM_0, message, sizeof(message_t), 1000 / portTICK_PERIOD_MS);\n        xQueueSend(rx_queue,message,1000 / portTICK_PERIOD_MS); \n      \n    }\n    // Liberation des buffers\n    free(data);\n    free(R_Head);\n    free(message);\n}\n\n\nstatic void bank_task(void *arg)\n{\n    int balance; //Solde du compte\n    static const char *TX_TASK_TAG = \"TX_TASK\";\n    esp_log_level_set(TX_TASK_TAG, ESP_LOG_INFO);\n    while (1) {\n        sendData(TX_TASK_TAG, \"Hello world\\n\\n\");\n        vTaskDelay(2000 / portTICK_PERIOD_MS);\n    }\n}\n\n\nvoid app_main(void)\n{\n    init();\n    xTaskCreate(rx_task, \"uart_rx_task\", 1024*2, NULL, configMAX_PRIORITIES, NULL);\n    xTaskCreate(tx_task, \"uart_tx_task\", 1024*2, NULL, configMAX_PRIORITIES-2, NULL);\n    xTaskCreate(bank_task, \"bank_task\", 1024*2, NULL, configMAX_PRIORITIES-1, NULL);\n}\n\n```\n\n## Our Python Code\n\n```python\n# -------------------------------------------- #\n# Class Client                                 #\n# Tasks:                                       #\n# - emit serial messages to the ESP card       #\n# - receive serial messages from the ESP card  #\n# -------------------------------------------- #\n\n# This module encapsulates the access for the serial port.\nimport serial\n# This module converts between Python values and C structs\n# represented as Python bytes objects.\nfrom struct import *\n\nclass client:\n    # initializing values and properties of objects\n    def __init__(self, st_type, st_cid, st_rid, st_operation, st_ammount) -> None:\n        self.st_type = st_type              # 0 or 1 w.r.t. being resp. REQUEST or RESPONSE\n        self.st_cid = st_cid                # 0 .. 255 identification number for the client\n        self.st_rid = st_rid                # 0 .. 255 identification number for the request\n        self.st_operation = st_operation    # 0 or 1 w.r.t. being resp. withdraw or deposit\n        self.st_ammount = st_ammount        # positive integer for the ammount \n    \n    # method structurizing the message with struct.pack\n    def structurer(self)-> bytes:\n        st = struct.pack(\"<IIIQ\", self.st_type, self.st_cid, self.st_rid, self.st_operation, self.st_ammount) \n        return st\n    \n    # method sending a message throw the serial port\n    def send_message(self) -> None:\n        ser = serial.Serial('/dev/ttyUSB0') # open serial port\n        print(ser.name)                     # check which port was really used\n        ser.write(self.structurer(self))    # write a string\n        ser.close()                         # close port\n```","n":0.02}}},{"i":52,"$":{"0":{"v":"TD1 - Exemple du Bank Account","n":0.408},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\nSources :\n- [GodBolt (Compiler Explorer)](https://godbolt.org/)\n- [Mark Theis (Documentation Assembleur RISCV)](https://mark.theis.site/riscv/)\n- [Cliffle's Blog (for the code example)](http://cliffle.com/blog/not-thread-safe/#the-bank-account-example)\n\n---\n\nUn manageur nous demande de travailler sur un nouveau software pour retirer du cash dans un bancomat (voir [Cliffle's Blog](http://cliffle.com/blog/not-thread-safe/#the-bank-account-example) pour plus d'informations). \n\n# Partie 1 - Vérification des conditions\n\nIl n'a pas eu le temps de compléter le tableau suivant :\n\n![](/assets/images/B2.SATR.TD1.BB20221125-01.png)\n\nMais il nous demande quand même de trouver en fonction de $x$ :\n1. la condition nécessaire d'ordonnançabilité ; ainsi que \n2. la condition suffisante pour RMA ; et\n3. la condition suffisante pour EDF.\n\n## Condition Nécessaire\n\n![](/assets/images/B2.SATR.TD1.BB20221125-02.png)\n\nDonc on sait que si $x>44$ cela ne servira à rien de continuer sur ce projet car il ne sera pas temps réel.\n\n## Condition Suffisante\n\n### RMA\n\n![](/assets/images/B2.SATR.TD1.BB20221125-03.png)\n\n### EDF\n\n![](/assets/images/B2.SATR.TD1.BB20221125-04.png)\n\n## Conclusion\n\n- Si $\\;x\\leq16\\;$, ce sera plus efficace de prendre l'algo EDF.\n- Si $\\;16<x\\leq22\\;$, on utilisera RMA.\n- Si $\\;22<x\\leq44\\;$, on ne saura pas l'efficacité a priori donc il faudra essayer.\n\n# Partie 2 - Estimation du $x$\n\nOn reçoit plus de détails du manageur qui a écrit un code pour calculer/estimer ce $x$.\n\n```c++\n/*\n * Stores information about a bank account.\n */\nstruct bank_account {\n    /* How much money is in the account. */\n    int balance; /* never use floats for managing money (too much approximation) */\n};\n\n/*\n * Deposits 'amt' into the 'account' and returns the new balance.\n */\nfloat deposit(struct bank_account *account, int amt) {\n    account->balance += amt;\n    return account->balance;\n}\n\n/*\n * Tries to withdraw 'amt' from the account. Returns 'true' if it\n * succeeded, 'false' if the account didn't contain enough.\n */\nbool withdraw(struct bank_account *account, int amt) {\n    if (account->balance >= amt) {\n        account->balance -= amt;\n        return true;\n    } else {\n        return false;\n    }\n}\n\n```\n\nOn travaille mtnt sur le _Compiler Explorer_ [GodBolt (Compiler Explorer)](https://godbolt.org/) pour continuer la programmation avec l'architecture de jeux d'instructions (_redus instruction set_ = coeur de calcul) `RISC-V rv32gc clang 15.0.0`.\n\n> Si besoin de voir la doc pour retrouver les acronymes des fonctions en assembleur, une option est [Mark Theis (Documentation Assembleur RISCV)](https://mark.theis.site/riscv/)\n\n\nOn va utiliser cette explorer pour compter le nombre d'instructions et ainsi mesurer le temps d'execution.\n\nOn obtient deux cas:\n\n1. Si on suit la branche `withdraw>LBB1_1>LBB1_3`, on obtient **24 instructions**.\n\n    $\\longrightarrow$ Du coup, on ne peut que tester sans RMA et sans EDF.\n\n2. Si on suit la branche `withdraw>LBB1_2>LBB1_3`, on obtient **18 instructions**.\n\n    $\\longrightarrow$ Du coup, dans ce cas, on sait qu'utiliser RMA sera plus efficace.\n\n**Remarque :**\n- On pourrait changer de compilateur pour vérifier si on trouve un meilleur nombre d'instructions.\n- Par exemple, `RISC-V rv32gc gcc 12.1.0` semble plus perfomant pour cette fonction.\n- On peut aussi demander d'optimiser le code en ajoutant `-O0` ou `-O1` max `-O2`.\n    - Aller plus haut en optimisation risque de rendre les calculs trop imprécis.\n    - Le cas où une optimisation rajoute un beug est plus rare.\n\n# Partie 3 - Choix d'un RR de Période 10\n\nLe manageur a l'intuition que passer en `RR de période 10` serait une bonne idée, vérifions :\n\nAssumons qu'il y a 100 euros dans le compte et que les taches suivantes sont appelées : $\\;T_1(100)\\;$ [`withdraw`], $\\;T_2(100)\\;$ [`deposit`] et $\\;T_3\\;$ [`balance`].\n\nNous obtenons la séquence d'éxecution de période suivante :\n![](/assets/images/B2.SATR.TD1.BB20221125-05.png)\n\n","n":0.044}}},{"i":53,"$":{"0":{"v":"OPLNE - Optimisation Programmation Linéaire en Nombres Entiers","n":0.354},"1":{"v":"\n\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par [C. Briand](briand@laas.fr)\n\n---\n\n# À Retenir\n\n## Densité d'un Graphe\n\nSoit $M$ est le nombre d'arcs et $N$ le nombre de noeuds,\n\n- DensitéGraphe Orienté: $\\quad\\dfrac{M}{\\;N^2\\;}$ \n- Graphe Non-Orienté: $\\quad\\dfrac{M}{\\;\\dfrac{\\;N\\,(N-1)\\;}{2}}$\n\n# Cours Magistraux\n\n- [[Notes de Cours|B2.OPLNE.CM]]\n\n<!--\n# Travaux Dirigés\n\n- [[...|...]]\n-->\n# Travaux Pratiques\n\n- [[B2.OPLNE.TP1]]\n\n# Support de Cours\n\n## Fichiers Moodles\n\n### CM\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TD\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TP\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n## Scans\n\n### Blackbard\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n### GEA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### RKA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n","n":0.115}}},{"i":54,"$":{"0":{"v":"CM","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par [C. Briand](briand@laas.fr)\n\n---\n\n> Notes du 2022/11/08 - Start\n\n\n\n# Presentation\n\n![](/assets/images/B2.OPLNE.CM.Slide-001.png)\n\n# Introduction\n\n## Recherche Opérationnelle (RO)\n\n![](/assets/images/B2.OPLNE.CM.Slide-002.png)\n\n## Optmisation Combinatoire (OC)\n\n![](/assets/images/B2.OPLNE.CM.Slide-003.png)\n\n> La notion de nombre fini d'étapes est très importantes !\n\n## Graphes et Optimisation Combinatoire\n\n![](/assets/images/B2.OPLNE.CM.Slide-004.png)\n\nGraphes sont utiles pour représenter des modèles combinatoires.\n\nProblèmes typiques:\n- Problème du voyageur de commerce ou les [Seven Bridges of Königsberg](https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg)\n- Séquençage d'ADN\n    - on lie ensemble les fragments qui présentent une incompatibalité\n    - ceci afin de dissocier les fragments fiables (sous-ensemble de noeuds non reliés entre eux-mêmes) des fragments instables (liées à trop de noeuds)\n\n## Illustration de l'explosion combinatoire\n\n![](/assets/images/B2.OPLNE.CM.Slide-005.png)\n\n## Exemple PL et OC\n\n![](/assets/images/B2.OPLNE.CM.Slide-006.png)\n\n- variables de décisions: $x_1$ et $x_2$\n- fonction objectif: $11x_1+7x_2$\n- inégalités expriment une contrainte de ressources limitées\n\n## Notions de complexité des algorithms\n\n![](/assets/images/B2.OPLNE.CM.Slide-007.png)\n![](/assets/images/B2.OPLNE.CM.Slide-008.png)\n![](/assets/images/B2.OPLNE.CM.Slide-009.png)\n\n# Objectifs du cours\n\n![](/assets/images/B2.OPLNE.CM.Slide-010.png)\n\n# I- Notions de Graphes\n\n## I-1) Définitions\n\n![](/assets/images/B2.OPLNE.CM.Slide-011.png)\n\n### Concepts de base\n\n> Keywords:\n- Sommets\n- Arcs\n- extrémité initiale/finale\n- successeurs/prédécesseurs\n- Densité\n- Graphe valué (ou pondéré)\n\n![](/assets/images/B2.OPLNE.CM.Slide-012.png)\n![](/assets/images/B2.OPLNE.CM.Slide-013.png)\n\n### Définitions générales\n\n> Keywords:\n- Sommets adjacents\n- Arêtes adjacentes \n- Arcs divergents/convergents\n- Degré et demi-degré\n\n![](/assets/images/B2.OPLNE.CM.Slide-014.png)\n\n## I-2) Connexité dans les graphes\n\n![](/assets/images/B2.OPLNE.CM.Slide-015.png)\n\n### Chaîne et Cycle / Chemin et circuit\n\n> Keywords:\n- Chaînes vs Chemin\n- Cycle vs Circuit\n- Isthme\n\n![](/assets/images/B2.OPLNE.CM.Slide-016.png)\n\n### Connexité\n\n> Keywords:\n- Connexité\n- Point d'articulation\n- Isthme\n\n![](/assets/images/B2.OPLNE.CM.Slide-017.png)\n\nExemple: \n\n![](/assets/images/B2.OPLNE.CM.BB20221108-01.png)\n\n### Forte Connexité\n\n![](/assets/images/B2.OPLNE.CM.Slide-018.png)\n\nExemple:\n\n![](/assets/images/B2.OPLNE.CM.BB20221108-02.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-03.png)\n\n# II- Parcours de graphes et problème de chemin\n\n## II-1) Parcours de graphes\n\n![](/assets/images/B2.OPLNE.CM.Slide-019.png)\n\n### Parcours\n\n> Keywords:\n- État (white/grey/black) d'un sommet\n- Parcours eulérien\n- Parcours hamiltonien\n\n![](/assets/images/B2.OPLNE.CM.Slide-020.png)\n\nAttention:\n- le problème du marchand de commerce est un problème de type **hamiltonien**\n- alors que le problème de sept ponts de Königsberg lui est un problème du type **eulérien**\n\n### Algorithme d'un Parcours en Largeur\n\n> Keywords:\n- BFS: Breadth First Search\n\n![](/assets/images/B2.OPLNE.CM.Slide-021.png)\n\nRemarque:\nPour coder l'$\\infty$ en C par exemple on peut utiliser la constante `maxint`\n\n![](/assets/images/B2.OPLNE.CM.BB20221108-04.png)\n\nExemple:\n![](/assets/images/B2.OPLNE.CM.BB20221108-05.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-06.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-07.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-08.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-09.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-10.png)\n\n### Algorithme d'un Parcours en Longue\n\n> Keywords:\n- DFS: Depth First Search\n\n![](/assets/images/B2.OPLNE.CM.Slide-022.png)\n\nAttention:\n- Un DFS n'est pas l'application d'un BFS sur chaque noeud\n- En BFS $d$ indique la distance mais en DFS $d$ représente l'**instant de découverte**\n\nExemple:\n![](/assets/images/B2.OPLNE.CM.BB20221108-11.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-12.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-13.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-14.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-15.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-16.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-17.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-17.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-18.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-19.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-20.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-21.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-22.png)\n![](/assets/images/B2.OPLNE.CM.BB20221108-23.png)\n\n\n\n> Notes du 2022/11/08 - End\n\n---\n\n> Notes du 2022/11/16 - Start - cf. Notes GEA !\n\n\n\n\n## II-2) Applications du parcours de graphe\n\n![](/assets/images/B2.OPLNE.CM.Slide-023.png)\n\n### Connexité\n\n![](/assets/images/B2.OPLNE.CM.Slide-024.png)\n\n### Forte Connexité\n\n![](/assets/images/B2.OPLNE.CM.Slide-025.png)\n\n### Tri topologique\n\n![](/assets/images/B2.OPLNE.CM.Slide-026.png)\n\n## II-3) Plus courts Chemin\n\n![](/assets/images/B2.OPLNE.CM.Slide-027.png)\n\n### Généralités\n\n![](/assets/images/B2.OPLNE.CM.Slide-028.png)\n\n### Formalisation du problème\n\n![](/assets/images/B2.OPLNE.CM.Slide-029.png)\n\n### Algorithme de Dijkastra\n\n![](/assets/images/B2.OPLNE.CM.Slide-030.png)\n![](/assets/images/B2.OPLNE.CM.Slide-031.png)\n\n### Algorithme de Bellman\n\n#### Cas général\n\n![](/assets/images/B2.OPLNE.CM.Slide-032.png)\n![](/assets/images/B2.OPLNE.CM.Slide-033.png)\n\n#### Cas des graphes sans circuits\n\n![](/assets/images/B2.OPLNE.CM.Slide-034.png)\n\n### Algorithme de Floyd-Warshall\n\n![](/assets/images/B2.OPLNE.CM.Slide-035.png)\n\n# III-  Chemins et Arbres\n\n## III-1) Existence de chemin\n\n![](/assets/images/B2.OPLNE.CM.Slide-036.png)\n\n### Chemin simple\n\n![](/assets/images/B2.OPLNE.CM.Slide-037.png)\n\n### Chemin eulériens\n\n![](/assets/images/B2.OPLNE.CM.Slide-038.png)\n![](/assets/images/B2.OPLNE.CM.Slide-039.png)\n![](/assets/images/B2.OPLNE.CM.Slide-040.png)\n\n## III-2) Arbres\n\n![](/assets/images/B2.OPLNE.CM.Slide-041.png)\n\n\n\n\n\n\n> Notes du 2022/11/16 - End\n\n---\n\n> Notes du 2022/11/18 - Start\n\n\n\n\n\n### Arbre Couvrant de coût minimal\n\n#### Principe\n\n![](/assets/images/B2.OPLNE.CM.Slide-042.png)\n\nUn arbre doit etre connexe et n'avoir que $N-1$ arretes.\n\nLe cocycle c'est l'ensemble des arretes qui s'ils sont rajoutés on aura une composante connexe.\n\n![](/assets/images/B2.OPLNE.CM.BB20221118-01.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-02.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-03.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-04.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-05.png)\n\n\nL'idée est de supprimer/rajouter des arretes d'un arbre pour les remplacer par des arretes de $U_{\\bar S}$ qui possède un poids plus optimale. \n\n#### Algorithme de Kruskal\n\n![](/assets/images/B2.OPLNE.CM.Slide-043.png)\n\nProblème principale de cette algorithm c'est qu'il faut trier les arêtes !\n\n#### Exemple\n\n![](/assets/images/B2.OPLNE.CM.BB20221118-06.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-07.png)\n\nMais comment on identifie si l'on crée un cycle ?\n\nPour cela on va indicé chaque sommet à la composante connexe ajoutée lors de l'itération.\n\n![](/assets/images/B2.OPLNE.CM.BB20221118-08.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-09.png)\n\n#### Algorithme de Prim\n\n![](/assets/images/B2.OPLNE.CM.Slide-044.png)\n\n#### Exemple\n\n![](/assets/images/B2.OPLNE.CM.BB20221118-10.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-11.png)\n\n# IV- Problèmes de flots\n\n## IV-1) Généralités\n\n![](/assets/images/B2.OPLNE.CM.Slide-045.png)\n\n### Définitions\n\n> Keywords: Flot saturé\n\n![](/assets/images/B2.OPLNE.CM.Slide-046.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-12.png)\n![](/assets/images/B2.OPLNE.CM.Slide-047.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-13.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-14.png)\n\n## IV-2) Algorithme de Ford et de Fulkerson\n\n![](/assets/images/B2.OPLNE.CM.Slide-048.png)\n\n### Coupe min / Flot max\n\n![](/assets/images/B2.OPLNE.CM.Slide-049.png)\n\n### Chaîne améliorante\n\n> Keywords: Graphe d'écart (ou résiduel)\n\n![](/assets/images/B2.OPLNE.CM.Slide-050.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-15.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-16.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-17.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-18.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-19.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-20.png)\n![](/assets/images/B2.OPLNE.CM.BB20221118-21.png)\n\n### Alogrithme\n\n![](/assets/images/B2.OPLNE.CM.Slide-051.png)\n\n\n\n\n> Notes du 2022/11/18 - End\n\n--\n\n> Notes du 2022/11/21 - Start\n\n\n\n\n# V- Programmation Linéaire (PL)\n\n## V-1) Introduction\n\n![](/assets/images/B2.OPLNE.CM.Slide-052.png)\n\n### Définition\n\n> Keywords: Programme Linéaire\n\n![](/assets/images/B2.OPLNE.CM.Slide-053.png)\n\n### Hypothèses\n\n![](/assets/images/B2.OPLNE.CM.Slide-054.png)\n\n- pas de divisions\n- pas de nombres non rationnels\n- pas de produit de variable (il faut garder des fonctions linéaires)\n\n### Forme canonique et standard\n\n![](/assets/images/B2.OPLNE.CM.Slide-055.png)\n\nPour passer à la forme std, on rajoute une variable de décision à chaque contrainte pour indiquer combien il manque à l'inégalité pour atteindre l'égalité.\n\n![](/assets/images/B2.OPLNE.CM.Slide-056.png)\n\n### Terminologie\n\n![](/assets/images/B2.OPLNE.CM.Slide-057.png)\n\n## V-2) Connextions entre approches géométriques et algébriques\n\n![](/assets/images/B2.OPLNE.CM.Slide-058.png)\n\n### Représentation dans le plan\n\n![](/assets/images/B2.OPLNE.CM.Slide-059.png)\n\n$c$ est au final le coeficient directeur du plan hyperbolique et ce coeficient oriente la priorité des variables de décision:\n- Si le plan est vertical (dans le cas 2D) on prioritise $x_1$ par rapport à $x_2$ ; et\n- Inversement si le plan est horizental.\n\n### Premières connextions\n\n![](/assets/images/B2.OPLNE.CM.Slide-060.png)\n\n### Algèbre\n\n#### Solution d'un système d'équations\n\n![](/assets/images/B2.OPLNE.CM.Slide-061.png)\n\n- $P$ partitionnement $\\rightarrow$ |\n- $x_N$ varibles hors bases\n- $x_B$ variables de bases\n\n#### Base et Solution de base\n\n![](/assets/images/B2.OPLNE.CM.Slide-062.png)\n\n- $x_D$ variables de décision\n- $x_E$ variables d'écart (permettant de passer d'une forme canonique à une forme standard)\n\n### Géométrie\n\n#### Point Extreme\n\n![](/assets/images/B2.OPLNE.CM.Slide-063.png)\n\n### Connexions\n\n![](/assets/images/B2.OPLNE.CM.Slide-064.png)\n\n### Dégénérescence\n\n![](/assets/images/B2.OPLNE.CM.Slide-065.png)\n\n## V-3) Principe de l'algo du simplexe\n\n![](/assets/images/B2.OPLNE.CM.Slide-066.png)\n\n### Idée de base\n\n> Keywords: voisine\n\n![](/assets/images/B2.OPLNE.CM.Slide-067.png)\n\n### Exemple: Utilisation du dictionnaire\n\n#### Formulation\n\n![](/assets/images/B2.OPLNE.CM.Slide-068.png)\n\n![](/assets/images/B2.OPLNE.CM.BB20221121-01.png)\n![](/assets/images/B2.OPLNE.CM.BB20221121-02.png)\n![](/assets/images/B2.OPLNE.CM.BB20221121-03.png)\n![](/assets/images/B2.OPLNE.CM.BB20221121-04.png)\n![](/assets/images/B2.OPLNE.CM.BB20221121-05.png)\n\nIl vient que la solution optimale est $x=(3,0,7,0)$ car $z$ est tangent au point extremum et ne peut plus être augmenté (les coef sont tous négatifs)\n\n\n\n\n> Notes du 2022/11/21 - End\n\n---\n\n> Notes du 2022/11/25 - Start\n\n\n\n\n### Tableau du simplexe\n\n> Keywords: matrice augmentée ; tableau admissible\n\n![](/assets/images/B2.OPLNE.CM.Slide-069.png)\n\n- Méthode efficace à la main même si pas très optimale en terme de temps d'execution.\n\n#### Base quelconque\n\n![](/assets/images/B2.OPLNE.CM.Slide-070.png)\n\n#### Le pivotage\n\n> Keywords: bases voisines ; colonne/ligne du pivot \n\n![](/assets/images/B2.OPLNE.CM.Slide-071.png)\n\n#### Signatures\n\n> Keywords: coûts réduits ; tableau non-borné\n\n![](/assets/images/B2.OPLNE.CM.Slide-072.png)\n\n#### Algorithm (Phase 2)\n\n> Keywords: Tableau courant ; conflit ; règle de Brand\n\n![](/assets/images/B2.OPLNE.CM.Slide-073.png)\n\n##### Exemple 1\n\n![](/assets/images/B2.OPLNE.CM.Slide-074.png)\n![](/assets/images/B2.OPLNE.CM.Slide-075.png)\n![](/assets/images/B2.OPLNE.CM.Slide-076.png)\n![](/assets/images/B2.OPLNE.CM.Slide-077.png)\n\n##### Exemple 2 (règle de Bland)\n\n![](/assets/images/B2.OPLNE.CM.Slide-078.png)\n![](/assets/images/B2.OPLNE.CM.Slide-079.png)\n![](/assets/images/B2.OPLNE.CM.Slide-080.png)\n![](/assets/images/B2.OPLNE.CM.Slide-081.png)\n\n## V-4) Choix d'une base initiale admissible\n\n### Phase 1 du simplexe\n\n> Keywords: tableau initiale admissible\n\n![](/assets/images/B2.OPLNE.CM.Slide-082.png)\n\n#### Pourquoi une phase 1 ?\n\n![](/assets/images/B2.OPLNE.CM.Slide-083.png)\n\n#### Principes\n\n> Keywords: variable auxilliaire ; problème auxiliaire P2\n\n![](/assets/images/B2.OPLNE.CM.Slide-084.png)\n\n#### Propriétés\n\n> Keywords: base admissible ; variable d'écart ; solution admissible\n\n![](/assets/images/B2.OPLNE.CM.Slide-085.png)\n\n### Algorithme du simplexe à deux phases\n\n![](/assets/images/B2.OPLNE.CM.Slide-086.png)\n\nEn terme d'optimalité, l'algorithm du simplexe est d'ordre exponentielle (dans le pire des cas) mais il n'y a pas mieux en moyenne pour le moment.\n\nUn algo concurrant serait l'algo ellipsoide qui est d'ordre polynomiale dans le pire des cas mais en moyenne est moins efficace\n\n### Exemple\n\n![](/assets/images/B2.OPLNE.CM.Slide-087.png)\n\n![](/assets/images/B2.OPLNE.CM.BB20221125-01.png)\n![](/assets/images/B2.OPLNE.CM.BB20221125-02.png)\n![](/assets/images/B2.OPLNE.CM.BB20221125-03.png)\n![](/assets/images/B2.OPLNE.CM.BB20221125-04.png)\n\nLa phase 1 est terminée. On peut alors appliquer la phase 2 en faisant rentrer $x_3$ en base et sortir $x_5$.\n\n# VI- PL en Nombre Entiers (PLNE)\n\n## VI-1) Introduction\n\n![](/assets/images/B2.OPLNE.CM.Slide-088.png)\n\n### Définitions\n\n> Keywords: programme en nombres entiers ; programme binaire ; programme mixte\n\n![](/assets/images/B2.OPLNE.CM.Slide-089.png)\n\n### Intérêts et inconvénients de la PLNE\n\n> Keywords: langage de modélisation ; solveur: Cplex/Gurobi/SCIP\n\n![](/assets/images/B2.OPLNE.CM.Slide-090.png)\n\n### Relaxation linéaire\n\n> Keywords: contrainte d'intégrité ; borne inférieure/supérieure du critère\n\n![](/assets/images/B2.OPLNE.CM.Slide-091.png)\n\n### Difficulté de la PLNE\n\n> Keywords: arrondir\n\n![](/assets/images/B2.OPLNE.CM.Slide-092.png)\n\n### Illustration 1\n\n![](/assets/images/B2.OPLNE.CM.Slide-093.png)\n![](/assets/images/B2.OPLNE.CM.Slide-094.png)\n\n### Illustration 2\n\nExemple du problème de sac à dos\n\n![](/assets/images/B2.OPLNE.CM.Slide-095.png)\n![](/assets/images/B2.OPLNE.CM.Slide-096.png)\n![](/assets/images/B2.OPLNE.CM.Slide-097.png)\n![](/assets/images/B2.OPLNE.CM.Slide-098.png)\n![](/assets/images/B2.OPLNE.CM.Slide-099.png)\n\n\n\n\n\n> Notes du 2022/11/25 - End\n\n---\n\n> Notes du 2022/12/05 - Start\n\n\n\n\n\n### Méthode de résolution des PLNE\n\n![](/assets/images/B2.OPLNE.CM.Slide-100.png)\n\n## VI-2) Cas des PLNE équivalents  à leur PL relaxé\n\n![](/assets/images/B2.OPLNE.CM.Slide-101.png)\n\n### Le théorème des valeurs entières\n\n![](/assets/images/B2.OPLNE.CM.Slide-102.png)\n\n### Matrice totalement unimodulaire\n\n> Keywords: Hellet et Tomkins\n\n![](/assets/images/B2.OPLNE.CM.Slide-103.png)\n\n### Problèmes de réseaux\n\n> Keywords: matrice d'incidence sommets-arcs\n\n![](/assets/images/B2.OPLNE.CM.Slide-104.png)\n\n### Exemple calcul du flot maximum\n\n> Keywords: matrice de contraintes\n\n![](/assets/images/B2.OPLNE.CM.Slide-105.png)\n![](/assets/images/B2.OPLNE.CM.BB20221205-01.png)\n\n## VI-3) Méthode arbore\n\n![](/assets/images/B2.OPLNE.CM.Slide-106.png)\n\n### Branch & Bound\n\n#### Branch\n\n![](/assets/images/B2.OPLNE.CM.Slide-107.png)\n\n#### Remarques\n\n![](/assets/images/B2.OPLNE.CM.Slide-108.png)\n\n#### Bound\n\n> Keywords: relaxation linéaire\n\n![](/assets/images/B2.OPLNE.CM.Slide-109.png)\n\n### Principes de séparation\n\n> Typique dans un sujet d'examen\n\n![](/assets/images/B2.OPLNE.CM.Slide-110.png)\n\n### Exemple\n\n![](/assets/images/B2.OPLNE.CM.Slide-111.png)\n![](/assets/images/B2.OPLNE.CM.Slide-112.png)\n![](/assets/images/B2.OPLNE.CM.Slide-113.png)\n![](/assets/images/B2.OPLNE.CM.Slide-114.png)\n![](/assets/images/B2.OPLNE.CM.Slide-115.png)\n![](/assets/images/B2.OPLNE.CM.Slide-116.png)\n\n## VI-4) Modélisation\n\n![](/assets/images/B2.OPLNE.CM.Slide-117.png)\n\n### PL-01\n\n> Keywords: k parmi n, implication, contraintes logiques, problèmes d'investissement\n\n![](/assets/images/B2.OPLNE.CM.Slide-118.png)\n\n### Coûts fixes\n\n![](/assets/images/B2.OPLNE.CM.Slide-119.png)\n\n- B est une constante (elle représente ici le plafond imposé par le budget dans le cas où on investiserait que sur $x_1$)\n\n### Disjonction\n\n![](/assets/images/B2.OPLNE.CM.Slide-120.png)\n\n### Implication\n\n> Keywords: Table de Karnaugh\n\n![](/assets/images/B2.OPLNE.CM.Slide-121.png)\n![](/assets/images/B2.OPLNE.CM.BB20221205-02.png)\n![](/assets/images/B2.OPLNE.CM.BB20221205-03.png)\n\n### k parmi n\n\n![](/assets/images/B2.OPLNE.CM.BB20221205-04.png)\n\n### Domaines non-convexes\n\n> Keywords: domaine réalisable\n\n![](/assets/images/B2.OPLNE.CM.Slide-122.png)\n![](/assets/images/B2.OPLNE.CM.BB20221205-05.png)\n\n### Objectif\n\n> Keywords: fonctions affines par morceaux , coût d'expansion\n\n![](/assets/images/B2.OPLNE.CM.Slide-123.png)\n![](/assets/images/B2.OPLNE.CM.BB20221205-06.png)\n![](/assets/images/B2.OPLNE.CM.BB20221205-07.png)\n\n### Produit de variables\n\n![](/assets/images/B2.OPLNE.CM.Slide-124.png)\n![](/assets/images/B2.OPLNE.CM.BB20221205-08.png)\n![](/assets/images/B2.OPLNE.CM.BB20221205-09.png)\n\n\n\n\n> Notes du 2022/12/05 - End\n\n---\n\n<!--\n\n\n\n\n","n":0.03}}},{"i":55,"$":{"0":{"v":"CNL - Commande Non Linéaire","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n---\n\n<!--\n# À Retenir\n\n- ...\n-->\n\n# Cours Magistraux\n\n- [[B2.CNL.CM.Partie1]]\n- [[B2.CNL.CM.Partie2]]\n- [[B2.CNL.CM.Partie3]]\n- [[B2.CNL.CM.Partie4]]\n\n# Travaux Dirigés\n\n- [[B2.CNL.TD1]]\n- [[B2.CNL.TD2]]\n- [[B2.CNL.TD3]]\n\n\n<!--\n# Travaux Pratiques\n\n- [[...|...]]\n-->\n\n# Support de Cours\n\n## Fichiers Moodles\n\n### CM\n\n- [Slide Partie 1](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.CNL.CM.SystCompl.SlidePartie1.20221107.pdf)\n- [Slide Partie 2](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.CNL.CM.SystCompl.SlidePartie2.20221109.pdf)\n- [Slide Partie 3](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.CNL.CM.SystCompl.SlidePartie3.20221125.pdf)\n\n\n\n<!--\n### TD\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TP\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n-->\n\n## Scans\n\n<!--\n### Blackbard\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n-->\n\n\n### GEA\n\n- [Notes GEA du 2022/11/07](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.CNL.CM.NotesGEA.20221107.pdf) ***\n\n<!--\n### RKA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n-->\n\n","n":0.124}}},{"i":56,"$":{"0":{"v":"CM","n":1}}},{"i":57,"$":{"0":{"v":"Partie 4 - Linéarisation entrée-sortie (Dynamique Interne)","n":0.378},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut\n\n---\n\n> Notes du 2022/12/02 - Start\n\n\n\n# IV- Linéarisation entrée-sortie (Dynamique Interne)\n\n## IV-1. Définition du degré\n\nOn suppose le système NL suivant :\n$$\n\\begin{cases}\n\\dot x = f(x) + g(x)\\,u\\\\\ny = h(x)\n\\end{cases}\n$$\n\n### Définition\n\nUn système siso admet un **degré relatif** $r$ si\n$$\n\\begin{matrix}\n\\begin{cases}\nL_g\\,L_f\\,h(x) = 0 \\quad 0\\leq i \\leq(r-1)\\\\\nL_g\\,L_f^{r-1}\\,h(x) \\neq 0 \\quad \\forall x\\in\\Omega\n\\end{cases}\\\\\n\\iff\n\\begin{cases}\n\\dot\\mu_1 = \\mu_2\\\\\n\\vdots\\\\\n\\dot\\mu_r = L_g....\n\\end{cases}\n\\end{matrix}\n$$\n\nAttention: cette définition est **locale**\n\n### Explication\n$$\n...\n$$\n\n### Remarque\n???\n- Dans le cas d'un système linéaire défini par sa fct de transfert $r = n - m$ où $n$ est le nombre de pôles et $m$ le nombre de zéros\n\n## IV-2. La forme normale\n\n### En théorie\n\nUne fois définie le **degré relatif** $r$, on peut proposer un **difféomorphisme** pour mettre en évidence les dérivées successives de $y$ (jusqu'à $y^{r-1}(t)$).\n\n#### La notation de Slotine $\\gamma(i)$\n\n$$\n\\begin{cases}\n\\mu_1 = y(t) = h(x)\\\\\n\\mu_2 = \\dot y(t) = L_f\\,h(x)\\\\\n\\vdots\\\\\n\\mu_r = y^{r-1}(t) = L_f^{r-1}\\,h(x) + L_g\\,L_f^{r-1}\\,h(x)\\,u\n\\end{cases}\n$$\n\nOn rajoute un certain nombre d'états $\\phi_1(x)\\dots\\phi_{n-r}(x)$ pour compléter et obtenir ainsi :\n$$\n\\begin{cases}\n\\mu_1\\\\\n\\vdots\\\\\n\\mu_2\\\\\n\\qquad\\qquad\\qquad \\text{constitue un difféomorphisme}\\\\\n\\phi_1\\\\\n\\vdots\\\\\n\\phi_{n-r}\\\\\n\\end{cases}\n$$\n\nIl suffit de montrer que la Jacobienne de la transformation est non-singulière soit que $\\{\\nabla\\mu_1 \\dots \\nabla\\mu_r \\nabla\\phi_1 \\dots \\nabla\\phi_{n-r}\\}$ sont linéairement indépendants.\n\n\n#### Début de preuve\n\nMontrer que $\\{\\nabla\\mu_1 \\dots \\nabla\\mu_r \\nabla\\phi_1 \\dots \\nabla\\phi_{n-r}\\}$ son lin. indép. (par l'absurde).\n\nSupposons qu'ils existent ${\\alpha_1(x)\\dots\\alpha_r(x)}$ non identiquement nul.\n$$\n\\begin{matrix}\n&\\alpha_1(x)\\,\\nabla\\mu_1(x)+\\dots+\\alpha_r(x)\\,\\nabla\\mu_r(x) = 0\\\\\n\\implies&\\big(\\alpha_1(x)\\,\\nabla\\mu_1(x)+\\dots+ \\alpha_r(x)\\,\\nabla\\mu_r(x)\\big)\\cdot g(x) = 0\\\\\n\\implies&\\alpha_1(x)\\,\\nabla\\mu_1(x)\\,g(x)+\\dots+\\alpha_r(x)\\,\\nabla\\mu_r\\,g(x) = 0\\\\\n\\end{matrix}\n$$\n!!!\nor\n$$\n\\nabla\\mu_1\\,g(x) = L_g\\,h(x) = 0\n$$\nidem jusqu'à $\\nabla\\mu_{r-2}\\,g(x)$ et donc on a que:\n$$\n\\alpha_r(x)\\,\\nabla\\mu_r(x)\\,g(x) = 0\n$$\nor $\\nabla\\mu_r(x)\\,g(x)\\neq0$ et donc $\\alpha_r(x) = 0$ \n\nContinuons avec la même méthode pour montrer que $\\alpha_{r-1}=0$\n$$\n\\begin{matrix}\n&\\big(\\alpha_1(x)\\,\\nabla\\mu_1(x)+\\dots+\\alpha_r(x)\\,\\nabla\\mu_r(x)\\big)\\cdot[f\\,g] = 0\\\\\n\\implies&\\alpha_1(x)\\big(L_f\\,L_g\\,\\mu_1-L_g\\,L_f\\,\\mu_1\\big)+\\dots+\\alpha_{r-1}(x)\\,L_{[f\\,g]}\n\\end{matrix}\n$$\n\n...\n\n\n#### Remarque\n- $\\nabla\\mu_1$ est orthogonale à $g$, $adj_f\\,g$, $\\dots$, $adj_f^{r-2}\\,g$\n- $\\nabla\\mu_2$ est orthogonale à $g$, $adj_f\\,g$, $\\dots$, $adj_f^{r-3}\\,g$\n- $\\quad\\vdots$\n- $\\nabla\\mu_1$ n'est pas orthogonale à $g$\n\n#### Géométriquement\n\n![](/assets/images/B2.CNL.CM.P4S2.Geometriquement.png)\n\nLa dimension de l'hyperplan orthogonale à $g$ est de dimension $n-1=r-1+n-r$.\n\nOn pourrait alors considérer une \"base\" de cette hyperplan comme suit :\n$$\n\\nabla\\mu_1 \\dots \\nabla\\mu_{r-1}\\;\\nabla\\phi_1\\dots\\nabla\\phi_{n-r}\n$$\n\nUn difféomorphisme serait alors :\n$$\n\\begin{cases}\n\\mu_1\\\\\n\\vdots\\\\\n\\mu_2\\\\\n\\phi_1\\\\\n\\vdots\\\\\n\\phi_{n-r}\\\\\n\\mu_r\n\\end{cases}\n$$\n\nIl reste à calculer les $\\nabla\\phi$ tel que $\\qquad\\nabla_phi_i(x)\\,g(x) = 0 \\qquad \\forall i\\in{1,\\dots,n-r}\\qquad$ soient lin. indép. p.r.à $\\nabla\\mu_1\\dots\\nabla\\mu_{r-1}$ et leur existence est garanti par le théorème de Frobinius.\n\nSupposons que\n$$\n\\begin{cases}\n\\mu_1\\\\\n\\vdots\\\\\n\\mu_2\\\\\n\\qquad\\qquad\\qquad \\text{constitue un difféomorphisme}\\\\\n\\phi_1\\\\\n\\vdots\\\\\n\\phi_{n-r}\\\\\n\\end{cases}\n$$\nAlors le système NL s'écrit :\n$$\n\\begin{cases}\n\\dot\\mu_1(x) = \\mu_2\\\\\n\\vdots\\\\\n\\dot\\mu_r(x) = L_f^r\\,\\mu_1(x) + L_g\\,L_f^{r-2}\\,\\mu_1(x)\\,u\\\\\n\\dot\\phi(x) = \\omega(\\phi,\\mu)\n\\end{cases}\n$$\n\nLa forme normale s'écrit alors :\n$$\n\\begin{cases}\n\\dot\\mu_1(x) = \\mu_2\\\\\n\\vdots\\\\\n\\dot\\mu_r(x) = a(\\phi,\\mu) + b(\\phi,\\mu)\\,u\\\\\n\\dot\\phi(x) = \\omega(\\phi,\\mu)\n\\end{cases}\n$$\navec $b(\\phi,\\mu)\\neq0$\n\n### Exemple\n\nConsidérons le système suivant :\n$$\n\\begin{cases}\n\\dot x_1 = -x_1 + e^{2x_2}\\,u\\\\\n\\dot x_2 = 2x_1x_2 + \\sin x_2 + \\frac{1}{2}u\\\\\n\\dot x_3 = 2x_2\\\\\ny = x_3\n\\end{cases}\n$$\n\n1. Calculer le degré relatif\n2. Trouver $\\phi_1$\n3. Proposer un chgmt de variable permettant de touver la forme modale\n\n...\n<!--image1-->\n\n## IV-3. La dynamique des zéros\n\nOn choisit \n$$\n\\begin{cases}\n\\mu_1(0) = 0\\\\\n\\vdots\\\\\n\\mu_r(0) = 0\n\\end{cases}\\qquad\\text{et}\\qquad v = 0\n$$\n\nAlors $\\mu(t) = e^{At}\\mu(0) = 0 \\quad \\forall t>0$\n\nOn trouve la commande de $u(t) = \\frac{\\;-a(\\omega,\\phi)\\;}{b(\\omega,\\phi)}$ tel que la sortie et les dérivées successives jusqu'au degré relatif égale à 0.\n\nLa **dynamique des zéros** s'écrit : $\\qquad\\dot\\phi = \\omega(\\phi,0)$\n\n### Définition\n\nOn dit que le système est **à minimum de phase** si la dynamique des zéros est asymptotiquement stable.\n\n### Rappel (en lénaire)\n\n...\n<!--image2-->\n\n- On réalise le bouclage (soit trouver des espaces d'états)\n- On choisit  :\n    $$\n    \\begin{cases}\n    \\mu_1 = y(t)\\\\\n    \\vdots\\\\\n    \\mu_{n-m} = y^{n-m-1}(t)\\\\\n    \\end{cases}\n    $$\n    ainsi\n    $$\n    \\dot \\mu = \n    \\begin{bmatrix}\n    0 & 1 & 0 & \\dots & 0\\\\\n    \\vdots & &\\ddots & & \\vdots\\\\\n    \\vdots & & & & 1\\\\\n    0 & \\dots & \\dots & \\dots & 0\n    \\end{bmatrix}\n    +\n    \\begin{bmatrix}\n    0\\\\ \\vdots\\\\ 0\\\\ 1\\\\\n    \\end{bmatrix}\n    \\cdot\n    \\Big(e -\\lambda^T\\mu\\Big)\n    $$\n- On choisit $m$ états $\\omega_1 \\dots \\omega_m$ et on obitient\n    $$\n    \\begin{cases}\n    \\dot\\omega = A_{\\omega} \\omega + B_{\\omega}y\\\\\n    y_{\\omega} = C_{\\omega} \\omega\n    \\end{cases}\n    $$\n- Le système s'écrit\n    $$\n    \\begin{cases}\n    \\dot\\mu = A_{\\omega} \\omega + B_{\\omega}\\Big(u -C_{\\omega}\\omega-\\lambda^T\\mu\\Big)\\\\\n    \\dot\\omega = A_{\\omega} \\omega + B_{\\omega}C\\mu \\qquad \\text{avec} \\quad C = [1\\;0 \\dots 0]\n    \\end{cases}\n    $$\n    si on choisit $u=\\lambda^T\\mu + C_{\\omega}+v$, on a :\n    $$\n    \\begin{cases}\n    \\dot\\mu = A_{c} \\omega + B_{c}v\\\\\n    \\dot\\omega = A_{\\omega} \\omega + B_{\\omega}C\\mu \\qquad \\text{avec}\\\\\n    y = C\\mu\n    \\end{cases}\n    $$\n    où $A_{\\omega}$ est la **dynamique des zéros** (les vp de $A_{\\omega}$ sont les zéros de $G$)\n\n### Rappel minimum de phase\n\n![](/assets/images/B2.CNL.CM.Extra.RappelMinimumPhase.png)\n\n## IV-4. Résultats sur la stabilité\n\nOn suppose le système sous forme modale :\n$$\n\\begin{cases}\n\\dot\\mu_1(x) = \\mu_2\\\\\n\\vdots\\\\\n\\dot\\mu_r(x) = v\\\\\n\\dot\\phi(x) = \\omega(\\phi,\\mu)\n\\end{cases}\n$$\nOn choisit $\\;v=-\\lambda^T\\mu\\;$ tel que la matrice $\n\\begin{bmatrix}\n0 & 1 & 0 & \\dots & 0\\\\\n\\vdots & &\\ddots & & \\vdots\\\\\n\\vdots & & & & 1\\\\\n-\\lambda_1 & \\dots & \\dots & \\dots & -\\lambda_r\n\\end{bmatrix}\n$ soit **Hurwitz**\n\n### Théorème\n\nSi la dynamique des zéros est **localement asymptotiquement stable**, alors le système asservi est **localement asymptotiquement stable**.\n\n> Attention: (Gros problème) ce théorème ne donne aucune garantie sur le bassin d'attraction !\n\n### Exemple\n\nConsidérons\n$$\n\\begin{cases}\n\\dot\\epsilon_1(x) = \\epsilon_2\\\\\n\\dot\\epsilon_2(x) = v\\\\\n\\dot\\eta(x) = \\frac{1}{2} \\big(1+\\epsilon_2\\big)\\eta^2\n\\end{cases}\n$$\n\nPosons $\\;v=-\\alpha_1\\epsilon_1-\\alpha_2\\epsilon_2\\;$ et $\n\\begin{bmatrix}\n0&1\\\\ -\\alpha_1 & \\alpha_2\n\\end{bmatrix}\n$ est Hurwitz alors le système bouclé est LAS car $\\dot\\eta = -\\frac{1}{2}\\eta^3$ est GAS\n\n## IV-5. Tracking et dynamique inverse\n\nOn définit une **trajectoire** $y_d(t) = \\begin{bmatrix}y_d(t)\\\\\\vdots\\\\y_d^{(r)}(t)\\end{bmatrix}$ et l'**erreur de tracking** $\\;\\tilde\\mu = \\mu(t)-\\mu_d(t)$.\n$$\n\\begin{cases}\n\\dot{\\tilde\\mu}_1 = \\tilde\\mu_2\\\\\n\\vdots\\\\\n\\dot{\\tilde\\mu}_r = ...\n\\end{cases}\n$$\n\nIl est aisé de choisir $u$ pour que $\\tilde\\mu(t)$ tends vers 0 exponentiellement.\n\n### Théorème\n\nSupposons que la solution $\\begin{cases}\\dot\\phi_d = \\omega\\big(\\phi_d,\\mu_d(t)\\big)\\\\\\phi_d=0\\end{cases}$ **existe** et est **bornée** et **uniformément AS** alors le système asservi est tel que $\\tilde\\mu(t)$ tends vers 0 pour l'horizon infini.\n\nImaginons que $y(t) \\equiv y_d(t)$ et dérivons :\n$$\ny^{(r)}(t) = y_d^{(r)}(t) = a(y_d(t),\\phi) + b(\\mu_d(t),\\phi)\\,u\n$$\nConsidérons alors\n$$\n\\begin{cases}\nu(t) = \\dfrac{\\;y_d^{(r)}(t) - a(y_d(t),\\phi)\\;}{b(\\mu_d(t),\\phi)}\\\\\n\\dot\\phi = \\omega(\\phi,\\mu_d(t))\\\\\n\\phi(0) = ??\n\\end{cases}\n$$\n\n> cf Book: (Lyapunov: Kokotovic / Sepulchire) / Isodore\n\n\n\n\n> Notes du 2022/12/02 - End\n\n---","n":0.034}}},{"i":58,"$":{"0":{"v":"Partie 3 - Commande des Systèmes Non Linéaires","n":0.354},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut\n\nSupport de cours:\n- [Slide Partie 3](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.CNL.CM.SlidePartie3.20221125.pdf)\n\n---\n\n> Notes du 2022/11/23 - Start\n\n\n\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-01.png)\n\n# Présentation du cours\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-02.png)\n\n# Sommaire\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-03.png)\n\n# Partie III - Commandes : Linéaristation par bouclage\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-04.png)\n\n## III-1. Introduction\n\n### III-1.1) Elements d'introduction\n\n#### Principales Sources\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-05.png)\n\n#### Difficulté d'asservir des systèmes non linéaires\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-06.png)\n\n#### Quels types de système pour la linéarisation ?\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-07.png)\n\n\n#### Contexte de la linéarisation: choix du système\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-08.png)\n\n### III-1.2) Un premier exemple\n\n#### Principe de la régulation de niveau\n\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-09.png)\n\n> [Infundibuliforme](https://www.lalanguefrancaise.com/dictionnaire/definition/infundibuliforme) (adj.) : Qui a la forme d'un entonnoir.\n\nOn ne pourra pas considérer une commande non affines vis-à-vis de $u$.\n\n#### Modélisation du comportement dynamique\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-10.png)\n\n#### Choix d'une commande\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-11.png)\n\n#### Conclusion\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-12.png)\n\n\n\n\n## III-2. Philosophie de la méthode\n\n### III-2.1) Introduction\n\n#### Remarques préliminaires\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-13.png)\n\nSi $\\gamma$ n'est pas inversible, alors on essaie de trouver un bassin d'attraction qui nous éloigne du point interdit. Si maintenant on veut se placer exactement sur ce point non invertible alors le fait meme que $\\gamma(x_{desire})=0$ indique possiblement que le système n'est pas commandable sur ce point.\n\n#### Une première classe de système\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-14.png)\n![](/assets/images/B2.CNL.CM.SlidePartie3-15.png)\n\n#### Exemple\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-16.png)\n\nPourquoi ce changement de variable ?\n\nMais on veut que la non linéairité se trouve sur le meme niveau que la commande $u$ du coup on passe par le chgmt de variable en $z$ pour faire sauter la fonciton $\\sin$ sur l'etat $z_2$\n\nOn trouve ainsi $\\quad u=z_1^2 + \\dfrac{v}{\\;\\sqrt{a^2-z_2^2\\;}\\;}$\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-17.png)\n\n### III-2.2) Linéarisation entrée/état\n\n#### Principe général\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-18.png)\n\n#### Outil mathématique : le difféomorphisme\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-19.png)\n\n#### Système linéarisable par bouclage\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-20.png)\n\n#### Qlqs questions/remarques\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-21.png)\n\nIl faut connaitre précisément chaque paramètre dont $z$ dépend sinon on loupe completement l'annulation de la NL.\n\nCeci pose des problemes de robustesse.\n\nAu contraire, avec la méthode de Lyapunov, avoir une incertitude ne va que faire varier notre dérivée mais vu que notre condition impose seulement d'être négatif on possede plus de robustesse.\n\nEn outre, au final tout retour d'état minise un coût (voir [[B1.COI]]) or tout retour d'état possède une fonction de lyapunov derriere !\n\nL'**inverse optimality** vise à synthétiser la commande en cherchant la minimisation du cout via des fct de lyapunov (méthode LQR).\n\n### III-2.3) Linéarisation entrée/sortie\n\n#### Principe de la linéarisation entrée/sortie\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-22.png)\n\n#### Exemple\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-23.png)\n\nFaire un fowarding sur x_1 et x_2 en considerant x_3 comme une entree puis faire le backstepping sur x_2 et x_3 \n\n![](/assets/images/B2.CNL.CM.SlidePartie3-24.png)\n\n!!! On peut suivre n'importe quelle trajectoire du moment qu'elle est dérivable\n\n\n#### Remarques\n\n> Keywords: degré relatif\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-25.png)\n\n\n\n- Il se trouve qu'on commence avec 3 etats pour finir seulement avec 2 etats ?? \n- Cela ne poserait pas de pb si l'on peut démontrer que ce troisieme etat est stable\n- degré relatif = nb de fois qu'il est nécessaire de dérivée pour faire apparaître $u$\n\n#### Exemple d'un système linéaire\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-26.png)\n\n#### Remarque sur les deux exemples\n\n> Keyword: dynamique interne\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-27.png)\n\nEn appliquant la loi de commande en BF, on a rendu non-observable une partie des etats --> cette partie s'appelle la **dynamique interne** et sa dimension vaut $n-r$\n\nLa dynamique interne depend de $u$ en NL (elle est fixe en linéaire).\n\nDans le cas de l'exemple, un etat est non observable puisque $n-r=3-2=1$.\n\nUne façon de procéder pour poursuivre serait d'injecter $u$ dans le système et l'analyser.\n\n### III-2.4) Notion de dynamique interne ou dynamique des zéros\n\n#### Introduction\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-28.png)\n\n#### Exemple\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-29.png)\n![](/assets/images/B2.CNL.CM.SlidePartie3-30.png)\n\n#### Conclusion\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-31.png)\n\n## III-3. Principaux outils mathématiques\n\n### III-3.1) Introduction\n\n#### Necessité de développer des outils théoriques\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-32.png)\n\n#### Jacobienne\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-33.png)\n\n### III-3.2) Dérivée de Lie & Crochets de Lie\n\n#### Déf.: Dérivée de Lie\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-34.png)\n\n> Attention il s'agit d'un produit scalaire entre la jacobienne et $f$\n\n#### Calculs des Dérivée de Lie successives\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-35.png)\n\n#### Exemple \n\n![](/assets/images/B2.CNL.CM.SlidePartie3-36.png)\n\n$L_f h$ = la manière qu'une fonction évolue selon $f$\n\nLa force de la matrice de commandabilité est de nous indiquer à quel point $u$ peut influencer les dérivées de la sortie $y$\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-37.png)\n\n#### Déf.: Crochets de Lie\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-38.png)\n\nSi un champ de vecteur est subit alors on l'appelle un champ de dérive.\n\nLe crochet de lie illustre la propriété de commutativité de deux fonctions. Si ce crochet est un vecteur nul alors $f$ et $g$ sont commutatives.\nSi c'est un vecteur non nul alors il s'agit de la direction vectiorelle representant l'erreur/ecart de la non commutation.\n\n#### Exemple\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-39.png)\n![](/assets/images/B2.CNL.CM.SlidePartie3-40.png)\n\n#### Propriétés des Crochets de Lie\n\n> Keywords: Bilinéarité ; Antisymétrie ; Identité de Jacobi\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-41.png)\n\n### III-3.3) Difféomorphisme\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-42.png)\n\n### III-3.4) Thm de Frobenius\n\n#### Objectifs du Théorème de Frobenius\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-43.png)\n\n#### Exemple\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-44.png)\n\n#### Idée du Thm de Frobenius\n\n> Keywords: Intégrabilité\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-45.png)\n\n#### Généralisation\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-46.png)\n\n#### Champ involutif\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-47.png)\n\n#### Exemple\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-48.png)\n\n#### Thm d'existence\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-49.png)\n\n## III-4. Linéarisation entrée/état\n\n### III-4.1) Introduction\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-50.png)\n\nOn va vouloir que le degré relatif du système soit égal à la dimension de ce système. Donc il faut dérivée $n$ fois ($n$ étant la dim du système) sans faire apparaitre la commande avant la $n$-ième dérivée.\n\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-51.png)\n\n### III-4.2) Principaux résultats théoriques\n\n#### Théroème entrée/état linéarisable\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-52.png)\n\n#### Interprétation du résultat de linéarisation entrée/état\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-53.png)\n\n#### Application\n\nReprenant le système présenté dans l'introduction (en supposant être en SISO pour ne pas compliquer $g$) :\n\n$$\n\\dot x = f(x) + g(x)\\;u\n$$\n\nAu final, faire une linéarisation entrée/état c'est faire une linéarisation entrée/sortie avec une dynamique interne nulle.\n\nDonc ajoutant une sortie :\n$$\n\\begin{cases}\n\\dot x = f(x) + g(x)\\;u\\\\[0.2cm]\ny = T_1(x)\n\\end{cases}\n$$\n\nDérivons maintenant $y$ :\n$$\n\\begin{matrix}\n\\dot y &=& d_t T_1(x) = \\partial_x T_1 \\; \\dot x\\\\\n&=& \\partial_x T_1 \\;\\Big(\\;f(x) + g(x)\\;u\\;\\Big)\n\\end{matrix}\n$$\n\nOn impose par choix que $\\quad \\partial_x T_1\\;g(x)  = L_g\\;T_1 = 0$\n\nDérivons à nouveau :\n$$\n\\begin{matrix}\n\\ddot y &=&  ... !!!\n\\end{matrix}\n$$\n\nOn obtient\n$$\ny^{(n)}(t) = L_f^n\\;T_1(x) + L_g\\;L_f^{n-1}\\;T_1(x)\\;u\n$$\n\nOn suppose que $\\quad L_g\\;L_f^{n-1}\\;T_1(x) \\neq 0\\quad$ et donc on pose la commande :\n$$\nu = - \\dfrac{L_f^n\\;T_1(x)}{\\;L_g\\;L_f^{n-1}\\;T_1(x)\\;} + \\dfrac{v}{\\;L_g\\;L_f^{n-1}\\;T_1(x)\\;}\n$$\n\nCe qui nous permet d'avoir $\\quad y^{(n)}(t) = v \\quad$ lorsqu'on respecte les deux séries de conditions suivantes :\n$$\n\\begin{matrix}\n\\begin{cases}\nL_g\\;T_1(x) = 0\\\\\n\\quad\\vdots\\\\\nL_g\\;L_f^{(n-2)}\\;T_1(x) = 0\\\\\nL_g\\;L_f^{(n-1)}\\;T_1(x) \\neq 0\n\\end{cases} & \\quad \\text{et} \\quad &\n\\begin{cases}\n\\partial_x T_1\\;g(x) = 0\\\\\n\\partial_x L_f\\;T_1\\;g = 0\n\\end{cases}\n\\end{matrix}\n$$\n\nRemarque :\n$$\n\\begin{cases}\nL_g\\;T_1(x) = 0\\\\\nL_g\\;L_f\\;T_1(x) = 0\\\\\n\\end{cases}\n\\iff L_{[f\\;g]}\\; T_1 = 0\n$$\n\nDe même,\n$$\n\\begin{cases}\nL_g\\;L_f\\;T_1(x) = 0\\\\\nL_g\\;L_f^2\\;T_1(x) = 0\\\\\n\\end{cases}\n\\iff L_{\\big[\\,f\\;\\;[f\\;g]\\,\\big]}\\; T_1 = 0\n$$\n\nEt ainsi de suite, nous obtenons un regroupement de toutes les conditions en une seule équation :\n$$\n\\partial_x\\;T_1 \\; \\Big(\\;g \\;\\; [f\\;g] \\;\\; adj_f^2\\;g \\; = 0\\; \\dots \\;\\; adj_f^{n-1}\\;g \\;\\Big)\n$$\n\nOn constate ainsi que cette condition se traduit comme : \"si ce champ de vecteur est intégrable\"\n\n#### Exemple\n\n![](/assets/images/B2.CNL.CM.SlidePartie3-54.png)\n\nEn discret, on peut aller sur deux directions si maintenant c'est direction remplissent l'espace (la base formée par les directions est de même dimension que le système) alors on est commandable.\n\n\n\n> Notes du 2022/11/24 - End\n\n---","n":0.032}}},{"i":59,"$":{"0":{"v":"Partie 2 - Analyse de la Stabilité","n":0.378},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut\n\nSupport de cours:\n- [Slide Partie 2](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.CNL.CM.SlidePartie2.20221109.pdf)\n\n---\n\n> Notes du 2022/11/09 - Start\n\n\n\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-01.png)\n\n# Partie II - Stabilité des systèmes non linéaires\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-02.png)\n\n## Sommaire\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-03.png)\n\n## II-1. Introduction à la stabilité\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-04.png)\n\n## II-2. Stabilité au sens de Lyapunov\n\n### Définitions\n\n#### Points d'équilibres\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-05.png)\n\nSi le pt d'équilibre n'est pas au point 0 on fait un changement de variable.\n\n#### Stabilité\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-06.png)\n\nOn doit reste autour du pt equi pour **tous les temps** !\n\nÉvidemment, la stabilité n'est que locale ???\n\n\n#### Attractivité\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-07.png)\n\nIl existe un $\\delta$ donc la notion d'attraction est une notion locale (ou globale uniquement quand il n'y a qu'un seul point d'équilibre)\n\n#### Stabilité asymptotique\n\n> Correction: !!! L'ensemble des **conditions initiales** (et non pas ~~des points d'équilibres~~) pour lequel  le point d'équilibre est asymptotiquement stavle est appelée **bassin d'attraction du point d'équilibre**\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-08.png)\n\n### Exemples\n\n#### Attracteur Local Instable\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-09.png)\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-10.png)\n\n#### Attracteur Global Instable\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-11.png)\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-12.png)\n\n#### Non-Attracteur Stable\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-13.png)\n\nAutre exemple de stabilité non attractive :\n\n![](/assets/images/B2.CNL.CM.BB20221109-01.png)\n\n## II-3. Les fonctions de Lyapunov\n\n### II-3.1) Vers une généralisatin de la fonction énergie\n\n#### Comment analyser la stabilité ?\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-14.png)\n\n![](/assets/images/B2.CNL.CM.BB20221109-02.png)\n\n#### Exemple: Pendule Inverse\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-15.png)\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-16.png)\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-17.png)\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-18.png)\n\n> Correction !!! Si $k>0$ (et non pas ~~k<0~~)\n\nÉnergie tj positive donc il nous faut une courbe decroissante positive qui converge vers 0 mais pour cela il faudrait que $x_2$ soit nul uniquement quand $x_1$ l'est aussi et ça ce n'est pas évident ni garantie. On se rapproche de l'idée de stabilité.\n\n### II-3.2) Définition et utilisation des fonctions lyapunov\n\n#### Thm Fondamentale de la Stabilité (Locale)\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-19.png)\n\n> Attention: il s'agit d'une Condition Suffisante !\n\n#### Preuve\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-20.png)\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-21.png)\n![](/assets/images/B2.CNL.CM.BB20221109-03.png)\n> Incomplet\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-22.png)\n**Idée de l'absurde:** dire qu'on ne peut pas rentrer dans une boule d'$x$ tel que $V(x)=c$ mais utiliser le fait que $V$ est strictement décroissante pour impliquer que forcément il arrivera un moment où il faudra rentre dans la boule et donc avoir un $x'$ tel que $V(x')<c$ \n\n#### Illustration\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-23.png)\n\n> Remarque: ce système étant linéaire on aurait pu aussi prouver la stabilité (et meme une stab globale) on utilise les valeurs propres de la matrice dynamique (cf les outils des systèmes linéaires)\n\n#### Exemples\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-24.png)\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-25.png)\n\nAttention:\n$$\nd_t V = 0 \\implies x_2 = 0\n$$\nmais pas forcément $x_1 = 0$\n\nPar contre, oui on peut en déduire que $x_1 = cst$ vu que $\\dot x_1 = x_2$\n\n#### Comment estimer le bassin d'attraction ?\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-26.png)\n\nAttention:\n$$\n\\dot x = x^2 \\quad\\quad \\dot x = -x^3\n$$\nCes deux systemes non linéaires pointent sur un meme système linéaire qui n'est que simplement stable.\nOr un syst linearisé simplement stable ne permet de conclure sur la stabilité des systèmes non linéaires associée\n\nRem:\n- Il n'existe pas d'outils garantissant des conditions suffisantes pour connaître le bassin d'attraction\n\n#### Thm Fondamentale de la Stabilité/Stabilité Asymptotique Globale\n\n> Keywords: radialement non bornée\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-27.png)\n\n### II-3.3) Principes d'invariance de Lasalle\n\n#### Problématique\n\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-28.png)\n\n**Exercice:** Tracer sur Matlab les lignes de niveaux de\n$$\nV(x) = \\dfrac{x_1^2}{\\; 1+x_1^2 \\;} + x_2^2\n$$\n\n**Solution:**\n...\n\n> À faire à la maison\n\n#### Principe d'invariance de Lasalle\n\nUn **ensemble invariant** typique est le point d'équilibre par exemple. De même, l'estimation d'un bassin d'équilibre est lui aussi un ensemble invariant (pareil pour le bassin d'attraction lui-même peu utile puisqu'on ne sait pas en général définir cette ensemble exactement).\n\nAu final le principe de Lasalle est utile non pas pour prouver la stabilité mais surtout pour prouver l'attractivité d'un point d'équilibre.\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-29.png)\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-30.png)\n\n\n#### Exemple\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-31.png)\n\nOn suppose $a>0$ et $b>0$\n\n![](/assets/images/B2.CNL.CM.BB20221109-04.png)\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-32.png)\n\n### II-3.4) Condition nécessaire de stabilité asymptotique\n\n#### Thm Inverse de Stabilité\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-33.png)\n\n\n\n\n> Notes du 2022/11/09 - End\n\n---\n\n> Notes du 2022/11/17 - Start\n\n\n## II-4. Les systèmes linéaires et la linéarisation\n\n### Stabilité des systèmes linéaires\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-34.png)\n\n### Méthode de Lyapunov indirecte\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-35.png)\n\n![](/assets/images/B2.CNL.CM.BB20221117-01.png)\n\nSur les deux systèmes linéarisés, on peut conclure qu'ils sont simplement stable mais cela ne nous permet pas sur la stabilité sur les NLs\n\n\nRemarque:\n\nToute fonction polynomiale a la mauvaise propriete de ne pas etre une bonne echelle de comparaison car elle peut etre ecrase et ne reprensete correctement notre fonction\n\nComme la linéarisation suivante autour de 0 de $x^3$\n$$\nx^3 = 0 + 0 + ... \n$$\n\n## II-5. La stabilité Entrée/Sorties\n\n### Introduction\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-36.png)\n\nEn NL, ce n'est pas parce que le système est stable qu'après une interconnection entre etat ou une pertubation que la sortie restera bornée comme linéaire\n\nTypiquement les systèmes en cascades posent bcp de problèmes en NL\n\nEn NL on ne va pas regarder la sortie mais se concentré sur le comportement entrée/état\n\n### Cas Syst. Linéaires\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-37.png)\n\nla borne sur les états est proport. à la borne de l'entrée **si les conditions initiales sont nulles**\n\n### Exemple NL\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-38.png)\n\nAutre exemple: $\\dot x = -x + (x+x^2)u$ et là on pert la stabilité juste en modifiant l'entrée\n\nPour pallier à ces problèmes on définit les notions suivantes :\n\n### Définition des Fonctions de Classe\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-39.png)\n\n> Les fonctions de comparaisons sont des fonctions de classe $\\mathcal{K}$\n\n### Thm de Lyapunov (avec fonctions de comparaison)\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-40.png)\n\n### Déf. ISS - Input to State Stability\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-41.png)\n\n### Qlqs Propriétés\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-42.png)\n\n### Thm de Lyapunov (avec ISS)\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-43.png)\n\nLe système (8)\n$$\n\\dot x(t) = f(t,x(t),u(t))\n$$\n\nUne propriété magique de l'ISS, c'est que le couplage $0\\;GAN \\rightarrow 0\\;ISS$ est lui aussi $0\\;GAN$\n\nTrès utilisé pour les phases d'atterissages automatiques\n\n### Exemples\n\n![](/assets/images/B2.CNL.CM.SystCompl.SlidePartie1.20221109-44.png)\n\n\n\n\n\n> Notes du 2022/11/17\n\n---\n","n":0.036}}},{"i":60,"$":{"0":{"v":"Partie 1 - Introduction aux Systèmes Complexes","n":0.378},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut\n\nSupport de cours:\n- [Slide Partie 1](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.CNL.CM.SlidePartie1.20221107.pdf)\n- [Notes GEA du 2022/11/07](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B2.CNL.CM.NotesGEA.20221107.pdf) ***\n\n\n---\n\n> Notes du 2022/11/07 - Start\n\n\n\n\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-01.png)\n\n# Modalités du cours\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-02.png)\n\n# Sommaire du cours\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-03.png)\n\n# Partie I - Introduction aux systèmes non linéaires\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-04.png)\n\n## Sommaire\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-05.png)\n\n## I-1. Pourquoi étudier les systèmes non linéaires ?\n\n### Introduction\n\n#### Étude\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-06.png)\n\n> On réintroduit la stabilité BIBO (nous n'avions vu que la stabilité interne en M1)\n\n#### Déf. Sys. Stationnaire & Autonomes\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-07.png)\n\n> $\\dot x$ ne dépend pas du temps\n\n#### Pourquoi ?\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-08.png)\n\n> Matlab permet d'utiliser bcp de prop d'alg lin du coup les resultats sont certifiés\n\n### Difficultés inhérentes aux systèmes non linéaires\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-09.png)\n\n- echap. en temps fini (ou convergence en temps fini)\n    - le temps d'allumer la machine la divergence arrive trop vite\n    - FIR finite impulse response\n\n- Pts equil multiples\n    - comport sys depend fortement aux CIs (alors qu'en lin a cause des deux principes le sys est independant des CIs)\n\n- Cycles Limites\n    - trajectoire fermée périodique qui n'existe pas en lin\n\n- Repons entree sinus\n    - on perd toute l'automatique frequentielle en non lin\n        - mais **methode du premier harmonique** permet de reutiliser une partie des outils de l'autom freq en non lin\n        - on recupere la premiere harmonique du developpement en trans de fourrier\n\n- Phenomenes chaotiques\n    - attracteurs etranges\n\n## I-2. Phénomènes non lin classiques\n\n### Exemple échappement en temps fini\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-10.png)\n\n- tres observable dans les convertisseurs d'energies\n- pour les convergences tres rapides on en trouve dans les vanes de remplissage où les acationneurs agissent en mode \"tout ou rien\"\n    - different de l'hysteresisse ??? car dans ces cas on converge vers un matelas (un couloir contenant la consigne)\n\n### Points d'équilibre\n\n#### Définitons et Remarques\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-11.png)\n\n- l'interet de chercher un pt equi c'est parce qu'on sait qu'une fois le sys atteint ce point on est sûr qu'il va y rester en boucle fermée\n- en non lin se rajoute la notion de global/local pour la stabilite d'un pt equi\n\n#### Exemple\n![](/assets/images/B2.CR.CM.SystCompl.Slide-12.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-13.png)\n\n### Cycles Limites\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-14.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-15.png)\n\nGrand interet des cycles limites c'est de creer des sys perio robuste (ex montre non numerique)\n\n### Systèmes Chaotiques\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-16.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-17.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-18.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-19.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-20.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-21.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-22.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-23.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-24.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-25.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-26.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-27.png)\n\ntres utile (plus utilisé) en cryptologie pour des encryptions analogique car il faut la fonction et le lambda pour definir la porteuse et permettre la decryption\n\nces objet chaotiques vivent dans des espaces de dimension non entière... !\n\n- observateur sur le modele de lorentz\n    - nudging utiliser un observateur grand gain (rendre négligeable le système en prenant des gains tres grand)\n    - approche physicienne vont sur la simulation\n\n## I-3. Etude Local de sys d'ordre 2\n\n### Position du probleme\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-28.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-29.png)\n\n### Comportement qualitatif des systèmes linéaires de dim 2\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-30.png)\n\nCorriger le slide :\n$$\nJ = \\begin{bmatrix}\n\\;\\alpha & \\textcolor{red}{-}\\beta\\;\\\\\n\\;\\beta  &  \\alpha\n\\end{bmatrix}\n$$\n\n???\n\n### Valeurs propres réelles différentes de zéro\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-31.png)\n![](/assets/images/B2.CR.CM.SystCompl.Slide-32.png)\n\n\n### Valeurs propres complexes\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-33.png)\n\n???\n\n## I-4. Notions de solutions\n\n> Problème de Cauchy\n\n> Importance de l'existence et de l'unicité\n\n> **Dépendance continue** \n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-37.png)\n\n### Exemples \n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-38.png)\n\nCorriger le slide :\n$$\nx(t) = tan(t)\\;,\\quad \\forall t \\in \\Big[0,\\textcolor{red}{\\frac{\\pi}{2}}\\Big[\n$$\n\n### Existence et Unicité\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-39.png)\n\n> Utiliser matlab et simuler le sys pour voir quelle solution est choisie\n\n### Condition suffisante d'existence et d'unicité\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-40.png)\n\nsi le taux d'accroissement est limité dans un temps alors l'unicité est assuré localement\n\n### Condition Lipschitz Locale\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-41.png)\n\n### Interpretation Graphique\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-42.png)\n\n### Lemme\n\n![](/assets/images/B2.CR.CM.SystCompl.Slide-43.png)\n\n\n\n\n\n> Notes du 2022/11/07 - End\n\n---","n":0.044}}},{"i":61,"$":{"0":{"v":"TD2 - La méthode du BackStepping","n":0.408},"1":{"v":"\n![](/assets/images/B2.CNL.TD2.Sujet-01.png)\n\n# Idée du BackStepping\n\n$$\n\\begin{cases}\n\\dot x_1 = f(x_1) + g(x_1)\\;x_2\\\\\n\\dot x_2 = u\n\\end{cases}\n$$\n\nL'état $x_2$ agit comme une commande vis à vis $x_1$. On va donc pouvoir trouver une commande désiré $x_2$ pour ensuite en déduire $u$\n\n\n\n\n# 1- L'intégrateur BackStepping\n\n## 1-1. Un peu de théorie\n\n![](/assets/images/B2.CNL.TD2.Sujet-02.png)\n![](/assets/images/B2.CNL.TD2.Sujet-03.png)\n![](/assets/images/B2.CNL.TD2.Sujet-04.png)\n\n### Q1)\n\nSi le sys est GAS, il existe une fct de lyapunov $V(x_1)$ (d'apres le thm convasse???) tel que $\\dot V(\\cdot)$ est DP et radialement non bornée.\n\nDe plus, $\\dot V(\\cdot) = \\partial_{x_1} V\\Big( f(x_1)+g(x_1)\\phi(x_2) \\Big)$ est DN\n\n### Q2)\n\nStructure en cascade :\n\n![](/assets/images/B2.CNL.TD2.BB20221117-01.png)\n\n### Q4)\n\n$$\n\\begin{cases}\n\\dot x_1 = f(x_1) + g(x_1)\\;\\phi(x_1) + g(x_1)\\Big(\\textcolor{red}{x_2-\\phi(x_1)}\\Big)\\\\\n\\dot x_2 = u\n\\end{cases}\n$$\n\nLe facteur en rouge correspond à une erreur et l'idée est donc de trouver un $u$ tel que $x_2(t)$ converge vers $\\phi(x_1)$\n\nPour cela on réalise un chgmt de variable :\n\n$$\n\\begin{cases}\nz_1 = x_1\\\\\nz_2 = x_2 - \\phi(x_1)\n\\end{cases}\n\\iff\n\\begin{cases}\nx_1 = z_1\\\\\nx_2 = z_2 + \\phi(z_1)\n\\end{cases}\n$$\n\nor pour avoir un chgmt de variable acceptable il nous faut respecter les conditions suivantes :\n1. $\\phi(0)=0$\n2. $\\phi \\quad C^1$\n3. $\\phi$ est différentiable\n\nSi ces conditions sont vérifiées alors on peut dériver les $z$ pour etudier l'evolution de l'erreur\n\n$$\n\\begin{cases}\n\\dot z_1 = f(z_1) + g(z_1)\\phi(x_1) + g(z_1)z_2\\\\\n\\dot z_2 = \\partial_{x_1} \\phi\\;\\dot x_1 + u\n\\end{cases}\n$$\n\n### Q5)\n\nCalcul de la commande et choix de la fct de lyapunov candidate :\n$$\nV_{totale} = V(z_1) + \\frac{1}{2}\\;{z_2}^2\n$$\n\nCette fct est bien RNB et DP et sa dérivée vaut :\n$$\n\\dot V_{totale} = \\partial_{z_1}\\Big(\\; f(z_1) + g(z_1)\\phi(z_1) \\;\\Big) + \\partial_{z_1}V\\Big(\\; g(z_1)z_2 \\;\\Big) + z_2\\Big(\\; -\\partial_{z_1}\\phi \\;\\dot{z}_1 + u \\;\\Big)\\\\[0.2cm]\n\\iff u = \\partial_{z_1}\\phi\\;\\dot z_1 -\\partial_{z_1} V g(z_1) - \\alpha\\;z_2\n$$\net ainsi on a :$\\quad \\dot V = u(z_1) - \\alpha\\;{z_2}^2\\quad$ est DN donc $0$ est GAS !\n\nSeul problème c'est qu'on vient de relocaliser toute la problématique sur l'hypothèse H2 qui nous ait donné mais trouver le $\\phi$ n'est pas du tout évident...\n\nEn aviation, les structures en cascades sont très utilisé car le manche du pilote n'agit plus directement sur les ailerons mais agit comme une consigne transmise à travers une séquence d'actionneurs\n\nAutre problème: **phénomène de peeking** lorsque $z_2$ evolue trop vite  ou dans le cas où $k$ dépend du $\\lambda$ dans $|x(t)|=k(\\lambda)e^{-\\lambda\\;t}$ (ou le système va avoir un énorme dépassement en transitoire pour se stabiliser) \n\n\n# 3- La méthode du forwarding\n\n![](/assets/images/B2.CNL.TD2.Sujet-05.png)\n![](/assets/images/B2.CNL.TD2.Sujet-06.png)\n![](/assets/images/B2.CNL.TD2.Sujet-07.png)\n\nLes petits $x$ représentent l'état du système et les grand $X$ eux sont les flots liés à un autre système d'équations différentiels comme suit :\n![](/assets/images/B2.CNL.TD2.BB20221123-01.png)\n\nPrenons par exemple, ce système :\n![](/assets/images/B2.CNL.TD2.BB20221123-02.png)\n\nCalculer une loi de commande et résoudre le système en $X$\n![](/assets/images/B2.CNL.TD2.BB20221123-03.png)\n\nOn choisit la candidate en se basant sur le point de convergence de $X_2$\n![](/assets/images/B2.CNL.TD2.BB20221123-04.png)\n\nOn peut alors vérifier si c'est bien une fonction de Lyapunov\n![](/assets/images/B2.CNL.TD2.BB20221123-05.png)\n","n":0.049}}},{"i":62,"$":{"0":{"v":"Bloc 1","n":0.707},"1":{"v":"\n<!--has_collection: true-->","n":0.707}}},{"i":63,"$":{"0":{"v":"VIRCRV - Vision Industrielle","n":0.5},"1":{"v":"\n<!--has_collection: true-->\n\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat et F. Lerasle\n\n---\n\n# À Retenir\n  - Indice Mobilité\n  - Configuration\n  - Situation\n  - Degré de liberté\n  - MGD & MGI\n\n# Cours Magistraux\n\n## Partie Robotique\n\n- [[Chap 1 - Introduction à la robotique|B1.VIRCRV.CM.Intro]]\n- [[Chap 2 - Outils Fondamentaux|B1.VIRCRV.CM.OutilsFondam]]\n- [[Chap 3 - Modélisation des Bras Manipulateurs|B1.VIRCRV.CM.ModelisationBM]]\n\n## Partie Vision\n\n- [[Chap 4 - Vision Industrielle|B1.VIRCRV.CM.Vision]]\n\n# Travaux Dirigés\n\n- [[B1.VIRCRV.TD1]]\n- [[B1.VIRCRV.TD2]]\n\n# Travaux Pratiques\n\n- [[B1.VIRCRV.TP1]]\n- [[B1.VIRCRV.TP2]]\n- [[B1.VIRCRV.ExamTP]]\n\n# Support de Cours\n\n## Fichiers Moodles\n\n#### CM\n\n- [VIRCRV.CM.SlideIntro.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.CM.SlideIntro.pdf)\n- [VIRCRV.CM.SlideOutils.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.CM.SlideOutils.pdf)\n- [VIRCRV.CM.SlideModeles.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.CM.SlideModeles.pdf)\n\n#### TD\n\n- [VIRCRV.TD1.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.TD1.Sujet.pdf)\n^vi-support-td1-start\n- [VIRCRV.TD1.SlideRotation.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.TD1.SlideRotation.pdf)\n^vi-support-td1-end\n\n\n- [VIRCRV.TD2.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.TD2.Sujet.pdf)\n^vi-support-td2-start\n- [VIRCRV.TD2.SlideModeles.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.TD2.SlideModeles.pdf)\n^vi-support-td2-end\n\n\n\n#### TP\n\n- [VIRCRV.TP1.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.TP1.Sujet.pdf)\n\n\n## Scans\n\n#### GEA\n\n- [VIRCRV.NotesGEA.CM.20220831.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesGEA.CM.20220831.pdf)\n- [VIRCRV.NotesGEA.CM.20220901.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesGEA.CM.20220901.pdf)\n- [VIRCRV.NotesGEA.CM.20220907.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesGEA.CM.20220907.pdf)\n- [VIRCRV.NotesGEA.CM.20220908.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesGEA.CM.20220908.pdf)\n\n\n- [VIRCRV.NotesGEA.TD1.20220907.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesGEA.TD1.20220907.pdf)\n^vi-scangea-td1\n- [VIRCRV.NotesGEA.TD2.20220915.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesGEA.TD2.20220915.pdf)\n^vi-scangea-td2\n\n\n\n\n#### RKA\n\n- [VIRCRV.NotesRKA.SlideIntro.20220831.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesRKA.SlideIntro.20220831.pdf)\n- [VIRCRV.NotesRKA.SlideOutilsFondam.20220901.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesRKA.SlideOutilsFondam.20220901.pdf)","n":0.095}}},{"i":64,"$":{"0":{"v":"CM","n":1}}},{"i":65,"$":{"0":{"v":"Chap 4 - Vision Industrielle","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Lerasle\n\n---\n\n> Notes du 2022/09/29 - Start\n\n\n\n\n\n![](/assets/images/VIRCRV.CM.Vision-01.png)\n\n# Introduction\n\n![](/assets/images/VIRCRV.CM.Vision-02.png)\n\n\n## Traitement et niveaux de représentation\n\n<!--![](/assets/images/VIRCRV.CM.Vision-03.png)-->\n![](/assets/images/VIRCRV.CM.Vision-03-notesprof.png)\n\nPhotos: Compagnie agricole ??? \n- encemencement des graines de tournesol\n- graines non fertile appelé sclérote\n- du coup utiliser une camera pour decteter les sclerote afin de les trier\n\nRem.: Incroyable comment on peut réaliser des mesures sans intéragir avec l'objet\n\n- Controles de conformite sur produit fini = faire le control en fin de chaine\n- Controles de conformite sur matiere premiere = faire le control en debut de chaine\n- Controles aussi pour les moments critiques\n\n> Dissocier le processus hors-ligne de prototypage liée à la conception au processus enligne que le client utilise\n\n## Définitions\n\n### Image\n\n<!--![](/assets/images/VIRCRV.CM.Vision-04.png)-->\n![](/assets/images/VIRCRV.CM.Vision-04-notesprof.png)\n\n\n### Colorimétrie\n\n<!--![](/assets/images/VIRCRV.CM.Vision-05.png)-->\n![](/assets/images/VIRCRV.CM.Vision-05-notesprof.png)\n![](/assets/images/VIRCRV.CM.Vision-06.png)\n![](/assets/images/VIRCRV.CM.Vision-07-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-07.png)-->\n\npixel achrome = pixel avec meme valeur en RGB -> donne toute la palette du noir au blanc en passant par seulement les nuances de gris\n\nSynthèse additive -> primaire = Rouge Vert Bleu\nSynthèse soustractive -> primaire = Cyan Vert Bleu\n\nSystèmes perceptuels -> rouge foncé (précise la teinte et luminosité)\n\nAnalyse Composante Principale (ACP)\n\n![](/assets/images/VIRCRV.CM.Vision-08-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-08.png)-->\n\nChanger d'espace colorimétrique pour se placer dans un espace colorimétrique moins affecter par les conditions de luminosité\n\n![](/assets/images/VIRCRV.CM.Vision-09-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-09.png)-->\n\nIntensité Teinte Saturation (ITS)\n- Rouge par convention à une teinte noté avec un angle de 0 deg\n\nHue Saturation Values (HSV)\n\nIdée: Se placer dans un espace ITS pour ignorer le plan 'luminosité' et ne considérer que les axes de 'teinte' et de 'saturation' pour ne plus avoir les problemes liées aux conditions d'illumination\n\n### Segmentation HSV\n\nMéthode :\n1. Passer du RGB en HSV\n2. Faire un seuillage sur H et un autre sur S\n3. Calculer le ET logique de ces deux seuillages\n4. Appliquer la huit-conexité (ou la 4 connexité) pour avoir le contour\n\n![](/assets/images/VIRCRV.CM.Vision-10.png)\n\n![](/assets/images/VIRCRV.CM.Vision-11-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-11.png)-->\n![](/assets/images/VIRCRV.CM.Vision-12-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-12.png)-->\n![](/assets/images/VIRCRV.CM.Vision-13-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-13.png)-->\n![](/assets/images/VIRCRV.CM.Vision-14.png)\n\n![](/assets/images/VIRCRV.CM.Vision-15.png)\n\n# Acquisition des images\n\n![](/assets/images/VIRCRV.CM.Vision-16-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-16.png)-->\n\n## Optique de caméra\n\n![](/assets/images/VIRCRV.CM.Vision-17.png)\n\n## Paramètre d'une optique\n\n![](/assets/images/VIRCRV.CM.Vision-18-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-18.png)-->\n\n> Mise au point automatique dans les cameras du publique mais en industrie elle est faite manuellement pour plus de precision\n\n![](/assets/images/VIRCRV.CM.Vision-19-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-19.png)-->\nsuite geometrique de raison $\\sqrt2$ car l'optique se compose d'un cylindre avec la hauteur (diaphragme) et la section\n\n- temps d'acquisition = frame per seconds => 40ms pour une image\ntemps d'exposition = duree entre ouverture et fermeture du diaphragme\n\n\n![](/assets/images/VIRCRV.CM.Vision-20.png)\n\nSi image dynamique reflexe augmenter le diaphragme et diminuer le temps d'exposition\n\nEx: controle qualite de bobine photo\n- pb de compromis entre temps exposition et vitesses d'acquisition \n    - si temps exposition trop court alors manque de contraste\n    - du coup rajout d'un flash synchronisé avec la camera pour avoir assez de contraste tout en gardant un temps d'exposition court\n\n![](/assets/images/VIRCRV.CM.Vision-21-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-21.png)-->\n\nTaille de capteur très petite => trop peu sensible (donc très sombre)\n\n## Comment choisir une optique\n\n![](/assets/images/VIRCRV.CM.Vision-22.png)\n\n> Attention avec les montures C et CS qui ne sont pas compatibles !\n\n## Aberrations optiques\n\n![](/assets/images/VIRCRV.CM.Vision-23-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-23.png)-->\n\n![](/assets/images/VIRCRV.CM.Vision-24-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-24.png)-->\n\n\n\n\n\n> Notes du 2022/09/29 - End\n\n---\n\n> Notes du 2022/10/07 - Start\n\n\n\n\n# Capteurs vidéo\n\n![](/assets/images/VIRCRV.CM.Vision-25.png)\n\n- On dissocie l'optique du capteur\n- Le capteur contient la rétine\n\n## Technologie CCD\n\n![](/assets/images/VIRCRV.CM.Vision-26-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-26.png)-->\n\n- **photo-élément**: surface élementaire sur la rétine (analogie aux pixel sur les cams du smarthone)\n- Bande de valence: energie de la lumière impacte le comportement des electrons ce qui peut etre traduit en niveau de gris \n- à la base (à la sortie de la rétine) on peut lire avec un oscilloscope une ondulation\n- **obturateur** paramètré par le temps d'exposition\n    - utile pour les scenes dynamiques\n- CCD est une technologie industrielle car la CMOS est moins chères\n\n## Capteur CMOS\n\n![](/assets/images/VIRCRV.CM.Vision-27-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-27.png)-->\n\n- CMOS complémentaire\n- Technologie moins chère\n- Différence principale: conversion directe de la charge avant transfert\n    - photo-élément à une double fonction la lecture en tension de la lumière et la conversion directe\n- _rolling shutter_\n    - propre au CMOS\n    - problème historique du CMOS: \n        - photo element partage sa partie sensible avec une partie electronique\n        - du coup un photo-element est moins sensible qu'un CCD\n        - mais de nos jours il y a une tendance de faire du multi couche donc continue à s'améliorer\n    - obturateur déroulant: obturateur fonctionne ligne par ligne\n    - du coup probleme de floutage (trainée) dans les scenes dynamique avec obturateur deroullant\n\n## Numérisation\n\n![](/assets/images/VIRCRV.CM.Vision-32-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-32.png)-->\n\n- 4/3 dû au dimension de la rétine\n- Quantification:\n    - les tensions sont des valeurs non entières\n    - similaire à l'approximation d'une courbe par palier\n- Pourquoi un pixel est codé sur 8 bits ?\n    - Lié au rapport signal sur bruit\n    - Quantification de la tension en 256 niveaux donc 8 bits\n    \n## Caméra couleur\n\n![](/assets/images/VIRCRV.CM.Vision-28-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-28.png)-->\n\n- Mosäique Bayer très utilisée\n- Problème chaque photoE n'a qu'une couleur associée donc pour avoir sur chaque photoE les trois couleurs on fait un moyennage des vosins pour créer artificiellement un trio RVB\n- Video projecteur plus sensible au vert donc plus de vert dans la mosäique de Bayer\n- Probleme le moyennage introduit du floutage\n\n![](/assets/images/VIRCRV.CM.Vision-29-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-29.png)-->\n\n- Application très spécifique industrielle avec un besoin coloréfique important\n\n## Caméra linéaire\n\n![](/assets/images/VIRCRV.CM.Vision-30-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-30.png)-->\n\n- Scannères sont des caméras linéaires et non pas matricielle\n- Résolution horizental fixé par la caméra linéaire mais la résolution vertical est libre et dépend de l'application\n- Résolution image (en pixel) et différente de la résolution spatiale\n- Meme si on paramètre le groupe de lignes à 480 avec une caméra de 640 photoE (donc on aurait une résolution image en pixel de 640x480) il reste que l'on controle le mouvement et donc la résolution spatiale\n\n## Caméra Infra Rouge\n\n![](/assets/images/VIRCRV.CM.Vision-31-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-31.png)-->\n\n## Transmission de l'image\n\n![](/assets/images/VIRCRV.CM.Vision-33.png)\n\n## Exercices \n\n![](/assets/images/VIRCRV.CM.Vision-34-notesprof.png)\n<!--![](/assets/images/VIRCRV.CM.Vision-34.png)-->\n\n### Solutions\n\n- [VIRCRV.Vision.ExoCapteurs2D.Correction.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.Vision.ExoCapteurs2D.Correction.pdf)\n\n![](/assets/images/VIRCRV.CM.Vision-34-exonotesprof.png)\n\n\n#### Q1\n\n- Focal très grande car on veut bcp de précision sur la scène qui se trouve à 2m\n- si pixel n'était pas carré alors une boite carré apparaitré non carrée dans l'image idem pour un cercle qui sera vue comme une ellipse\n- On pourrait adapter ce probleme à une caméra linéaire\n\n#### Q2\n\n- F nombre d'ouverture\n- Coincé par le contexte pour faire la mise au point => solution ajouter une bague entre optique et capteur et ainsi pouvoir continuer à paramétrer $p_1$\n- Indirectement c'est un système de mesure/réalisation 3D car selon le floutage on peut déduire si la scène se trouve devant ou derrière le plan à 45mm\n\n\n\n\n> Notes du 2022/09/29 - End\n\n---\n\n> Notes du 2022/11/15 - Start\n\n> ! Cf [Notes GEA 2022/11/15]()\n\n> Notes du 2022/11/15 - End\n\n---\n\n> Notes du 2022/11/16 - Start\n\n# Exemples\n\n## Métrologie\n\n![](/assets/images/VIRCRV.CM.Vision-47.png)\n\nLes tests sont au final des expériences probabilistes. On compare les tolérances a priori pour conclure sur la conformité.\n\n![](/assets/images/VIRCRV.CM.Vision-Extra26.png)\n\non cherche a maximiser les True Positive (TP) et minimiser les False Positive (FP)\n\n> Courbe ROC: TPR vs FPR (on cherche a etre au coin haut gauche pour 100% de TP et 0% de FP)\n\nDans le cas de l'application pour les motards pour detecter les chutes on cherche à minimiser les FN\n\n## Vérifciation de présence\n\n![](/assets/images/VIRCRV.CM.Vision-48.png)\n\néclairage diffu pour eviter la saturation\n\nfaire un sous zone de recherche pour limiter le temps de calcul et aussi pour mieux trouver la valeur de seuil (seuillage)\n\nau final il y a pas forcement besoin de connaitre la position precise ni approximative pour placer les zones de test\n\nen effet on peut positionner ces sous-zones relative à la position d'un point caractéristique utiliser comme ancrage\n\n![](/assets/images/VIRCRV.CM.Vision-49.png)\n\ntransformation logarithmique des fréquences occurences de nuance de gris (ndg) ce qui conduit a un tassement des ndg de forte occurence\n\nOn peut aussi juste faire du block matching (ou aussi template matching) (comparer l'image test avec une image de reference)\n\n\n![](/assets/images/VIRCRV.CM.Vision-50.png)\n\n\n## Identification de marqueurs\n\n![](/assets/images/VIRCRV.CM.Vision-51.png)\n![](/assets/images/VIRCRV.CM.Vision-52.png)\n\nApproche non ascendante car pas de segmentation\n\n![](/assets/images/VIRCRV.CM.Vision-53.png)\n\n> ROI: Region of Interet\n\nAttention a la variation d'echelle quand des pieces sont en vracs tout en etant empiller les unes sur les autres (multi-template matching)\n\ndiscretisation en position, orientation et echelle\n\nATTENTION la discretisation en ndg dépend fortement des conditions d'illumination (donc ne marche que pour un environement controlé)\n\n## Contrôles de conformité multiples\n\n![](/assets/images/VIRCRV.CM.Vision-54.png)\n![](/assets/images/VIRCRV.CM.Vision-55.png)\n\nles cameras sont a 90 deg pour s'assurer de percevoir l'orientation en z de la bouteille\n\n![](/assets/images/VIRCRV.CM.Vision-56.png)\n\n# Descripteurs de région\n\n## Géométrique\n\n![](/assets/images/VIRCRV.CM.Vision-57.png)\n\ndirection par intercepts: on compte les nombres d'entrées dans une région sur une direction donnée\n\n![](/assets/images/VIRCRV.CM.Vision-58.png)\n\n$\\mu_{20} = \\sum \\sum (x-\\bar x)^2f(x,y)$ calcule la dispersion p.r.à l'image de ref le long de l'axe $x$\n\ninvariance à la translation grace aux centre de gravité\n\ninvariance à l'echelle grace à la normalisation par $\\mu_{00}$\n\n> 7 moments de Hu: hors programme\n\n![](/assets/images/VIRCRV.CM.Vision-58-extra.png)\n\n\n![](/assets/images/VIRCRV.CM.Vision-59.png)\n\nmesure de changement de pente de la tangente à la courbe \n\ncalcul compliqué donc calcul estimé\n\npas aisé de fixer la longeur de corde\n\n> corde: distance en pixel\n\nexemple roulement à bille: on a calculer lecart type sur la courbure pour determiner si la piece est conforme\n\n## Couleur\n\n![](/assets/images/VIRCRV.CM.Vision-60.png)\n\n> skew: mesure de distribution asymétrique\n\n> NbL: Nombre Ligne\n\n> NbC: Nombre Colonne\n\nExemple histogramme couleur pour discretiser des personnes dans une foule\n\nFlot de drone avec camera pour trouver les pommes mûres dans le champs\n\n![](/assets/images/VIRCRV.CM.Vision-60-Extra.png)\n\n\n\n\n\n> Notes du 2022/11/16 - End\n\n---\n\n> Notes du 2022/11/18 - Start\n\n\n## Texture\n\n![](/assets/images/VIRCRV.CM.Vision-61.png)\n\nStats d'ordre 1 ne prenne pas en compte les charactéristiques spatiales de l'image alors que les stats d'ordre 2 les prend en compte grace aux paires de pixel.\n\n> BRODATZ: peintre qui a classifié les différents types de textures en peintures\n\n# Descripteurs et recalage\n\n## En Position\n\n![](/assets/images/VIRCRV.CM.Vision-62.png)\n\nRecalage:\n- on prend l'objet entier avec eclairage arriere (backlit) pour calculer le Centre de Gravité (pb les reflets peuvent rendre imprécis le CdG)\n- chercher un pattern caractéristique pour loacaliser plus précisemment l'objet dans l'image\n\n## En Orientation\n\n![](/assets/images/VIRCRV.CM.Vision-63.png)\n\nPour eviter les pb de temps de calcul, on peut n'exploiter que les points de contour\n\nAutre option, c'est d'echantillonner l'objet avec un pas angulaire constant pour mesurer la distance entre le CdG et le coutour\n\nOn obtient ainsi un courbe caractéristique de l'objet (comme une signature) (droite pour le cercle, ...)\n\nPour calculer l'équation du cercel, on peut utiliser la transformé de Hough\n\n![](/assets/images/VIRCRV.CM.Vision-64.png)\n\n# Identification de marqueurs\n\n> OCR Optical Character Recognition\n\n![](/assets/images/VIRCRV.CM.Vision-65.png)\n\n- éclairage rasant permet de trouver les caract. via le contrast entre fond lisse et partie imprimée\n- ceci permet de définir ensuite des zones de region contenant le caract.\n- cette zone sera ensuite traité par un reseau de neurones pour identifier le caract.\n\n![](/assets/images/VIRCRV.CM.Vision-66.png)\n![](/assets/images/VIRCRV.CM.Vision-67.png)\n\n# Controles de conformité multiples\n\n![](/assets/images/VIRCRV.CM.Vision-68.png)\n![](/assets/images/VIRCRV.CM.Vision-69.png)\n![](/assets/images/VIRCRV.CM.Vision-70.png)\n\n# Manipulation robotique\n\n![](/assets/images/VIRCRV.CM.Vision-71.png)\n\n## Edge-based Template Matching\n\n![](/assets/images/VIRCRV.CM.Vision-72.png)\n\n- extraction de contour pour ensuite faire des statistiques et discrétiser les orientations des contours\n- ceci permet diminuer le bruit et le cout CPU\n\n![](/assets/images/VIRCRV.CM.Vision-73.png)\n\n## Exemple \n\n![](/assets/images/VIRCRV.CM.Vision-74.png)\n![](/assets/images/VIRCRV.CM.Vision-75.png)\n\nVoir l'annale 2 pour une démonstration de l'homographie\n\n# Bibliographie\n\n![](/assets/images/VIRCRV.CM.Vision-76.png)\n\n\n\n> Notes du 2022/11/18 - End\n\n---\n\n\n\n<!--\n\n\n> Notes du 2022/ - Start\n\nVIRCRV.CM.Vision--notesprof\n\n\n\n# Techniques d'éclairage\n\n![](/assets/images/VIRCRV.CM.Vision-35.png)\n\n## Types d'éclaire\n\n![](/assets/images/VIRCRV.CM.Vision-36.png)\n![](/assets/images/VIRCRV.CM.Vision-37.png)\n![](/assets/images/VIRCRV.CM.Vision-38.png)\n![](/assets/images/VIRCRV.CM.Vision-39.png)\n![](/assets/images/VIRCRV.CM.Vision-40.png)\n![](/assets/images/VIRCRV.CM.Vision-41.png)\n![](/assets/images/VIRCRV.CM.Vision-42.png)\n![](/assets/images/VIRCRV.CM.Vision-43.png)\n![](/assets/images/VIRCRV.CM.Vision-44.png)\n![](/assets/images/VIRCRV.CM.Vision-45.png)\n![](/assets/images/VIRCRV.CM.Vision-46.png)\n\n\n\n\n\n\n-->","n":0.025}}},{"i":66,"$":{"0":{"v":"Chap 2 - Outils Fondamentaux","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat\n\nSupport de cours:\n- [VIRCRV.NotesRKA.SlideOutilsFondam.20220901.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesRKA.SlideOutilsFondam.20220901.pdf)\n- [VIRCRV.NotesGEA.20220901.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesGEA.20220901.pdf)\n\n---\n\n> Notes Cours 09/01 - Start\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.01.png)\n\n## I- Représentation de la situation de l'OT\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.02.png)\n\n**Rappel:**\n  - **Configuration** = Positiion de la SM donc $q = \\begin{pmatrix} q_1 \\\\ ... \\\\ q_n \n\\end{pmatrix}\n$\n  - **Situation** de l'OT =\n    - **Position** de l'OT par rapport à $\\mathcal{R}_0$ ; et\n      - **Position** de l'OT = Position d'un point de référence de l'OT $O_{n+1}$ p.r.à $\\mathcal{R}_0$\n    - **Orientation** de l'OT par rapport à $\\mathcal{R}_0$.\n      - Définie par $x = \\begin{pmatrix} x_P \\\\ x_R\\end{pmatrix}$\n      - **Orientation** de l'OT = Orientation du repère $\\mathcal{R}_n$ lié à l'OT p.r.à $\\mathcal{R}_0$\n    - donc **Situation OT = Position de $\\;\\mathcal{O}_{n+1}\\;$ + Orientation de $\\;\\mathcal{R}_n\\;$ p.r.à $\\;\\mathcal{R}_0$** \n\n**Question:** Quelle représentation mathématique ?\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.03.png)\n\n\n### I-1) Représentation de la position\n\n**Problématique:** Quels paramètres utiliser pour représenter la position de $\\;\\mathcal{O}_{n+1}\\;$ p.r.à $\\;\\mathcal{R}_0$* ?\n\n- Premier choix (naturel) = Coord. Cartésiennes\n  - **Coord. Opérationnelles de position :** $\\quad x_P = \\begin{pmatrix} x\\\\ y\\\\ z\\end{pmatrix} = \\overrightarrow{\\mathcal{O}_0\\mathcal{O}_{n+1}}_{(0)}$\n  - ceci pour 90% des cas car permet de représenter n'importe quelle position\n  - mais dans certains cas il est plus intéressant d'utiliser d'autres répères comme les coord. sphériques\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.04.png)\n\n#### Cart. --> Cylindriques\n\nVIRCRV.SlideOutilsFondam.CalcCartCyl\n\n- Au lieu d'utiliser arc tangente qui rend un angle entre -pi/2 et pi/2 les roboticiens préfèrent utiliser arc tangent 2 noté $\\quad atan2(Y,X) \\in\\; ]-\\pi,\\pi[$\n\n- **Singularité de réprésentation** = infinité de réprésentations possibles\n  - exemple (cas particulier):\n    \n    $X=Y=0$ implique $\\rho=0$ et $\\theta$ indéfini donc on a une singularité de représentation\n\n    On ne peut pas définir la position de manière unique\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.05.png)\n\n### I-2) Représentation de l'orientation\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.06.png)\n\n**Question:** Quels paramètre utiliser pour représenter l'orientation de $\\;\\mathcal{R}_{n}\\;$ p.r.à $\\;\\mathcal{R}_0$*\n\n**Objectif:** Définir $x_R$\n\n**Rem:**\n  - Il faut au moins 3 param. pour définir l'orientation\n  - Plus on a de param. moins on risque d'avoir de singularité\n\n#### I-2.1) Une première paramétrisation : Cosinus directeurs\n\nCette paramétrisation nous donne les **cosinus directeurs**.\n\n- **Cosinus directeurs directes** : $\\quad x_R = \\begin{pmatrix} {\\overrightarrow{x}_n}_{(0)}\\\\ {\\overrightarrow{y}_n}_{(0)}\\\\ {\\overrightarrow{z}_n}_{(0)}\\end{pmatrix}$\n  - donc nous avons ici **9 paramètres**\n\n- **Cosinus directeurs partiels** : $\\quad x_R = \\begin{pmatrix} {\\overrightarrow{x}_n}_{(0)}\\\\  {\\overrightarrow{z}_n}_{(0)}\\end{pmatrix}$ avec ${\\overrightarrow{y}_n}_{(0)} = {\\overrightarrow{z}_n}_{(0)} \\wedge {\\overrightarrow{x}_n}_{(0)}$\n  - donc seulement **6 paramètres**\n\n**Rem:** ${\\overrightarrow{x}_n}_{(0)}$, ${\\overrightarrow{y}_n}_{(0)}$ et ${\\overrightarrow{z}_n}_{(0)}$ permettent de définir la **matrie de rotation** :\n$$\n\\quad R_{o,n} = \\begin{bmatrix}\\cdot&\\cdot&\\cdot\\\\\\cdot&\\cdot&\\cdot\\\\\\cdot&\\cdot&\\cdot\\\\\\end{bmatrix} = \\begin{pmatrix} {\\overrightarrow{x}_n}_{(0)} & {\\overrightarrow{y}_n}_{(0)} &  {\\overrightarrow{z}_n}_{(0)} \\end{pmatrix}\n$$\n\n**Exemple:**\n\nVIRCRV.SlideOutilsFondam.ExempleMatRotation\n\n#### I-2.2) Autres paramétrisations\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.07.png)\n\n##### Overview\n\n- **Représentation 3 angles**:\n  - **Advantages**: 3 angles donc 3 paramètres du coup repr. minimales\n  - **Inconvéniant** il existera des singularité de repr.\n\n- **Représentation non minimales avec 4 param.**:\n  - **Advantages**: Pas de singularité et peu de param.\n  - **Inconvéniant** Pas toujours très visuel\n\n##### Représenation à 3 angles\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.08.png)\n\n-  **Angle de Bryant** (ou de Cadrant)\n\n  ![](/assets/images/VIRCRV.SlideOutilsFondam.09.png)\n\n  ![](/assets/images/VIRCRV.SlideOutilsFondam.10.png)\n\n  ![](/assets/images/VIRCRV.SlideOutilsFondam.11.png)\n\n-  **Angle d'Euler**\n\n  ![](/assets/images/VIRCRV.SlideOutilsFondam.12.png)\n\n  ![](/assets/images/VIRCRV.SlideOutilsFondam.13.png)\n\n**Exemple:**\n\nVIRCRV.SlideOutilsFondam.ExempleRepr3angles\n\n- Vérifier si $r_{13} \\neq \\pm 1$ pour savoir si on a une singularité\n- si pas de sing. alors utiliser les formules\n\n##### Représenation à 4 param.\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.14.png)\n\nPb complètement différent vu qu'on cherche à définir la rotation éffectuée par son **axe** et son **angle**\n\n- Pour l'axe, on va définir une **droite** à l'aide de son **vecteur directeur unitaire** $\\overrightarrow{u}$\n\n- Pour l'angle, on utilise son **angle de rotation** $\\theta$\n\n**N.B.:**\n\n- On donne les composantes de $\\overrightarrow{u}$ dans $\\mathcal{R}_0$ : $\\quad {\\overrightarrow{u}}_{(0)} = \\begin{pmatrix} {\\overrightarrow{u}_x}\\\\  {\\overrightarrow{u}_y}\\\\ {\\overrightarrow{u}_z}\\\\ \\end{pmatrix}$\n\n- Ceci donne les **coord. opérationnel d'orientation** : $\\quad x_{R} = \\begin{pmatrix} \\theta\\\\{\\overrightarrow{u}_x}\\\\  {\\overrightarrow{u}_y}\\\\ {\\overrightarrow{u}_z}\\\\ \\end{pmatrix}$\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.15.png)\n\n##### Les Quaternions\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.16.png)\n\n- $\\eta$ lié à l'angle de rotation $\\theta$\n- ${\\overrightarrow{\\epsilon}}_{(0)}$ lié à l'axe de rotation de $\\overrightarrow{u}$\n\n> Les Quarternions sont très utilisés car ils permettent de garder de meilleurs optimisations malgré que cette repr. soit moins visuelle.\n\n**Exemple:**\n\nVIRCRV.SlideOutilsFondam.ExempleQuaternions\n\n#### I-2.3) Bilan\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.17.png)\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.18.png)\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.19.png)\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.20.png)\n\n\n\n> Notes Cours 09/01 - End\n\n---\n\n> Notes Cours 09/07 - Start\n\n\n\n## II- Matrices de transformation\n\n**But** Acquérir la deuxième compétence -> changement de repère\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.21.png)\n\nCas général: $\\mathcal{R}(O,{\\overrightarrow{x}},{\\overrightarrow{y}},{\\overrightarrow{z}})_{fixe} \\longrightarrow \\mathcal{R}'(O,{\\overrightarrow{x}},{\\overrightarrow{y}},{\\overrightarrow{z}})_{mobile}$\n\n2 cas:\n  - $\\mathcal{R}'$ effectue seulement une rotation p.r.à $\\mathcal{R}$\n  - $\\mathcal{R}'$ effectue une translation et une rotation p.r.à $\\mathcal{R}$\n\n### II-1) Rotation seule\n\nOn est dans le cas où:\n  - seules la direction des axes ${\\overrightarrow{x'}},{\\overrightarrow{y'}},{\\overrightarrow{z'}}$ change\n  - $O = O'$\n\nLa rotation effectuée est caractérisée par la matrice de rotation\n$$\nR =\n\\begin{matrix}\n\\times & \\times & \\times & \\leftarrow{\\overrightarrow{x}}_{(\\mathcal{R}')}\\\\\n\\times & \\times & \\times & \\leftarrow{\\overrightarrow{y}}_{(\\mathcal{R}')}\\\\\n\\times & \\times & \\times & \\leftarrow{\\overrightarrow{z}}_{(\\mathcal{R}')}\\\\\n{\\overrightarrow{x'}}_{(\\mathcal{R})} & {\\overrightarrow{y'}}_{(\\mathcal{R})} & {\\overrightarrow{z'}}_{(\\mathcal{R})}\\\\ \n\\end{matrix}\n$$\n\nLa matrice de rotation est aussi une matrice de passage entre $\\mathcal{R}$ et $\\mathcal{R}$'.\n\nVIRCRV.SlideOutilsFondam.RMatPassage\n\n**Prop:** $$R^{-1} = R^T$$\n\n$R$ est une matrice orthonormale: \n  - Tips: du coup une façon de vérifier qu'il n'y est pas d'erreur c'est de vérifier que la matrice est bien orthonormale\n\nDef:\n  - Une matrice est _**orthonormée**_ si **toutes les colonnes et toutes les lignes ont une norme 1** ET **le produit scalaire des cols 2 à 2 est nulle**\n\n**Composition des rotations**\n\nVIRCRV.SlideOutilsFondam.CompositionRotation\n\n### II-2) Rotation + Translation\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.22.png)\n\nOn est dans le cas où:\n  - la direction des axes ${\\overrightarrow{x'}},{\\overrightarrow{y'}},{\\overrightarrow{z'}}$ change\n  - $O \\neq O'$\n\nOn rend compte ici de la rotation avec $R$ et de la translation avec ${\\overrightarrow{OO'}}_{(\\mathcal{R})}$\n\nLocalisation de $M$\n\nVIRCRV.GEAOutilsFondam.LocalisationM\n\n**Bilan**\n- si rotation seule: $R$\n    $$\n        {\\overrightarrow{OM}}_{(\\mathcal{R})} = R \\;\\cdot\\;{\\overrightarrow{OM}}_{(\\mathcal{R'})}\n    $$\n- si rotation seule: $R\\;$ et $\\;{\\overrightarrow{OO'}}_{(\\mathcal{R})}$\n$$\n    {\\overrightarrow{OM}}_{(\\mathcal{R})} = R \\;\\cdot\\;{\\overrightarrow{O'M}}_{(\\mathcal{R'})} + {\\overrightarrow{OO'}}_{(\\mathcal{R'})}\n$$ \n\n![](/assets/images/VIRCRV.SlideOutilsFondam.23.png)\n\n**Def:**\n- **Matrice de passage homogène**\n    $$\n    T = \n    \\begin{bmatrix}\n        \\mathcal{R} & P_{(\\mathcal{R})}\\\\\n        \\mathcal{O}_{1 \\times 3} & 1\\\\\n    \\end{bmatrix}\n    $$\n- Matrice carrée pour garantir son inversabilité afin qu'elle puisse faire preuve de matrice de passage.\n- Du coup on ne peux plus utiliser les **composantes classiques**, il faut utiliser alors les **composantes homogènes**.\n\nVIRCRV.GEAOutilsFondam.ComposantesHomogenes\n\n![](/assets/images/VIRCRV.SlideOutilsFondam.24.png)\n\n\n> **ATTENTION:** Pas de rotation $\\Longrightarrow \\quad R = \\begin{bmatrix}1&0&0\\\\0&1&0\\\\0&0&1\\\\\\end{bmatrix}$ \n\n#### Propriétés de $T$\n\n- $T$ **inversible**\n    $$\n    T = \n    \\begin{bmatrix}\n        \\mathcal{R} & P_{(\\mathcal{R})}\\\\\n        \\mathcal{O}_{1 \\times 3} & 1\\\\\n    \\end{bmatrix}\n    \\Longrightarrow\n    T^{-1} = \n    \\begin{bmatrix}\n        \\mathcal{R}^T & -\\mathcal{R}^T \\, P_{(\\mathcal{R})}\\\\\n        \\mathcal{O}_{1 \\times 3} & 1\\\\\n    \\end{bmatrix}\n    $$\n- **Composition de translations**\n    VIRCRV.GEAOutilsFondam.CompositionTranslations\n\n\n\n> Notes Cours 09/07 - End\n\n---\n\n\n\n","n":0.033}}},{"i":67,"$":{"0":{"v":"ModelisationBM","n":1},"1":{"v":"\n\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat\n\nSupport de cours:\n- ...\n\n---\n\n\n> Notes du 2022/09/08 - Start\n\n## Modélisation des BM\n\nVIRCRV.BM.Slide01\n\n### I- Problématique\n\n**Pb:**\n- Faire un lien entre l'espace opérationnel et l'espace des configurations pour obtenir les modèles\n- Il existe différents types de modèles\n\nVIRCRV.BM.BlackBoard.MGMC\n\n**But:** Survol de ces modèles et une première méthode de calcul\n\n### II- Modèle Géométrique (MG)\n\n> **ATTENTION:** Le temps n'intervient pas dans ce modèle (**\"modèle photo\" pas de mouvement !**) donc, pour faire bouger le BM, ce modèle est nécessaire mais pas suffisant.\n\n#### II-1) MGD\n\nVIRCRV.BM.Slide02\n\nOn cherche à trouver $x = \n\\begin{pmatrix}\n    x_P\\\\\n    x_R\\\\\n\\end{pmatrix}$ en fct de $q$.\n\n> Le **vecteur de configuration** $q$ est connu !\n\nLes $q_i$ sont aussi appelées les **coordonnées généralisées** ou **articulaires**.\n\nOn travaille en 2 étapes:\n1. **Matrice de Passage Homogème:** Calculer de $T_{0n}$ en fct de $q$\n2. **Repr. de la Situation:** De $\\;T_{0n}\\;$, on déduit $\\;\\overrightarrow{O_0O_{n+1}}_{(O)}\\;$ puis on fait un choix de coord. opéra. $x$ que l' on calcule\n\nVIRCRV.BM.Slide04\n\n##### Etape 1\n\n- Entrer le calcul direct de $\\;T_{0n}\\;$ est trop compliqué (sauf sur un BM \"simple\")\n\n- Idée:\n  1. Positionner un repère $\\mathcal{R}_i$ sur chaque corps $C_i$\n  2. Calculer les matrices de passage homogènes $T_{i-1,i}(q_i)$\n  >  $T_{i-1,i}(q_i)$ ne dépend que de $q_i$ seul\n  3. Déduire $\\;T_{0n}(q) = \\prod_{i=1}^n \\; T_{i-1,i}(q_i)$\n\n- **Rem:**\n  - Positionnement des repères $\\mathcal{R}_i$ sur les corps $C_i$ \n    - Positionnement au hasard\n      - $T_{i-1,i}$ spécifique donc pas d'automatisation possible du calcul\n      - bon pour BM avec peu de liaisons\n    - Respecter une convention\n      - Expression générique de $T_{i-1,i}$ donc automatisation du calcul possible\n      - Très bien adapté aux BM industriels\n\nVIRCRV.BM.Slide06\n\n##### Etape 2\n\nVIRCRV.BM.Slide07\n\n#### II-2) MGI\n\nVIRCRV.BM.Slide08\n\nOn connaît les coord. oper. $x$ et on cherche la configuration $q$ (ou LES configurations).\n\nPar essence, MGI est plus compliqué que MGD car pour une même coord. oper. $x$ on peut (souvent) trouver plusieurs config possibles.\n\n##### Méthode de calcul\n\n1. De $x$, on calcule $T_{0n}$ de ce calcul on définit un ${T_{0n}}^*$ qui est connu\n  $$\n  {T_{0n}}^* = \n  \\begin{bmatrix}\n    t_{11} & t_{12} & t_{13} & t_{14}\\\\\n    t_{21} & t_{22} & t_{23} & t_{24}\\\\\n    t_{31} & t_{32} & t_{33} & t_{34}\\\\\n    0 & 0 & 0 & 1\n  \\end{bmatrix}\n  $$\n2. Calculer le MGD pour trouver $T_{0n}(q)$\n3. Identifier $T_{0n}(q)$ à ${T_{0n}}^*$ et trouver $q$ tel que\n  $$\n  {T_{0n}}(q) = {T_{0n}}^*\n  $$\n\n### III- Modèle Cinèmatique\n\n**Attention:**\n- Temps intervient donc mouvement possible\n- On néglige les effets dynamiques (inerties frottements,...)\n- MC passage des vitesses généralisées/articulaires $\\dot q$ vers les vitesses oper. $\\dot x$ via MCD et inversement via MCI\n\n#### III-1) Modèle Cinématique Direct (MCD)\n\n\nSituation particulière \n$$\nx =\n\\begin{pmatrix}\n    x_P\\\\\n    x_R\\\\\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n    x_1\\\\\n    \\vdots\\\\\n    x_m\\\\\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n    f_1(q_1,\\dots,q_n)\\\\\n    \\vdots\\\\\n    f_m(q_1,\\dots,q_n)\\\\\n\\end{pmatrix}\n\\longleftarrow \\; \\text{MCD}\n$$\n\nOn dérive le MCD pour trouver $\\dot x$ avec la **matrice jacobienne du BM** $J$:\n\n$$\n\\dot x = \n\\begin{pmatrix}\n    \\partial_{q_1} f_1 & \\dots & \\partial_{q_n} f_1 \\\\\n    \\vdots & \\ddots & \\vdots\\\\\n    \\partial_{q_1} f_m & \\dots & \\partial_{q_n} f_m\\\\\n\\end{pmatrix}\n\\begin{pmatrix}\n    \\dot q_1\\\\\n    \\vdots\\\\\n    \\dot q_m\\\\\n\\end{pmatrix}\n$$\n\n> **ATTENTION:** **$J$ dépend de $q$** et $J$ n'est **pas forcément carré** !\n\nVIRCRV.BM.Slide09\n\n#### III-2) MGI\n\nOn connaît $\\dot x$ et on cherche $\\dot q$\n\n> On ne dérive jamais le MGI !\n\nOn tire avantage de l'équation du MCD : $\\quad \\dot x = J(q)\\;\\dot q\\quad$\n  - bonus simple résolution algébrique\n  - seul pb est lié à $J$ étant dépendant de $q$\n    - ceci nous amène parfois à des $J$ non inversible \n    - c'est le cas lorsque le degré de liberté diminue\n  - mais on peut aussi avoir de la redondance\n    - permet de réaliser pls taches (robot humanoide: equilibre, attrape objet, ...)\n\n> À l'ingénieur de bien poser l'équation pour répondre aux besoins\n\n> Prendre une bouteille peut se faire le bras tendue tous le long du deplacement ou seulement a la fin ! \n> Selon la taille de $J$, on obtient 3 cas\n  - $m=n$ donc $\\; \\dot q = {J(q)}^{-1}\\;\\dot x\\quad$\n  - $m>n$ alors il nous faut utiliser les moindres carrés\n  - $m<n$ donc il y a une infinité de solution\n    - c'est dans ce cas que la notion de redandonce peut etre utilisé pour faire des choix de comportement\n    - $\\dot q = {J(q)}^{+}\\;\\dot x + (...)g$\n    - le premier terme correspond à notre but puis s'ajoute à cela une infinité de config possible où $g$ s'identifie souvent à un gradient représentant différents critères de performances (optimisation énergétique, spatiales, ...)\n\n\n\n\n\n> Notes du 2022/09/08 - End\n\n---\n\n> Notes du 2022/09/? - Start\n\n","n":0.037}}},{"i":68,"$":{"0":{"v":"Chap 1 - Introduction à la robotique","n":0.378},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat\n\nSupport de cours:\n- [VIRCRV.NotesRKA.SlideIntro.20220831.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesRKA.SlideIntro.20220831.pdf)\n- [VIRCRV.NotesGEA.20220831.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/VIRCRV.NotesGEA.20220831.pdf)\n\n---\n\n![](/assets/images/VIRCRV.SlideIntro.01.png)\n\n## Bref survol de la planète robotique\n\n![](/assets/images/VIRCRV.SlideIntro.02.png)\n\n- _robota_ mot tchèque pour \"travail forcé\"\n\n- remplacer l'opérateur de main pour les tâches pénibles, impossibles ou dangeureuses\n\nDates clés:\n- 1947 premier manipulateur télé-opéré\n- 1954 premier robot programmable (séquence de commande avec bras manipulateur sans retour sur l'environnement)\n- 1961 premier bras manipulateur sur chaîne d'assemblage (i.e. General Motors)\n\n> Différence entre automate et robot car les automates eux peuvent remonter jusqu'à l'antiquité\n\n![](/assets/images/VIRCRV.SlideIntro.03.png)\n\nDéfinition: Robot\n\n  - sytème mécanique _articulé_ ou _doué de mouvement_ capable d'effectuer _automatiquement_ cetaines tâches\n\n  - structures mécaniques adaptées à la tâche à réaliser \n\n  - le mouvement fait la spéificité du robot\n    - interaction avec l'environment\n    - ce n'est pas un ordinateur\n  \n  - on peut décomposer un robot par :\n    - structure mécanique\n    - capteurs\n    - pc\n\n![](/assets/images/VIRCRV.SlideIntro.04.png)\n\n- tâches nécessitant bcp de dextérité le robot n'arrive pas à égaler les humains du coup l'industrie du futur veut se tourner vers de la robotique collaborative appelé  (i.e. RACE)\n\n- manipulation\n  - problématique résolu par le robot\n  - implique un environnement connu est maitrise\n\n![](/assets/images/VIRCRV.SlideIntro.05.png)\n\n- navigation \n  - problématique résolu par le robot\n  - implique un environnment non contrôlé non maîtrisé\n\n\n![](/assets/images/VIRCRV.SlideIntro.06.png)\n\n- robotique de service sans interaction humaine\n  - thématique très récente\n\n\n![](/assets/images/VIRCRV.SlideIntro.07.png)\n\n- robotique de service avec interaction humaine\n\n- robotique de service sans interaction humaine\n\n![](/assets/images/VIRCRV.SlideIntro.08.png)\n\n- 3 niveaux d'utilité\n  - agir dans le monde réel\n  - s'adapter à son environment\n  - collaborer avec l'homme/l'environnement\n\n\n- Principe: Boucle sans fin\n  - Perception: voir via des capteurs embarqués/déportés (e.g. proprioceptifs/extéroceptifs)\n    - **capteur proprioceptif** reseigne le robot sur lui-même\n    - **capteur extéroceptif** reseigne le robot sur l'environnement\n    - **embarqués** = sur le robot\n    - **déportés** = sur l'environnement\n    - traitement de données\n  - Décision\n    - déterminer le mouvement à réaliser\n    - Automatique\n  - Action\n    - réalise le mouvement souhaité\n    - IA our SED\n\n- traitement de donné se fait dans la perception mais les frontières sont flous\n\n## Focus sur la robotique industrielle\n\n### SM à chaîne simple\n\n![](/assets/images/VIRCRV.SlideIntro.09.png)\n\nDeux parties sur un robot:\n- OT: **organe terminal** ou effecteur\n  - réalise la tâche\n\n- SM: Structure mécanique\n  - positionne l'OT\n  - il en existe 3\n    - **Robot manipulateur à chaine simple**\n      - corps et liaison\n      > **Liaison**: mets en mouvement un **corps** par rapport à un autre\n      - antécédent et succésseur\n\n### SM à chaîne arborescente\n\n![](/assets/images/VIRCRV.SlideIntro.10.png)\n\n### SM à chaîne complexe\n\n![](/assets/images/VIRCRV.SlideIntro.11.png)\n\n- ici chaine fermée alors que les précedentes étaient ouvertes\n\n### Liaisons rotoïdes et prismatiques\n\n![](/assets/images/VIRCRV.SlideIntro.12.png)\n\n- cylindre: rotation\n- prisme: translation\n\n- robot souvent nommé selon sa séquence de liaison en P et R\n\n### Exemple de différentes séquences de liaisons\n\n![](/assets/images/VIRCRV.SlideIntro.13.png)\n\n### Notions de Bases sur BM Fixe\n\n![](/assets/images/VIRCRV.SlideIntro.14.png)\n\n![](/assets/images/VIRCRV.SlideIntro.15.png)\n\n- $C_i$: corps illustré en oval\n- $L_i$: liaison illustré en cercle\n- $BM$: Bras Manipulateur\n- **indice de mobilité** ($M$): nombre de liaison\n- **Configuration**: position de la SM\n  - définit par un **vecteur de configuration** $q = \\begin{pmatrix} q_1 \\\\ ... \\\\ q_n \n\\end{pmatrix}\n$\n  - $q_i$ angle de rotation si $L_i=R$ sinon allongement si $L_i=P$\n  - $q$: **coordonnée générale** lisée ou **coordonnée articulaire**\n\n- **Position**: situation + ortientation de l'OT\n- $R_0$: Repère de base qui est fixe\n- $x = \\begin{pmatrix} x_P \\\\ x_R\\end{pmatrix}$ **coordonnées opérationnelles** avec $x_P$ la coord. de position et $x_R$ la coord. d'orientation\n\n- **Degré de liberté** (DDL): \n  - peut être confondu par l'indice de mobilité\n  - ici il faut le comprendre comment le degré de liberté de l'OT\n\n![](/assets/images/VIRCRV.SlideIntro.16.png)\n\n- DDL: Nb de mouvement permis par l'OT\n  - dans une configuration donnée (**DDL Local $d$**)\n  - pour toutes les configurations possibles (**DDL Global $D$**)\n- Robot gauche: $(M,d,D) = (2,2,2)$\n- Robot droite: $(M,d,D) = (2,1,1)$ (robot **redondant**)\n\n![](/assets/images/VIRCRV.SlideIntro.17.png)\n\n- Robot gauche: $(M,d,D) = (3,3,3)$\n- Robot droite: $(M,d,D) = (3,2,3)$ (**config. singulière**)\n- ici on regarde deux configurations différentes sur le même robot\n\n## Problématique\n\n![](/assets/images/VIRCRV.SlideIntro.18.png)\n\n- L'opérateur définit la tâche dans l'espace opérationnel (en terme de situation par rapport à l'OT)\n\n- BM se déplace avec la SM\n  - donc réfléchit en terme de configuration (dans l'espace articulaire)\n\n> Il faut donc un pont/changement de base entre l'espace opérationnel et l'espace articulaire\n\n- On doit donc faire le lien entre $(q,\\dot q, \\ddot q)$ et $(x,\\dot x,\\ddot x)$\n- On parle alors de 3 modèles:\n  - $q$ --> $x$ modèle géométrique (MG)\n  - $\\dot q$ --> $\\dot x$ modèle cinématique (MC)\n  - $\\ddot q$ --> $\\ddot x$ modèle d'accélération (MA)\n  - MGD: Modele Geo Directe quand on va de $q$ vers $x$\n  - MGI: Modele Geo Inverse quand on va de $x$ vers $q$\n  - Idem pour les autres modèles\n\n\n![](/assets/images/VIRCRV.SlideIntro.19.png)\n\n- ACT: Actionneur -> toute la partie automatique\n- ROB: strucuture mécanique\n\n> La robotique en général nécessite trois comptétences:\n1. Déterminer/représenter la situation (e.g. le $X_{but}\n2. Gérer les changements de repère\n3. Gérer les changements de modèle\n\n","n":0.036}}},{"i":69,"$":{"0":{"v":"TP2 - Logiciel Aphelion","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par C. Eqouy  \n\nSupport de cours :\n- [B1.VIRCRV.TP2.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B1.VIRCRV.TP2.Sujet.pdf)\n\n---\n\n\nOuverture = Erosion + Dilatation\n\nFermeture = Dilatation + Erosion\n\n# Exercice 2 - Contrôle de conformité sur grille\n\n![](/assets/images/B1.VIRCRV.TP2.Ex-02.png)\n\n## 2.1) Vignettage\n\nConfusion entre la grille et le fond dû aux problemes de luminosité du coup on fait une **fermeture** pour supprimer totalement la grille et ainsi récuperer le fond.\n\nOn a appliqué une fermeture ainsi :\n1. Traitement>Image>Morphologie>Ouverture/Fermeture>Close\n2. Prendre $ImageRef$ puis choisir un carré comme **structuring element** avec une taille de 70\n\nUne fois le fond isolé on peut faire une soustraction $Fond-ImageRef$ pour obtenir une image de la grille avec un fond uniforme.\n\nPour faire la soustraction :\n1. Traitement>Image>Arithmétique>Substract\n2. Input1 = $Fond$ et Input2 = $ImageRef$\n\nMaintenant on va pouvoir appliquer une segmentation pour extraire la grille (mettre tous le fond à 0 et ne garder que la grille en la mettant à 1).\n\nPour faire la segmentation :\n1. Traitement>Semgmentation>Treshold\n2. Choisir le seuil qui affiche toute la grille (ici on avait 13->57)\n3. On a obtenu des pixels en bordure d'image à enlever\n4. Pour enlever ces pixels de trop on a fait\n    Traitement>Image>Morphologie>Géodésie>BorderKill\n\nIl peut être plus advantageux d'inverser l'image pour mettre le fond à 1 et la grille à 0 pour ce faire :\n1. Traitement>Image>Logique>Not\n\n## 2.2) Labélisation\n\n1. Ouvrir l'outils de labélisation :\n    \"extraction d'objets\" sur la barre d'outils de gauche\n2. Laisser \"automatique\" et appuyer sur suivant\n3. Choisir \"seuillage\" et vérifier que les seuils sont de 1 à 1\n4. Appuyer sur suivant puis appliquer le modifications\n\nOn obtient dans la gallerie d'\"ObjectSet\" un labelisation possèdant en propriété 206 objets que l'on peut afficher sur l'$ImageRef$ en sélectionnant \"Afficher/Masquer\">Bitmap.\n\n## 2.3) Filtrage\n\n1. Traitement>ObjectSet>Filtrage\n2. Choisir un critère de filtrage (élongation ou périmètre)\n3. Donner un range ne contenant pas les caractéristiques nominales \n    - pour l'élongation mettre min à 0 et max en à 0.75 -> le nominal étant autour de 0.8\n    - pour le périmètre mettre min à 125 et max à 500 ou plus (le nominal étant plus petit que 125)\n4. Vérifier les propriétés de l'objectset (il doit contenir que la zone défectueuse)\n\n## 2.4) Approche à privilégier ?\n\nLa méthode de filtrage est plus intéressante car elle permet de n'isoler que l'objet défectueux tout en facilitant son automatisation via l'usage du tableau de caractéristiques.\n\n# Exercice 1 - Contrôle de conformité sur circuit imprimé\n\n![](/assets/images/B1.VIRCRV.TP2.Ex-01.png)\n\n## 1.1) Augmenter la dynamique\n\n1. Traitement>Image>Arithméique>LinearScale\n2. Ajuster l'output range pour couvrir tous le spectre $[0;255]$\n\n## 1.2) Détection des défauts\n\n1. Appliquer des segmentations sur la conforme et la défectueuse \n    Traitement>Semgmentation>Treshold\n2. Faire une soustraction $conforme-defect$ cela donne les parties manquantes de la piece defectueuse\n3. Possiblement appliquer une ouverture/fermeture pour améliore l'image obtenue en 2\n\n## 1.3) Identification des défauts\n\n1. Appliquer la labelisation et l'afficher sur l'image défectueuse pour faire apparaitre les pieces manquantes\n2. Filtrer pour ne garder que le segment (en utilisant le citere de compacité par exemple)\n\n## 1.4) Ségmenter les lignes de soudure\n\n...\n\n# Exercice 4 - Analyse de microstructure\n\n![](/assets/images/B1.VIRCRV.TP2.Ex-04.png)\n\n## 4.1) Identification avec histogramme de niveaux de gris\n\n### Histogramme\n\n1. Clic droit sur l'image puis Histogramme\n2. ou Traitement>Image>Mesures>Histogramme\n\n![](/assets/images/B1.VIRCRV.TP2.Ex-04.Im-01.png)\n\nL'Histogramme montre trois pics à :\n- autour de $254$ correspondant à la matrice en blanc\n- entre $[70;185]$ correspondant à la couche superficielle en gris\n- autour de $0$ correspondant à la couche discontinue en noir\n\n\n### Segmentation\n\n1. Traitement>Images>Segmentation>Treshold\n2. Choisir le seuil qui affiche juste la couche grise (ici on a pris 70->185)\n3. On a obtenu des contours de la couche discontinue à enlever\n    1. Traitement>Image>Morphologie>Ouverture/Fermeture>Close avec Disque et size à 5\n        pour enlever les trous ; puis\n    2. Traitement>Image>Morphologie>Ouverture/Fermeture>Open avec Disque et size à 5\n        pour remplir les trous de la couche grise\n\n### Epaisseur\n\n1. Traitement>Images>Morphologie>Squelette>ThinSkeleton\n    pour extraire la structure de la couche grise\n2. Choisir Structure Type 1 avec 4 connexité\n\n\n\n\n<!--\n# Exercice 3 - Comptage de Tuyaux\n\n![](/assets/images/B1.VIRCRV.TP2.Ex-03.png)\n\n# Exercice 5 - Contrôle conformité circuit imprimé (sans apprentissage)\n\n![](/assets/images/B1.VIRCRV.TP2.Ex-05.png)\n\n# Exercice 6 - Analyse Endommagement\n\n![](/assets/images/B1.VIRCRV.TP2.Ex-06.png)\n\n# Exercice 7 - Détection d'objets mobiles\n\n![](/assets/images/B1.VIRCRV.TP2.Ex-07.png)\n\n-->","n":0.04}}},{"i":70,"$":{"0":{"v":"TP1","n":1},"1":{"v":"\n# Travail à effectuer\n\n## 2.1 Modélisation du robot\n\n![](/assets/images/VIRCRV.TP1.Question21.png)\n\n1. Lancer `drawBM` pour visualiser chaque configuration offerte\n\n2. On calculer $T_{04}$\n\n3. On a donné une configuration $q = [pi\\;\\; pi/2 -1 0];$ puis vérifier que le point $\\overrightarrow{O_0O_4}_{(4)} = [1   ; 0.5  ; 1   ; 1]$\n\n## 2.2 Modélisation de la tâche\n\n![](/assets/images/VIRCRV.TP1.Question22.png)\n\n1. ","n":0.144}}},{"i":71,"$":{"0":{"v":"TD2 - Realisation d'une tâche","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat\n\nSupport de cours:\n\n![[VIRCRV#^vi-support-td2-start:#^vi-support-td2-end]]\n\nScans\n![[VIRCRV#^vi-scangea-td2]]\n\n---\n\n> Notes du 2022/09/07 - Start\n\n# part 2\n\nProcedure de calibrage: \n- situation des deux robots\n- position des objets\n\nVI.TD2.FigRobotRPP\n\nCoord. du point $P$ dans $\\mathcal{R}_C\\;$ :\n$\\;\n\\overrightarrow{CP}_{(C)} = \n\\begin{pmatrix}\na\\\\ b\\\\ c\\\\\n\\end{pmatrix}\n$\n\nCoord. du point $O_0$ dans $\\mathcal{R}_C\\;$ :\n$\\;\n\\overrightarrow{CO}_{(C)} = \n\\begin{pmatrix}\nl_1\\\\ -l_2\\\\ -l_3\\\\\n\\end{pmatrix}\n$\n\n#### Question 2.1 - Localiser la pièce dans $\\mathcal{R}_0$\n\nVI.TD2.Question\n\nMatrice de passage homogène :\n$\nT_{0C} = \n\\begin{bmatrix}\nR_{0C} & \\overrightarrow{O_0C}_{(0)}\\\\\n\\mathcal{O}_{1 \\times 3} & 1\n\\end{bmatrix}\n$\n\nCette matrice est constante car les 2 repères sont fixes\n\nOn a\n$$\nT_{0C} = \n\\begin{bmatrix}\n0 & 1 & 0 & l_2\\\\\n-1 & 1 & 0 & l_1\\\\\n0 & 0 & 1 & l_3\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\nATTENTION le vecteur\n$\\overrightarrow{O_0C}_{(0)} \\neq \\begin{pmatrix}\nl_1\\\\ -l_2\\\\ -l_3\\\\\n\\end{pmatrix}$\n\nOn a changé de repere !\n\nIl faut donc appliquer la matrice de rotation:\n\n$$\n\\overrightarrow{O_0C}_{(0)} = - R_{0C}\\;\\overrightarrow{O_0C}_{(C)} =\n\\begin{pmatrix}\nl_2\\\\ l_1\\\\ l_3\\\\\n\\end{pmatrix}\n$$\n\nAinsi, \n\n$$\n\\begin{pmatrix}\n\\overrightarrow{O_0P}_{(0)}\\\\ \n1\n\\end{pmatrix}\n= T_{0C}\n\\begin{pmatrix}\n\\overrightarrow{CP}_{(C)}\\\\ \n1\n\\end{pmatrix}\n= \\begin{bmatrix}\nb+l_2\\\\ \n-a +l_1\\\\\nc+l_3\\\\\n1\n\\end{bmatrix}\n$$\n\noù $\\overrightarrow{O_0P}_{(0)}$ sont les coord. hom de $P$ dans $\\mathcal{R}_0$ et $\\overrightarrow{CP}_{(C)}$ corrd. de $P$ dans $\\mathcal{R}_C$ (donc pas $\\overrightarrow{O_0P}_{(C)}$)\n\n#### Question 2.2 - Trouver la configuration (MGI)\n\n> Quel est la configuration de .. = Calculer le MGI !\n\nVI.TD2.Question2\n\nContexte :\n- Coord. du point de saisie dans $\\mathcal{R}_0$ :\n$\\begin{pmatrix}\na'\\\\ 0\\\\ c'\n\\end{pmatrix}$\n\n- Orientation de $\\mathcal{R}_P$ est identique à celle de $\\mathcal{R}_0$\n\nC'est deux points nous donne la **situation de la pièce à atteindre**.\n\n**But:**\n$$\nT_{0P}^* = \n\\begin{bmatrix}\n1 & 0 & 0 & a'\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 1 & c'\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\nOn calcule le MGD\n\nVI.TD2.Question2-01\n\nOn cherche $\\;T_{0E} (q_1,q_2,q_3)$\n\nPour faire cela on decompose chaque passage :\n\nVI.TD2.Question2-02\n\nOn a alors\n$$\nT_{0E} (q_1,q_2,q_3) = T_{01}(q_1) \\; T_{12}(q_2) \\; T_{2E}(q_3) =\n\\begin{bmatrix}\nc_1 & -s_1 & 0 & q_2c_1\\\\\ns_1 & c_1 & 0 & q_2s_1\\\\\n0 & 0 & 1 & h-q_3\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\navec\n\n$$\nT_{01}(q_1) = \n\\begin{bmatrix}\nc_1 & -s_1 & 0 & 0\\\\\ns_1 & c_1 & 0 & 0\\\\\n0 & 0 & 1 & h\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\n$$\nT_{12}(q_2) = \n\\begin{bmatrix}\n1 & 0 & 0 & q_2\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\n$$\nT_{2E}(q_3) = \n\\begin{bmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 1 & -q_3\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\nMtnt on peut calculer le MGI en identifiant : $\\; T_{0E}(q) = T_{0P}^*$\n\nDonc on obtient les equations suivantes\n\n$$\n\\begin{matrix}\nc_1 = 1 & \ns_1 = 0 &\n\\Longrightarrow &\nq_1 = 0\\\\\nq_2\\;c_1 = a' &\nq_2\\;s_1 = 0 &\n\\Longrightarrow &\nq_2 = a'\\\\\n& h-q_3 = c' &\n\\Longrightarrow &\nq_3 = h - c'\n\\end{matrix}\n$$\n\n#### Question 2.3 - Erreur de déplacement\n\nVI.TD1.Question3\n\n$$\n\\begin{matrix}\nc_1 = 1 & s_1 = 0 & \\Longrightarrow & q_1 = 0\\\\\nq_2\\;c_1 = a' & q_2\\;s_1 = b' & \\Longrightarrow &  b' = 0\\\\\n& h-q_3 = c' & \\Longrightarrow & q_3 = h - c'\n\\end{matrix}\n$$\n\nOr le système n'a de solution que pour $b'=0$\n\nDu coup le robot ne peut pas physiquement effectué cette tache\n\n#### Question 2.4 - Rajout d'une liaison rotoide\n\nOn calcule le MDD\n\n$$\nT_{0E} (q_1,q_2,q_3,q_4) = T_{01}(q_1) \\; T_{12}(q_2) \\; T_{2E}(q_3)\\\\[0.5cm]\n=\n\\begin{bmatrix}\nc_1c_4 - s_1s_4 & -c_1s_4 -c_4s_1 & 0 & q_2c_1\\\\\nc_1s_4 + c_4s_1 & c_1c_4 -s_1s_4 & 0 & q_2s_1\\\\\n0 & 0 & 1 & h-q_3-h_2\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\\\\[0.5cm]\n=\n\\begin{bmatrix}\nc_{14} & -s_{14} & 0 & q_2c_1\\\\\ns_{14} & c_{14} & 0 & q_2s_1\\\\\n0 & 0 & 1 & h-q_3-h_2\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\navec\n\n$$\nT_{01}(q_1) = \n\\begin{bmatrix}\nc_1 & -s_1 & 0 & 0\\\\\ns_1 & c_1 & 0 & 0\\\\\n0 & 0 & 1 & h\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\n$$\nT_{12}(q_2) = \n\\begin{bmatrix}\n1 & 0 & 0 & q_2\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\n$$\nT_{2E}(q_3,q_4) = \n\\begin{bmatrix}\nc_4 & -s_4 & 0 & 0\\\\\ns_4 & c_4 & 0 & 0\\\\\n0 & 0 & 1 & -q_3-h_2\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\nOr \n\n$$\nT_{0P}^* = \n\\begin{bmatrix}\n1 & 0 & 0 & a'\\\\\n0 & 1 & 0 & b'\\\\\n0 & 0 & 1 & c'\\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n$$\n\nOn identifie $T_{0E}(q)$ à $T_{0P}^*$\n\n$$\n\\begin{matrix}\nc_{14} = 1 \\quad\\wedge\\quad s_1 = 0 & \\Longrightarrow & q_1 + q_4 = 0 & \\Longrightarrow & q_4 = -q_1\\\\[0.5cm]\nq_2\\;c_1 = a' \\quad\\wedge\\quad q_2\\;s_1 = b' & \\Longrightarrow & c_1 = \\dfrac{a'}{q_2} \\quad\\wedge\\quad s_1 = \\dfrac{b'}{q_2} & \\Longrightarrow & q_1 = atan2\\Big(\\dfrac{a'}{q_2},\\dfrac{b'}{q_2}\\Big)\\\\[0.5cm]\nq_2^2\\;c_1^2 + q_2^2\\;s_1^2 = a'^2 + b'^2 & \\Longrightarrow & q_2 = !!!\\\\[0.5cm]\nh -q_3 - h_2 = c' & \\Longrightarrow & q_3 = h - h_2 - c'\\\\[0.5cm]\nq_4 = !!!\n\\end{matrix}\n$$\n\nAttention $q_2 \\neq 0$\n\n\n## Extra\n\nExtra-01\n\nExtra-02\n\nExtra-03\n\n## MCD\n\nMCD donne le lien entre les vitesses de l'OT et les vitesses des liaisons\n\nVI.TD2.ExtraMCD\n\nAttention la jacobienne depend des $q_i$","n":0.037}}},{"i":72,"$":{"0":{"v":"TD1 - Outils Mathématiques","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par V. Cadenat\n\nSupport de cours:\n![[VIRCRV#^vi-support-td1-start:#^vi-support-td1-end]]\n\nScans\n![[VIRCRV#^vi-scangea-td1]]\n\n---\n\n> Notes du 2022/09/07 - Start\n\n![](/assets/images/VIRCRV.TD1.Slide.01.png)\n\n### I.1) Les trois rotations\n\n![](/assets/images/VIRCRV.TD1.Slide.02.png)\n\n- Vue 2D:\n    - Cercle avec point $\\Longrightarrow$ vecteur pointe vers le lecteur\n    - Cercel avec croix $\\Longrightarrow$ vecteur s'en va du lecteur\n\n![](/assets/images/VIRCRV.TD1.Slide.03.png)\n\n![](/assets/images/VIRCRV.TD1.Slide.04.png)\n\n\n#### Question 1.1:\n\n![](/assets/images/VIRCRV.TD1.Question1.png)\n\nRéponse:\n$$\nR_{01} =\n\\begin{bmatrix}\n    1 & 0 & 0\\\\\n    0 & cos\\theta & -sin\\theta\\\\\n    0 & sin\\theta & cos\\theta\n\\end{bmatrix}\n$$\n\n\n#### Question 1.2:\n\n![](/assets/images/VIRCRV.TD1.Question2.png)\n\nRéponse:\n$$\nR_{01} =\n\\begin{bmatrix}\n    cos\\theta & 0 & sin\\theta\\\\\n    0 & 1 & 0\\\\\n    -sin\\theta & 0 & cos\\theta\n\\end{bmatrix}\n$$\n\n#### Question 1.3:\n\n![](/assets/images/VIRCRV.TD1.Question3.png)\n\nRéponse:\n$$\nR_{01} =\n\\begin{bmatrix}\n    cos\\theta & -sin\\theta & 0\\\\\n    sin\\theta & cos\\theta & 0\\\\\n    0 & 0 & 1\n\\end{bmatrix}\n$$\n\n#### Question 1.4:\n\n![](/assets/images/VIRCRV.TD1.Question4.png)\n\nRéponse:\n- 1er matrice est une rotation autour de $\\overrightarrow{y}$ avec un angle de $\\theta=\\dfrac{\\pi}{3}$\n    $$\n    R_{01} =\n    \\begin{bmatrix}\n        0.5 & 0 & 0.87\\\\\n        0 & 1 & 0\\\\\n        -0.87 & 0 & 0.5\n    \\end{bmatrix}\n    $$\n- 2ème matrice est une rotation autour de $\\overrightarrow{z}$ avec un angle de $\\theta=\\dfrac{\\pi}{2}$\n    $$\n    R_{01} =\n    \\begin{bmatrix}\n        0 & -1 & 0\\\\\n        1 & 0 & 0\\\\\n        0 & 0 & 1\n    \\end{bmatrix}\n    $$\n- 3ème matrice est une rotation autour de $\\overrightarrow{x}$ avec un angle de $\\theta=\\dfrac{3\\pi}{2}$\n    $$\n    R_{01} =\n    \\begin{bmatrix}\n        1 & 0 & 0\\\\\n        0 & 0 & 1\\\\\n        0 & -1 & 0\n    \\end{bmatrix}\n    $$\n\n### I.2) Composition des rotations et changements de base\n\n\n#### Question 2.1:\n\n![](/assets/images/VIRCRV.TD1.Question21.png)\n\n**Réponse:**\n\n**a)**\n\nVIRCRV.TD1.Question21a.NotesGEA\n\n**b)**\n$$\nR_{01} =\n\\begin{bmatrix}\n    0 & 0 & -1\\\\\n    0 & 1 & 0\\\\\n    1 & 0 & 0\n\\end{bmatrix}\n$$\n\n$$\nR_{12} =\n\\begin{bmatrix}\n    1 & 0 & 0\\\\\n    0 & 0 & -1\\\\\n    0 & 1 & 0\n\\end{bmatrix}\n$$\n\n**c)**\n\n$$\nR_{02} = R_{01} \\times R_{12} =\n\\begin{bmatrix}\n    0 & -1 & 0\\\\\n    0 & 0 & -1\\\\\n    1 & 0 & 0\n\\end{bmatrix}\n$$\n\n> **Attention:** $R_{02}$ n'a pas d'identification possible avec une des 3 matrices de rotation classiques !\n\n**d)**\n\n$$\n\\overrightarrow{v}_{(0)} = \n\\begin{pmatrix}\n    0 \\\\\n    1 \\\\\n    2\n\\end{pmatrix}\n\\Longrightarrow\n\\overrightarrow{v}_{(0)} = R_{01} \\;\\overrightarrow{v}_{(1)}\n\n$$\n...\n\n\n![](/assets/images/VIRCRV.TD1.Slide.05.png)\n\n\n\n> Notes du 2022/09/07 - End\n\n---\n\n> Notes du 2022/09/08 - Start\n\n\n\n\n\n### I.3) Matrices de Passage Homogènes\n\n#### Question 3.1:\n\n![](/assets/images/VIRCRV.TD1.Question31.png)\n\nIl s'agit de la composition d'une translation et d'une rotation.\n\nIl nous faut donc une matrice de passage homogène.\n\n$$\nT_{01} =\n\\begin{bmatrix}\n    R_{01} & {P_{01}}_{(0)}\\\\\n    \\mathcal{O}_{1\\times 3} & 1\n\\end{bmatrix}\n$$\n\navec \n$$\n{P_{01}}_{(O)} = \\overrightarrow{O_0O_1}_{(O)} =\n\\begin{pmatrix}\n    a\\\\\n    b\\\\\n    c\\\\\n\\end{pmatrix}\n$$\n\n...\n\n**Conclusion:** Rotation autour de $\\overrightarrow{z}_0$ d'angle $\\theta$\n\n#### Question 3.2:\n\n![](/assets/images/VIRCRV.TD1.Question32.png)\n\nBM à 6 liaisons donc $\\mathcal{R}_6$ est le repère lié à l'OT\n\nVIRCRV.TD1.Question32.RepereO6\n\nVIRCRV.TD1.Question32.RepereO7\n\nIci on s'interesse à $\\;\\overrightarrow{O_0O_7}_{(O)}$ soit la position de $O_7$ dans $\\mathcal{R}_0$.\n\nPour calculer $\\;\\overrightarrow{O_0O_7}_{(O)}$,  on a besoin de $T_{06}$\n\n\n- relation intrinsèque \n  $$\n  \\overrightarrow{O_0O_7} = \\overrightarrow{O_0O_6} + \\overrightarrow{O_6O_7}\n  $$\n  - position interne de l'outils\n- relation extrinsèque\n  $$\n  \\overrightarrow{O_0O_7}_{(O)} = \\overrightarrow{O_0O_6}_{(O)} + \\overrightarrow{O_6O_7}_{(O)}\n  $$\n  - postion outils dans l'environmmnet\n\n$$\n\\overrightarrow{O_0O_7}_{(O)} = \\overrightarrow{O_0O_6}_{(O)} + \\overrightarrow{O_6O_7}_{(O)}\n...  \n$$\n\n**Autre solution:**\n\n$$\n\\begin{pmatrix}\n    \\overrightarrow{O_0O_7}_{(O)}\\\\\n    1\\\\\n\\end{pmatrix}\n= T_{06}\n\\begin{pmatrix}\n    \\overrightarrow{O_6O_7}_{(O)}\\\\\n    1\\\\\n\\end{pmatrix}\n= \n\\begin{pmatrix}\n    0 & 1 & 0 & 0\\\\\n    0 & 0 & 1 & L\\\\\n    1 & 0 & 0 & H\\\\\n    0 & 0 & 0 & 1\\\\\n\\end{pmatrix}\n\\begin{pmatrix}\n    d_1\\\\\n    0\\\\\n    d_2\\\\\n    1\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n    0\\\\\n    d_2+L\\\\\n    d_1+H\\\\\n    1\n\\end{pmatrix}\n$$\n\n**Conclusion:** Situation de l'OT\n$$\nx = \n\\begin{pmatrix}\n    x_P\\\\\n    x_R\\\\\n\\end{pmatrix}\n\\quad\\text{avec}\\quad\nx_P = \n\\begin{pmatrix}\n    0\\\\\n    d_2+L\\\\\n    d_1+H\n\\end{pmatrix}\n\\quad\\text{et}\\quad\nx_R = \n\\begin{pmatrix}\n    {\\overrightarrow{x_6}}_{(0)}\\\\\n    {\\overrightarrow{z_6}}_{(0)}\\\\\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n    0\\\\\n    0\\\\\n    1\\\\\n    0\\\\\n    1\\\\\n    0\n\\end{pmatrix}\n$$\n\ncosinus directeurs partiels souvent choisit avec x et z\n\n\n\n> Notes du 2022/09/08 - End\n\n---","n":0.045}}},{"i":73,"$":{"0":{"v":"RMN - Robotique Mobile & Navigation","n":0.408},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix et P. Danès\n\n---\n\n# À Retenir\n\n- ...\n- ...\n- ...\n\n# Cours Magistraux\n\n- [[Chap 1 - Introduction|B1.RMN.CM.Intro]]\n- [[Chap 2 - Mouvement|B1.RMN.CM.Mouvement]]\n- [[Chap 3 - Méthode probabiliste|B1.RMN.CM.MethodeProba]]\n- [[Chap 4 - Robotique Humanoïde|B1.RMN.CM.robot-humanoide]]\n- [[Chap 5 - SLAM|B1.RMN.CM.SLAM]]\n- [[Chap 6 - ROS|B1.RMN.CM.ROS-Intro]]\n\n<!--\n# Travaux Dirigés\n\n- [[...|...]]\n-->\n\n# Travaux Pratiques\n\n- [[ROS - TP1|B1.RMN.ROS.TP1]]\n- [[ROS - TP2|B1.RMN.ROS.TP2]]\n- [[ROS - TP3|B1.RMN.ROS.TP3]]\n\n# Support de Cours\n\n## Fichiers Moodles\n\n### CM\n\n- [RMN.CM.MethodeProba.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/RMN.CM.MethodeProba.pdf)\n\n\n### TD\n\n- [...]()\n- [...]()\n- [...]()\n\n### TP\n\n- [...]()\n- [...]()\n- [...]()\n\n## Scans\n\n### Blackboard\n\n- [RMN.CM.BB20220914.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/RMN.CM.BB20220914.pdf)\n- [RMN.CM.BB20220916.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/RMN.CM.BB20220914.pdf)\n\n### GEA\n\n- [...]()\n- [...]()\n- [...]()\n\n### RKA\n\n- [...]()\n- [...]()\n- [...]()\n\n","n":0.1}}},{"i":74,"$":{"0":{"v":"TD","n":1}}},{"i":75,"$":{"0":{"v":"MethodesProbabilistes","n":1}}},{"i":76,"$":{"0":{"v":"ROS","n":1}}},{"i":77,"$":{"0":{"v":"TP3","n":1},"1":{"v":"\n> Il n'y a pas de type pointeurs sur ROS??? !\n\n---\n\n\n# Message\n\n1. `roscd beginner_tutorials`\n2. `mkdir msg`\n3. `echo \"int64 num\" > msg/Num.msg`\n...\n\n# Script\n\n## listener.py\n\n> anonym pour assurer que 2 nodes n'est pas le meme nom\n\n1. Lancer `roscore` (en ayant verifier `env | grep ROS`)\n2. Ouvrir un nouveau terminal et lancer \n    - `rosrun begin_tutorials talker.py`\n    - `rosrun begin_tutorials listener.py`\n3\n\n\ngris pas de donner\nnoir obstacle\n","n":0.127}}},{"i":78,"$":{"0":{"v":"TP2","n":1},"1":{"v":"\n---\n\n\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par Olivier\n\n---\n\n# Comments\n\n- postit (topics) pour faire\n- bus logiciel\n    - entrer avec un annuaire d'objet (roscore)\n    - les nodes communiquent via cette annuaire\n- rappel ROS 1 n'est pas sécurisé\n- toute les unités sont\n\n# Command Lines\n\n1. `env | grep ROS`\n    verifier le `_MASTER_URI`\n2. `roscore` (dans un autre terminal a ne pas fermer)\n3. `rosrun turtlesim turtlesim_node __name:=my_turtle`\n4. `rosrun rqt_graph rqt_graph`\n5. `rosnode info /my_turtle`\n6. `rostopic echo /turtle1/pose`\n7. `rostopic pub /turtle1/cmd_vel geometry msgs/Twist \"linear: x:...y:...z:... angular: x:...y:...z:...\" -r 1`\n    Makes the turtle turn in circle over the z axis with 1 rad/s with a rate of 1 Hz\n8. se connecter sur le reseau du robot `TIAGO_155` ou `PalRobotics` (mode passe admin `palroot` mode passe reseau `P@L-R0b0t1cs`)\n9. `env | grep ROS`\n10. `rosnode list`\n11. `export ROS_MASTER_URI=http://10.68.0.1:1131`\n12. `env | grep ROS`\n13. `rostopic list | grep cmd_devel` chercher mobile base controller sans out\n14. `export ROS_IP=10.68.0.131`\n\n# Workspace\n\n1. `mkdir workspaceroot`\n2. `cd workspaceroot`\n3. `mkdir src`\n4. `catkin_init_workspace`\n5. `catkin_create_pkg begin_tutorials std_msg rospy roscp`\n6. `cd ./begin_tutorials`\n7. `mkdir launch`\n8. `cd ./launch`\n9. `nano mimic.launch` and copy paste\n    ```xml\n    <launch>\n        <group ns=\"turtlesim1\">\n         <node pkg=\"turtlesim\" name=\"sim\" type=\"turtlesim_node\"/>\n        </group>\n        \n        <group ns=\"turtlesim2\">\n         <node pkg=\"turtlesim\" name=\"sim\" type=\"turtlesim_node\"/>\n        </group>\n        \n        <node pkg=\"turtlesim\" name=\"mimic\" type=\"mimic\">\n         <remap from=\"input\" to=\"turtlesim1/turtle1\"/>\n         <remap from=\"output\" to=\"turtlesim2/turtle1\"/>\n        </node>\n    </launch>\n    ```\n10. `cd ../..` pour se remettre sur le root du workspace\n11. `catkin_make`\n12. `source ./devel/setup.bash` verifier avant et apres les modifs appliquées avec `env | grep ROS`\n13. `roslaunch begin_tutorial mimic.launch`\n14. Check graph with `rosrun rqt_graph rqt_graph` \n\nSi le `bashrc` est 'corrompu' appliquer la séquence suivante :\n1. Comment source de trop dans `~/.bashrc`\n2. Se mettre sur root workspace et supprimer le build et le devel avec ``\n\n# Message\n\n1. `roscd beginner_tutorials`\n2. `mkdir msg`\n3. `echo \"int64 num\" > msg/Num.msg`\n...\n\n[[Suite dans ROS TP3|RMN.ROS.TP3]]","n":0.059}}},{"i":79,"$":{"0":{"v":"ROS - TP1","n":0.577},"1":{"v":"\n\n\n\n---\n\n...\n\n\n\n\n\nCreation d'un packet\n\n`~/tl_catkin_ws/src$ catkin_create_pkg beginner_tutorials rospy roscpp std_msgs`\n\nVerification\n\n`~/tl_catkin_ws/src/beginner_tutorials$ cat package.xml`\n\nCompilation\n\n`catkin_make`\npuis\n`catkin_make install`\n\n> Exécuter make dans le root !\n\nroscore\n\n> avant de lancer `roscore` verifier qu'on est bien en local et non sur le robot avec `env | grep ROS`\n\nrosrun\n\n`rosrun turtlesim turtlesim node`\n\n> relance un noeud avec meme noeud => ferme l'ancien ouvre un nouveau\n\n`rosrun turtlesim turtlesim_node __name:=my_turtle`\n\nteleoperer\n\n- creer un noeud\n`rosrun turtlesim turtlesim_node`\n- lancer un topic pour commander la turtle avec le clavier\n`rosrun turtlesim turtle_teleop_key`\n- si on cree un nouveau noeud il suivera exactement la meme commande que la premiere turtle car les deux noeuds ecoutent le meme topic\n\nnode graph\n\n`rosrun rqt_graph rqt_graph`\npour verifier comment les noeuds sont connectés\n\n`rosrun rqt_plot rqt_plot`\n\n```xml\n...\n```\n\ntype pour le type d'executable","n":0.095}}},{"i":80,"$":{"0":{"v":"CM","n":1}}},{"i":81,"$":{"0":{"v":"Robot Humanoïde","n":0.707},"1":{"v":"\n> Notes du 2022/09/19 - Start\n\n\n![](/assets/images/RMN.CM.Humanoide-01.png)\n\n![](/assets/images/RMN.CM.Humanoide-02.png)\n\n![](/assets/images/RMN.CM.Humanoide-03.png)\n\n## Problématique\n\n- Beaucoup de degré liberté => bcp de calcul pour générer un mouvement\n\n![](/assets/images/RMN.CM.Humanoide-04.png)\n\n### Problématique de la marche\n\n- perception impact le type de marche adapté au terrain\n\n![](/assets/images/RMN.CM.Humanoide-05.png)\n\n### \n\n![](/assets/images/RMN.CM.Humanoide-06.png)\n\n### Configuration Robot\n\n- N+6 parametres pour la configuration du robot\n- sous-actionnment des ensembles du corps\n\n![](/assets/images/RMN.CM.Humanoide-07.png)\n\n### Modélisation\n\n> Optimisation non lineaire car les calculs du MGI sont numeriques et non pas algebraique\n\n![](/assets/images/RMN.CM.Humanoide-08.png)\n\n### Notion de contact\n\n> Cone de friction = angle limite que la force peut avoir sans creer un glissement\n\n![](/assets/images/RMN.CM.Humanoide-09.png)\n\n### Equations de la dynamique\n\n![](/assets/images/RMN.CM.Humanoide-10.png)\n\n> On prefere ecrie l'equation en separant celles liés aux actionneurs des 6 parametres bonus\n\n## Controle de la locomotion\n\n> Whole-Body -> on arrive en labo a du 60Hz et bientot a du 100Hz mais tres recent\n\n![](/assets/images/RMN.CM.Humanoide-11.png)\n\n### Approche ZMP (Kajita)\n\n> ZMP = Zero Moment Point\n\n> CdP = Centre de Pression\n\n\n![](/assets/images/RMN.CM.Humanoide-12.png)\n\n#### ZMP & Polygone de sustenttion\n\n> ZMP = Composantes horizentales du moment de reaction du sol (couples en $x$ et $y$) sont nulles\n\n![](/assets/images/RMN.CM.Humanoide-13.png)\n\n#### Equations de la dynamique\n\n![](/assets/images/RMN.CM.Humanoide-14.png)\n\n#### Modèle pendule inversé\n\n> Plus simple de placer l'origine du repere de reference sur la jambe posée au sol car il s'agit du seul point qui reste immobile durant le déplacement (il suffit de mettre à jour la position de l'origine à chaque changement de pieds)\n\n![](/assets/images/RMN.CM.Humanoide-15.png)\n\n#### Generation de marche basee sur ZMP\n\n![](/assets/images/RMN.CM.Humanoide-16.png)\n![](/assets/images/RMN.CM.Humanoide-17.png)\n\n#### Conclusion ZMP\n\n![](/assets/images/RMN.CM.Humanoide-18.png)\n\n> Commandes en position sont en train de devenir des commandes en couples (plus adapté aux situations complexes)\n\n## Plannificaiton de trajectoire\n\n![](/assets/images/RMN.CM.Humanoide-19.png)\n\n### Boite englobante\n\n![](/assets/images/RMN.CM.Humanoide-20.png)\n\n### Approche itérative\n\n![](/assets/images/RMN.CM.Humanoide-21.png)\n\n### Approche Footstep Planning\n\n![](/assets/images/RMN.CM.Humanoide-22.png)\n\n#### 2D Path Planning avec humanoïde\n\n![](/assets/images/RMN.CM.Humanoide-23.png)\n\n#### Footstep Planning\n\n> Difficulté: trouver le bon nombre de fils et la bonne heuristique\n\n![](/assets/images/RMN.CM.Humanoide-24.png)\n\n#### Métrique: Algo ARA\n\n> ARA = Anytime Repairing $A^*$\n\n![](/assets/images/RMN.CM.Humanoide-25.png)\n\n### RRT\n\n> Configuration libre de collission ET en plus stable\n\n![](/assets/images/RMN.CM.Humanoide-26.png)\n![](/assets/images/RMN.CM.Humanoide-27.png)\n![](/assets/images/RMN.CM.Humanoide-28.png)\n![](/assets/images/RMN.CM.Humanoide-29.png)\n\n> RRT très couteux en calcul donc nécessite du pré-calcul\n\n#### RRT sous contraintes\n\n> Encore pas résolut -> bcp de thèse encore à faire\n\n![](/assets/images/RMN.CM.Humanoide-30.png)\n![](/assets/images/RMN.CM.Humanoide-31.png)\n\n### Conclusion\n\n![](/assets/images/RMN.CM.Humanoide-32.png)\n\n\n\n> Notes du 2022/09/19 - End\n\n---","n":0.058}}},{"i":82,"$":{"0":{"v":"Chap 5 - SLAM - Simultaneous Localization and Mapping","n":0.333},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix\n\nSupport de cours:\n- [RMN.CM.SLAM.Poly.pdf](https://homepages.laas.fr/danes/UPS/M2AURO/slamauro.pdf)\n\n> Notation:\n- \\# = nombre\n- landmark = amer (syn. repère)\n\n---\n\n\n\n\n> Notes du 2022/09/19 - Start\n\n\n# I- Introduction\n\n![](/assets/images/RMN.CM.SLAM.Poly20220919-01.png)\n\nFaire naviguer un robot dans un environnment inconnu en se localisant dans une carte mise à jour régulièrement.\n\nUne autre approche serait de ne pas modéliser tous les environnments mais plustôt utiliser des primitives perceptuelles.\n\nOn sait pas si l'être humain utilise une localisation ou bien la méthode des primitives perceptuelles.\n\n\nProblème probaliste :\n- inférence pour caracterise la position du robot et la carte de l'environnment de facon iterative\n- filtre de kalman\n\nAutre méthode pour faire du SLAM c'est d'utiliser des graphes de factor (dans ce cas il n'y a plus besoin des notions de probabilité).\n\n# Notions fondamentales\n\n## Features of the problem\n\n![](/assets/images/RMN.CM.SLAM.Poly20220919-02.png)\n\n- Robot equipped with :\n    - control inputs\n    - odometry\n    - self motion\n- Aim :  incremental/recursive map building and localization\n\n## Pose Graph\n\n![](/assets/images/RMN.CM.SLAM.Poly20220919-03.png)\n\n- Pose = Position + Configuration du robot\n- Pose Graph = Collection de position et configuration\n- Graphe de ces poses pour faire des mesures relatives des poses afin d'incorporer des contraintes de fermeture de loop\n    - fermeture de boucle = être capable de se rappeler qu'une pose est déjà connu\n\n## Mapping\n\n![](/assets/images/RMN.CM.SLAM.Poly20220919-04.png)\n\nRMN.CM.SLAM.ListesCarte\n\n- Dense metric map = carte de primitive geometrique\n- Dyson a mit une camera 360 sur un aspirateur autonome pour reperer les coins des polygones dans l'environnment\n- Amers = primitive perceptuelle pour se localiser dans un environnment (des points de repère)\n\n## Localization\n\nPosition et du configuration du robot déduites des amers\n\n## SLAM\n\nSans savoir la pose ni la carte, resoudre la localisation et la cartographie de l'environnement en estimant des vecteurs etats avec des filtres de Bayes (EKF/UKF particle filter).\n\nCeci dans le but d'optimiser la trajectoire du robot\n\n# II- Survol des manipulations d'incertitudes dans un contexte probabiliste\n\n## Probabilité\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-p2.png)\n\n### Variables aléatoires\n\n- $x = X(\\omega)\\;$ : $\\;X$ se réalise en $x$\n    - Si une variable est en grand alors il s'agit d'une variable aléatoire\n    - Si la variable est petite alors il s'agit de la réalisation de la variable aléatoire assoicée\n- $P_X(x)$ fonction de répartition\n\n- $p_X(x)$ fonction de distribution (correspond à la dérivée de la fonction de répartition)\n\n![](/assets/images/RMN.CM.SLAM.BB20221017-01.jpg)\n> - en bleu fonction de répartition en rouge la distribution\n> - densité uniforme dans l'exemple car pour un interval de meme 'taille' on a la meme aire du rectangle comme proba\n\n- $P_X(x) = \\int_{I} p_X(\\xi)d\\xi \\quad \\longleftarrow$ attention intégrale multivariable\n\n### Gaussienne\n\n- Gaussienne d'une variable aléatoire scalaire : $X \\thicksim \\mathcal{N}(\\overline{x}, \\sigma^2)$\n- Gaussienne vectoriel : $X \\thicksim \\mathcal{N}(\\overline{x}, P)$\n\n![](/assets/images/RMN.CM.SLAM.BB20220919-1.png)\n\n### Interval/Ellipse de confiance\n\n- Intervalle de confiance : $I_{\\alpha} = \\left]\\overline{x} - \\alpha\\sigma ; \\overline{x} + \\alpha\\sigma \\right[$ tel que $\\mathbb{P}(X\\in I_{\\alpha}) = p_{\\alpha}$\n- Ellipse de confiance : $\\epsilon_{\\alpha}$\n- Thm de limite centrale : \"a random vector which is the sum of a large number of independant random excitations is Gaussian\"\n\n### Espérance & Covariance\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-p3-02.png)\n\n- covariance = distribution de x p.r.à sa moyenne\n\n![](/assets/images/RMN.CM.SLAM.BB20220919-2.png)\n![](/assets/images/RMN.CM.SLAM.BB20220919-3.png)\n\n\n### Joint vs Marginal Distribution\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-p3-03.png)\n![](/assets/images/RMN.CM.SLAM.BB20220919-4.png)\n![](/assets/images/RMN.CM.SLAM.BB20220919-5.png)\n![](/assets/images/RMN.CM.SLAM.BB20221017-03.jpg)\n\nExemple de variables dépendantes mais non corrélées:\n\n- [Simple examples of uncorrelated but not independent $X$\nand $Y$](https://stats.stackexchange.com/questions/85363/simple-examples-of-uncorrelated-but-not-independent-x-and-y)\n\n![](/assets/images/RMN.CM.SLAM.BB20221017-02.jpg)\n\nImportant:\n$$\nm_{X|Z} = m_X + P_{XZ}P_{ZZ}^{-1}\\big(z-m_z\\big)\\\\[0.2cm]\nP_{X|Z} = P_{XX} - P_{XZ}P_{ZZ}^{-1}P_{ZX}\n$$\n- si $P_{XZ}$ et $P_{ZX}$ sont nulles alors $X$ et $Z$ sont mutuellement indépendant et on obtient bien sur que $m_{X|Z}=m_X$ tout comme $P_{X|Z}=P_XX$\n- En outre, si $P_{ZZ} = \\infty$ alors Z peut etre sur tous l'espace avec la meme probabilité et comme on divise par $P_{ZZ}$ on en déduit que $Z$ n'apporte rien d'utile à la mesure (ce qui fait du sens)\n\n## Estimation de Bayes\n\n> ATTENTION : sur un evenement on ne peut pas connaitre la valeur de $X-\\hat X$ mais on connait tres bien sa distribution\n\n- Minimal Mean Sqaure Error (MMSE) = estimation de l'esperance de $X-\\hat X$ celle-ci représente la distance quadratic minimale la plus proche de la valeur réelle\n- Maximum a Posteriori (MAP)\n\n> En SLAM on utilise bcp le MAP\n\n!!!\n\n### Cas Statique\n\n- Loi a priori nécessite un modèle d'observation donné\n- Problématique de nb de mesures prà la dimension du $x$ pour pouvoir résoudre le système\n- On décrit statistiquement le vrai paramètre à estimer\n    - comme dans l'exemple dé à couleurs changeantes\n    - lorsqu'on estime que sous une couleur qui cache la numéro il y a tant de chance d'avoir un certain numéro et pas un autre alors ceci est la loi posterieure\n    - cad on estime $x$ (le numéro) à travers la mesure $z$ (la couleur)\n![](/assets/images/RMN.CM.SLAM.BB20221019-01.png)\n![](/assets/images/RMN.CM.SLAM.BB20221019-02.png)\n- en générale déterministe (sans hasard)\n- Une fois la loi posterieur trouvée, il faut savoir passer à un estimé (càd trouver une fonction paramétré en $z$ qui retourne $\\^x$)\n![](/assets/images/RMN.CM.SLAM.BB20221019-03.png)\n![](/assets/images/RMN.CM.SLAM.BB20221019-04.png)\n\n\n#### Exemple 10 mesures\n- 10 tirs lasers\n- fabriquant dit que chaque mesure donne une mesure vrai plus ou moins qlqs centimètres dans $x\\%$ des cas\n- attention ces 10 mesures doivent être conjointement indépendante\n    - si on croit qu'elles ne sont pas conjointement indépendante alors qu'elles le sont alors ce sera un modèle optimiste\n        - ce pb est a faire attention quand on partage des estimations entre robot qui prennent des mesures indépendamment mais fusion leurs estimation régulièrement\n    - on evalue la différence statisque des moyennes de $X$ et $\\^X$ mais aussi la densité de composant de $\\^X$ (soit si les points sont dispercé ou regroupé) ceci à travers le calcul de la covariance de l'estimateur\n\n#### Généralité\n\n![](/assets/images/RMN.CM.SLAM.BB20221019-05.png)\n![](/assets/images/RMN.CM.SLAM.BB20221019-06.png)\n![](/assets/images/RMN.CM.SLAM.BB20221019-07.png)\n\n> Pic de la loi a posteriori est à la fois $X_{MAP}$ et $X_{MBSE}$\n\n#### Cas $m_z \\geq m_x$\n\n![](/assets/images/RMN.CM.SLAM.BB20221019-08.png)\n\n> Rem: Faire le lien avec les **moindres carrés recursifs**\n\n![](/assets/images/RMN.CM.SLAM.BB20221019-09.png)\n![](/assets/images/RMN.CM.SLAM.BB20221019-10.png)\n\n> **Matrice d'information**: inverse des matrices de covariances\n> **MLE**: Maximum Likelyhood Estimate (pic de vraissemblance)\n$$\n\\^x_{MLE} = \\arg_{z} \\min_{x} P_{Z|X}(z|x)\n$$\n\n### Cas Dynamique\n\n![](/assets/images/RMN.CM.SLAM.BB20221019-11.png)\n![](/assets/images/RMN.CM.SLAM.BB20221019-12.png)\n\n> **Attention**:\nen orange ce n'est pas du \"conjointement indépendant\" mais du \"**conditionnellement indépendant**\" lié à du **Bruit Blanc** (cf. Conditionning ci-dessous)\n![[Projet.P1K.VideoLecture11#conditionning]]\n\n![](/assets/images/RMN.CM.SLAM.BB20221019-13.png)\n![](/assets/images/RMN.CM.SLAM.BB20221019-14.png)\n\n> Rem: on travaille ici que sur la marginale et non la jointe\n\n> Prediction = Time Update $\\longrightarrow$ 2 equations\n\n> Filtrage = Measurement Update $\\longrightarrow$ 3 equations\n\n> Sur matlab, bien ordonner les colonnes sur un instant \n\n\n## Exemple Dé à couleurs changeantes\n\n!!!\n\n\n\n> Notes du 2022/09/19 - End\n\n---\n\n> Notes du 2022/09/21 - Start\n\n\n\n\n\n\n## Linear Gaussian Case\n\n... if Z =....\n\n![](/assets/images/RMN.CM.SLAM.BB20220921-1.png)\n![](/assets/images/RMN.CM.SLAM.BB20220921-2.png)\n\n## Dynamic Case\n\n...\n\n# III- Landmarked-based SLAM\n\n## Variables\n\n...\n\n> ATTENTION:\n- $r_k$ ne vit pas dans un espace euclidien mais dans l'espace $\\mathbb{S}^3$ (cf [[la définition d'une variété dans le sens de la \"Category Theory\"|CategoryTheory.Def.Category]])\n- Exemple une carte de la terre (en 2D) ne sera exacte que localement puisque globalement il existe deux points (i.e. aux pôles) qui auront une latitude unique mais une infinité de longitude \n\n## Models\n\n...\n\n> **Rem:** \n- $f$ dépend de la géométrie du robot, des modèles geom./ciném. choisis, ...\n- On va supposer que les amers sont fixes sinon celles-ci ne le sont pas alors nous n'allons pas les traiter comme des amers mais autrement \n- bruit blanc = bruit n'influence les probilités des evenements ???\n\n## Workflow\n\n- Front-end = collection des amers/data\n- Back-end = calcul des estimations\n\n...\n\n# IV- Probabistic SLAM\n\n- En Full SLAM soit avec $p(r_{0:k}\\,,\\;m|z_{0:k}\\,;\\;u_{0:k-1})$, on s'interesser à toutes les positions du robot de 0 à k sur toutes les trajectoires possibles\n- Alors qu'en Online SLAM soit $p(r_{k}\\,,\\;m_k|z_{0:k}\\,;\\;u_{0:k-1})$\n\n## IV-1) EFK Solution\n\nNotation:\n- $x_{k+1|k}$ se lit la variable $x$ à l'instant $k+1$ sachant les mesures à l'instant $k$\n\n- Time update = Prediction $\\^x_{k+1|k}$ et $\\^P_{k+1|k}$\n\nFigure\n\n- Les ellipses représentées ici incorporent les mesures en plus des incertitudes liées à l'odométrie donc ces ellipses sont plus petit que celles vues lorsqu'on a parlé d'erreurs cumulées\n- Il suffit de visiter un seul amer pour collasper drastiquement tous les amers (en effet chaques amers sont relatifs l'un à l'autre)\n- Une fois que la precision des amers augmente d'office les ellipses représentant la position collapsent aussi\n\n### Illustration\n\n\n> **Def: ATAN**\n- si $x>0 \\quad atan2(y,x)=arctan(\\frac{y}{x})$\n- si $x<0 \\quad atan2(y,x)=arctan(\\frac{y}{x}) \\pm \\pi$\n![](/assets/images/RMN.CM.SLAM.BB20220921-3.png)\n\n#### Static control input and measurement output variables\n\n![](/assets/images/RMN.CM.SLAM.Poly20220919-001.png)\n\n![](/assets/images/RMN.CM.SLAM.BB20220921-4.png)\n\n\n\n- bleu = 2eme membre du bearing\n- rouge = 3eme membre du bearing\n\n![](/assets/images/RMN.CM.SLAM.BB20220921-5.png)\n![](/assets/images/RMN.CM.SLAM.BB20220921-6.png)\n![](/assets/images/RMN.CM.SLAM.BB20220921-7.png)\n\n\n\n\n\n> Notes du 2022/09/21 - End\n\n---\n\n> Notes du 2022/09/23 - Start\n\n\n\n\n\n#### Prior Dynamics\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-01.png)\n![](/assets/images/RMN.CM.SLAM.BB20220923-01.png)\n![](/assets/images/RMN.CM.SLAM.BB20220923-02.png)\n![](/assets/images/RMN.CM.SLAM.BB20220923-03.png)\n![](/assets/images/RMN.CM.SLAM.BB20220923-04.png)\n![](/assets/images/RMN.CM.SLAM.BB20220923-05.png)\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-02.png)\n> Corriger $\\mathcal{g}_{\\mathcal{R}}$ par $\\mathcal{f}_{\\mathcal{R}}$\n\n#### Observation Model\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-03.png)\n![](/assets/images/RMN.CM.SLAM.BB20220923-06.png)\n\nOn cherche la première composante de $z_{k,j}$ :\n![](/assets/images/RMN.CM.SLAM.BB20220923-07.png)\n\nPuis sa deuxième composante :\n![](/assets/images/RMN.CM.SLAM.BB20220923-08.png)\n\nMais on pouvait aussi voir le problème de la manière suivante en considérant le point $b$ comme suit :\n![](/assets/images/RMN.CM.SLAM.BB20220923-09.png)\n\nAinsi la deuxième composante peut aussi s'écrire $atan2(b,a)$\n\n#### SLAM initialization\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-04.png)\n\n#### SLAM Time Update\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-05.png)\n\n#### SLAM Measurement\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-06.png)\n\n#### Unseen Landmarks\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-07.png)\n\n#### Data association\n\nAttention à l'association des données :\n- Il peut arriver que le robot ne remarque pas que deux mesures d'amer représentent un même amer (et donc il peut y avoir des complications pour la fusion des mesures)\n- De même, il peut arriver que les mesures ne soient pas indicées correctement p.r. aux indices des amers\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-08.png)\n\n## IV-2) Particle Filter Solution\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-09.png)\n> 2 Algo: `FastSLAM 1.0` et `FastSLAM 2.0`\n\n### Réseau Bayésien\n\n![](/assets/images/RMN.CM.SLAM.BB20220923-10.png)\n\nOn peut implimenter de l'automatique en définissant des etats et en considérant que l'on fait de l'observation (de la reconstruction d'états)\n\nLocaliser le robot c'est faire un tirage des hypothèses des trajectoires du robot associé à un poids mis à jour régulièrement (on ne considère pas les mesures $m$)\n$$\np(x) = \\sum w_i \\delta(\\dots)\n$$\n\n# V- Optimization SLAM\n\n## Factor Graph Approach\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-10.png)\n![](/assets/images/RMN.CM.SLAM.Poly20220923-11.png)\n\nLes inconnus $X$ sont représentés par des cercles et les mesures par des rectangles\n![](/assets/images/RMN.CM.SLAM.Poly20220923-Graph01.png)\nL'orientation des flèches vers les mesures reflète que ces mesures sont uniquement dépendantes de leurs parents\n\nIci, chaque point correspond à un facteur du produit (d'où le nom \"Factor Graph\")\n![](/assets/images/RMN.CM.SLAM.Poly20220923-Graph02.png)\n\n## Statement\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-12.png)\n\n## Sparse Optimization\n\n![](/assets/images/RMN.CM.SLAM.Poly20220923-13.png)\n\n\n\n\n> Notes du 2022/09/23 - End\n\n---\n\n","n":0.026}}},{"i":83,"$":{"0":{"v":"Chap 6 - Introduction ROS","n":0.447},"1":{"v":"\n\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par [T. Lasguigne](tlasguigne@laas.fr)\n\n---\n\n> Notes du 2022/09/29 - Start\n\n\n\n\n\n> ROS 1 n'est pas du tout temps réel du coup ROS 2 essaie d'ajouter cette feature\n\n![](/assets/images/RMN.CM.ROS-Intro-01.png)\n\n# Table des matières\n\n![](/assets/images/RMN.CM.ROS-Intro-02.png)\n\n# Exemple\n\n## Asservissement Visuel\n\n![](/assets/images/RMN.CM.ROS-Intro-03.png)\n![](/assets/images/RMN.CM.ROS-Intro-04.png)\n![](/assets/images/RMN.CM.ROS-Intro-05.png)\n![](/assets/images/RMN.CM.ROS-Intro-06.png)\n\n# Panorama\n\n![](/assets/images/RMN.CM.ROS-Intro-07.png)\n\n## Motivations\n\n![](/assets/images/RMN.CM.ROS-Intro-08.png)\n![](/assets/images/RMN.CM.ROS-Intro-09.png)\n![](/assets/images/RMN.CM.ROS-Intro-10.png)\n\nOpenCV = traitement image \n\nPCL = traitement de nuages de point\n\ncertains robots ont plusieurs PC (un pour chaque tache)\n\n![](/assets/images/RMN.CM.ROS-Intro-11.png)\n\n### Plomberie\n\n![](/assets/images/RMN.CM.ROS-Intro-12.png)\n\n### Outils\n\n![](/assets/images/RMN.CM.ROS-Intro-13.png)\n![](/assets/images/RMN.CM.ROS-Intro-14.png)\n![](/assets/images/RMN.CM.ROS-Intro-15.png)\n![](/assets/images/RMN.CM.ROS-Intro-16.png)\n![](/assets/images/RMN.CM.ROS-Intro-17.png)\n\n### Ecosystème\n\n![](/assets/images/RMN.CM.ROS-Intro-18.png)\n![](/assets/images/RMN.CM.ROS-Intro-19.png)\n![](/assets/images/RMN.CM.ROS-Intro-20.png)\n\n### History\n\n![](/assets/images/RMN.CM.ROS-Intro-21.png)\n\n### Releases\n\n![](/assets/images/RMN.CM.ROS-Intro-22.png)\n<!--\n![](/assets/images/RMN.CM.ROS-Intro-23.png)\n![](/assets/images/RMN.CM.ROS-Intro-24.png)\n![](/assets/images/RMN.CM.ROS-Intro-25.png)\n![](/assets/images/RMN.CM.ROS-Intro-26.png)\n-->\n\n### Installation\n\n![](/assets/images/RMN.CM.ROS-Intro-27.png)\n\n### Configuration\n\n![](/assets/images/RMN.CM.ROS-Intro-28.png)\n![](/assets/images/RMN.CM.ROS-Intro-29.png)\n![](/assets/images/RMN.CM.ROS-Intro-30.png)\n\n### ROS Filesystem\n\n![](/assets/images/RMN.CM.ROS-Intro-31.png)\n\n### Creation d'un paquet ROS\n\n#### Définition\n\n![](/assets/images/RMN.CM.ROS-Intro-32.png)\n\n> ATTENTION: un packet = un repertoire\n\n#### Outils\n\n![](/assets/images/RMN.CM.ROS-Intro-33.png)\n\n# Organisation des programmes sous ROS\n\n![](/assets/images/RMN.CM.ROS-Intro-34.png)\n\n## Paquets\n\n![](/assets/images/RMN.CM.ROS-Intro-35.png)\n![](/assets/images/RMN.CM.ROS-Intro-36.png)\n![](/assets/images/RMN.CM.ROS-Intro-37.png)\n![](/assets/images/RMN.CM.ROS-Intro-38.png)\n![](/assets/images/RMN.CM.ROS-Intro-39.png)\n![](/assets/images/RMN.CM.ROS-Intro-40.png)\n![](/assets/images/RMN.CM.ROS-Intro-41.png)\n![](/assets/images/RMN.CM.ROS-Intro-42.png)\n![](/assets/images/RMN.CM.ROS-Intro-43.png)\n\n## Compilation\n\n![](/assets/images/RMN.CM.ROS-Intro-44.png)\n\n## Graphe d'application\n\n![](/assets/images/RMN.CM.ROS-Intro-45.png)\n\n> Messages est typé pas le topics\n\n### Node\n\n![](/assets/images/RMN.CM.ROS-Intro-46.png)\n\n> Service = faire des requetes directes sans passer par un topics (une requete implique une reponse)\n\n# Communications ROS\n\n![](/assets/images/RMN.CM.ROS-Intro-47.png)\n\n## Name Services\n\n![](/assets/images/RMN.CM.ROS-Intro-48.png)\n![](/assets/images/RMN.CM.ROS-Intro-49.png)\n\n## rosrun\n\n![](/assets/images/RMN.CM.ROS-Intro-50.png)\n\n## Topics\n\n![](/assets/images/RMN.CM.ROS-Intro-51.png)\n\n## rostopic\n![](/assets/images/RMN.CM.ROS-Intro-52.png)\n\n```\nrostopic bw # display bandwith used by topic\nrostopic echo # print messages to screen\nrostopic hz # display publishing rate of topic\nrostopic list # print information about active topics\nrostopic pub # publish data to topic\nrostopic type # print topic type\n```\n\n## rqt_console\n\n![](/assets/images/RMN.CM.ROS-Intro-53.png)\n\n## roslaunch\n\n![](/assets/images/RMN.CM.ROS-Intro-54.png)\n\n## rosbag\n\n![](/assets/images/RMN.CM.ROS-Intro-55.png)\n\n`rosbag record -a` on sauvergarde tous\n\n`-O subset` pour donner un prefixe au nom de fichier type `2022-09-29_11-42-50.bag`\n\nPour lire un `.bag` : `rosbag play`\n\n## rosservice\n\n![](/assets/images/RMN.CM.ROS-Intro-56.png)\n\n```\nrosservice args # print service arguments\nrosservice call # call the service with the provided args\nrosservice find # find services by service type\nrosservice info # print information about service\nrosservice list # list of services\n```\n\nQuand on fait un `call` penser à utiliser la touche `TAB` pour précompléter le message et n'avoir qu'à changer les valeurs\n\n\n## rosparam\n\n![](/assets/images/RMN.CM.ROS-Intro-57.png)\n\n```\nrosparam set # set parameter\nrosparam get # get parameter\nrosparam load # load parameters from file\nrosparam dump # dump parameters to file\nrosparam delete # delete parameter\nrosparam list # list parameter names\n```\n\nYAML utilisé pour les paramètres\n\n# Programmer avec ROS\n\n![](/assets/images/RMN.CM.ROS-Intro-58.png)\n\n## Tutorials\n\n![](/assets/images/RMN.CM.ROS-Intro-59.png)\n\n# ROS Control\n\n![](/assets/images/RMN.CM.ROS-Intro-60.png)\n![](/assets/images/RMN.CM.ROS-Intro-61.png)\n![](/assets/images/RMN.CM.ROS-Intro-62.png)\n\n## Schema interaction\n\n![](/assets/images/RMN.CM.ROS-Intro-63.png)\n\n## Exemple\n\n![](/assets/images/RMN.CM.ROS-Intro-64.png)\n![](/assets/images/RMN.CM.ROS-Intro-65.png)","n":0.059}}},{"i":84,"$":{"0":{"v":"Mouvement","n":1},"1":{"v":"\n> Notes du 2022/09/16 - Start\n\n## Definition\n\n![](/assets/images/RMN.CM.Mouvement-01.png)\n\n> Pb non traité ici le dilem de bouger pour percevoir ou faire bouger l'objet pour le percevoir\n\n## Problématique\n\n![](/assets/images/RMN.CM.Mouvement-02.png)\n\n![](/assets/images/RMN.CM.Mouvement-03.png)\n\n![](/assets/images/RMN.CM.Mouvement-04.png)\n\n> Couvrir un terrain est un probleme 'resolu' de nos jours\n\n## Plannification\n\n![](/assets/images/RMN.CM.Mouvement-05.png)\n\n> Traduit le probleme sous forme geometrique\n\n![](/assets/images/RMN.CM.Mouvement-06.png)\n\n![](/assets/images/RMN.CM.Mouvement-07.png)\n\n![](/assets/images/RMN.CM.Mouvement-08.png)\n\n![](/assets/images/RMN.CM.Mouvement-09.png)\n\n## Modélisation\n\n### Carte Métrique\n\n![](/assets/images/RMN.CM.Mouvement-10.png)\n\n> Carte Métrique est une représentation des obstacles tres utile pour la plannification mais difficile à construire\n\n### Carte d'amers\n\n![](/assets/images/RMN.CM.Mouvement-11.png)\n\n> Tres facile pour se localiser mais plannification difficile car informations eparses\n\n### Carte grille d'occupation\n\n![](/assets/images/RMN.CM.Mouvement-12.png)\n\n### Carte d'élévation MNT\n\n![](/assets/images/RMN.CM.Mouvement-13.png)\n\n> Tres utile pour les terrains accidentés\n\n> Probleme de passage à l'echelle (plus la surface est grande plus il y aura de points pour une meme resolution)\n\n### Carte Topologique\n\n\n![](/assets/images/RMN.CM.Mouvement-14.png)\n\n> Creer des graphes topologiques pour trouver un chemin\n\n> Pb: ne resoud pas le probleme de plannification\n\n### Conclusion sur les cartes\n\n![](/assets/images/RMN.CM.Mouvement-15.png)\n\n> Attention lors de la correspondance entre carte (chaque carte peut avoir ses erreurs respectives)\n\n## Espace de configuration\n\n![](/assets/images/RMN.CM.Mouvement-16.png)\n\n![](/assets/images/RMN.CM.Mouvement-17.png)\n\n> Au lieu de faire bouger un objet 3D dans un espace 3D, on va faire bouger un point dans un espace 3D\n\nLa difficulté viendra lorsqu'on se deplace proche d'un obstacle (comme un poto) il faudra garder en tete que notre point represente un objet volumineux\n\nPour eviter cela on calculer la transformée de l'obstacle pour le faire apparaitre dans l'espace de configuration\n\n### De l'espace de travail vers l'espace de configuration\n\n![](/assets/images/RMN.CM.Mouvement-18.png)\n\n![](/assets/images/RMN.CM.Mouvement-19.png)\n\n![](/assets/images/RMN.CM.Mouvement-20.png)\n\n![](/assets/images/RMN.CM.Mouvement-21.png)\n\n![](/assets/images/RMN.CM.Mouvement-22.png)\n\n### Exemple\n\n![](/assets/images/RMN.CM.Mouvement-23.png)\n\n### Différents sous-espaces de EC\n\n![](/assets/images/RMN.CM.Mouvement-24.png)\n\n#### EC de dim 3\n\n![](/assets/images/RMN.CM.Mouvement-25.png)\n\n> La complexite de plannification explose en passant d'un espace 2D à 3D\n\n![](/assets/images/RMN.CM.Mouvement-26.png)\n\n![](/assets/images/RMN.CM.Mouvement-27.png)\n\n![](/assets/images/RMN.CM.Mouvement-28.png)\n\n> La plannification va se traduire sur la surface du TOR\n\n\n### Existence d'un chemin solution\n\n![](/assets/images/RMN.CM.Mouvement-29.png)\n\n> La métrique qu'on va utiliser dans l'espace de travail devra être bien choisie pour garantir que les algos converge de facon optimale lors de la resolution dans l'espace de configuration\n\n> FREE-FLYER = un robot sans contrainte cinématique\n\n![](/assets/images/RMN.CM.Mouvement-30.png)\n\n## Plannification déterministe\n\n![](/assets/images/RMN.CM.Mouvement-31.png)\n\n> Attention ces méthodes sont obselètes de nos jours\n\n### Roadmap\n\n![](/assets/images/RMN.CM.Mouvement-32.png)\n![](/assets/images/RMN.CM.Mouvement-33.png)\n![](/assets/images/RMN.CM.Mouvement-34.png)\n\n### Diag de Voronoï\n![](/assets/images/RMN.CM.Mouvement-35.png)\n\n## Décomposition polygonale exacte\n\n![](/assets/images/RMN.CM.Mouvement-36.png)\n![](/assets/images/RMN.CM.Mouvement-37.png)\n\n## Décomposition approchée\n\n![](/assets/images/RMN.CM.Mouvement-38.png)\n\n> Advantage ceci nous donne aussi une notion de marge de manoeuvre car on sait que dans une cellule vide on peut faire des erreurs de commande de tant\n\n![](/assets/images/RMN.CM.Mouvement-39.png)\n\n> Methode superbe mais complexité exponentielle\n\nUtile pour la vehicule autonome mais pas pour la robotique humanoide\n\n## Champs de potentiel\n\n![](/assets/images/RMN.CM.Mouvement-40.png)\n\n> Le potentiel repulsifs et attractif peuvent se compenser et donc immobiliser le robot sans atteindre son but\n\n![](/assets/images/RMN.CM.BB20220916-01.png)\n\n![](/assets/images/RMN.CM.Mouvement-41.png)\n![](/assets/images/RMN.CM.Mouvement-42.png)\n\nLes mathématiciens ont essayé de trouver des fonctions de potentiel qui possèdent un minimaux global en continu mais comme ils n'ont pas reussi ils sont restés sur le cas discret.\n\n## Plannification pour des robots non-holonomes\n\n> CNH = Contrainte Non Holonome\n\n![](/assets/images/RMN.CM.Mouvement-43.png)\n\n### Small Time Controllable STC\n\n![](/assets/images/RMN.CM.Mouvement-44.png)\n\n> N.B.:\nD'après Jean Michel Coron, la notion de Small Time Controllable se définit ainsi en autonomatique \n![](/assets/images/SmallTimeControllable.png)\n\n### Existence d'un chemin pour robot NH-STC\n\n#### Approche sur chemin holonome\n\n> On calcul un chemin holonome puis on l'apprixme en chemin non holonome qui respecte la contrainte non holonome\n\n![](/assets/images/RMN.CM.Mouvement-45.png)\n\n> Si la méthode de calcul de la trajectoire dans ECL est complète alors la méthode de calcul de la trajectoire pour le robot NH est complète\n\n![](/assets/images/RMN.CM.Mouvement-46.png)\n\n> La trajectoire noire n'est pas le chemin réalisé par le robot mais la preuve qu'un chemin existe. La trajectoire rouge est la trajectoire du robot car elle respecte la contrainte non holonome\n\n> Il a été montré qu'il n'existe que 48 types de courbes de _Reeds & Cheeps_ (RS)\n\n![](/assets/images/RMN.CM.Mouvement-47.png)\n![](/assets/images/RMN.CM.Mouvement-48.png)\n\n> Si marche arriere non autorisée il existe d'autres types courbes dubins\n\nTODO\n\n> Premier algo de plannification resolu dans les annees 90 (il ne reste plus qu'à trouver les bons capteurs)\n\n#### Approche par grille discrète\n\n> Utile pour les robots qui sont limitées physiquement dans leurs mouvements (e.g. le robot CNES ne possède que 9 commandes avant et 9 commandes arrières)\n\n![](/assets/images/RMN.CM.Mouvement-49.png)\n\n> Attention avec l'heuristique : celle-ci dépend de la métrique choisie\n\n![](/assets/images/RMN.CM.Mouvement-50.png)\n\n## Méthodes Probabilistes\n\n![](/assets/images/RMN.CM.Mouvement-51.png)\n\n##### Exercice\n\n![](/assets/images/RMN.CM.Mouvement-52.png)\n\n> Ces méthodes sont tres utilisés en bioinformatique pour par exemple determiner des classes de configuration spatiale pour extraire ou faire evoluer des molécules d'ADN/atomes dans un environnment biologique. Ceci pour restreindre les nombres de test lors de la conception d'un prototype de medicament.\n\n> Notes du 20220916 - End\n\n---\n\n[[Next Page|B1.RMN.CM.MethodeProba]]\n\n---","n":0.039}}},{"i":85,"$":{"0":{"v":"MethodeProba","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix\n\nSupport de cours:\n- ...\n\n---\n\n> Notes du 2022/09/16 - Start\n\n![](/assets/images/RMN.CM.MethodeProba-01.png)\n\n### Motivation\n\n![](/assets/images/RMN.CM.MethodeProba-02.png)\n\n![](/assets/images/RMN.CM.MethodeProba-03.png)\n\n### Méthode\n\n![](/assets/images/RMN.CM.MethodeProba-04.png)\n\n### Idée\n\n![](/assets/images/RMN.CM.MethodeProba-05.png)\n\n### Problématique\n\n![](/assets/images/RMN.CM.MethodeProba-06.png)\n\n![](/assets/images/RMN.CM.MethodeProba-07.png)\n\n![](/assets/images/RMN.CM.MethodeProba-08.png)\n\n![](/assets/images/RMN.CM.MethodeProba-09.png)\n\n![](/assets/images/RMN.CM.MethodeProba-10.png)\n\n![](/assets/images/RMN.CM.MethodeProba-11.png)\n\n![](/assets/images/RMN.CM.MethodeProba-12.png)\n\n![](/assets/images/RMN.CM.MethodeProba-13.png)\n\n### Echantillonage\n\n![](/assets/images/RMN.CM.MethodeProba-14.png)\n\n> Dilem: avoir le moins de composantes connexes il nous faut prendre plus de points pour esperer trouver un chemin qui connecte deux composantes connexes\n\n![](/assets/images/RMN.CM.MethodeProba-15.png)\n\n![](/assets/images/RMN.CM.MethodeProba-16.png)\n\n![](/assets/images/RMN.CM.MethodeProba-17.png)\n\n\n\n\n> Notes du 2022/09/16 - End\n\n---\n\n> Notes du 2022/09/19 - Start\n\n\n\n\n### Choix des voisins\n\n> Kd-tree souvent utilisé\n\n![](/assets/images/RMN.CM.MethodeProba-18.png)\n\n### Test de collision\n\n![](/assets/images/RMN.CM.MethodeProba-19.png)\n\n#### Collision vs Distance\n\n![](/assets/images/RMN.CM.MethodeProba-20.png)\n![](/assets/images/RMN.CM.MethodeProba-21.png)\n\n#### Algorithme général\n\n![](/assets/images/RMN.CM.MethodeProba-22.png)\n\n#### Détection\n\n- [Flexible Collision Library](https://github.com/flexible-collision-library/fcl) : lib la plus utilisé\n\n> ATTENTION: Penser aussi qu'un robot humanoïde doit en plus éviter les collisions membres à membres (il doit être conscient des positions de ces membres pour ne pas les cogner)\n\n![](/assets/images/RMN.CM.MethodeProba-23.png)\n\n#### Articulated Robot\n\n![](/assets/images/RMN.CM.MethodeProba-24.png)\n\n\n### Principales approches\n\n> Attention: les algo de nos jours ne sont pas capable de faire des pré-traitements efficaces dans des environmment dynamiques (si on rajoute un objet dans la salle il faut alors relancer les pré-traitments...)\n\n![](/assets/images/RMN.CM.MethodeProba-25.png)\n\n### Test de collision sur chemin locaux L\n\n![](/assets/images/RMN.CM.MethodeProba-26.png)\n\n### PRM : Méthodes locales\n\n![](/assets/images/RMN.CM.MethodeProba-27.png)\n![](/assets/images/RMN.CM.MethodeProba-28.png)\n![](/assets/images/RMN.CM.MethodeProba-29.png)\n![](/assets/images/RMN.CM.MethodeProba-30.png)\n![](/assets/images/RMN.CM.MethodeProba-31.png)\n![](/assets/images/RMN.CM.MethodeProba-32.png)\n\n### Stratégie d'échantillonage\n\n![](/assets/images/RMN.CM.MethodeProba-33.png)\n\n#### Echantillonnage multi-étape\n\n> Echantillonnage uniforme inefficace\n\n![](/assets/images/RMN.CM.MethodeProba-34.png)\n\n#### Obstacle-sensitive sampling\n\n![](/assets/images/RMN.CM.MethodeProba-35.png)\n\n#### Dilatation de l'espace libre F\n\n![](/assets/images/RMN.CM.MethodeProba-36.png)\n\n#### Echantillonnage selon un axe médian\n\n![](/assets/images/RMN.CM.MethodeProba-37.png)\n\n#### Echantillonnage par visibilité\n\n> ATTENTION: on ne garde que les noeuds qui ne sont pas joignable à d'autres comoposantes connexes  au lieu de générer les noeuds qui peuvent se connecter sans collision. De cette facon on peut conserver moins de noeuds. Une que ces noeuds sont trouvés on peut le connecter aux autres composantes à l'aide de nouveau noeuds connecteurs.\n\n![](/assets/images/RMN.CM.MethodeProba-38.png)\n\n#### Bilan\n\n![](/assets/images/RMN.CM.MethodeProba-39.png)\n\n### PRM Visibilité\n\n![](/assets/images/RMN.CM.MethodeProba-40.png)\n![](/assets/images/RMN.CM.MethodeProba-41.png)\n![](/assets/images/RMN.CM.MethodeProba-42.png)\n\n### Diffusion\n\n![](/assets/images/RMN.CM.MethodeProba-43.png)\n\n#### Méthode RRT\n![](/assets/images/RMN.CM.MethodeProba-44.png)\n![](/assets/images/RMN.CM.MethodeProba-45.png)\n![](/assets/images/RMN.CM.MethodeProba-46.png)\n\n### Conclusion\n\n![](/assets/images/RMN.CM.MethodeProba-47.png)\n\n## Librairie: OMPL & HPP\n\n![](/assets/images/RMN.CM.MethodeProba-48.png)\n\n\n\n\n> Notes du 2022/09/19 - End\n\n---","n":0.062}}},{"i":86,"$":{"0":{"v":"Robotique Mobile et Navigation","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix\n\n---\n\n> Notes du 2022/09/12 - Start\n\n# Chap I - Introduction\n\n![](/assets/images/RMN.CM.Slide38.20220912-01.png)\n\n- video sur des compétitions pour concevoir des voitures autonomes pour l'armée (2005 premier succes)\n\n## Modalités du cours\n\n![](/assets/images/RMN.CM.Slide38.20220912-02.png)\n\n## Définitions\n\n![](/assets/images/RMN.CM.Slide38.20220912-03.png)\n\n**Def:**\n- **Robotique Mobile** = déplacement d'un **engin mobile** dans un environnement **connu/inconnu** et/ou **exact/imprecis** pour exécuter une tâche\n- Qui dit mouvement dit interaction => programmé des opérations\n- Boucle continu: Perception --> Décision --> Action --> Perception ...\n\n- comme chez les humains, on peut nécessiter d'avoir des comportements sur plusieurs niveaux selon si l'on veut une reaction rapide ou bien prendre le temps de faire un choix (e.g. main sur une plaque chaude => reaction 'instantanée')\n\n## Généralités\n\n### Déplacement\n\n![](/assets/images/RMN.CM.Slide38.20220912-04.png)\n\n- mouvement => connaître le placement !\n- Calcul de trajectoire nécessaire\n- aspects décisionnels: evenement asynchrone\n\n### Intérêts\n\n![](/assets/images/RMN.CM.Slide38.20220912-05.png)\n\n### Domaines applicatifs\n\n![](/assets/images/RMN.CM.Slide38.20220912-06.png)\n\n- voiture autonome: easymile\n- de nos jours de plus en plus les filoguidés intègre un certain degré d'autonomie\n\n### Constituants\n\n![](/assets/images/RMN.CM.Slide38.20220912-07.png)\n\nImportant: Communication !\n- Ce système doit garantir qu'en cas de rupture des communications il existe des décisions pré-programmés pour prévenir des accidents potentiels\n\nLocomotion:\n- interaction entre le robot et le sol (pts de contact, stabilité statique/dynamique)\n- vitesse => roue d'office (oui avec pattes peuvent etre rapide mais la consommation energetique est enorme)\n\n## Robots à roues\n\n### Types de roues\n\n![](/assets/images/RMN.CM.Slide38.20220912-08.png)\n\n- omniwheel (suédoise): sur ligne droite trop de deviation => nécessite une tres bonne connaissance de l'environnement\n\n### Arrangements\n\n![](/assets/images/RMN.CM.Slide38.20220912-09.png)\n\n![](/assets/images/RMN.CM.Slide38.20220912-10.png)\n\n# Chap II - Modèle cinématique de RM à roues\n\n![](/assets/images/RMN.CM.Slide38.20220912-11.png)\n\n- Modèle Cinématique = correspondance entre vitesse du robot et vitesse des roues\n- Modèle Dynamique = correspondance entre couple des moteurs au niveau des roues et l'accélération du robot\n\nHypothèse:\n- Robot monocorps\n- Contact ponctuel sur sol plat (pas besoin de simulation sur sol sableux, ...)\n- Roues indéformables et rayon constant\n- Roulement **sans** glissement\n\n## Differential-Drive (unicycle)\n\n![](/assets/images/RMN.CM.Slide38.20220912-12.png)\n\n- placement possible en 2D avec le triplet $(x,y,\\theta)$\n- ceci ne permet pas de connaitre la configuration exacte des roues (savoir combien de tour la roue a effectué) [ignoré ici]\n\n> forme fétiche en industrie le cercle car si rotation pas de collision \n\n## Roulement sans glissement\n\n$$\n\\dot x + r\\dot q = 0\n$$\n\n$$\nJ_1 T \\dot X = J_2 \\dot q = 0\n$$\n\n![](/assets/images/RMN.CM.Slide38.20220912-13.png)\n\n## Contrainte de roulement\n\n![](/assets/images/RMN.CM.Slide38.20220912-14.png)\n\n## Contrainte non holonome\n\n### Definition\n![](/assets/images/RMN.CM.Slide38.20220912-15.png)\n\n- contrainte non holonome = ne peut pas s'ecrire $f(x_1, \\dots, x_n,t) = 0$\n\n- bras à manche => 6 parametres\n- mais les pts de depart des manche sont fixe => 4 contraintes\n- donc système à deux parametres et 4 contraintes\n\n### Exemple\n\n![](/assets/images/RMN.CM.Slide38.20220912-16.png)\n\n> **Crochet de Lie** = ecart entre deux vecteurs (faire un movement puis faire le mouvement inverse correspondant ne ramene pas au meme vecteur, l'ecart correspond au crochet de lie)\n\n## Modèle cinématique pour RM de Type  Unicycle\n\n![](/assets/images/RMN.CM.Slide38.20220912-17.png)\n\n> À corriger !!!\n\n![](/assets/images/RMN.CM.Slide38.20220912-18\n\n\n$$\n\\dot x_c - r \\, cos(\\theta) \\, \\dot q_1 + l \\, cos(\\theta)\\dot\\theta = 0\\\\\n\\dot y_c - r \\, cos(\\theta) \\, \\dot q_2 + l \\, sin(\\theta)\\dot\\theta = 0\\\\\nl \\, sin(\\theta) \\, cos(\\theta) \\, \\dot q_1 - l \\, sin(\\theta) \\, cos(\\theta) \\, \\dot q_1 = 0\\\\\n\n$$\n\n$$\n\\dot x_c = cos(\\theta) \\, v_c\\\\\n\\dot y_c = sin(\\theta) \\, v_c\\\\\n\\dot \\theta = \\omega = \\dfrac{r}{\\; 2\\,l \\;} (\\dot q_1 - \\dot q_2)\n$$\n\navec $v_c = cos(\\theta) \\, \\dfrac{\\; r(\\dot q_1 + \\dot q_2) \\;}{2}$\n\n> À corriger !!!\n\n\n## Modèle cinématique pour RM de Type voiture\n\n### Problématique\n\n![](/assets/images/RMN.CM.Slide38.20220912-19.png)\n\nSi le point $C$ est positionné sur l'axe des roues alors on peut simplifier le problème avec une matrice inversible\n\n### Equations Trois Roues\n\n![](/assets/images/RMN.CM.Slide38.20220912-20.png)\n\nsemi remorque:\n- le chauffeur ne controle que le guidant $\\omega$ et l'acceleration $v_c$ (frein/gaz) mais il y aura des paramètres supplémentaires $(\\theta,\\phi,\\beta)$\n- et ainsi de suite\n\n## Exemple vélo\n\n![](/assets/images/RMN.CM.Exemple.Velo.png)\n\n- Si la traction se faisait sur la roue avant il faudrait simplement remplacer $v_C$ par $v_A$\n\n\n\n\n\n> Notes du 2022/09/12 - End\n\n---\n\n> Notes du 2022/09/14 - Start\n\n\n\n\n\n# Chap III -  Commande de RM à roue\n\n![](/assets/images/RMN.CM.Slide38.20220912-21.png)\n\n## Commandabilité\n\n![](/assets/images/RMN.CM.Slide38.20220912-22.png)\n\nObjectif:\n- si dans une configuration particulière, existe-t-il un configuration ???\n\nSTLC small-time locally controllable\n\nOn veut rester autour d'une configuration initiale pour toutes les configurations possibles (donc commandables)\n\nPour un avion s'est différent car il faut passer pas une trajectoire qui sort du voisinage initiale\n\n![](/assets/images/RMN.CM.Avion.png)\n\n\n### Exemple: A380\n\nAirbus a dû prouver que les remorques de transport étaient commandables\n\n![](/assets/images/RMN.CM.Slide38.20220912-23.png)\n\n## Localisation statique dans le plan\n\n![](/assets/images/RMN.CM.Slide38.20220912-24.png)\n\nCapteurs\n- Proprioceptifs vs Extéroceptifs\n- Passives vs ???\n\n### Mesure Mouvements dans un plan\n\n\n- codeur absolu: compte le nombre de tour\n- codeur \"doppler\": mesure la vitesse donc on doit intégrer\n- codeur d'acceleration: les vieux codeur avec des ressort etaient non-asservies\n\n![](/assets/images/RMN.CM.Slide38.20220912-25.png)\n\n### Mesure de Cap/Angle/Altitude\n\n- Inclinomètre\n- Compas ou Magnétomètre: mesure le nord magénetique donc enormement de perturbations\n- Gyroscope/Gyromètre\n    - optique\n    - à structure vibrante\n\n### Centrale Inertielle (IMU)\n\n> Grace à l'industrie automobile ces composants sont devenus bcp plus démocratisé\n\n![](/assets/images/RMN.CM.Slide38.20220912-27.png)\n\n### Mesure de distance\n\n- Avec des balises (artificielles ou passives)\n\n- Ubisense tag l'espace avec UWB\n\n\n![](/assets/images/RMN.CM.Slide38.20220912-28.png)\n\n- telemètre laser ou acoustique\n\n- problèmatique de spécularité: reflexion depend du $\\lambda$ et du type de materiaux de l'obstacle\n\n\n\n![](/assets/images/RMN.CM.Slide38.20220912-29.png)\n\n### GPS\n\n- GPS americain 2 frequence une pour civil une pour armee (bruité initialement mais depuis 6 ans a ete dispo pour les tech mais alors depndance => creation de notre propre gps ave Galileo)\n- Mode differentiel pour supprimer l'erreur\n\n![](/assets/images/RMN.CM.ModeDifferentiel.png)\n\n![](/assets/images/RMN.CM.Slide38.20220912-30.png)\n\n\n### Méthodes de localisation statique\n\n- localisation absolue (eq lineaire)\n\n- localisation relative (eq differentielle)\n\n![](/assets/images/RMN.CM.Slide38.20220912-31.png)\n\n#### Odométrie\n\n$$\n\\Delta \\theta = \\dfrac{\\; \\Delta G - \\Delta D \\;}{e}\\\\[0.5cm]\n\\Delta l =  \\Delta \\theta \\; \\rho = \\dfrac{\\; \\Delta D + \\Delta G \\;}{2}\n$$\n\n> Attention plusieurs peuvent se faire pour intégrer ???\n\n- Erreurs systèmatiques pour toutes les erreurs liées aux equipements\n- Erreurs non systèmatiques pour toutes les erreurs extérieures\n\n> Ces erreurs se cummule => recalage périodique\n\n![](/assets/images/RMN.CM.Slide38.20220912-32.png)\n\n#### Erreur cumulée\n\non peut montrer que l'erreur se traduit par une ellipse et non un cercle\n\n??? Question est-ce une ellipse pour des unicycle uniquement ? (un deux roues posède aussi une ellipse ?) => Pas de reponse\n\n![](/assets/images/RMN.CM.Slide38.20220912-33.png)\n\n#### Localisation absolue\n\n![](/assets/images/RMN.CM.Slide38.20220912-34.png)\n\n##### Sensibilité de localisation\n\n> Si erreur dans les mesures donnent une grande erreur dans le modèle alors on peut jeter le modèle à la poubelle\n\n- sensibilité dans le sens \"etre sensible à l'erreur\"\n\n- on utilise la jacobienne pour verifier la sensibilité\n\n- GDOP Geometric Dilution Of Precision = Erreur fixe / erreur mesure\n\n- **triangulation/gognométrie?** = mesure d'angles\n- **télémétrie** = mesure de distances\n\n![](/assets/images/RMN.CM.Slide38.20220912-35.png)\n\n\n##### Exemple Localisation absolue\n\n![](/assets/images/RMN.CM.Slide38.20220912-36.png)\n\n> Quasi-impossible de synchroniser suffisamment les horloges des balises pour ne pas avoir d'erreurs de mesures\n\n- Mode Hyperbolique = similaire à l'exemple de la ferme = on considère que l'erreur de msure de B1 et celle de B2 sont de meme ordre du coup on mesure non pas $d_1$ ni $d_2$ mais leur différence $D$\n\n![](/assets/images/RMN.CM.ModeHyperbolique.png)\n\n**Loi des sinus:**\n$$\nR = \\dfrac{\\; dist(B_1,B_2) \\;}{2 \\,\\sin \\alpha}\n$$\n\n![](/assets/images/RMN.CM.Slide38.20220912-37.png)\n\n\n**Methode de resolution:**\n1. Déterminer l'intéret des mesures\n2. En déduire les equations non lineaire\n3. Resoudre le système\n\n![](/assets/images/RMN.CM.PositionDeuxBalises.png)\n\n![](/assets/images/RMN.CM.PositionMurDistances.png)\n\n\n> Notes du 2022/09/14 - End\n\n---","n":0.031}}},{"i":87,"$":{"0":{"v":"P3D - Perception 3D","n":0.5},"1":{"v":"\n\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Lerasle\n\n---\n\n[[B1.P3D.CM]]\n\n[[TP1 - Étalonnage|B1.P3D.TP1]]","n":0.2}}},{"i":88,"$":{"0":{"v":"TP1 - Étalonnage","n":0.577},"1":{"v":"\n# 1 - Mise en place de l'environnement\n\n![](/assets/images/B1.P3D.TP1.Sujet.Part1.png)\n\n# 2 - Vision Monoculaire\n\n## 2-1. Calibration\n\n![](/assets/images/B1.P3D.TP1.Sujet.Part2.Q1.png)\n\nLa mire est composée d'une grille de taille 4x11 contenant des cercles noirs sur un fond blanc.\n\nCette mire est asymmétrique ce qui apporte l'advantage d'éviter l'indétermination liée à une rotation de 180 degrés.\n\nIl nous faut donc implémenter la fonction `findCirclesGrid`:\n\n\n1. Dans `Calibration.py`, utiliser la [docs d'opencv](https://docs.opencv.org/3.4/) pour implémenter les fonctions prédéfinies comme `findCirclesGrid`\n2. Dans `MonoMain.py`, instancier un objet de la class `MonoCalibration` en utilisant le constructeur\n3. Dans `MonoMain.py`, lancer la fonction `acquire`\n4. Prélever plusieurs perceptives de la mire en appuyant sur `espace`\n\n![](/assets/images/B1.P3D.TP1.Sujet.Part2.Q2.png)\n\nLa variable `objectPoints` correspond à la position réelle/monde des cercles en $x,y,z$ tandis que la variable `imgPoints` elle correspond aux coordonnées des cercles dans le plan image en $u,v$.\n\n1. Dans `Calibrate.py`, utiliser la [doc d'opencv](https://docs.opencv.org/3.4/) pour implémenter les fonctions prédéfinies `cv.calibrateCameraExtended`\n2. Dans `MonoMain.py`, lancer la fonction `calibrate`\n\n> Attention: attribut sans `self.`","n":0.083}}},{"i":89,"$":{"0":{"v":"CM","n":1},"1":{"v":"\n- [lien moodle](https://moodle.univ-tlse3.fr/course/view.php?id=9035)\n\nlerasle@laas.fr\n\n---\n\n> Notes du 2022/09/12 - Start\n\n\n\n![](/assets/images/B1.P3D.CM.Poly-01.png)\n\n# Introduction\n\n![](/assets/images/B1.P3D.CM.Poly-02.png)\n\n- pb de l'imagerie => distance ne sont pas conservé lors d'un changement de perspective\n- de plus en plus de capteurs 3D\n- capteur passif = n'emet pas de lumière pour percevoir / ne fait que les recevoir\n- RGBD = couleur + depth\n    - capture une image ou un flut RGB en couleur + une image de profondeur\n    - s'appuit sur les apparances mais aussi sur des informations geométriques \n\n# Acquisition 3D \n\n![](/assets/images/B1.P3D.CM.Poly-03.png)\n\n## Optique d'une caméra\n\n![](/assets/images/B1.P3D.CM.Poly-04.png)\n\nChoix de caméra selon la problématique:\n- il faut choisir une optique adaptée\n- mais aussi le capteur qui correspond\n\nUn pixel correspond à la disposition spatiale de la scène\nDu coup plus on a besoin d'echantillon de la scene pour avoir des data precises plus il nous faudra de 'pixel'\n\nLe capteur recoit des photos et les traduit en signal digital\n\n![](/assets/images/B1.P3D.CM.Poly-05.png)\n\n- AO point de la scene\n- FO foyer objet\n- centre optique = intersection entre axe optique et plan lentille ?\n    - quand on change la mise au point on deplace le plan des lentilles sur l'axe optique\n- axe optique (horizental)\n- plan capteur\n- p1 tirage optique (de l'epoque des camera avec accordeon car il tirer l'optique)\n- p0 distance entre scene et optique\n- F1 distance focal => modifie l'angle de champ\n    - focal petit => grand champ\n    - focal optimale pour ne pas perdre en precision et ne pas traiter des pixels inutiles\n\n> grandissement transversal\n\n> Relation de conjugaison\n\nPour objet loin p_0 -> infinie => f_1 = p_1 donc joue sur la mise en point du plan image\n\nEn 3D on assume souvent l'approximation que f_1 = q_1\n\n![](/assets/images/B1.P3D.CM.Poly-06.png)\n\n...\n\n\n\n\n> Notes du 2022/09/12 - End\n\n---\n\n> Notes du 2022/09/14 - Start\n\n\n\n\n\n\n![](/assets/images/B1.P3D.CM.SchemaResume.png)\n\n- $\\mathcal{R}_m$ référentiel de l'objet de référence (objet que l'on étudie)\n- on passe au paramètre extrinsèque: 3 ; angle d'euler $\\alpha_x \\; \\beta_y \\; \\gamma_z$\n- $\\mathcal{R}_C$ repere camera\n- $u_0$ et $v_0$ sont presque le milieu de la photo\n- $\\alpha_u$ et $\\alpha_v$ sont souvent egaux car les pixels sont souvent carree\n    - $\\alpha_u = ku f$\n    - $\\alpha_v = kv f$\n- attention au signe va deprendre du repere camera\n\n> Signe $\\alpha_u$ et $\\alpha_v$ important de le comprendre pour le TP d'etallonnage de camera\n\n> Un francais qui a sorti le concept d'imagerie 3D\n\n![](/assets/images/B1.P3D.CM.Poly-12.png)\n\n### Distortion Optique\n\n![](/assets/images/B1.P3D.CM.Poly-13.png)\n\n> Toute image possede une distortion (surtout au bord)\n\nEn traitement image on n'est pas problematise par ce phenomene mais en traitement spatiale on a de suite un probleme (mais bcp de logiciel arrive a regle ce probleme)\n\n- focal = distance du centre de l'objet p.r.à $\\mathcal{R}_C$\n- plus la focal est petit plus il y a de distortion\n- image exemple de continental\n- les corrections de distortion ne sont jamais parfaite\n\n![](/assets/images/B1.P3D.CM.Distortion.png)\n\n- terme radial $\\Delta_ur$ et $\\Delta_vr$\n- terme tangentiel $\\Delta_ut$ et $\\Delta_vt$\n- simplification: on assume que la distortion tangentiel est negligeable p.r.à la distortion radial \n\n![](/assets/images/B1.P3D.CM.RadialTangentiel.png)\n\n- différent type de modele\n    - radial ordre 1 et tangentiel ordre 0 -> r1t0 : k1 (k2=k3=p1=p2=0)\n    - r3t0 : k1 k2 k3\n    - r3t0 : k1 k2 k3 p1 p2\n\n- de maniere empirique :\n    - f>7mm => r1t0\n    - f<7mm => r3t0 ou r3t2\n    - il sera important de choisir le modele qui correpond à notre situation en expliquant le choix fait\n\n![](/assets/images/B1.P3D.CM.DistortionEqModele.png)\n\nComment corriger une distortion ?\n\nIdée:\n1. de limage final prendre un pixel en (u,v) \n2. calculer (u_d,v_d)\n    - Sauf qu'on va tomber sur des nombres non entier\n3. considerer les pixel voisins\n4. faire une ponderation de ce voisinage (interpolation biliniaire)\n5. creer un pixel dans l'image final selon cette ponderation\n\n![](/assets/images/B1.P3D.CM.Poly-14.png)\n\n> Attention: $C(X) = \\frac{1}{\\;n\\;} \\sum (u_i ...$\n\n- objet etalon (ou mir)\n    - planche cadrier\n    - openCV utilise un damier\n- on va faire plusieurs mesures\n    - extrinsèque vont changer (normal)\n- N.B.: le choix du ref de l'etatlon n'impacte que les param extrinsèque\n\nexemple:\n\n![](/assets/images/B1.P3D.CM.ChangementBase.png)\n\n- on prend un point etalon Pm\n- on obtient le point camera Pc\n- on cherche à avoir un changement de base qui nous amene de Pm à Pc en pasant par limage 3D produit (on doit tomber le meme pixel)\n- sauf qu'on aura tj une erreur du coup on va minimiser ce delta\n\n- N.B.: si l'etalon n'est pas parfaitement de niveau il faudra utilise une precision subpixel (optimisation non lineaire) pour chercher une croix dans une sous zone mise à jour à chaque iteration selon leloignement p.r.à un point ref\n\n![](/assets/images/B1.P3D.CM.TableCorrective.png)\n\nApparrements 2D/3D\n\n![](/assets/images/B1.P3D.CM.Apparrement2D3D.png)\n\n![](/assets/images/B1.P3D.CM.Apparrement2D3DEq.png)\n\n\n\n![](/assets/images/B1.P3D.CM.Poly-15.png)\n\n\n### Mise en oeuvre\n\n![](/assets/images/B1.P3D.CM.Poly-16.png)\n\n![](/assets/images/B1.P3D.CM.Stereo.png)\n\n![](/assets/images/B1.P3D.CM.StereoEqDroite.png)\n\n![](/assets/images/B1.P3D.CM.StereoEqRotation.png)\n\n### Stereo Passive\n\n![](/assets/images/B1.P3D.CM.Poly-17.png)\n\n![](/assets/images/B1.P3D.CM.StereoPassive.png)\n\nQUESTION: si point 3D est tres lointin alors sur les plans stereo il sera tres proche => disparité\n\n\n\n\n> Notes du 2022/09/14 - End\n\n---\n\n> Notes du 2022/09/16 - Start\n\n\n\n\n\nB1.P3D.CM.BB20220916-01\n\n- champ commun = intersection des champs respectifs des cameras\n    > Attention \n- stereo == camera proche\n- vision binoculaire == camera eloigne\n- vergence = angle des axes optique\n- profondeur de vision = region net\n- phenoneme d'olcutation = trou d'ombre dans le champ commun\n- une fois les deux images réalisées on va **appareiller** les pixels communs (mais comment savoir qu'un pixel est commun ?!)\n\n- **la notion de camera synchrone:**\n    - Stereo peut aussi se faire avec une seule qui prend un premier champ puis se deplace pour prendre un deuxieme champ => les prises de champs sont asynchrone\n    - pour toute prise d'evenement dynamique (e.g. du mouvement relatif) il nous faut un certain niveau de synchronisation \n    - plus le mouvement relatif est rapide moins de retard il faut entre les deux prises de vues\n\n#### Principe\n\n![](/assets/images/B1.P3D.CM.Poly-18.png)\n\n- denses ou eparse\n    - quantité d'information collecté\n    - depend de l'application\n    - souvent du dense (prentendant qui a plus peut faire plus)\n    - reconstruction dense => apparaiment dense (du coup peu optimal)\n\n> CNES pro mondiaux de la stereo\n\n- apparemment peut se faire sur des regions ou des formes (segments, points) mais ici on va rester sur les pixels\n    - par exemple apparemment de segment est tres util pour des environnment \"humains\" car les formes sont tres geometriques\n    - stereo segment = app. eparse de segment image\n    - stereo correlation = app. dense de pixel\n\n#### Appariemment (Block Matching???)\n\n![](/assets/images/B1.P3D.CM.Poly-19.png)\n\n- on suppose que l'effet perspective est faible car les cameras sont proches\n- SSD = Sum Square Difference (square pour eviter d'avoir des cas n'annulation +1-1=0)\n- cette app. ne marche pas sur des textures uniformes (murs de meme couleur, quadrillage, ...)\n- la zone de recherche depend de la profondeur/distance de l'objet\n    - plus l'objet est proche plus la zone de recherche sera décalée de la zone initiale\n    - la connaissance de cette profondeur/distance est faite empiriquement (souvent on prend la zone la plus pessimiste)\n- CC Cross Correlation\n    - produit scalarie utilisé pour trouver le pixel commun\n- **Zero Normalized Cross Correlation**\n    - I et I' sont la moyenne des niveaux dans la fenetre\n    - ecart type pour ???\n    - on soustrait l'offset entre les deux images\n    - on normalise car cela nous permet de plus facilement maitriser le seuil de validation (score de validation par exemple 0.6 en exterieur)\n- l'app. impose un temps de calcul tres grand\n\n#### Contrainte épipolaire\n\nB1.P3D.CM.Epipolaire\n\nLa droite épipolaire est une droite image qui inclut tous les pixels candidats $p_2\\in I_D$ du pixel $p_1\\in I_G$\n\nOr si cette droite epipolaire balaye une ligne du tableau de pixel (au lieu d'une diagonal) on a gagné car ce sera tres facile de parcourrir le tableau de pixel\n\nPour avoir un tel contexte il faut que les cameras soient **coplanaire**\n\nDe plus, on a meme pas besoin de balayé toute la ligne du tableau car quand le point est loin alors le pixel se trouve au meme endroit sur l'image de droite et donc selon à quelle distance on anticipe que l'objet est on va plus ou moins balayer un sous ensemble de cette ligne (c'est ce qu'on appele la disparité des pixels)\n\nCette disparité se calcule ainsi :$|v_1-v_2|$\n\nB1.P3D.CM.Disparite\n\nPour obtenir une configuration coplanaire (avec ou sans vergence), on peut :\n- utiliser un logiciel virtuel pour realiser des rotations de l'image et avec un algo arriver vers une conf. coplanaire\n- au CNES ils utilisent une methode mechanique pour trouver la conf afin d'eviter les temps de calculs\n\n![](/assets/images/B1.P3D.CM.Poly-20.png)\n\n#### Exemple\n\n- chaise avec courbe en haut a droite \n- ocultation avec courbe en bas a gauche\n- goudron avec courbe en bas a droite\n- mur blanc avec courbe milieu\n\n> si vous avez une reconstruction eparse jamais vous faites ???\n\n![](/assets/images/B1.P3D.CM.Poly-21.png)\n\n#### Reconstruction\n\n![](/assets/images/B1.P3D.CM.Poly-22.png)\n\nB1.P3D.CM.ReconstructionEq01\n\nB1.P3D.CM.ReconstructionEq02\n\n#### Recapitulatif\n\n1. Reduction\n    - On change la resolution (par exemple prendre qu'un pixel sur deux) consequence on reduit la resolution 3D\n2. Filtre\n3. Rectification+Correction Distortion\n4. Calcul des variances\n5. Calcul des scores de correlation\n6. Estimation des disparités\n7. Blob Filter\n\n    Pour les valeurs homogenes on a de grand risque d'erreur d'app. (c'est cela que l'on filtre)\n8. Reconstruction 3D\n\nLimitations fortes = temps de calcul et textures non adaptés => peut amener à avoir des trous dans notre reconstruction 3D\n\n#### Video LAAS 2001 Cartography\n\nComment savoir si une surface est navigable ?\n\n1. Prendre 3 points\n2. Faire le product vectoriel de ces points\n3. Deduire la normal de la surfuce entre ces 3 points\n4. Exclure les normal qui presente un angle trop fort entre la normal la vertical de notre repere de reference\n\nPour franchir un obstacle on va deduire des ces normals le plan d'élévation des obstacles\n\n#### Video Dirigeable Karma-Slam\n\n> Modélisation incrémentable = prendre pls perceptions d'une reconstruction 3D pour avoir un modele de l'envirronement qui soit perceptible sur 360 deg\n\n#### Resoudre le probleme de texture repetee\n\nIdée: Ajouter un eclairage qui va projeter un motif sur l'objet pour\n\nKinex => un des premier a avoir rajouté au stereo un projecteur\n\ncapteur a lumiere structuré = une camera et un projecteur\n\n![](/assets/images/B1.P3D.CM.Poly-23.png)\n\n\n#### Airbag\n\npour s'affranchir de perturbations de lumières extérieures ils ont travailler sur du proche infrarouge\n\n![](/assets/images/B1.P3D.CM.Poly-24.png)\n\n#### Exercice\n\n![](/assets/images/B1.P3D.CM.Poly-25.png)\n\n- config. de rectification ???\n\n1. Lister les advantages/desadvantages de cette focale \n\n    Focal petite = grand champ mais distortion\n\n2. Calculer le champ de vue vertical\n\n    - $L_{min}$ distance aveugle\n    - $\\theta v$ demi-angle de champ \n\n    B1.P3D.CM.ExVoitQ2-01\n    B1.P3D.CM.ExVoitQ2-02\n\n3. Montrer $\\alpha v = 105$ et en déduire la disparité à la distance min de perception puis celle à 3m et enfin à 5m\n\n    B1.P3D.CM.ExVoitQ2-01\n    B1.P3D.CM.ExVoitQ2-02\n    B1.P3D.CM.ExVoitQ2-03\n    B1.P3D.CM.ExVoitQ2-04\n\n4. Conclure sur l'utilisation\n    Créer une image de référence d'un sol plat pour le soustraire à l'acquisition réalisé sur le moment ce qui va alors faire resortir les delta entre vue reelle et vue de reference qui correspondent aux obstacles present sur le sol\n\n\n### Stereo Active\n\n![](/assets/images/B1.P3D.CM.Poly-27.png)\n\n- RADAR\n    - economique\n- ultrasond\n    - delta entre emission et reception\n    - seulement precis sur courte distance\n- lumiere structuree\n    - profilometrie\n    - RGB-D Red Green Blue and Depth (i.e. kinex) => geometrie de la salle (avec aussi l'apparence)\n    - advantage p.r.à la stereo pour les surfaces repetitive et uniformes\n\n\n\n\n> Notes du 2022/09/16 - End\n\n---\n\n> Notes du 2022/09/20 - Start\n\n\n\n#### Télémètre Laser\n\n![](/assets/images/B1.P3D.CM.Poly-28.png)\n![](/assets/images/B1.P3D.CM.Poly-29.png)\nB1.P3D.CM.ReflexionSpeculaire\n\n- Selon l'angle choisit pour la déflexion on peut louper des pieds de table à chaque pas angulaire\n\n#### Lumière structurée\n\n![](/assets/images/B1.P3D.CM.Poly-30.png)\n\n- En stereo les calculs d'apparai. necessite bcp de puissance alors qu'en structurée on ne qu'un apparai. de pixel à faisceau\n- De plus on peut aussi projeter des couleurs et ainsi simplifier l'apparai.\n- Rayure Noir Blanc = projection temporelle pour image statique\n- Nape de couleur = projection statique color-coded pour image dynamique\n\n![](/assets/images/B1.P3D.CM.Poly-31.png)\n\n\n- Modèle Sténopé\n\n![](/assets/images/B1.P3D.CM.Poly-32.png)\n\n- La lumière structurée est utilisé pour trouver l'équation du plan et non pas pour reconstruire l'image car la camera seule peut reconstruire la scène connaissant l'equation du plan\n\n##### Codage Binaire\n\n![](/assets/images/B1.P3D.CM.Poly-33.png)\n![](/assets/images/B1.P3D.CM.Poly-34.png)\n\n- image virtuelle = construction de l'image mais projeté sur un plan focal\n\n![](/assets/images/B1.P3D.CM.Poly-35.png)\n\nVideo debracage 3D resolut seulement récemment\n\n\n\n> Notes du 2022/09/20 - End\n\n---\n\n> Notes du 2022/11/07 - Start\n\n\n\n![](/assets/images/B1.P3D.CM.Poly-36.png) <!--ADDNOTES-->\n\n# Modelisation 3D\n\n![](/assets/images/B1.P3D.CM.PolyV2-37.png)\n\n> TP sur etanlonnage puis modelisation puis localisation\n\n### Algorithme générique\n\n![](/assets/images/B1.P3D.CM.PolyV2-38.png) <!--ADDNOTES-->\n\n- ré-échantillonage systématique : rendre le modele compact pour gagner en espace memoire en retirant **aléatoirement** des points du modèle\n- ré-échantillonage sélectif : rendre le modele compact pour gagner en espace memoire en retirant **selon un critère voulus** des points du modèle (par exemple retirer des points coplanaires ou des points sur les zones les plus denses)\n\n- formes libres = scènes naturelles\n- formes structurées = scènes geométriques\n\n### ICP\n\n![](/assets/images/B1.P3D.CM.PolyV2-39.png) <!--ADDNOTES-->\n\n- notion de complétude similaire mais différente de la fermeture de boucle en SLAM\n- On part de deux perceptions d'un meme objet sur deux points de vues différents\n- On peut estimer la matrice de passage de $R_t$ à $R_{t+1}$ (notammant avec des senseurs cinétiques sur la caméra)\n- Avec cette matrice de passage estimée on peut faire un premier appariment des points les plus proches entre les perceptions on en déduit alors une nouvelle matrice de passage\n- Avec cette nouvelle matrice de passage on refait l'appariment des perceptions et on réitère\n\nUne façon d'estimer la matrice de passage sans informations supplémentaires (très imprécis par contre)\n- estimer la matrice de translation -> prendre les centres de gravité des nuages de ponts pour en calculer les\n- estimer la matrice de rotation -> matrice de covariance avec ses vecteurs propres \n\n\n![](/assets/images/B1.P3D.CM.PolyV2-40.png) <!--ADDNOTES-->\n\n## Modélisation\n\n### Formes Libres\n\n#### MNT\n\n![](/assets/images/B1.P3D.CM.PolyV2-41.png) <!--ADDNOTES-->\n\n> MNT : Modèle Numérique de Terrain aussi appelé $2.5D$\n\n#### Voxels & Octrees\n\n![](/assets/images/B1.P3D.CM.PolyV2-42.png) <!--ADDNOTES-->\n\n- Voxel est l'equivalent 3D du pixel en 2D\n- Octree est l'equivalent 3D du quadtree en 2D\n\n- Exemple algo tabletop\n\n\n\n\n> Notes du 2022/11/07 - End\n\n---\n\n> Notes du 2022/11/09 - Start\n\n\n\n\n### Formes Structurées\n\n#### Modèles mathématiques\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-43.png) <!--ADDNOTES-->\n\n![](/assets/images/B1.P3D.CM.PolyV2-43-BB1.png)\n![](/assets/images/B1.P3D.CM.PolyV2-43-BB2.png)\n\n### Primitives Géométriques\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-43.png) <!--ADDNOTES-->\n\n> Keywords:\n- Superquadriques\n- CSG: Constructive Solid Geometry\n\nRem:\n- Pour modeliser un objet en mouvement alors que le capteur bouge lui-meme alors on fait une bird view pour avoir un referentiel supose fixe (aussi dit ego-centré)\n\n# Segmentation 3D\n\n## RANSAC\n![](/assets/images/B1.P3D.CM.PolyV2-45.png) <!--ADDNOTES-->\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-45.png) <!--ADDNOTES-->\n\n\n> Keywords\n- RANSAC: Random Sample Consensus\n\nUn capteur 3D peut ou bien retourner une image de profondeur ou un nuage de point\n- Exemple de la segmentation d'une poubelle sera plus facile avec une image de profondeur car l'image possede une information de distance p.r.au capteur qui permet de tres facilement dissocier le fond de l'objet en qestion\n\n\nRANSAC:\n- si trop de points faux (point bleu du schema en haut a gauche du slide) alors la methode des moindres carrees ne marchera pas\n- autre mehode prendre seulement deux points aléatoirement pour calculer une equation de droite afin de regarder la distance relative de tous les autres point p.r.à cette equation de droite pour dissocier les outliers des vrais points\n\n## Attribut Normale/Courbure\n\n![](/assets/images/B1.P3D.CM.PolyV2-46.png) <!--ADDNOTES-->\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-46.png) <!--ADDNOTES-->\n\nPour segmenter le cantour on utilise le chaînage :\n- on prend la perpendiculaire de la normale jusqu'à tomber sur un point voisin pour verifier que la normale\n\n## Attribut Courbure\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-47.png) <!--ADDNOTES-->\n\n## Page 48\n\n> Hors programme\n\n<!--![](/assets/images/B1.P3D.CM.PolyV2-Annotated-48.png) ADDNOTES-->\n\n\n# Localisation et Reconnaissance 3D\n\n![](/assets/images/B1.P3D.CM.PolyV2-50.png)\n\n## But\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-51.png) <!--ADDNOTES-->\n\nLe nombre d'appariement minimum est de 3 points ! Methode de résolution analytique ???\n\nExemple du slide illustre la méthode stenopé avec modèle de projection\n\n??? Cercle sur plan d'interpretation mais ellipse sur mur inclinée\n\n\n\nTz<0 translation sur le plan optique\n\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-52.png) <!--ADDNOTES-->\n\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-53.png) <!--ADDNOTES-->\n\n[Diota Company](https://www.diota.com/)\n\n\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-54.png) <!--ADDNOTES-->\n\n\n\n\n> Notes du 2022/11/09 - Start\n\n---\n\n> Notes du 2022/11/10 - End\n\n\nP_i point de l'objet dans le repère modèle puisqu'on y applique\n\n#### Precision vs nb camera\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-55.png) <!--ADDNOTES-->\n\nOn va utiliser une camera observation pour s'assurer que le Tz de la cam 1 a bien été estimé\n\n####\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-55.png) <!--ADDNOTES-->\n\n#### \n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-56.png) <!--ADDNOTES-->\n\n\n### Capture optique de mouvement humain\n\n![](/assets/images/B1.P3D.CM.PolyV2-Annotated-57.png) <!--ADDNOTES-->\n\n\nPastille utilisé au LAAS pour donner la \"vérité terrain\"\n\n![](/assets/images/B1.P3D.CM.Poly20221101-58.png) <!--ADDNOTES-->\n\nFusion Haut Niveau : \n- Kalman\nFusion Bas Niveau : \n- Capteur\n- 1 seule localisation !\n\nF_j est sensé être 0 mais comme a des erreurs ont va pouvoir faire du filtrage de F_j\n\nQ3 on prend deux droites intersecte sur le point pour min les plans des droites et ainsi min l'intersection ellememe\n\non peut faire de la loc en utilisant de l'etallonage avec des param intreseque fixée\n\n\nAirbus detection position du visage\n\npour faire de la realite augmente pour le pilote d'un avion\n\ncamera RGB avec nuage de points sensoreil et visuelle\n\n![](/assets/images/B1.P3D.CM.BB20221110-03.png)\n\n\nICP avec loc initiale en utilisant des points clés\n\nNuage sensoriele et nuage modele\n\n1. dans les deux nuages on extrait un pt cle \n2. Calcule les signatures (on associe un descripteur a chaque point clé)\n3. App. entre key point modele et ceux du sensoriel\n4. Localisation 3D -> $X_0$\n5. ICP pour raffiner la loc\n\nsur la video d'airbus on initialise avec les etapes 1 à 3\n\n\n# Reconnaissance 3D/3D\n\n## But\n\n![](/assets/images/B1.P3D.CM.PolyV2A-63.png)\n\nProblematique d'app.\n\nAnalogie avec les points d'interets en 2D\n- extraire des key points \n- calculer une signature (descritpeur)\n- associer au modele\n\n## ISS\n\n![](/assets/images/B1.P3D.CM.PolyV2A-63.png)\n\n## SHOT\n\n![](/assets/images/B1.P3D.CM.PolyV2A-65.png)\n\nune fois les deux vecteurs de 352 composantes obtenus ont va faire la norme L1 pour comparer composante par composante pour connaitre les points app. (on peut aussi prendre la norme L2 mais c'est moins interesse parce que si on a une erreur alors elle aura un impacte trop grand a cause du carre) On prefere la cosine distance avec le produit scalaire.\n\n## Appariements\n\n![](/assets/images/B1.P3D.CM.PolyV2A-67.png)\n\n![](/assets/images/B1.P3D.CM.PolyV2A-68.png)\n> hors porgrame\n\n## Exemple: Dévracage\n\n![](/assets/images/B1.P3D.CM.PolyV2A-69.png)\n\ncf **template matching** du [[B1.VIRCRV.CM.Vision]]\n\n![](/assets/images/B1.P3D.CM.PolyV2A-70.png)\n\nAnecdote du manitou avec systeme de perception pour anticiper les colisions ce qui implique les problematique d'ou placer les capteurs et comment gerer la volumetrie de l'engin quand celui possede des configurations multiples qui changent sa volumetrie\n\n# Reconnaissance 2D/3D\n\n![](/assets/images/B1.P3D.CM.PolyV2A-71.png)\n\nprojection du modele avec l'hypothese  app prim 3d **projeté** avec image prise en 2d\n\ntracking: dans un flux video on prend la premiere image comme condition initiale puis on considere l'image en t+1 (où le delta t est sensé etre suffisamment petit) ceci permet de faire un app. et le delta lie au mouvement est compensé par un recalage (souvent en utilisant un filtre de kalman pour faire la prediction du mouvement)\n\n# Réf.\n\n![](/assets/images/B1.P3D.CM.PolyV2A-72.png)\n![](/assets/images/B1.P3D.CM.PolyV2A-73.png)\n\n\n# 4- Apllications et Exemples\n\n![](/assets/images/B1.P3D.CM.PolyV2A-74.png)\n\n## Calibration \"bras/oeil\"\n\n![](/assets/images/B1.P3D.CM.PolyV2A-75.png)\n\n## Etallonage et Manipulation (look & move)\n\n![](/assets/images/B1.P3D.CM.PolyV2A-76.png)\n\n## Reconnaissance et Manipulation (Asservissemnt en positionnement 3D)\n\n![](/assets/images/B1.P3D.CM.PolyV2A-77.png)\n![](/assets/images/B1.P3D.CM.PolyV2A-78.png)\n\n## ..\n\n![](/assets/images/B1.P3D.CM.PolyV2A-78.png)\n\n## Algorithme TableTop\n\n![](/assets/images/B1.P3D.CM.PolyV2A-80.png)\n\nRANSAC pour trouver le plan de la table afin de supprimer tous les points du nuage lié au plan (car on veut que les nuages liés aux objets) il ne reste plus qu'à faire du clustering sur le reste des points pour finir avec l'ICPs\n\n## Localisation Mono\n\n![](/assets/images/B1.P3D.CM.PolyV2A-80.png)\n![](/assets/images/B1.P3D.CM.PolyV2A-81.png)\n![](/assets/images/B1.P3D.CM.PolyV2A-82.png)\n\nprobleme de t-1 -> t c'est qu'il faut une initialisation au départ pour commencer l'iteration suivante:\n- l'image 2D à t est app. avec une image virtuel à t-1\n- une fois l'app. et la localisation en utilise l'image \n\n## Vision 3D vs Plannification de trajectoire\n\n![](/assets/images/B1.P3D.CM.PolyV2A-83.png)\n\n","n":0.019}}},{"i":90,"$":{"0":{"v":"OE - Optimisation & Estimation","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix\n\n---\n\n# À Retenir\n\n- ...\n\n# Cours Magistraux\n\n- [[Introduction à l'Optimisation Numérique|B1.OE.CM]]\n\n# Travaux Dirigés\n\n- [[TD1 - Examen 2021 (fev)|B1.OE.TD1.Exam2021fev]]\n\n# Travaux Pratiques\n\n>\n- TP sur Python !!! cf. palteforme [fun mooc python](https://www.fun-mooc.fr/en/cours/apprendre-a-coder-avec-python/)\n- ROS utilise C++/Python\n\n\n- [[TP1 - MGI|B1.OE.TP1]]\n\n# Support de Cours\n\n## Fichiers Moodles\n\n### CM\n\n- [OE.CM.Slide.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.CM.Slide.pdf)\n\n### TP\n\n- [OE.TP1.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.TP1.Sujet.pdf)\n\n\n## Scans\n\n### GEA\n\n- [OE.NotesGEA.CM.20220830.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220830.pdf)\n- [OE.NotesGEA.CM.20220907.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220907.pdf)\n- [OE.NotesGEA.CM.20220908.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220908.pdf)\n- [OE.NotesGEA.CM.20220915.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220915.pdf)\n- [OE.NotesGEA.CM.20220919.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220919.pdf)\n\n### RKA\n\n- [OE.NotesRKA.CM.20220915.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesRKA.CM.20220915.pdf)\n","n":0.116}}},{"i":91,"$":{"0":{"v":"TD1","n":1}}},{"i":92,"$":{"0":{"v":"TD1 - Examen 2021 (fev)","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix\n\nSupport de cours :\n\n- [lien vers le sujet ?](...)\n- [OE.NotesGEA.CM.20220919.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220919.pdf)\n\n---\n\n## Question 2: Ellispe & Rectangle\n\nOE.TD.ExoExam.2021Q2-Question\n\n![](/assets/images/OE.TD.ExoExam.2021Q2-Ellipse.png)\n\nTrouver le rectangle de surface maximale inscrit dans l'ellipse $\\frac{\\;x^2\\;}{a^2} + \\frac{\\;y^2\\;}{b^2} = 1$\n\n1. Traduire la fonction à minimiser/maximiser\n\n2. Ecrire le lagrangien\n\n3. Trouver $x^*$ et $y^*$ (les racines du gradient de L)\n\n4. Trouver $\\lambda^*$\n\n5. Conclure\n\n![](/assets/images/OE.TD.ExoExam.2021Q2-Ans.png)\n\n## Question 3: Optimum de f sur $\\R^{2}$\n\nOE.TD.ExoExam.2021Q3-Question\n\n### a) Methode de Newton sur $x_0 = (1\\;\\;1)^t$ et sur $x_0 = (2\\;\\;-3)^t$\n\n1. Ecrire la recurrence\n\n2. Calculer la recurence au point initial\n\n3. Conclure\n\n![](/assets/images/OE.TD.ExoExam.2021Q3-Ansa.png)\n\n### b) Caractériser les points critiques\n\nOE.TD.ExoExam.2021Q3-Ansb\n\n### c) Modélisation sous forme quadratique\n\nOui la methode des gradiens conjugués s'appliquent justement aux fonctions quadratiques","n":0.091}}},{"i":93,"$":{"0":{"v":"TP1 - MGI","n":0.577},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix\n\nSupport de cours :\n- [OE.TP1.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.TP1.Sujet.pdf)\n- [GitHub Repository](https://github.com/TunnARK/UT3-AURO-2223-S10-Coding/tree/master/OE-TP1-MGI)\n- [Documentation scipy.optimize](https://docs.scipy.org/doc/scipy/tutorial/optimize.html)\n\nFonction utile sur python:\n- `np.dot()` produit matricielle\n- `np.linalg.inv()` inversion matricielle\n- `np.linalg.norm()` norme d'un vecteur\n- `Jt=J.transpose()` transposer une matrice\n- `list.append()` ajout élément dans une liste\n\n---\n\n# Calcul numérique du MGI d’un RRR par PNL\n\n![](/assets/images/OE.TP1.Sujet-01.png)\n![](/assets/images/OE.TP1.Sujet-02.png)\n![](/assets/images/OE.TP1.Sujet-03.png)\n\n<!--\n## Notes Présentation TP\n\n- incrémentation vs solution directe\n- mgd nécessaire pour avoir $X_k$ \n    - idée est que X_k = X_0\n    - mgd donné et jacobienne donnée\n    - $\\dot X = J \\dot q$ donnée\n- Newton\n    - au lieu de calculer la hessiene\n    - on va calculer le zero de $H(q)$\n\n- Gradient\n    - singularite = det de la jaco à 0\n        - attention sbras tendu det de J est 0\n    - afficher l'erreur et espére que l'erreur converge vers 0\n    - attention gradient sensible p.r. au pas\n\n- scipy\n    - ici on cherche le modele alors qu'avant on nous l'a donné et il fallait faire l'algo (ici l'algo est donné)\n-->\n\n## 1. Méthode de Newton\n\n> ![](/assets/images/OE.TP1.Sujet-04.png)\n\n### A) Montrer que $direction = J(q)^{-1} \\cdot (X_d - f(q)$\n\n\nD'après le slide 56 du cours, nous avons l'équation pour le modèle linéaire en multi-dimensionnel avec une fonction linéaire $H(q)$:\n\n$$\n\\begin{matrix}\nq_{k+1} &=& q_k + \\nabla\\Big(H(q)\\Big)^{-t} \\cdot \\Big(H(q)\\Big)\\\\[0.2cm]\nq_{k+1} &=& q_k + \\nabla\\Big(X_d - f(q)\\Big)^{-t} \\cdot \\Big(X_d - f(q)\\Big)\\\\[0.2cm]\n&=&  \\\\[0.2cm]\n&=& q_k + J(q)^{-1} \\cdot H(q)\\\\\n\\end{matrix}\n$$\n\n### B) Implémentation\n\n#### Initialisation\n\nPour l'implémentation de la méthode de Newton, nous avons commencé par initialiser `qinit` et fixer le _pas_ et l'_erreur tolérée_ $\\epsilon$.\n\nPar défaut, on a fixé le _pas_ à 0.1 et _epsilon à 0.001_.\n\nLa partie d'initialisation se termine avec la saisie par l'utilisateur du nombre maximum d'itération (utile pour stopper l'algorithm une fois ce nombre atteint).\n\n#### Iterations\n\nLa boucle d'iterartion est structuré comme suit :\n```python\nwhile(Hnorm>eps and i<NbIter) :\n    # Jacobienne\n    J = jacobienne(q)\n    # Calcul de l'inverse\n    Jinv=np.linalg.inv(J)\n    # Calcul de l ecart entre le Xbut et le Xc actuel\n    H=(Xbut-mgd(q))\n    # Iteration\n    q=q+pas*np.dot(Jinv,H)\n    # Calcul de l erreur avec norme euclidienne\n    Hnorm=np.linalg.norm(H)\n    # Remplissage du vecteur avec la norme\n    Hq.append(Hnorm)\n    i=i+1\n```\n\nLa boucle se lance si la métrique choisie (ici on a considéré la norme euclidienne) est supérieure à l'erreur tolérée $\\epsilon$\n\n## 2. Méthode du Gradient\n\n> ![](/assets/images/OE.TP1.Sujet-05.png)\n\n..\n\n## 3. Utilisation de scipy.optimize\n\n> ![](/assets/images/OE.TP1.Sujet-06.png)\n[Documentation scipy.optimize](https://docs.scipy.org/doc/scipy/tutorial/optimize.html)\n\n\n## 4. Optimisation sous contrainte\n\n### 4.1 Contrainte de butée\n\n> ![](/assets/images/OE.TP1.Sujet-07.png)\n\n..\n\n### 4.2 Contrainte sur la solution\n\n> ![](/assets/images/OE.TP1.Sujet-08.png)\n\n..\n\n## 5. Travail à rendre en fin de séance\n\n> ![](/assets/images/OE.TP1.Sujet-09.png)\n\n..\n\n## Code Fourni\n\n```python\n#############\n# Code à utiliser pour débuter votre TP\n#################\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport time\n\n#################################################\n# Calcul du MGD du robot RRR\n# INPUT: q = vecteur de configuration (radian, radian, radian)\n# OUTPUT: Xc = vecteur de situation = (x,y, theta)\n# x,y en mètre et theta en radian\ndef mgd(qrad):\n#### Paramètres du robot\n    l=[1,1,1]\n    c1= np.cos(qrad[0])\n    s1=np.sin(qrad[0])\n    c12= np.cos(qrad[0]+qrad[1])\n    s12=np.sin(qrad[0]+qrad[1])\n    theta= qrad[0]+qrad[1]+qrad[2]\n    c123=np.cos(theta)\n    s123=np.sin(theta)\n    x=l[0]*c1 + l[1]*c12 +l[2]*c123\n    y=l[0]*s1 + l[1]*s12 +l[2]*s123\n    Xd=[x,y,theta]\n    return Xd\n#################################################\n# test de validation du MGD\n##### INPUT de q en degré ###\nqdeg = [90, -90, 0]\nqr = np.radians(qdeg)\nXd= mgd(qr)\nprint(\"X=\", Xd[0], \"Y = \", Xd[1], \"Theta (deg)= \", np.degrees(Xd[2]))\n\n#################################################\n# Calcul de J(q) du robot RRR\n# INPUT: q = vecteur de configuration (radian, radian, radian)\n# OUTPUT: jacobienne(q) analytique\ndef jacobienne(qrad):\n#### Paramètres du robot\n    l=[1,1,1]\n    c1= np.cos(qrad[0])\n    s1= np.sin(qrad[0])\n    c12= np.cos(qrad[0]+qrad[1])\n    s12=np.sin(qrad[0]+qrad[1])\n    theta= qrad[0]+qrad[1]+qrad[2]\n    theta= np.fmod(theta,2*np.pi)\n    c123=np.cos(theta)\n    s123=np.sin(theta)\n    Ja=np.array([[-(l[0]*s1 + l[1]*s12 +l[2]*s123), -(l[1]*s12 +l[2]*s123), -(l[2]*s123)], [(l[0]*c1 + l[1]*c12 +l[2]*c123), (l[1]*c12 +l[2]*c123), (l[2]*c123)], [1, 1, 1]])\n    return Ja\n\n###################################################################################\n# Afin de donner une situation atteignable pour le robot,\n# vous pouvez utiliser le mgd pour définir Xbut à partir d’une configuration en q\n###################################################################################\n## qbut est donné en degré\nqbutdeg= np.asarray([45, 45, -60.])\n## Calcul Xbut à partir de qbut\nXbut= np.asarray(mgd(np.radians(qbutdeg)))\nprint(\"Xbut=\", Xbut[0], \"Ybut = \", Xbut[1], \"Theta but (deg)= \", np.degrees(Xbut[2]))\n\n############################################\n## Fct d’affichage 2D du robot dans le plan\ndef dessinRRR(q) :\nxA, yA = (0, 0)\nxB, yB = (np.cos(q[0]), np.sin(q[0]))\nxC, yC = (np.cos(q[0]) + np.cos(q[0]+q[1])), (np.sin(q[0]) + np.sin(q[0]+q[1]))\nxD, yD = (np.cos(q[0]) + np.cos(q[0]+q[1]) + np.cos(q[0]+q[1]+q[2])),(np.sin(q[0]) + np\nX=[xA, xB,xC,xD]\nY=[yA,yB,yC,yD]\nplt.plot(X,Y, color=\"orange\", lw=10, alpha=0.5, marker=\"o\", markersize=20, mfc=\"red\")\nplt.axis(’equal’)\nplt.axis(’off’)\nplt.show()\n################################################\n############ Exemple d’affichage\ndessinRRR(np.radians(qbutdeg))\n\n########################################\n######\n###### Boucle principale de calcul du MGI\n######################################\n####\n#### Définition de Xbut à partir de qbutdeg en degré\nqbutdeg= np.asarray([45.,45.,-60])\nqbut = np.radians(qbutdeg)\nXbut= np.asarray(mgd(qbut))\ndessinRRR(qbut)\n#### Définition de qinit\nqinitdeg=np.asarray([120., 25, 45.])\nqinit= np.radians(qinitdeg)\nXinit=np.asarray(mgd(qinit))\nprint(\"Xinit = \",Xinit)\n\n##### A CODER\n##q= qinit\n##i=0\n##\n##\n##nbpas= ???\n##epsx= ???\n## erx = valeur initale de du critère qu’on cherche à minimiser\n##list_erreur = [erx] #\n##start_time = time.process_time()\n##while (????):\n## direction = ???\n## pas= ???\n## ...\n## ...\n## list_erreur.append(erx) # Stocker la valeur du critère dans une liste\n## i=i+1\n##print(\"--- %s seconds ---\" % round(time.process_time() - start_time,6))\n### Visualisation des résultats\n##print(\"Valeur finale du critère =\",??,\" après \",i,\" itérations\")\n##print(\"qinit en deg =\", qinitdeg)\n##print(\"qcfinal en deg\", np.degrees(qc))\n##X= mgd(qc)\n##print(\"Xinit =\",Xinit, type(Xinit))\n##print(\"Xfinal avec qfinal = \",X)\n##print(\"Xbut à atteindre =\", Xbut, type(Xbut))\n##Xer= Xbut -X\n##erx=np.linalg.norm(Xer)\n##print(\"Erreur finale=\",erx)\n##abs = np.linspace(0,len(list_erreur)-1,(len(list_erreur)))\n##plt.plot(abs,list_erreur,’k’)\n##plt.show(block=True)\n##\n##dessinRRR(qc)\n```","n":0.037}}},{"i":94,"$":{"0":{"v":"Introduction à l'Optimisation Numérique","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par M. Thaix\n\nSupport de cours:\n\n- [OE.CM.Slide.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.CM.Slide.pdf)\n\n- [OE.NotesGEA.CM.20220830.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220830.pdf)\n\n- [OE.NotesGEA.CM.20220907.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220907.pdf)\n\n- [OE.NotesGEA.CM.20220908.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220908.pdf)\n\n- [OE.NotesGEA.CM.20220915.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220915.pdf)\n\n- [OE.NotesGEA.CM.20220919.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/OE.NotesGEA.CM.20220919.pdf)\n\n\n\n---\n\n> Notes du 2022/08/30 - Start\n\n\n\n\n# Partie 1 - Concepts et ouitls de base pour l'optimisation\n\n![](/assets/images/OE.CoursSlide1.png)\n\n\n### Pb Général :\n**Minimiser une fonction sous contrainte(s)**\n\n- Reveint à chercher le (ou les) minimum local (global)\n\n![](/assets/images/OE.Cours.PbGeneral.png)\n\n### Objectif :\n\n![](/assets/images/OE.Cours.Objectif.png)\n\n- seulement minimiser car maximiser revient à minimiser -f\n\n## 1.1 Modélisation mathématique\n\n![](/assets/images/OE.CoursSlide7.png)\n\n### Tableau Terminologie\n\n![](/assets/images/OE.CoursSlide8.TableauConceptsOpti.png)\n\n- méthode du gradient pour la 4D\n\n## 1.2 Application\n\n![](/assets/images/OE.CoursSlide9.ApplicationsExemple.png)\n\n### Exemple 1 :\n\nNape de laser qui nous fournit des points\n\nChercher à modéliser Y = A X + B\n\nresoudre y_i -ax_i -b = 0 à minimiser en fonction de a et b (les inconnus)\n\n$$\nmin \\sum_{i=1}^{n} (y_i -ax_i -b)\n$$\n\npb d'optimisation sans contraintes\n\n### Exemple 2 : Construction Hangar\n\nVolume $1500 m^3$ soit LxlxH = 1500\n\nlargeur = 2 x hauteur\n\ncout N_1 / m^2 pour le mur\n\ncout N_2 / m^2 pour le plafond\n\ncout N_3 / m^2 pour le sol\n\nDu coup:\n\n$$\nmin \\big( N_1 (2yz+2xz) + N_2 (xy) + N_3 (xy) \\big)\n$$\n\ns.c. xyz=1500 et y=2z\n\nPb NLSC non linéaire sous contraintes\n\n### Exemple 3 : Entrepot Pb de logistique\n\nn dépots et m points de ventes\n\ncout transport C_{ij}\n\nstocks depots X_i\n\nniveau demande D_j\n\nCdC flou car on ne sait si l'objectif est de vider tous les entrepots ou de vendre un maximum ou meme minimiser les couts\n\nces objectifs sont necessaire pour modéliser cad pour savoir si l'on va utliser une inégalité ou égalité et quelle serait sa structure\n\nLes variables que l'on controle ici sont Xi et x_{ij} le nombre de marchandise transportée de i à j\n\n$c_{ij} \\cdot x_{ij} + ...$ \n\n$$\nmin_{x_{ij}} \\sum_{i=1}^{n} \\sum_{j=1}^{m} \\Big( c_{ij} \\cdot x_{ij} \\Big)\n$$\n\ns.c. : \n- $X_i = \\sum_{j=1}^{m} x_{ij}$\n  - (cad vider les depots) -> donc n contraintes d'égalités\n  - ou bien $\\frac{X_i}{2} \\leq \\sum_{j=1}^{m} x_{ij} \\leq X_i$ ou autre selon le CdC\n\n- $D_j = \\sum_{i=1}^{n} x_{ij}$\n  - objectif ici : satisfaire la demande\n\nIci Pb est de type PL linéaire se résoud même avec des systèmes très grands\n\n\nExemple 1 => Bloc 1\nExemple 2,3 => Bloc 2\n\n## 1.3 Rappels et Compléments\n\n![](/assets/images/OE.CoursSlide10.Rappels.png)\n\n- Dérivation de fonction scalaire\n\n- Dérivation de fonction vectoriel -> définit un plan tangent\n\n- Gradient de f\n  - vector correspondant à la projection du vecteur perpendiculaire au plan tangent au point $x_0$\n  - se trouve être perpendiculaire à la courbe de niveau\n\n- Matrice Hessienne (symmétrique)\n\n- les outils d'optimisation se base souvent sur le gradient (avec ordre 1 ou 2) ou la hessienne\n\n- Attention dans le cas de fonction NL le gradient peut ne pas suffir pour minimiser\n\n![](/assets/images/OE.CoursSlide11.DeriveeDirectionnelle.png)\n\n- Dérivée directionnelle :\n\n  ...\n\n- Direction en descente :\n\n  direction _d_ de descente si $\\quad d^t \\cdot \\nabla f(x) < 0$ \n\n- Theorem :\n\n  ...\n\n- Du coup le gradient nous permet de connaitre la directin menant à une minimisation c'est pourquoi bcp d'algorithm utilise le Gradient\n\n### Exemple : Fonction Quadratique\n\n![](/assets/images/OE.CoursSlide12.FctQuadratic.png)\n\n- Définition: Fonction Quadratique\n\n  - dans ces cas le gradient est connu ! c'est $Qx+G$ du coup 'facile' à minimiser\n\n## 1.4 Vitesse de Convergence d'un algorithme\n\n![](/assets/images/OE.CoursSlide13.VistesseConvergence.png)\n\n- Pq plus pratique d'avoir une convergence quadratique ?\n\n  - supposant l'erreur vaut $10^{-3}$ alors à la prochaine itération elle sera de $10^{-5}$ puis de $10^{-9}$\n  - du coup si solution la convergence de l'erreur est plus rapide dans un algo quadratique\n\n## 1.5 Minimum\n\n![](/assets/images/OE.CoursSlide14.Minimum.png)\n\n- en NL les algo ne fonctionnent qu'en local (pas de global à moins d'avoir une chance) [sauf pour les focntions quadratiques ou linéaires]\n\n- si min global nécessaire alors il faut appliquer l'algo sur plusieurs points initiaux\n\n  - pb sur des milliers de min locaux il faut encore plus de point initiaux\n    - d'où l'utilisation d'algo génétique\n    - ou méthode montécalor (rajoute de l'aléatoire donc accpete que la fonction croisse pour esperer qu'elle descende plus loin)\n\n![](/assets/images/OE.CoursSlide15.ExistenceMin.png)\n\n- focntion coercive si sa limite tend vers l'infinie\n\n## 1.6 Convexité\n\n![](/assets/images/OE.CoursSlide16.Convexite.png)\n\n- fonction convexe \n  - => tout min local est global et unique\n  - si matrice hessienne est définie (semi-définie) positive pour tout x alors f est strict. convexe (convexe)\n\n## 1.7 Optimisation d'une fonction d'une variable réelle\n\n![](/assets/images/OE.CoursSlide17.MethodeDichotomie.png)\n\n- f fonction unimodale si :\n  - f admet un min unique $x*$ dans $I$\n  - f strict. décroissante sur $[a,x*[$ et strict croissante sur $[x*,b[$\n\n- unimodale = fct convexe en dimension 1 (seule la contrainte du strict. s'ajoute à la déf d'une fct convexe)\n\n- méthode dichotomie\n\n![](/assets/images/OE.CoursSlide18.MethodeSectionDoree.png)\n\n- plus éfficace que la méthode de dichotomie car utilise le nombre d'or pour la division dichotomique\n\n![](/assets/images/OE.CoursSlide19.MethodeRecherche.png)\n\n- méthode numérique itérative\n\n## 1.8 Méthode de résolution\n\n![](/assets/images/OE.CoursSlide20.MethodeResolution.png)\n\n- méhtode de _line search_\n\n  - choisir une direction\n  - détermine de combien y aller\n\n- méthode de confiance _trust region_\n\n  - approxime autour d'un voisinage\n\n    -> donne la région de confiance\n\n  - puis on cherche la direction de descente dans cette région\n\n- principalement on utilisera la _line search_\n\n![](/assets/images/OE.CoursSlide21.PbHypothenuse.png)\n\n100m de plage\n\n50m de nage\n\nvitesse course 18km/h = 5m/s\n\nvitesse nage 10km/h = (1/0,36)m/s\n\nbombe explose dans 35sec\n\ndistance plage courue d_P\ndistance nage\n\n$$\nd_N = \\sqrt{(100-d_P)^2+50^2}\n$$\n\nminimiser\n$$\nd_N \\cdot \\dfrac{1}{v_N} + d_P \\cdot \\dfrac{1}{v_P} \\leq 35\n$$\n\nici temps minimum est 34,96s avec x = 66,59m\n\n\n\n\n\n> Notes du 2022/08/30 - End\n\n---\n\n> Notes du 2022/09/07 - Start\n\n\n\n\n# Part 2 - Optimisation sans contrainte\n\n![](/assets/images/OE.Slide-22.png)\n\n## A) Conditions\n\n![](/assets/images/OE.Slide-23.png)\n\nThm: CN1 - Condition nécessaire d'optimatilité du 1er odre\n\n$x^*$ min local ...\n\n![](/assets/images/OE.Slide-24.png)\n\n![](/assets/images/OE.Slide-25.png)\n\nCas particulier\nmatrice hessienne avec vp + et - alors ni def + ni def -\n\n![](/assets/images/OE.Slide-26.png)\n\n![](/assets/images/OE.Slide-27.png)\n\n![](/assets/images/OE.Slide-28.png)\n\nThm: Condition suffisante d'optimalité gloabe\n\nLa matrice $Q$ (trouvé lors du calcul de la hessienne) contient l'information.\n\n![](/assets/images/OE.Slide-29.png)\n\nExemple 1:\n\n![](/assets/images/OE.Slide-29-Ex1.png)\n\nExemple 2:\n\n![](/assets/images/OE.Slide-29-Ex2.png)\n\n![](/assets/images/OE.Slide-30.png)\n\nExemple 3:\n\n![](/assets/images/OE.Slide-30-Ex3.png)![](/assets/images/OE.Slide-30-Ex3bis.png)\n\n> **Attention:** les algos nous donne un point critiques or ce point n'est qu'un candidat !\n\n\nExemple 4 :\n\n![](/assets/images/OE.Slide-31.png)\n\n![](/assets/images/OE.Slide-31-Ex4-01.png)\n![](/assets/images/OE.Slide-31-Ex4-02.png)\n\n> **Méthode:** VERIFIER si la hessienne est bien symmétrique !\n\n> Toute matrice de la forme $\\begin{bmatrix}a & b\\\\ b & 0\\end{bmatrix}$ aura toujours des valeurs propres de signes opposés quelque soit les signes de $a$ et $b$ !\n\n\n## B) Méthodes\n![](/assets/images/OE.Slide-32.png)\n\n### Méthode de recherche linéaire\n![](/assets/images/OE.Slide-33.png)\n\nDef - Direction de descente\n\n### Algo général\n![](/assets/images/OE.Slide-34.png)\n\n> Attention: Travailler avec des erreurs relatives et non pas absolus !\n\n### Thm du gradient\n![](/assets/images/OE.Slide-35.png)\n\n### Méthode du gradient\n![](/assets/images/OE.Slide-36.png)\n\n#### $\\alpha$ bien calibré\n![](/assets/images/OE.Slide-37.png)\n\n#### $\\alpha$ trop grand\n![](/assets/images/OE.Slide-38.png)\n\n#### $\\alpha$ trop petit\n![](/assets/images/OE.Slide-39.png)\n\n#### $\\alpha$ variable\n![](/assets/images/OE.Slide-40.png)\n\n#### $\\alpha$ optimal\n![](/assets/images/OE.Slide-41.png)\n\nExemple:\n\n![](/assets/images/OE.Slide-41-Ex.png)\n![](/assets/images/OE.Slide-41-Exbis.png)\n\n- On calcule le gradient de $f$\n- On détermine le pas suivant $\\quad x_{k+1} = x_k - \\alpha_k \\nabla f(x_k)$\n- On évalue alors $f$ en $x_{k+1}$\n- Il faut alors trouver $\\alpha$ en calculant $\\quad \\partial_{\\alpha_k}f(x_{k+1}) = 0$\n\n![](/assets/images/OE.Slide-42.png)\n\n#### Remarque\n![](/assets/images/OE.Slide-43.png)\n\n![](/assets/images/OE.BlackBoard.RemAlphaOptimal.png)\n\n### Conditionnment\n![](/assets/images/OE.Slide-44.png)\n\nOn cherche à avoir un nombre de conditionnement égal à 1.\n\nOr quand on inverse une matrice on obtient un det qui est proche de 0 ce qui rend la matrice mal conditionnée.\n\nDonc on va devoir faire un préconditionnement en otpimisant par un changement de variable pour éviter d'optimiser sur $f$.\n\n#### Exemple\n![](/assets/images/OE.Slide-45.png)\n\n#### Pas sur la longueur\n![](/assets/images/OE.Slide-46.png)\n\n> Première condition de Wolfe-Armijo (pas trop grand ?)\n\n> Seconde condition de Wofle (pas trop petit ?)\n\nEn général, les boites à outils implémente ces critères.\n\n#### Exemple\n![](/assets/images/OE.Slide-47.png)\n\n### Convergence globale\n![](/assets/images/OE.Slide-48.png)\n\n> Thm de Zoutendijk: convergence globale des algos de descente et pas de wolfe\n\nPb du thm: il est très difficile de prouver la condition du thm pour le moment.\n\nLes boites à outils sont des algos automatiques qui vérifient des conditions spécifiques.\n\n### Exemple: Méthode du Gradient\n![](/assets/images/OE.Slide-49.png)\n\n![](/assets/images/OE.Slide-49-Ex.png)\n\n![](/assets/images/OE.Slide-50.png)\n\n> Selon le point de départ on tombera sur un des points critiques, donc il faut lancer le programme sur plusieurs points.\n\n### Problématiques Quadratiques\n![](/assets/images/OE.Slide-51.png)\n\n### Gradient conjugué\n> **Attention:** cette méthode n'est à utiliser qu'avec des fonctions quadratiques !\n\n![](/assets/images/OE.Slide-52.png)\n\n![](/assets/images/OE.Slide-53.png)\n\n![](/assets/images/OE.Slide-54.png)\n\n![](/assets/images/OE.Slide-55.png)\n\n\n\n\n\n> Notes du 2022/09/07 - End\n\n---\n\n> Notes du 2022/09/08 - Start\n\n\n\n\n\n### Méthode de Newton\n\n![](/assets/images/OE.Slide-56.png)\n\n- En multidim on fait le dev limitee en fct du gradient\n\n![](/assets/images/OE.Slide-57.png)\n\nDef:\n\n- Direction de Newton:\n  $$\n  d_k = -\\Big(\\nabla^2 f(x_k)\\Big)^{-1}\\nabla f(x_k)\n  $$\n\n![](/assets/images/OE.Slide-58.png)\n\n![](/assets/images/OE.Slide58-Exo.png)\n\n\n- Ici nous avons convergé en une seule itération avec cette méthode\n\n![](/assets/images/OE.Slide-59.png)\n\nPb: cette méthode nécéssite de calculer la hessienne et de l'imverse -> pour éviter cela on utilise la **méthode de quasi-newton**\n\n> En commande optimale on va utiliser des matrices **sparces** [matrices creuses] (contenant des blocs sur la diag et des zéros ailleurs).\n\n### Méthode de quasi-Newton\n\n#### Approximation des dérivées\n![](/assets/images/OE.Slide-60.png)\n\n- Utilise une approximation de la dérivée\n\nDef:\n\n- **Equation sécante**\n  $$\n  d_{k-1} = x_k - x_{k-1}\n  $$\n- **Matrice Jacobienne** de $f:\\mathbb{R}^n \\to \\mathbb{R}^m$\n  $$\n  J\\big(f(x)\\big) = \n  \\begin{bmatrix}\n  \\big( \\nabla f_1(x) \\big)^T\\\\\n  \\vdots\\\\\n  \\big( \\nabla f_m(x) \\big)^T\\\\\n  \\end{bmatrix} \n  $$\n\n#### Idée de Broyden\n\n![](/assets/images/OE.Slide-61.png)\n\n- **Idée de Broyden**: minimiser le nombre d'itération en utilisation l'itération précédente pour ne pas tous calculer à nouveau\n- Pb: cette idée fonctione pour chercher le zéro d'une fonction mais pas pour le zéro d'un gradient car cette idée ne garantit pas du tout que $A_k$ reste symmétrique\n\n#### Broyden-Fletcher-Goldfarb-Shanno (BFGS)\n\n![](/assets/images/OE.Slide-62.png)\n\n### Moindres Carrés\n\n![](/assets/images/OE.Slide-63.png)\n\n![](/assets/images/OE.Slide-64.png)\n\n**Prop:**\n$$\n\\nabla f(x) = J^T(x) \\cdot r(x)\n$$\n$$\n\\nabla^2 f(x) = J^T(x) \\cdot J(x) + \\sum_{j=1}^m r_j(x) \\cdot \\nabla^2 r_j(x)\n$$\n\nRappel:\n- On cherche à trouver les zéros du gradient pour connaître les points critiques\n- Puis on cherche à calculer la hessienne\n- Dans le cas des moindres carrées, on a la chance que notre fonction peut s'écrire comme une somme de carrés car cela nous permet de connaître le gradient et la hessienne via la jacobienne\n\n#### Moindres Carrés Linéaires\n\n![](/assets/images/OE.Slide-65.png)\n\n#### Exercice: Cercle\n\n![](/assets/images/OE.Slide-66.png)\n\n1. Écrire l'équation du cercle $(a,b,R)$\n2. Définir le résidu\n3. Écrire le problème à minimiser\n4. Structurer ce problème de sorte de le rendre linéaire en faisant le bon choix de paramètres\n\n![](/assets/images/OE.Slide66-Exo.png)\n\n#### Moindres Carrés Pondérés\n\n![](/assets/images/OE.Slide-67.png)\n\n### Moindres Carrés Non-Linéaires\n\n#### Méthode de Gauss-Newton\n\n![](/assets/images/OE.Slide-68.png)\n\n- Idée: considérer négligeable la somme résiduelle dans le calcul de la hessienne dans la méthode de Newton\n\n**Prop:**\n$$\n\\nabla f(x) = J^T(x) \\cdot r(x)\n$$\n$$\n\\nabla^2 f(x) = J^T(x) \\cdot J(x)\n$$\nOn suppose  $\\sum_{j=1}^m r_j(x) \\cdot \\nabla^2 r_j(x) = 0$\n\n#### Advantages/Inconvénient\n\n![](/assets/images/OE.Slide-69.png)\n\n#### Exercice: Gauss-Newton\n\n![](/assets/images/OE.Slide69-Exo.png)\n\n\n\n\n> Notes du 2022/09/08 - End\n\n---\n\n> Notes du 2022/09/15 - Start\n\n\n\n\n#### Complément\n\n![](/assets/images/OE.Slide-70.png)\n\nMéthode de Gauss-Newton utile car nous evite de calculer les dérivées secondes mais certains algos (i.e. Levenberg-Marquardt) posent probleme avec cette methode (comme en Pereception 3D)\n\n\n\nCeci est dû que le probleme est mal posé (l'approximation de Gauss-Newton n'est pas valable gobalement) du coup on va essayer de **régulariser** ce problème (c.à.d. rajouter des contraintes aux CIs pour minimiser l'erreur d'approximation).\n\nCela implique de faire un choix du coup l'optimisation est **délicate*.*\n\n#### Methode de Tikhonov\n\n$$\n\\min \\frac{1}{2} ||Ax - b||^2 + \\frac{\\epsilon^2}{2}||F(x)||^2 \\quad \\text{avec la contrainte} \\quad F(x)=0\n$$\n\n#### Methode de Levenberg-Marquardt\n\n**Idée:** similaire à Newton mais sur un voisinage de $x$ avec une contrainte de voisinage dépendant à une **région de confiance**\n\n$$\n\\min \\frac{1}{2} ||\n$$\n\n![](/assets/images/OE.Slide-71.png)\n\n3 situations:\n- solution dans la région de confiance:\n  - Contrainte inactive\n  - $\\lambda = 0$\n  - on se retrouve avec Gauss-Newton\n- solution sur le bord de la région de confiance\n  - la matrice définie positive\n  !!!\n\n![](/assets/images/OE.Slide-72.png)\n\n# Part 3 - Optinimisation non linéaire avec contraintes\n\n![](/assets/images/OE.Slide-73.png)\n\n## A) Conditions théoriques\n\npoints admissibles: points respectent toutes les contraintes\n\ncontraintes actives: $g_j(x)\\leq0$\n  - active si $g_(x^*)=0$\n  - inactive si $g_(x^*)<0$\n\n![](/assets/images/OE.Slide-74.png)\n\n### Cone des directions & Contraintes linéairement indépendante (LICQ)\n\n![](/assets/images/OE.Slide-75.png)\n\n\n> $f(x)$ pour la fonctione étudié\n\n> $g(x)$ pour les contraintes d'inégalités\n\n> $h(x)$ pour les contraintes d'égalités\n\n### Optimisation avec contrainte égalité\n\n**Fonction lagrangienne** $L$\n\n$$\nL(x,\\lambda) = f(x) + \\lambda^t \\, h(x)\n$$\n\n![](/assets/images/OE.Slide-76.png)\n\n**Pourquoi rajouter le $\\lambda$ ?**\n\nOn souhaite minimiser le $x$ sous la contrainte que $x$ appartiennent à une surface $S_1$.\n\n$$\n\\min_{x\\in S_1} ||x|| = \\min f(x)\n$$\n\nSupposons que la surface est représentable par une contrainte d'égalité $h_1(x)$. On peut alors calculer son gradient.\n\nOn va utiliser le gradient de $h$ pour contraindre la minimisation de $f$ d'où l'intéret du $\\lambda$ vu qu'on va chercher à resoudre :\n\n$$\n\\nabla f \\pm \\lambda \\nabla h = 0\n$$\n\n<!-- OE.Slide76-Nota -->\n\n\n#### Thm KKT (Condition Necessaire Karush-Kuhn-Tucker)\n\n> pas une condition d'ordre 1\n\n![](/assets/images/OE.Slide-77.png)\n\n![](/assets/images/OE.Slide-78.png)\n\n#### Exemple\n\n![](/assets/images/OE.Slide-79.png)\n\n![](/assets/images/OE.Slide79-Ex-01.png)\n![](/assets/images/OE.Slide79-Ex-02.png)\n![](/assets/images/OE.Slide79-Ex-03.png)\n![](/assets/images/OE.Slide79-Ex-04.png)\n![](/assets/images/OE.Slide79-Ex-05.png)\n\n<!-- \nOE.Slide79-Ex01\n\nOE.Slide79-Ex02\n\n!!!\n\nOE.Slide79-GEA01\n\nOE.Slide79-GEA01\n-->\n\n#### Illustration de la direction admissible\n\nOE.Slide79-DirecAdmissible01\n\nOE.Slide79-DirecAdmissible02\n\n#### Exemple Bonus\n\n![](/assets/images/OE.Slide-80.png)\n\n> Solution Lundi\n\n#### Advantages de KKT\n\n> Resolution d'equations lineaires\n\n![](/assets/images/OE.Slide-81.png)\n\n> ATTENTION: sur un probleme réel $A$ n'est jamais carré !\n\n\n### Optimisation avec contrainte égalité et inégalité\n\n![](/assets/images/OE.Slide-82.png)\n\n#### Thm KKT Conditions Necessaires\n\n![](/assets/images/OE.Slide-83.png)\n\n> Attention: Ici $y\\neq0$\n\n#### Thm KKT Conditions Suffisantes\n\n![](/assets/images/OE.Slide-84.png)\n\n#### Exemple\n\n![](/assets/images/OE.Slide-85.png)\n\n![](/assets/images/OE.Slide-86.png)\n\n\n\n> Notes du 2022/09/15 - End\n\n---\n\n> Notes du 2022/09/19 - Start\n\n\n\n\n## B) Méthodes et algorithmes\n\n![](/assets/images/OE.Slide-87.png)\n\n> Problème très difficile !\n\n### Méthode du gradient projeté\n\n![](/assets/images/OE.Slide-88.png)\n\n![](/assets/images/OE.Slide-89.png)\n\n> La projection résoud un problème d'optimisation\n\n### Lagrangien augmenté\n\n![](/assets/images/OE.Slide-90.png)\n\nIdée: on resoud une probleme d'optimisation sans contrainte en espérant qu'à force toutes les contraintes sont respectées\n\nOn appele aussi cette technique une régularisation\n\n> Peut aussi s'appliquer aux contraintes d'inégalité\n\n![](/assets/images/OE.Slide-91.png)\n\n> Lagrangien augmenté =  on inclue les contraintes dans le lagrangien\n\n> On ne connait pas $\\lambda$ et $c$ (plus difficile de faire converger $\\lambda$ vers $\\lambda^*$)\n\n![](/assets/images/OE.Slide-92.png)\n\n> Attention: $\\tau>1$ dans $c_{k+1} = \\tau \\, c_k$\n\n> Au final l'optimisation avec contraintes se ramène aux contraintes sans contraintes\n\n\n\n\n> Notes du 2022/09/19 - End\n\n---\n","n":0.023}}},{"i":95,"$":{"0":{"v":"CR - Commandes Robots","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n---\n\n## Répartitions des parties de cours\n\n- Commande linéaire avancée\n  - Commande Robuste: D. Peaucelle\n  - Systemes Multivariables: F. Gouaisbaut\n- Commande de Robots: P. Danès\n- 1 TP noté avec F. Gouaisbaut\n\nSur le planning: si CR avec CLA, cela indique alors Commande Linéaire Avancé.\n\n\n# Cours Magistraux\n\n- [[CR.CM.DP]]\n- [[CR.CM.FG]]\n\n# Travaux Dirigés\n\n- [[FG TD2 - Forme Gilbert|CR.FG.TD2]]\n\n<!--\n# Travaux Pratiques\n\n- [[FG TP1 - Bac d'Eau|CR.FG.TP1]]\n- [[DP TP2 - Thm Stabilité Quadratique Normé|CR.DP.TP2]]\n-->\n\n# Examen\n\n## Commande Robuste\n\n- [CR.DP.Exam201202.SujetEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201202.SujetEtCorrection.pdf)\n- [CR.DP.Exam201302.SujetEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201302.SujetEtCorrection.pdf)\n- [CR.DP.Exam201402.SujetEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201402.SujetEtCorrection.pdf)\n- [CR.DP.Exam201409.RattrapageEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201409.RattrapageEtCorrection.pdf)\n- [CR.DP.Exam201502.SujetEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201502.SujetEtCorrection.pdf)\n- [CR.DP.Exam201609.Rattrapage.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201609.Rattrapage.pdf)\n- [CR.DP.Exam201610.SujetEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201610.SujetEtCorrection.pdf)\n- [CR.DP.Exam201706.RattrapageEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201706.RattrapageEtCorrection.pdf)\n- [CR.DP.Exam201710.SujetEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201710.SujetEtCorrection.pdf)\n- [CR.DP.Exam201806.Rattrapage.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201806.Rattrapage.pdf)\n- [CR.DP.Exam201810.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201810.Sujet.pdf)\n- [CR.DP.Exam201910.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam201910.Sujet.pdf)\n- [CR.DP.Exam202006.Rattrapage.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam202006.Rattrapage.pdf)\n- [CR.DP.Exam202010.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam202010.Sujet.pdf)\n- [CR.DP.Exam202110.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.Exam202110.Sujet.pdf)\n\n## Systèmes Multivariables\n\n- [CR.FG.Exam2015.Sujet.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.Exam2015.Sujet.pdf)\n- [CR.FG.Exam2015.Rattrapage.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.Exam2015.Rattrapage.pdf)\n- [CR.FG.Exam2017.Rattrapage.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.Exam2017.Rattrapage.pdf)\n- [CR.FG.Exam2020.Rattrapage.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.Exam2020.Rattrapage.pdf)\n\n\n\n# Support de Cours\n\n## Website\n\n**Source:** [https://homepages.laas.fr/peaucell/teaching.php](https://homepages.laas.fr/peaucell/teaching.php)\n\n### CM\n\n- [CR.DP.CM2019.Intro19.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM2019.Intro19.pdf)\n- [CR.DP.CM2019.LFT19.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM2019.LFT19.pdf)\n- [CR.DP.CM2019.Mu19.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM2019.Mu19.pdf)\n- [CR.DP.CM2019.PetiGain19.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM2019.PetitGain19.pdf)\n- [CR.DP.CM2019.Polytopes19.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM2019.Polytopes19.pdf)\n\n\n### TD\n\n- [CR.DP.TD2016.SujetEtCorrection.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.TD2016.SujetEtCorrection.pdf)\n\n\n## Scans\n\n### Blackbard\n\n- [CR.DP.CM.BB20220905.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.BB20220905.pdf)\n- [CR.DP.CM.BB20220912.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.BB20220912.pdf)\n- [CR.DP.CM.BB20220921.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.BB20220921.pdf)\n\n### GEA\n\n#### CM\n\n- [CR.DP.CM.NotesGEA.20220830.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.NotesGEA.20220830.pdf)\n- [CR.DP.CM.NotesGEA.20220905.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.NotesGEA.20220905.pdf)\n- [CR.DP.CM.NotesGEA.20220912.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.NotesGEA.20220912.pdf)\n- [CR.DP.CM.NotesGEA.20220921.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.NotesGEA.20220921.pdf)\n\n$\\ \\\\[-0.5cm]$\n\n- [CR.FG.CM.NotesGEA.20220831.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.CM.NotesGEA.20220831.pdf)\n- [CR.FG.CM.NotesGEA.20220907.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.CM.NotesGEA.20220907.pdf)\n- [CR.FG.CM.NotesGEA.20220920.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.CM.NotesGEA.20220920.pdf)\n\n#### TD\n\n- [CR.FG.TD2.NotesGEA.20220922.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.TD2.NotesGEA.20220922.pdf)\n\n\n\n\n### RKA\n\n- [CR.FG.TD2.Sujet.pdf !](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.TD2.Sujet.pdf)\n- [CR.DP.TD2.Sujet.pdf ?](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.TD2.Sujet.pdf)\n- [CR.FG.TP1.Sujet.pdf !](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.TP1.Sujet.pdf)\n- [CR.DP.TP2.Sujet.pdf !](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.TP2.Sujet.pdf)\n","n":0.082}}},{"i":96,"$":{"0":{"v":"FG","n":1}}},{"i":97,"$":{"0":{"v":"TD2","n":1},"1":{"v":"\n- [CR.FG.TD2.NotesGEA.20220922.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.TD2.NotesGEA.20220922.pdf)\n","n":0.707}}},{"i":98,"$":{"0":{"v":"CM","n":1}}},{"i":99,"$":{"0":{"v":"Systèmes Multivariables","n":0.707},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par F. Gouaisbaut\n\n# Objectif\n\nÉtudier des systèmes MIMO (Multi Input Multi Output)\n\nDécomposée en deux parties:\n  - Performances et robustesses\n  - Systèmes nominaux + modèles/réalisation commande\n\n- Système **réalisable** si (considérant un input output) peut-on déterminer un système d'espace d'état\n\n- souvent dans l'industrie les modèles sont déterminer par des physiciens et donc possède bcp de fonctions de transfert ce qui rend la command plus compliquée\n\n# Support de cours\n\n- [CR.FG.CM.NotesGEA.20220831.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.FG.CM.NotesGEA.20220831.pdf)\n- ...\n\n---\n\n\n\n\n> Notes Cours 08/31 - Start\n\n\n\n\n# I- Modélisation des Systèmes MIMO\n\n## 1) Rappel sur les Systèmes MIMO\n\n> Hyp: Les modèles considérés sont **linéaires**\n\nLes différents types de modèle :\n- fréquentiel vs temporelle \n  - classement selon la technique d'analyse voulu par après\n- Entrée/Sortie\n  - fonctions de transferts\n  - EDOs\n- Espace d'État\n\nCR.Cours0831.DiagModeles\n\n- EDO\n  - Transformé de Laplace $\\mathcal{L}$ oublie les CIs\n- G(p) (fct transfert)\n\n- EE\n  - difficile d'y entrer car création de variable ce qui est appelé la **réalisation**\n    - se fait à travers de la **forme modale** (Decomp. en éléments simple) ou la **forme de compagne** (approches polynomiales)\n  - facile de passer de EE à G ou EDO via la transformé de laplace\n\n## 2) Les modèles MIMO\n\n### 2.1) Les modèles E/S\n\n#### Les modèles temporels\n\nIls représentent des EDOs couplés entre les différentes entrées et sorites d'un système.\n\nConsidérant $m$ entrées, $p$ sorites, le modèle EDO s'écrit\n\nCR.Cours0831.Eq1\n\n**Rem:**\n- Le système est causal donc $s \\geq r$\n  - **Causalité** les effets ne peuvent pas précéder les causes\n  - si $s=r$ alors système directe (strict. causal)\n- il y a autant d'EDO que de sorties donc p EDO pour p sorties\n  - si plus d'EDO que de sorties alors on contraint trop le système qui peuvent passer de contraintes dynamiques à des contraintes algébriques (potentiellement)\n  - contraintes dynamiques = equations que les variables doivent respectées qui sont propres au système ($x_1= ax_2+b$)\n  - contraintes algébriques = fixer des variables ($x_1 = x_3 = 0$)\n\n- si pas assez d'EDO que de sorties alors l'unicité des solutions n'est pas assurée\n\n\nOn introduit l'opérateur différentiel: $D = \\dfrac{d}{dt}$\n  - donc si on écrit $D^k$ on comprend la composition D avec lui meme k fois\n\nCeci pour concaténer le modèle précédent dans un **modèle compact**\n\nCR.Cours0831.Eq2\n\nOn obtient un **modèle temporel E/S** :\n\n$$\nL(D) \\cdot y(t) = M(D) \\cdot u(t)\n$$\n\nExemple:\nCR.Cours0831.Ex1\n\n- $M(D)$ ne fait que combiner les entrées\n- $L(D)$ contient la dynamique du système\n- Méthode de résolution d'une EDO\n  - primo on se pose la question de l'ordre\n    - ceci nous permet de connaitre le nombre de CIs nécessaire à la résolution du systeme\n\nRem: Comment déterminer l'ordre grâce à $L(D)$\n- Si $L(D)$ est tri. inf./sup. et les degrés de D sur les colonnes sont croissant alors \n\n\npivot de gaus forme algo de la forme Lu\n\nLemme:\nCR.Cours0831.Lemme1\n\nThéorème:\nCR.Cours0831.Thm1\n\nDonc on pourrait avoir des situations où le degré est diminuer par le $det$ ce qui nous permettrez d'avoir besoin de moins de CIs.\n\nExemple:\nCR.Cours0831.Ex2\n\n- On a besoin que d'une CI sur l'une des deux entrées\n\n#### Les modèles fréquentiels\n\nLes modèles fréquentiels utilisent la transformée de laplace (partant par exemple d'EDO).\n\nDans le cas monovariable, le modèle s'écrit: $F(s) = \\dfrac{Y(s)}{\\;U(s)\\;}$\n\nDans le cas multivariable, le modèle s'écrit: $Y(s) = F(s) \\cdot U(s)$ avec $Y(s) \\in \\mathbb{C}^p[s]$ et $U(s) \\in \\mathbb{C}^m[s]$ donc $F(s) \\in \\mathbb{C}^{p\\times m}[s]$\n\nExemple:\n$$\nF(s) = \\begin{bmatrix} \\frac{1}{s+1}&\\frac{1}{s}\\\\ \\frac{1}{s+2}&\\frac{1}{(s+1)(s+2)}\\\\ \\end{bmatrix}\n$$\n\nDu coup, \n\nCR.Cours0831.\n\nMtnt que peut-on faire avec cette matrice F, on va chercher à :\n- définir l'ordre du modèle\n- définir les pôles\n  - important pour analyser la stabilité\n  - savoir bloquer les pertubations via les zéros\n    - mais attention si on factorise $F(s)$ on risque de créer des zéros artificiels et donc on peut changer la dynamique du système\n  - si mtnt on ajoute au Num et au Den un poly on se retrouve par imposer une nouvelle CI fictive qui sera ou pas observable\n\n##### Définitions (Ordre/Zéro/Pôles) d'une FT\n\n- si la matrice $F(s)$ est sous forme diagonale alors on peut facilement déterminer l'ordre/zero/pole\n- donc on va diagonaliser les matrices\n- MAIS comment diagonaliser des matrices non carrées ?!! => utiliser la forme SMITH\n\n\n\n\n> Notes Cours 08/31 - End\n\n---\n\n> Notes Cours 09/07 - Start\n\n\n\n\n##### Notion d'ordre/zéros/pôles pour une fonction de transfert\n\nConsidérons une fonction de transfert $F(s)\\in \\mathbb{R}^{p\\times m}$.\n\nSoit $\\psi(s) = ppcm(den(F_{ij}(s)))$.\n\nAinsi, $F(s) = \\dfrac{N(s)}{\\psi(s)}$ où $N(s)$ est une matrice polynomiale en $s$.\n\nCR.FG.Cours0907.ExemplePPCM\n\nDef: Forme de Smith\n\nIl existe $\\overline{u}$ et $\\overline{v}$ deux matrices unimodulaires (c.à.d. matrices polynomiales carrées ayant inverse polynomiale sans det=0) telles que \n\n$$\n\\overline{u}(s) N(s) \\overline{v}(s) = diag(\\alpha_1(s),...,\\alpha_r(s),0 \\dots 0)\n$$\n\noù $r=rang(N(s))$ et $\\alpha_i$ sont des polynomes invariants tels que\n\n$$\n\\alpha_i(s) = \\dfrac{\\Delta_i(s)}{\\Delta_{i-1}(s)}\n$$\n\navec $\\Delta_0(s)=1$ et $\\Delta_i(s)=pgcd\\Big(\\text{mineurs de la sous matrice de taille } i\\times i \\text{ de }N(s)\\Big)$\n\n> Mineur = determinant sous-matrice\n\n> Def (matricielle) du **rang**: la taille du mineur le plus grand ayant un determinant non identiquement nul\n\nDef: Forme de Smith-MacMiller\n\n$$\nF_{SM}(s) = \\overline{u}(s)\\;F(s)\\;\\overline{v}(s) = \\dfrac{1}{\\psi(s)} \\; \\overline{u}(s)\\;N(s)\\;\\overline{v}(s)\n$$\n\nLes modes du système sont les racines de $\\psi_i(s)$.\n\nLes zéros de transmission sont les racines de $\\epsilon_i(s)$.\n\nLe polynome caractéristique s'écrit $\\psi_1(s) \\dots \\psi_r(s)$.\n\n**Rappel:**\n\n- Les zéros servent à bloquer les pertubations et en mutlivariable on a plus de zéros\n\n- Il existe trois classes de zéros ceux d'entrées/sorties/transmissions.\n\n- Ceux d'entrées et de sorties bloquent tous modes en approchent.\n\n- Ceux de transmissions bloquent des fréquences spécifiques entre les transferts entre une entrée et une sortie.\n\n- Les zéros invariants sont une sous classes des zéros de transmissions.\n\n**Exemple:** (type examen) (conseils tj commencer par calculer le nombre d'entrée et de sorties)\n\nCR.FG.Cours0907.ExempleFormeSmithMacMillerRang\n\n1. Calculer le ppcm \n2. Calculer le rang\n\n    > Attention: on cherche si le polynome est toujours nul ! On ne recherche pas ici le rang peut ê au moins 1\n    les racines.\n\n    > Le polynome identiquement nul doit avoir tous ces coefficients nuls.\n\n    > Le rang d'une matrice non carrée ne peut pas ê plus grand que le min de sa taille.\n\n3. Calculer les delta\n\n    > Ne jamais déveloper $N(s)$\n\n    CR.FG.Cours0907.ExempleFormeSmithMacMillerDelta\n\n4. Calculer $F_{SM}(s)$\n\n    $$\n    F_{SM}(s) =\n    \\begin{bmatrix}\n    \\dfrac{1}{s(s+1)(s+2)} & 0\\\\\n    0 & \\dfrac{1}{s(s+2)}\\\\\n    0 & 0\n    \\end{bmatrix}\n    $$\n\n5. Calculer son polynome caractéristique\n\n    $P=s^2(s+2)^2(s+1)$\n\n6. Calculer les poles et les zéros\n\n    pôles $= \\{0,0,-2,-2,-1\\}$\n\n    zéros $= \\empty$\n\n\n**Rem:**\n- Sur cette exemple, on pourrait penser que l'espace d'état nécessite 6 états (mais on a que 2 états sont ni comble ni obsble) or la forme de smith nous permet de savoir qu'il existe un espace d'état à seulement 4 états tous comble et obsble.\n- Cependant il est très difficile de trouver ces états.\n- C'est plus facile de trouver des etats comble mais non obsble de meme que des etats non comble mais obsble. Avoir les deux est bcp plus durs.\n- Pb le système est influence par u et v or ce n'est pas autorise en espace d'etat vu qu'il ne sont pas constant or nous ne connaissons pas leurs derivees (donc leur comportements) ?\n\n\n# II- Réalisation sous forme d'E.E.\n\n**Exemple 1** \n\n$$\nG(s) = \\dfrac{1}{(s+1)(s+2)}\n$$\n\n1. Faire la décomposition en élément simple\n\n2. Exprimer $y(s)=G(s)\\;u(s)$\n\n3. Faire un changement de variable\n\n4. Écrire le système E.E.\n\nCR.FG.Cours0907.ExempleRealisation\n\n## II-1) La forme modale (forme de Guilbert)\n\n> On est sûr d'avoir comble et obsble avec cette forme.\n\nOn considère $F(s)$ et $\\psi(s) = ppcm(den(F_{ij}(s)))$.\n\n**Hyp:** $\\psi(s)$ admet des **racines simples** $\\quad \\psi(s) = \\prod_{i=1}^{n}(s-p_i)$ \n\nDonc $F(s) = \\dfrac{1}{\\psi(s)}\\;N(s) = \\dfrac{N(s)}{\\;\\prod_{i=1}^{n}(s-p_i)\\;}$\n\nLa décomposition en éléments simples \n$$\nF(s) = \\sum_{i=1}^{n}\\dfrac{N_i}{\\;s-p_i\\;}\n$$\noù $N_i = lim_{s\\rightarrow p_i} (s+p_i)\\;F(s)$\n\n**Exemple 2:**\n\nCR.FG.Cours0907.ExempleFormeModale\n\n1. Calculer le ppcm\n\n2. Factoriser avec le ppcm\n\n3. Faire la décomposition en elmts simples de chaque composant de la matrice\n\n4. Décomposer en cherchant la quantité\n\nDonc\n\n$$\ny(s)\n= \\sum_{i=1}^{n}\\dfrac{N_i}{\\;s-p_i\\;}\\;u(s)\n= \\sum_{i=1}^{n}X_i(s)\n$$\n\navec $N_i(s)\\in\\mathbb{R}^{p\\times m}$ et **ATTENTION** $X_i(s)\\in\\mathbb{R}^p$\n\nDu coup,\n\n$$\n\\dot X_i(t) = p_i\\;X_i(t) + N_i\\;u(t)\n$$\n\n$$\n...\n$$\n\n> ATTENTION: On vient d'utiliser trop d'états car les N_i ne sont pas forcément de rang plein !\n\n\n\n> Notes du 2022/09/07 - End\n\n---\n\n> Notes du 2022/09/08 - Start\n\n\n\n\n## II-2) Réalisation minimale\n\nPour obtenir une réalisation minimale, il faut étudier le rang des matrices résidus.\n\nSoit, $\\;\\rho_i = rang(N_i)\\;$ alors il existe $\\;C_i\\in\\mathbb{R}^{p\\times\\rho_i}\\;$ et $\\;B_i\\in\\mathbb{R}^{\\rho_i\\times m}\\;$ tel que $\\;N_i=B_i\\,C_i\\;$\n\nFinalement,\n$$\ny(s) = \\sum_{i=1}^{n}\\dfrac{\\;C_i\\,B_i\\;}{s-p_i}\\,u(s)\n$$\n\nAinsi, on pose $\\;x_i(s) = \\dfrac{B_i}{s-p_i}u(s) \\;\\in\\mathbb{R}^{\\rho_i}$\n\nOn en déduit le système suivant avec $1\\leq i \\leq n$:\n\n$$\n\\dot x_i(t) = p_ix_i(t) + B_i u(t)\n$$\n$$\ny(t) = \\sum_{i=1}^{n}C_ix_i(t) + D\n$$\n\nDont le nombre d'états est égal à la somme des $\\rho_i$ .\n\nCR.FG.Cours0908.systemeABCD\n\n> EXAMEN: $D\\neq0$ alors il faut faire la div eucli de la frac ratio\n\n**Thm:** Cette représentation est **minimale** !\n\n> **Repr. minimale** = nb minimale d'etats qui sont cmble et obsble \n\n## II-3) Réalisation sous forme compagne de commande par bloc\n\n**Exemple:** \n$$\nG(s) = \\dfrac{s+3}{\\;s^2+4s+8\\;}\n$$\n\n**Rem:** Forme Compagne de Commande\n- Dans la forme comp. de cmmde, on peut lire facilement le poly. caractéristique\n- Dans la forme comp. de cmmde, on sépare clairement le numérateur de la FT donc ça part dans C\n- Très liée aux variables du plan de phase donc aux dérivées de la chaine d'intégrateur\n- La difficulté est dans le numérateur donc récrire l'équation avec une variable intermédiaire $v(s)$\n\n1. Transformer $y(s)$ avec la variable intermédiaire $v(s)$\n2. Définir un plan de phase sur $v(s)$ en posant $\\;x_1(t) = v(t)\\;$ et $\\;x_2(t) = \\dot v(t)\\;$\n\nCR.FG.Cours0908.FormeCompABCDGS\n\n> Dès qu'on arrive au plan de phase, il n'est plus nécessaire de se preoccuper du rang car d'office tous ces etats sont forcément comble et obsble\n\n> Méthode de ? = Minimiser le nb de + et x \n\n## II-4) Cas général\n\nConsidérant $\\;G(s)\\in\\mathbb{R}^{p\\times m}\\;$ et $\\;G(s) = \\dfrac{1}{\\;d(s)\\;}N(s)\\;$, donc\n$$\ny(s) = \\dfrac{1}{\\;d(s)\\;}N(s)\\;u(s)\n$$\n\nOn va essayer de réaliser une forme compagne de commande pour chaque $u(s)$.\n\nOn pose \n$\\;N(s) = \n\\begin{bmatrix}\n  N_1(s) & \\dots & N_m(s)\n\\end{bmatrix}\\in\\mathbb{R}^{p\\times m}\\;$ et donc $\\;y(s) = \\sum_{i=1}^{m}y_i(s)\\;$ avec\n$$\ny_i(s) = \\dfrac{1}{\\;d(s)\\;}N_i(s)\\;u_i(s)\n$$\n\n> Forcément cmble car pour chaque entrée on crée un form comp cmde SISO\n\nSoit $\\;d(s) = s^n+a_{n-1}s^{n-1}+\\dots+a_o\\;$ et on pose $\\;v_i(s) = \\frac{1}{d(s)}u_i(s)\\;$.\n\nOn choisit \n$$\n\\left\\{\n  \\begin{array}{rcl}\n    x_{1i}(t) & = & v_i(t) \\\\\n    x_{2i}(t) & = & \\dot v_i(t) \\\\\n    &\\vdots&\\\\\n    x_{ni}(t) & = & v_i^{(n-1)}(t) \\\\\n\\end{array}\\right.\n$$\n\n$$\n\\dot X_i(t) = AX_i(t) + BU_i(t)\n$$\n\n$$\nA=\n\\begin{bmatrix}\n  0 & 1 & & \\\\\n  & \\ddots & \\ddots & \\\\\n  & & 0 & 1\\\\\n  -a_0 & -a_1 & \\dots & -a_{n-1}\n\\end{bmatrix}\n\\quad\\text{et}\\quad\nB=\n\\begin{bmatrix}\n  0\\\\\n  \\vdots\\\\\n  0\\\\\n  1\n\\end{bmatrix}\n$$\n\nOr $\\quad y(s) = N_i(s)v_i(s)\\quad$ donc on pose $\\quad N_i(s) = \\sum_{j=1}^{n}N_{ji}\\;s^{j-1}$\n\nDu coup, $\\quad y(t) = \\sum_{j=1}^{n}N_{ji}\\;x_{ji}(t)\\quad$ et\n$\\quad B=\n\\begin{bmatrix}\n  N_{1i} & \\dots & N_{ni}\n\\end{bmatrix}$\n\nOn répète l'opération pour les $m$ entrées et on somme les contributions des états sur les sorties.\n\nFinalement, on obtient $n\\times m$ états **commandables**.\n\nCR.FG.Cours0908.BlocDeFormCompCmde\n\n**Exemple:** MISO \n$$\nH(s) =\n\\begin{bmatrix}\n  \\dfrac{1}{\\;s\\;} & \\dfrac{1}{\\;s(s+2)\\;} & \\dfrac{1}{\\;(s+1)(s+3)\\;}\n\\end{bmatrix}\n$$\nQ1) Appliquer la méthode de Gilbert à $H(s)$\n\n1. Mettre sous la forme de smith\n2. Faire la decomposition matricielle en elmnts simple\n3. Poser $x_i(s) = N_i(s)u(s)$\n4. Remplir le système \n\n\nQ2) Appliquer la forme de compagne de commande à $H(s)$\n\n\n\n\n\n> Notes du 2022/09/08 - End\n\n---\n\n> Hors programme\n\n---\n\n> Notes du 2022/09/20 - Start\n\n\n\n\n> **RAPPEL:**\n  - CdC: placer les valeurs propres (pour fixer le régime transitoire)\n  - On cherche $k\\in\\mathbb{R}^{m\\times n}$ et $P_{A-Bk}(\\lambda) = P_{des}(\\lambda)$\n  - Or on a $mn$ inconnues et $n$ equations du coup on aura une infinité de solutions (en passant les $mn-n$ en paramètre)\n  - En faisant cela on peut:\n    - ???\n    - espace propre donne l'advantage de pouvoir se placer dans la direction d'un seul mode\n    - rejet total de perturbations (compliquer)\n      - place le mode??? dans le noyau de la matrice d'observation\n  - Ces methodes là ne sont pas très robustes car les espaces propres ne sont pas très robustes\n  - Pour rendre un système commandable il faut rajouter des actionneurs\n  - Forme compagne de commande utile car $A-Bk$ est encore sous forme de compagne (surtout en MIMO)\n    - comment se structure la matrice de commande A ?\n      CR.CM.FG.BB20220920\n    - première difficulté sera de trouver la taille des blocs\n\n# IV- Méthode d'une forme compagne de commande par blocs\n\nHypothèses:\n1. le système est commandable\n2. $rang(B) = m$ si ce n'est pas le cas on réduit le nombre d'actionneurs (en enlevant les colonnes redondantes)\n\nCette méthode ne dépend pas des changements de bases ni de ??? du coup on va introduire les indices de commandabilité\n\n**Def:**\n- **Indices de commandabilité**\n  \n  Pour $1\\leq j \\leq m$, l'indice de commandabilité $\\rho_j\\in\\mathbb{N}^*$ est le plus petit indice tel que $A^{\\rho_j}b_j$ est **linéairement dépendant** des colonnes situées à sa gauche dans la matrice de commandabilité ($b_j$ est la jème colone de B)\n\n- **Indices de commandabilité cumulés**\n\n  $$\n  G_i = \\sum_{j=1}^{i} \\rho_j \\quad\\text{avec}\\quad G_1 = \\rho_1 \\quad\\text{et}\\quad G_m=n\n  $$\n\n**Apparté:**\n\n$$\nx(k+1) = Ax(k) + Bu(k) \\quad\\text{avec}\\quad x(0) = 0 \\\\\\text{donc}\\quad x(1) = Bu(0) \\quad\\text{puis}\\quad x(2) = ABu(0)+Bu(1)\n$$\n\nCR.CM.FG.ExempleIndicesCmblite\n\nEn discret on peut montrer que en $n$ coup on peut atteindre tous l'espace de commande (cette méthode s'appelle la **commande à n coups** ou à p coups)\n\nMtnt on va vouloir réorganiser les colonnes de la matrice de commandabilité pour grouper les vecteurs directeurs des actionneurs\n\nPour ce faire, il nous faut calculer une matrice de changement de base:\n\n1. On extrait de la matrice de commandabilité, une matrice inversible suivante : \n$$\n\\mathcal{C}_{co} = \n\\begin{bmatrix}\n  b_1 & Ab_1 & \\dots & A^{\\rho_1-1}b_1 & \\dots & b_m & \\dots & A^{\\rho_m-1}b_2\n\\end{bmatrix}\n$$\n\n2. On calcule son inverse\n\n3. ...\n\n> la matrice B est triangulaire supérieure\n\nProblème la matrice possède encore des $\\beta_{ij}$ que l'on cherche à ecarter, pour ce faire nous allons changer l'entrée en utilisant un pré-compensateur matriciel\n\n> Ce rajout de précompensateur est plus utile en MIMO qu'en SISO par sa structure matricielle\n\n$$u' = Ru \\quad\\text{et}\\quad B_{cc} = B_c R$$\n\nLa question qui reste à resoudre serait alors d'assurer qu'on puisse trouver $R$ tel que $B_{cc}$ \n\nCela revient à resoudre l'équation suivante :\n$$\nB_{cc} = B_c R \\quad\\text{soit une equation de la forme}\\quad AX=Y \\\\\\quad\\text{solvable au sens des moindres carrés par}\\quad X=(A^TA)^{-1}A^TY\n$$\n\n> Attention: $AX=Y \\Longrightarrow A^TAX=A^TY$ ceci n'est pas une équivalence (c'est la différence principal de cette astuce p.r.à celle liée à l'inversion de matrice)\n\n> Projection selon la norme adapté au probleme (exemple de la balade le long du Tarn avec la norme 2 ou de l'Hudson avec la norme 1 [aussi appelé __the taxi cab norm__])\n\n...\n\n\nOn choisit $k_{ij}=\\tilde{a}_{ij}$ pour obtenir une matrice diagonale par blocs dont on connait le polynome caractéristique","n":0.021}}},{"i":100,"$":{"0":{"v":"Commande Robuste","n":0.707},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par D. Peaucelle\n\n# Support de cours\n\n- [CR.DP.CM.BB20220905.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.BB20220905.pdf)\n- [CR.DP.CM.BB20220912.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.BB20220912.pdf)\n- [CR.DP.CM.BB20220921.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.BB20220921.pdf)\n\n$\\ \\\\[-0.5cm]$\n\n- [CR.DP.CM.NotesGEA.20220830.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.NotesGEA.20220830.pdf)\n- [CR.DP.CM.NotesGEA.20220905.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.NotesGEA.20220905.pdf)\n- [CR.DP.CM.NotesGEA.20220912.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.NotesGEA.20220912.pdf)\n- [CR.DP.CM.NotesGEA.20220921.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/CR.DP.CM.NotesGEA.20220921.pdf)\n\n---\n\n\n\n# Notes 2022/08/30 - D.P.\n\n![](/assets/images/CR.SchemaBlocMultiVariab.png)\n\n- Système dynamique (processus biochimique/robot)\n- entrée u est placée à droite car représente alors la forme en équation du système\n\n![](/assets/images/CR.SchemaBlocPerturbation.png)\n\n- système exposé à des perturbations/bruits sur l'entrée, la sortie ou la dérivée\n\n- cest pertubations vont faire travailler le correcteur beaucoup\n\n- robustesse c'est savoir garantir une certaine stabilité malgré des perturbations mais aussi le garantir sachant l'incertude du système\n\n- BF toujours plus stable que la BO\n  - Boucle ouverte = fermer les yeux\n  - Boucle fermée = ouvrir les yeux quand on cherche une salle\n\n## Problématique:\n\nComment commander un système avec de grandes incertudes de modélisation\n\n## Exemple: Incertitudes Multi/Addi\n\n$$\n\\dfrac{1}{\\;s^2 + 2 \\zeta \\omega_n s + \\omega_n^2\\;}\n$$\n\navec $\\quad0,8\\leq\\zeta\\leq1,2\\quad$ et $\\quad3\\leq\\omega_n\\leq7$\n\n![](/assets/images/CR.SchemaBlocIncertitudeMultiAddit.png)\n\n- pour définir la notion de \"proche\" on utilise la **norme H infinie**\n\n## Exemple: Système d'ordre 1\n\nTrouver $a \\in \\mathbb{R}$\n$$\n\\dot x = a \\cdot x\n$$\n\n- On regarde le polynome caractéristique\n$$\nP_a(s) = s - a\n$$\n\n- Les racines de $P_a(s)$ sont toutes à partie réelle négative alors le système est stable si $a<0$\n\n- Si Hyp: $\\underline{a} \\leq a \\leq \\overline{a}$ alors système robustement stable si $\\overline{a}<0$\n\n## Exemple: Système du 2ème ordre\n\nDéterminer $A$\n$$\n\\dot X = \\begin{bmatrix} a_{11} & a_{12}\\\\ a_{21} & a_{22}\\\\ \\end{bmatrix} \\cdot X\n$$\n\n- On regarde le polynome caractéristique\n\n$\nP_A(s) = s^2 - Tr(A) + det(A)\\\\\nP_A(s) = s^2 - \\big(a_{11} + a_{22}\\big) + \\big(a_{11}a_{22} - a_{12}a_{21}\\big)\n$\n\n- ici on veut du coup que les racines respectent:\n  - $\\lambda_1 + \\lambda_2 < 0\\quad$ et\n  - $\\lambda_1 \\cdot \\lambda_2 > 0$\n\n- du coup cela revient à vérifier le critère de Root-Hurwitz\n\n- ainsi on en déduit les formules suivantes:\n\n![](/assets/images/CR.SystOrdre2.png)\n\n## Exemple: Système du 3ème ordre\n\n![](/assets/images/CR.SystOrdre3.png)\n\n- le poly caract peut se calculer avec $\\alpha$ déterminer via les mineurs de la matrice A\n\n- à l'ordre 3 la combinatoire sur les incertitudes de tous les $a_{ij}$ devient très vite difficile\n\n- si l'on continue quand même on peut appliquer le critère de Root-Hurwitz sur $\\alpha_1$, $\\alpha_2$ et $\\alpha_3$, on obtient alors :\n\n![](/assets/images/CR.SystOrdre3Root.png)\n\n- Admettons que l'on obtiennent un poly caractéristique avec la structure suivante:\n\n$$\ns^3 + (1+\\delta_1)s^2 + (1+\\delta_2)s + (1+\\delta_1\\delta_2)\n$$\n\n- en considérant mtnt l'hypothèse:\n  - $0,1\\leq\\delta_1\\leq3$\n  - $0,1\\leq\\delta_2\\leq3$\n\n- vérifions si ce poly possède des racinces à partir réelle négative\n\n![](/assets/images/CR.SystOrdre3Verif.png)\n\n- Mais attention ! ici on a que deux incertitudes sont dépendantes du coup le système avec $\\delta$ nous donne des solutions sur un ensemble plus grand que notre système avec $\\alpha$\n\n![](/assets/images/CR.SystOrdre3SousEnsembles.png)\n\n- En effet, il y a dans P2 des polynomes avec des racines à parties réelles positives\n\n- Pour poursuivre on applique Root sur P1 (donc sur les $\\delta$ en oubliant les $\\alpha$)\n\n![](/assets/images/CR.SystOrdre3DeltaRoot.png)\n\n## Convexité d'un espace\n\n![](/assets/images/CR.Convexite.png)\n\n## Critère Général pour P2\n\n![](/assets/images/CR.Xaputohob.png)\n\nXaputohob a considéré la structure de P2 pour un ordre n qlqc et il a cherché s'il existe un critère pour résoudre la question de stabilité\n\nOr il y a $2^{n+1}$ combinaisons des min et max possible\n\nMais on connait 4 polynomes assurant une stabilité robuste\n\n## Contre Exemple\n\n![](/assets/images/CR.ContreExemple.png)\n\n- Lorsque le système varie dans le temps alors il ne fait aucun sens d'appliquer la méthode du polynome caractéristique avec des racines à parties réelles négatives\n\n- Pourquoi ?\n\n![](/assets/images/CR.ContreExempleExplication.png)\n\n- Solution: Utiliser Lyapunov et Espace d'état\n\n## Exemple: Lyapunov\n\n![](/assets/images/CR.FctLyapunov.png)\n\n\n# Notes 2022/09/05 - D.P.\n\n## Bornée une incertitude\n\n### Equation vers Figure\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-01.Rappel.png)\n\nOn veut créer un objet incertain qui qppqrtient dans un interval: $A(\\delta) \\in \\mathbb{R}^{n \\times n}$\n\nOn commence avec un scalaire $a \\in \\mathbb{R}^{1 \\times 1}$$\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-02.IncertitudeScalaire.png)\n\n\n- combinaison linéaire convexe\n- convexe car $\\zeta\\geq0$ \n\n\nOn vient d'exprimer comment visualier un scalaire incertain dans un interval\n\n\nMaintenant on veut faire de même pour des matrices\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-03.png)\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-04.png)\n\n\n- $0 \\leq \\vartheta_i \\leq 1$\n\nOn représente une forme geom qui graphiquement donne\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-05.png)\n\n### Figure vers Equation\n\nMaintenant essayons de faire l'inverse et d'écrire une representation geom du triangle suivant :\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-06.png)\n\n- $Co\\{s_1,...,s_n\\}$ : **ensemble convexe des sommets** $s_1,...,s_n$\n\n\n## Polytopes\n\n- **Interval** dim 1\n\n- **Polygone** dim 2\n\n- **Polyhedre** dim 3\n\n- **Polytope** dim general\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-07.png)\n\n## Identification d'espace incertain\n\nOn réalise des mesures et après un certain nombres, on étudie toutes les combinaisons linéaires convexes de ces points pour trouver la combinaison qui englobe tous les points.\n\nPb: très couteux en calcul (surtout pour des dims grandes)\n\n### Exemple \n\n\nConsidérant le système suivant :\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-08.png)\n\nAvec :\n- **coef d'amortissement :** $1/2 \\leq \\zeta \\leq 3/2$ \n- **pulsation naturelle :** $3 \\leq \\omega_n \\leq 7$\n\nOn obtient la figure suivante :\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-09.png)\n\nOr on constate qu'il ne s'agisse pas d'un polytope convexe\n\nDu coup on va considére des envelopes convexes de cette espace\n\nCeci pour analyser la stabilité de ces envelopes en espérant trouver une qui soit stable et donc conclure que le système contenu dans l'envelope est lui aussi stable\n\nUne envelope naturelle est de prendre le grand rectangle. Il contiendra trop de points mais sa construction est simple.\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-10.png)\n\n\n### Autres Exemples\n\n> HOMEWORK (Still ToDo)\n\nConstruire les polytopes des systèmes suivants :\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-11.png)\n\n## Condition Nécessaire: Stabilité des Sommets\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-12.png)\n\nComme ce n'est pas une condition suffisante, il nous suffit de chercher un contre-exemple.\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-13.png)\n\n- Ici on considère deux sommets qui sont tous les deux stables et on montre qu'il existe une combinaison linéaire de ces deux sommets qui n'est pas stable\n\n- En effet on a un polytope construit sur deux sommets stable n'est pas nécessairement stable.\n\n## Thm: Stabilité Quadratique\n\n> Formulé initialement par Barnish et Bernussou\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-14.ThmStabQuad.png)\n\n> Ceci n'est qu'une **Condition Suffisante** !\n\nCe thm encadre aussi les temps variants !\n\n### Def:  Matrice Définie Positive\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-15.DefDefiniePositive.png)\n\nRappel: De cette définition on est tempté de construire une fct de Lyapunov tel que $V(x) = x^T \\cdot P \\cdot x$\n\n### Preuve: Inégalité Matricielle\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-16.png)\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-17.png)\n\n### Exemple\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-18.png)\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-19.png)\n\n> Une **matrice est définie négative** si sa **trace est négative** et son **det est positif**\n\n### Autre formulation du Thm\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-20.png)\n\nDonc il faut vérifier la stabilité pour chaque point du polytope... donc pour une infinité de points...\n\nCette formulation n'est clairement pas réalisable !\n\n\n## Thm: Stabilité Robuste et Retour d'état\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-21.png)\n\nAstuce:\n![](/assets/images/CR.DP.CM.BlackBoard.20220905-22.png)\n\n\n\n# Notes 2022/09/12 - D.P.\n\n## Exemple avec Matlab\n\nOn reprend l'exepmle dernier sur matlab pour l'analyser plus rapidement\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-01.png)\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-02.png)\n\n\n- $P\\leq0$ = semi-positive (i.e. autorise une valeur propre egal a zero)\n\n- $P>0$ = positive strict. peut aussi s'ecrire $P>\\epsilon$\n\n\n### Matlab Toolbox\n\n- [YALMIP](https://yalmip.github.io/download)\n  - aller à `SetPath` puis Select et penser à `AddWithSubfolders`\n  - permet de poser nos problèmes avec une ecriture matricielle mais necessite quand meme un solver\n\n- Solvers\n  - [YALMIP allsolvers](https://yalmip.github.io/allsolvers)\n  - [SDPT3](https://github.com/SQLP/SDPT3)\n  - [blog SDPT3](https://blog.nus.edu.sg/mattohkc/softwares/sdpt3/)\n\n\n### Code Matlab\n\n```matlab\n% Definition  des sommets\nA(:,:,1)=[0 1;-49 -21];\nA(:,:,2)=[0 1;-49 -3];\nA(:,:,3)=[0 1;-9 -3];\nA(:,:,4)=[0 1;-9 -21];\n\nvb = 4;\n\n% pt au hazard dans le polytope\nz=rand(1,4);\nz=z/sum(z); % verifier que la sum(z(i)) = 1\nAz=z(1)*A(:,:,1)+z(2)*A(:,:,2)+z(3)*A(:,:,3)+z(4)*A(:,:,4);\neig(Az); % verifer si nos sommets sont stables\n% Construction des LMI pour le polytope\nP=sdpvar(2,2,'symmetric')\nquiz=[P>=eye(2)];\nfor v=1:vb\n  quiz=quiz+[A(:,:,v)'*P+P*A(:,:,v)<=-eye(2)]\nend % retourne un tableau avec 5 contraintes une pour P et 4 pour les sommets\n\n% Resolution\nres=optimize(quiz)\n% Analyse du resultat\ncheckset(quiz)\n% Si faisable obtention du resultat\ndouble(P)\n```\n\n### Conclusion\n\n- le rectangle rouge ne donne pas de solution\n- le sous espace jaune lui donne une solution\n\n$$\nP=\n\\begin{bmatrix}\n51.5100 & 3.437\\\\\n3.477 &  2.4699\n\\end{bmatrix}\n$$\n\n## Normes\n\n### Norme euclidienne\n\n$x\\in\\mathbb{C}^n$\n\n$$\n||x||_2^2 = \\sum|x_i|^2 = x^*x = x^*\\mathbb{I}x\n$$\n\nIci, $x^* = \\overline{x}^T$ le **conjugé transposé**\n\n### Norme induite L2\n\n$M\\in\\mathbb{C}^{p \\times n} \\quad \\quad y = Mu$\n\n$$\n||M||_2^2 = sup\\{\\dfrac{||y||_2^2}{\\;||u||_2^2\\;} \\;|\\; ||u||_2 \\neq 0\\}\n$$\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-03.png)\n\n\n\n$M^*M$ sym donc diag sur une base orthonormale donc on peut l'ecrire $T^*DT$ avec $T^*T = \\mathbb{I}$ et $D=diag(\\lambda(M^*M))$ \n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-04.png)\n\nOr il se trouve que la pire des amplifications est donnée par $\\lambda_{max}(M^*M)$\n\n$$\n||M||_2^2 = \\sigma_{max}(M)^2\n$$\n\noù $\\sigma_{max}(M)$ = la **valeur singulière** max de $M$\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-05.png)\n\nIl se trouve que $u=(1,1)^T$ est la valeur propre de $M$ c'est pourquoi on avait aussi trouvé $4$\n\n### Signaux\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-06.png)\n\n$X(s) = \\int_0^{\\infin} \\; x(t)e^{-st} \\; dt$\n\n$$\n||x||_2^2 =\n\\int_0^{\\infin} \\; ||x(t)||_2^2 \\; dt =\n\\int_{-\\infin}^{\\infin} \\; ||x(j\\omega)||_2^2 \\; d\\omega =\n||X||_2^2\n$$\n\n### Norme induite L2 d'un système NL\n\n> Pour les systèmes linéaire, la norme induite L2 est appelée la **norme** $H_{\\infin}$\n\n$$\n||H||_2^2 = sup\\{ \\dfrac{||y||_2^2}{\\;||u||_2^2\\;} \\;|\\; ||u||_2 \\neq 0 \\;\\wedge\\; x(0)=0 \\}\n$$\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-07.png)\n\n> **Attention:** lorsqu'on applique le laplace il faut toujours considérer des conditions initiales nulles\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-08.png)\n\n$H^*H$ = module de la FT = Gain\n\n```matlab\nH=ss;\n% tracer de ses valeurs sing\nsigma(H)\n% \nwcgain(H)\n\n.... !!!!\n\n% decale de +0.001 car on veut que le produit soit strict. plus petit que 1 et pas egal a 1\n% feedback de - D\n```\n\n## Thm du Petit Gain\n\n### Condition Suffisante\n\nSi $\\; ||H||_2^2 < \\sigma^2 \\;$ alors la Boucle Fermée suivante est **robustement stable** quelque soit $\\;\\Delta \\;$ tel que $\\; ||\\Delta||_2^2 \\leq \\dfrac{1}{\\;\\sigma^2\\;} \\;$\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-09.png)\n\n### Condition Nécessaire\n\nSi $\\; ||H||_2^2 < \\sigma^2 \\;$ alors il existe $\\;\\Delta \\;$ tel que $\\; ||\\Delta||_2^2 \\leq \\dfrac{1}{\\;\\sigma^2\\;} \\;$ tel que la Boucle Fermée est \"**instable**\" (en limite de stabilité)\n\n**Attention:** Cela ne signifie pas que si pour tous $\\Delta$ on a $\\; ||\\Delta||_2^2 \\leq \\dfrac{1}{\\;\\sigma^2\\;} \\;$ la boucle fermée est instable\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-10.png)\n\n### Code Matlab\n\n#### Test Worst Case\n\nPour taper sur la pire amplification\n- on tappe sur la valeur propre concernee\n- ca donne une matrice de rang 1 (car une seule valeur propre)\n- boucle fermee \n  - elle est 'presque' stable\n  - mais tres proche de zero\n\n```\nl32 - l38\n```\n\n#### Test Matrice de norme 1\n\nDonne un systeme 'carrément' stable\n\n```\nl38 - l41\n```\n\n### Exemple Processus Biochimique\n\n> Conseil: donner des indices sur les matrices selon si elles correspondent à une entrée, une sortie ou un $\\Delta$\n\nImaginons un processus biochimique pour nettoyer les eaux usées\n\nCelui-ci dépendrait donc de la température et serait exposée à des incertitudes\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-11.png)\n\nOn cherche à controler ce processus donc on y implémente un correcteur\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-12.png)\n\nPour analyser sa stabilité, on va utiliser le **thm du petit gain**\n\nPour cela il nous faut transformer le schema bloc en y incluant $H$\n\nOr, on a :\n$$\nU = K(y+w_{\\Delta})\n$$\n$$\nU = KC_yX + Kw_{\\Delta}\n$$\n\nDonc,\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-13.png)\n\n\n**Par le thm du petit gain:**\n\nSi $||H||_2^2<\\dfrac{1}{\\;\\mu^2\\;}$ alors le système est **robustement stable**\n\n\n**Comment vérifier cette égalité ?**\n\n- En prenant sa fonction de transfert => Pb le système est temps variant donc on n'est pas autorisé à faire cette transformation\n- On ne pourrait meme pas utiliser la norme $H_{\\infin}$ a la limite on pourrait appliquer la norme induite L2\n- Nous allons pour cela utiliser le thm suivant :\n\n### Thm de Stabilité Quadratique pour une norme induite L2\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-14.png)\n\n#### Preuve\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-15.png)\n\n![](/assets/images/CR.DP.CM.BlackBoard.20220912-16.png)\n\n\n\n\n\n> Notes du 2022/09/12 - End\n\n---\n\n> Notes du 2022/09/21 - Start\n\n\n\n<!-- # Notes 2022/09/21 - D.P. -->\n\n**Rappel:**\n\n$$\n||M||_{\\infin} = ||M||_{2} < \\sigma^2\\\\ \\Longleftrightarrow \\;\\text{la boucle fermée est robustement stable}\\; \\forall \\Delta \\;\\text{tq}\\; ||\\Delta||_{2}^{2} \\leq \\frac{1}{\\;\\sigma^2\\;}\n$$\n\n\n#### Exemple d'utilisation\n\n![](/assets/images/CR.DP.CM.BB20220921-01.png)\n![](/assets/images/CR.DP.CM.BB20220921-02.png)\n![](/assets/images/CR.DP.CM.BB20220921-03.png)\n\n### Cas Général\n\n**Notation:**\n- $D_{\\Delta u}$ le transfert entre $z_{\\Delta}$ et $u$\n- $D_{\\Delta }$ le transfert entre $z_{\\Delta}$ et $u$\n\n![](/assets/images/CR.DP.CM.BB20220921-04.png)\n![](/assets/images/CR.DP.CM.BB20220921-05.png)\n\nLe problème de savoir si $(\\mathbb{I}-D_{\\Delta\\Delta}\\Delta)$ est inversible c'est le _**\"problème du bien posé\"**_ (c.a.d. que si elle n'est pas inversible alors c'est un système qui possede une infinité de solutions et a priori une infinité de points d'équilibre donc il ne fait plus de sens d'étudier leurs stabilité ; on aimerait plutôt avoir un point d'équilibre unique).\n\n![](/assets/images/CR.DP.CM.BB20220921-06.png)\n\n**Rem:** on peut voir $\\Delta(\\mathbb{I}-D_{\\Delta\\Delta}\\Delta)^{-1}$ comme une **fraction rationnelle matricielle**\n\nCeci nous rappelle la matrice fractionnelle en $s$ comme suit\n\n![](/assets/images/CR.DP.CM.BB20220921-07.png)\n\nIci, le $\\Delta$ du cas général est représenté par l'intégrateur en $s$\n\nAutre exemple, on peut aussi représenter $\\Delta$ par un correcteur $K$ comme suit\n\n![](/assets/images/CR.DP.CM.BB20220921-08.png)\n\n\n## LFT - Linear Fractional Transform\n\n![](/assets/images/CR.DP.CM.BB20220921-09.png)\n\n> **Une représentation d'espace d'états est une LFT !**\n\n**Exemple:** De LFT vers la forme fractionnelle de $\\Delta$\n\n![](/assets/images/CR.DP.CM.BB20220921-10.png)\n![](/assets/images/CR.DP.CM.BB20220921-11.png)\n![](/assets/images/CR.DP.CM.BB20220921-12.png)\n\n**Pb:** Construire une LFT à partir de forme fractionnelle est bcp plus dur (mais comme $\\Delta\\star M$ représente une algèbre du coup les ordinateurs arrivent à se débrouiller pour trouver une LFT)\n\n### Formule pour l'addition\n\n![](/assets/images/CR.DP.CM.BB20220921-13.png)\n![](/assets/images/CR.DP.CM.BB20220921-14.png)\n\nDu coup, par exemple pour $\\left[ \\delta_1 \\; \\delta_2 \\right]$ on peut l'écrire ainsi\n\n![](/assets/images/CR.DP.CM.BB20220921-15.png)\n\nPour mieux comprendre comment passer du matricielle à une structure avec le produit LFT voici un autre exemple d'égalité:\n\n![](/assets/images/CR.DP.CM.BB20220921-16.png)\n\nEn effet, on essaie de faire apparaître la structure de la formule de la LFT comme suit pour utiliser le produit LFT\n\n$$\nTODO!!!\n$$\n\n### Formule LFT pour la soustraction\n\n![](/assets/images/CR.DP.CM.BB20220921-17.png)\n\n### Formule LFT pour la multiplication\n\n![](/assets/images/CR.DP.CM.BB20220921-18.png)\n\n### Formule LFT pour la division\n\n![](/assets/images/CR.DP.CM.BB20220921-19.png)\n\n### Exercice\n\n#### Cas Fonction Transfert\n\nOn considère le système suivante :\n![](/assets/images/CR.DP.CM.BB20220921-20.png)\n\nOn obtient l'équation suivante :\n![](/assets/images/CR.DP.CM.BB20220921-21.png)\n\nDonc, on en déduit que :\n![](/assets/images/CR.DP.CM.BB20220921-22.png)\n\nAinsi, on peut construire la boucle fermée suivante :\n![](/assets/images/CR.DP.CM.BB20220921-23.png)\n\n#### Cas Matriciel\n\nOn considère le système matriciel suivant :\n![](/assets/images/CR.DP.CM.BB20220921-24.png)\n\nPour se débarasser de $\\frac{\\delta}{\\;1+\\delta\\;}$, on va multiplier à gauche $\\dot x$ par une matrice comme suit :\n![](/assets/images/CR.DP.CM.BB20220921-25.png)\n\nOn cherche mtnt à extraire $w_{\\Delta}$ comme suit :\n![](/assets/images/CR.DP.CM.BB20220921-26.png)\n\nCeci pour ensuite trouver $z_{\\Delta}$ comme suit :\n![](/assets/images/CR.DP.CM.BB20220921-27.png)\n\nAinsi, on obtient le système suivant :\n![](/assets/images/CR.DP.CM.BB20220921-28.png)\n\n#### Cas Equation Dynamique\n\nConsidérons le contexte suivant :\n![](/assets/images/CR.DP.CM.BB20220921-29.png)\n\nTout d'abord, ramenons-nous à des inéquations d'incertitude tel qu'on impose $\\delta_i\\leq1$ :\n![](/assets/images/CR.DP.CM.BB20220921-30.png)\n\nLa deuxième étape consiste à faire apparaître les $W_{\\Delta}$ comme suit\n![](/assets/images/CR.DP.CM.BB20220921-31.png)\n\nOn cherche à appliquer le théorème du petit gain comme suit :\n![](/assets/images/CR.DP.CM.BB20220921-32.png)\n\nAinsi, on obtient le système suivant :\n![](/assets/images/CR.DP.CM.BB20220921-33.png)\n\n> N.B.:\n- La **théorie de la valeur singulière structuré** $\\mu$ c'est l'équivalent du thm du petit gain mais prenant compte la structure du $\\Delta$\n- Cela prend en compte la partie diagonale de delta et on adapte le critère mais on ne sait pas calculer $\\mu$ de façon exacte\n![](/assets/images/CR.DP.CM.BB20220921-34.png)\n\n\n\n> Notes du 2022/09/21 - End\n\n---","n":0.022}}},{"i":101,"$":{"0":{"v":"COOSATR - Conception Orientee Objet","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\n---\n\n# À Retenir\n\n- ...\n\n# Cours Magistraux\n\n- [[Introduction|B1.COOSATR.Intro]]\n- [[Cours 101|B1.COOSATR.COO101]]\n- [[Exemple GitHub|B1.COOSATR.GitHubExemple]]\n- [[Outils|B1.COOSATR.Outils]]\n- [[Code Management|B1.COOSATR.CodeMngmt]]\n- [[Forges Git|B1.COOSATR.GitForges]]\n\n# Travaux Pratiques\n\n- [[Preparation des TPs|B1.COOSATR.PrepTP]]\n- [[TP1 - Connect4|B1.COOSATR.TP1]]\n\n# Support de Cours\n\n## Gitlab Talks\n\n### CM\n\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n\n- [[COOSTART.BackUpTalks20221001.coo-intro]]\n- [[COOSTART.BackUpTalks20221001.coo-101]]\n- [[COOSTART.BackUpTalks20221001.coo-outils]]\n- [[COOSTART.BackUpTalks20221001.containers]]\n- [[COOSTART.BackUpTalks20221001.git-forges]]\n- [[COOSTART.BackUpTalks20221001.howto]]\n- [[COOSTART.BackUpTalks20221001.modern-cmake]]\n- [[COOSTART.BackUpTalks20221001.python-tooling]]\n- [[COOSTART.BackUpTalks20221001.tooling]]\n\n\n### TD\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### TP\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n## Scans\n\n### Blackbard\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n### GEA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n### RKA\n\n- [filetitle](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/filetitle)\n\n\n\n# Support de Cours\n\n- [conception-orientee-objet-intro.pdf](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-intro.pdf)\n- [conception-orientee-objet-101.pdf](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-101.pdf)\n- [conception-orientee-objet-outils.pdf](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-outils.pdf)\n\n","n":0.111}}},{"i":102,"$":{"0":{"v":"TP1 - Connect 4","n":0.5},"1":{"v":"> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\n---\n\n# Connect 4\n\nTP n°1 de Conception Orientée Objet pour le M2 auro.\n\n## Objectifs\n\n1. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_dumb_6` et implémenter\n   `connect4.dump_ia.DumbIA.play` jusqu’à ce que `python -m unittest` fonctionne à nouveau\n2. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_column_win` et améliorer\n   `connect4.game.Grid.win` jusqu’à ce que `python -m unittest` fonctionne à nouveau\n3. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_tie` et implémenter\n   `connect4.game.Grid.tie` jusqu’à ce que `python -m unittest` fonctionne à nouveau. `python -m connect4` devrait\n   également fonctionner.\n4. implémenter `connect4.console_player.ConsolePlayer.play` jusqu’à ce que que le jeu soit utilisable avec\n   `python -m connect4 --player-a ConsolePlayer`\n5. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_cheater` et implémenter `connect4.cheater_b` jusqu’à ce que `python -m unittest` fonctionne à nouveau.\n6. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_diag_win` et améliorer\n   `connect4.game.Grid.win` jusqu’à ce que `python -m unittest` fonctionne à nouveau\n   - Completer la section `diagonal` de `connect4.game.Grid.win` jusqu'à ce que l'unittest fonctionne\n\n\n--- \n\n# Informations utiles\n\n[Repo GitHub pour le TP1 Connect4](https://github.com/nim65s/connect4)\n\nN.B.:\n- Python fait croire que c'est un code interpreté (i.e. qui n'a pas besoin de compilation) alors quil conserve un cache de compilation en interne\n- Pypy lui est un code interpreté car il exécute directement\n- Appeler des méthodes en COO:\n    \n    Grid est la classe    \n    \n    grid est une instance de la classe Grid\n    \n    Il y a deux manière d'appeler la méthode place de la classe Grid\n    \n    - Grid.place(grid,j,Cell.B) aura besoin que l'on précise sur quel objet appliquer cette méthode\n    \n    - grid.place(j,Cell.B) n'aura pas besoin de préciser l'objet\n\n# Presentation du projet\n\n## Class Cell\n```python\nclass Cell(Enum):\n    EMPTY = \".\"\n    A = \"X\"\n    B = \"O\"\n```\n## Class Grid\n\n> Toute les méthodes de toutes les classes continnent des `self` ! (Hors exception)\n\n```python\nclass Grid:\n    lines = 6\n    columns = 7\n\n    def __init__(self):\n        self.grid = [[Cell.EMPTY] * self.columns for _ in range(self.lines)]\n\n    def __str__(self) -> str:\n        ret = \"\"\n        for line in range(self.lines - 1, -1, -1):\n            ret += \"|\"\n            for column in range(self.columns):\n                ret += self.grid[line][column].value\n            ret += \"|\\n\"\n        ret += \"+\" + \"-\" * self.columns + \"+\\n\"\n        ret += \" \" + \"\".join(str(i) for i in range(self.columns)) + \"\\n\"\n        return ret\n\n    # Place le jeton dans une colonne en le stoppant sur la premiere ligne libre (si elle existe)\n    def place(self, column: int, cell: Cell) -> int:\n        for line in range(self.lines):\n            if self.grid[line][column] == Cell.EMPTY:\n                self.grid[line][column] = cell\n                return line\n        raise ValueError(f\"Column {column} is full.\")\n\n    # Verifier si 4 jetons sont alignees horizentalement, verticalement ou diagmt\n    def win(self, line: int, column: int) -> bool:\n        adjacent = 0 # compteur\n        color = self.grid[line][column]\n        # Horizontal\n        for cell in self.grid[line]:\n            if cell == color:\n                adjacent += 1\n                if adjacent == 4:\n                    return True\n            else:\n                adjacent = 0\n\n        # TODO: Vertical\n        # TODO: Diagonal\n        return False\n\n    # Condition d arret en cas de match nul\n    def tie(self) -> bool:\n        # TODO\n        # verifier si toutes les cases sont deja remplis\n        return False\n```\n\n## Class Player\n\n```python\nclass Player:\n    # fonction qui necessite de savoir l etat de la grille (donc en parametre)\n    def play(self, grid: Grid) -> int:\n        raise NotImplementedError\n```\n\n## Class Game\n\n```python\nclass Game:\n    def __init__(self, player_a: Player, player_b: Player):\n        self.player_a = player_a\n        self.player_b = player_b\n        self.grid = Grid()\n\n    def main(self):\n        while True:\n            if self.play(self.player_a, Cell.A):\n                print(self.grid)\n                print(\"A wins !\")\n                break\n            if self.grid.tie():\n                print(self.grid)\n                print(\"Tie.\")\n                break\n            if self.play(self.player_b, Cell.B): # Attention different de player.play\n                print(self.grid)\n                print(\"B wins !\")\n                break\n            if self.grid.tie():\n                print(self.grid)\n                print(\"Tie.\")\n                break\n\n    def play(self, player: Player, cell: Cell) -> bool:\n        column = player.play(self.grid)\n        line = self.grid.place(column, cell)\n        return self.grid.win(line, column)\n```\n\n# Execution\n\n- [__main__.py]()\n\nFichier qui crée un instance du jeu game avec un player A et B pour ensuite lancer le `game.main`\n\nLancer ce fichier ne fonctionnera pas plustot lancer les tests\n\n## test_game.py\n\n- [lien vers le fichier test_game.py](https://github.com/nim65s/connect4/blob/main/tests/test_game.py)\n\n1. Lancer la commande `python3 -m unittest`\n    Retourne:\n    ```\n    ssss..ss\n    ----------------------------------------------------------------------\n    Ran 8 tests in 0.001s\n\n    OK (skipped=6)\n    ```\n2. Vérifier que le test fonctionne réellement en y créant une erreur voulue\n    - Enlever une ligne de la grille\n    - Relancer le test\n    Retourne:\n    ```\n    ssssF.ss\n    ======================================================================\n    FAIL: test_grid_str (tests.test_game.TestGame)\n    ----------------------------------------------------------------------\n    Traceback (most recent call last):\n    File \"/home/tunn/Documents/GitHub/connect4/tests/test_game.py\", line 20, in test_grid_str\n        self.assertEqual(\"\\n\" + str(grid), GRID_DUMB_6)\n    AssertionError: '\\n|.[23 chars].....|\\n|.......|\\n|.......|\\n|XOXOXO.|\\n+-------+\\n 0123456\\n' != '\\n|.[23 chars].....|\\n|.......|\\n|XOXOXO.|\\n+-------+\\n 0123456\\n'\n    \n    - |.......|\n    |.......|\n    |.......|\n    |.......|\n    |.......|\n    |XOXOXO.|\n    +-------+\n    0123456\n\n\n    ----------------------------------------------------------------------\n    Ran 8 tests in 0.001s\n\n    FAILED (failures=1, skipped=6)\n    ```\n\n# Travail à faire\n\n1. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_dumb_6` et implémenter\n   `connect4.dump_ia.DumbIA.play` jusqu’à ce que `python -m unittest` fonctionne à nouveau\n    - L'IA doit simplement jouer une colonne si celle-ci est vide\n    - Faire en sorte que l'on obtienne cette grille\n    ```\n    |.......|\n    |.......|\n    |.......|\n    |.......|\n    |.......|\n    |XOXOXO.|\n    +-------+\n    0123456\n    ```\n2. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_column_win` et améliorer\n   `connect4.game.Grid.win` jusqu’à ce que `python -m unittest` fonctionne à nouveau\n   - Completer la section `vertical` de `connect4.game.Grid.win` jusqu'à ce que l'unittest fonctionne\n3. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_tie` et implémenter\n   `connect4.game.Grid.tie` jusqu’à ce que `python -m unittest` fonctionne à nouveau. `python -m connect4` devrait\n   également fonctionner.\n4. implémenter `connect4.console_player.ConsolePlayer.play` jusqu’à ce que que le jeu soit utilisable avec\n   `python -m connect4 --player-a ConsolePlayer`\n5. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_cheater` et implémenter `connect4.cheater_b` jusqu’à ce que `python -m unittest` fonctionne à nouveau.\n6. commenter le décorateur `skip` pour `tests.test_game.TestGame.test_diag_win` et améliorer\n   `connect4.game.Grid.win` jusqu’à ce que `python -m unittest` fonctionne à nouveau\n   - Completer la section `diagonal` de `connect4.game.Grid.win` jusqu'à ce que l'unittest fonctionne\n\n# Notes de Corrigé\n\nUn façon de parcourrir un tableau de façon plus optimisé que de faire une double boucle\n\n```\nret.grid[n // ret.columns][n % ret.columns] = deserialize_cell(cell)\n# //: div entier\n# %: modulo\n```","n":0.033}}},{"i":103,"$":{"0":{"v":"Préparation des TPs","n":0.577},"1":{"v":"\n# Creation du Repo\n\n- on utilise le template pour creer un repo `formes`\n    - lien vers le repo [formes](https://github.com/nim65s/formes.git)\n- `git clone https://github.com/nim65s/formes.git`\n\n## Objectifs\n\n- Découvrir Python\n- Utiliser bcp les classes et les hierarchies (meme si ce n'est pas necessaire pour faire du python mais ici cest pour faire une pierre deux coups)\n\n## Class Formes\n\n### Etape 1\n\nformes.py:\n```python\nclass Forme:\n    color: str = \"black\" # un premier attribut\n```\n\n- lancer `iphython`\n- `from formes import Forme`\n    - on import la class\n- `f = Forme()`\n    - on cree un objet f\n- `f.color` retourne alors `black`\n\n### Etape 2\n\nformes.py:\n\n```python\nclass Forme:\n    \"\"\"Classe de base pour les autres formes\"\"\"\n\n    color: str = \"black\" # un premier attribut\n\n    def __str__(self) -> str:\n            return f\"forme indefinie de couleur {self.color}\" #f coller a \" va remplacer {..} par la valeur de f\n\n```\n\n- \n\n\n- Depuis python 3.6 on utilise la syntax `f\"... {..}\"`, il existe deux autres façon\n\n### Etape 3\n\nInstaller balck en copiant le fichier `.pre-commit-config\n\n### Etape 4\n\nAutomatiser la compilation\n\nformes.py:\n\n```python\nclass Forme:\n    \"\"\"Classe de base pour les autres formes\n    \n    >>> f = Forme()\n    >>> print(f)\n    forme indefinie de couleur bleue    \n    \"\"\"\n\n\n    color: str = \"black\" # un premier attribut\n\n    def __str__(self) -> str:\n            return f\"forme indefinie de couleur {self.color}\" #f coller a \" va remplacer {..} par la valeur de f\n\n\nif __name__ == \"__main__\"\n\n```\n\n- faire des commit a chaque fois\n\n### Etape 5\n\nformes.py:\n\n```python\n#!/usr/bin/env\n\nclass Forme:\n    \"\"\"Classe de base pour les autres formes\n    \n    >>> f = Forme()\n    >>> print(f)\n    forme indefinie de couleur bleue    \n    \"\"\"\n\n\n    color: str = \"black\" # un premier attribut\n\n    def __str__(self) -> str:\n            return f\"forme indefinie de couleur {self.color}\" #f coller a \" va remplacer {..} par la valeur de f\n\nclass Rond(Forme):\n    a: float    #attribut\n\n    def __init__(self, a: float): # constructeur\n        self.a = a\n\n    def __str__(self -> str):\n        return f\"rond de rayon {self.a} de couleur {self.color}\"\n\nclass Quadrilatere(Forme):\n    a: float    #attribut\n    b: float    #attribut\n    c: float    #attribut\n    d: float    #attribut\n\n    def __init__(self, a: float): # constructeur\n        self.a = a\n        self.b = b\n        self.c = c\n        self.d = d\n\n    def __str__(self -> str): # methode dunder representant une classe\n        return f\"quadrilat {self.a} de couleur {self.color}\"\n\nif __name__ == \"__main__\":\n    f = Forme()\n    print(f)\n    r = Rond(10)\n    print(r)\n    q = Quadrilatere(2,)\n\n    ...\n```\n\n- methode init c'est pour le constructeur\n- methode str pour gerer les char\n\n### Etape 6\n\nAjouter deux rond\n\nformes.py:\n\n```python\n#!/usr/bin/env\n\nclass Forme:\n    \"\"\"Classe de base pour les autres formes\n    \n    >>> f = Forme()\n    >>> print(f)\n    forme indefinie de couleur bleue    \n    \"\"\"\n\n\n    color: str = \"black\" # un premier attribut\n\n    def __str__(self) -> str:\n            return f\"forme indefinie de couleur {self.color}\" #f coller a \" va remplacer {..} par la valeur de f\n\nclass Rond(Forme):\n    a: float    #attribut\n\n    def __init__(self, a: float): # constructeur\n        self.a = a\n\n    def __str__(self -> str):\n        return f\"rond de rayon {self.a} de couleur {self.color}\"\n\n    def ...\n\nclass Quadrilatere(Forme):\n    a: float    #attribut\n    b: float    #attribut\n    c: float    #attribut\n    d: float    #attribut\n\n    def __init__(self, a: float): # constructeur\n        self.a = a\n        self.b = b\n        self.c = c\n        self.d = d\n\n    def __str__(self -> str): # methode dunder representant une classe\n        return f\"quadrilat {self.a} de couleur {self.color}\"\n\nif __name__ == \"__main__\":\n    f = Forme()\n    print(f)\n    r = Rond(10)\n    print(r)\n    q = Quadrilatere(2,)\n\n    ...\n```\n\n### Etape 7\n\nComment reconnaitre une forme de quad\n\nformes.py:\n\n```python\n#!/usr/bin/env\n\nclass Forme:\n    \"\"\"Classe de base pour les autres formes\n    \n    >>> f = Forme()\n    >>> print(f)\n    forme indefinie de couleur bleue    \n    \"\"\"\n\n\n    color: str = \"black\" # un premier attribut\n\n    def __str__(self) -> str:\n            return f\"forme indefinie de couleur {self.color}\" #f coller a \" va remplacer {..} par la valeur de f\n\nclass Rond(Forme):\n    a: float    #attribut\n\n    def __init__(self, a: float): # constructeur\n        self.a = a\n\n    def __str__(self -> str):\n        return f\"rond de rayon {self.a} de couleur {self.color}\"\n\n    def ...\n\nclass Quadrilatere(Forme):\n    a: float    #attribut\n    b: float    #attribut\n    c: float    #attribut\n    d: float    #attribut\n\n    def __init__(self, a: float): # constructeur\n        self.a = a\n        self.b = b\n        self.c = c\n        self.d = d\n\n    def __str__(self -> str): \n        ...\n\n    def specialite(self):\n        if self.a == slef.b == self.c == self.d\n            return \"square\"\n        if self.a == slef.c and self.b == self.b\n            return \"rectangle\"\n\nif __name__ == \"__main__\":\n    f = Forme()\n    print(f)\n    r = Rond(10)\n    print(r)\n    q = Quadrilatere(2,)\n\n    ...\n```\n\n\n### Etape 8\n\nComment reconnaitre des formes\n\nformes.py:\n\n```python\n#!/usr/bin/env\n\nclass Forme:\n    \"\"\"Classe de base pour les autres formes\n    \n    >>> f = Forme()\n    >>> print(f)\n    forme indefinie de couleur bleue    \n    \"\"\"\n\n\n    color: str = \"black\" # un premier attribut\n\n    def __str__(self) -> str:\n            return f\"forme indefinie de couleur {self.color}\" #f coller a \" va remplacer {..} par la valeur de f\n\nclass Rond(Forme):\n    a: float    #attribut\n\n    def __init__(self, a: float): # constructeur\n        self.a = a\n\n    def __str__(self -> str):\n        return f\"rond de rayon {self.a} de couleur {self.color}\"\n\n    def ...\n\nclass Quadrilatere(Forme):\n    a: float    #attribut\n    b: float    #attribut\n    c: float    #attribut\n    d: float    #attribut\n\n    def __init__(self, a: float): # constructeur\n        self.a = a\n        self.b = b\n        self.c = c\n        self.d = d\n\n    def __str__(self -> str): \n        ...\n\n    def specialite(self):\n        if self.a == slef.b == self.c == self.d\n            return \"square\"\n        if self.a == slef.c and self.b == self.b\n            return \"rectangle\"\n    \ndef show(*dimensions, **kwargs): \n    if len(dimensions) == 1:\n\nif __name__ == \"__main__\":\n    f = Forme()\n    print(f)\n    r = Rond(10)\n    print(r)\n    q = Quadrilatere(2,)\n\n    ...\n```\n\n- En python, les arguments sont:\n    - soit positionnel (pour les valeurs) syntaxé avec `*` (convention: appelé `*args`)\n    - soit nommees (pour les noms) syntaxé avec `**` (convention: appelé `**kwargs`)\n\n- methode `super().__init__(**kwargs)` va importer le init de la classe mère et","n":0.034}}},{"i":104,"$":{"0":{"v":"Outils","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\nSupport de cours:\n- [conception-orientee-objet-outils.pdf](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-outils.pdf)\n\n\n---\n\n> Notes du 2022/09/07 - Start\n\n![](/assets/images/COOSATR.SlideOutils.01.png)\n\n![](/assets/images/COOSATR.SlideOutils.02.png)\n\n![](/assets/images/COOSATR.SlideOutils.03.png)\n\n## VOUS\n![](/assets/images/COOSATR.SlideOutils.04.png)\n\n### Ergonomie\n![](/assets/images/COOSATR.SlideOutils.05.png)\n\n### Clavier\n![](/assets/images/COOSATR.SlideOutils.06.png)\n\n## Style\n![](/assets/images/COOSATR.SlideOutils.07.png)\n\n### Code lisible\n![](/assets/images/COOSATR.SlideOutils.08.png)\n\n### PEP8\n![](/assets/images/COOSATR.SlideOutils.09.png)\n\n### Black\n![](/assets/images/COOSATR.SlideOutils.10.png)\n\n### clang-format\n![](/assets/images/COOSATR.SlideOutils.11.png)\n\n## Analyse Statique\n![](/assets/images/COOSATR.SlideOutils.12.png)\n\n### MyPy Motivation\n![](/assets/images/COOSATR.SlideOutils.13.png)\n\nPb print add des chaines de caracteres donc (3,4) donnera 34 au lieu de 7\n\n### MyPy\n![](/assets/images/COOSATR.SlideOutils.14.png)\n\n### pyupgrade\n![](/assets/images/COOSATR.SlideOutils.15.png)\n\n## Méta\n![](/assets/images/COOSATR.SlideOutils.16.png)\n\n### IDE\n![](/assets/images/COOSATR.SlideOutils.17.png)\n\n### Pre-Commit\n![](/assets/images/COOSATR.SlideOutils.18.png)\n\n> Il faut faire un fichier \"config\" yaml\n\n#### Utilisation\n![](/assets/images/COOSATR.SlideOutils.19.png)\n\nS'il y a un probleme de formattage le software retournera 0.\n\n#### CI\n![](/assets/images/COOSATR.SlideOutils.20.png)\n\n> Utile pour des projets où d'autres collaborateur n'utilise pas precommit\n\n\n\n> Notes du 2022/09/07 - End\n\n---","n":0.102}}},{"i":105,"$":{"0":{"v":"Introduction","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\nSupport de cours:\n- [conception-orientee-objet-intro.pdf](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-intro.pdf)\n- [COOSTART.NotesGEA.20220831.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/COOSTART.NotesGEA.20220831.pdf)\n\n---\n\n> Notes du 2022/08/31 - Start\n\n![](/assets/images/COOSATR.SlideIntro.01.png)\n\n![](/assets/images/COOSATR.SlideIntro.02.png)\n\n![](/assets/images/COOSATR.SlideIntro.03.png)\n\n![](/assets/images/COOSATR.SlideIntro.04.png)\n\n## Présentation\n\n- responsable technique\n  - C++ plus optimale\n  - Python très facile pour prototyper\n\n- ne develope pas mais aide les developeurs (doctorant) à les implémenter et les diffuser s'assure de la bonne documentation\n\n- code en amateur du rust\n\n![](/assets/images/COOSATR.SlideIntro.05.png)\n\n![](/assets/images/COOSATR.SlideIntro.06.png)\n\n## Sondage\n\n![](/assets/images/COOSATR.SlideIntro.07.png)\n\n![](/assets/images/COOSATR.SlideIntro.08.png)\n\n- formattage automatique (ne pas perdre de temps sur du format tabulation espace et ce concentré sur le contenu)\n\n- test unitaire\n\n- Intégration continue implémente des analyse statique, les test unitaires et le formattage automatiquement\n  - ceci afin que le code soit constructif et transmissible au reste du groupe\n\n## Modalités du Cours\n\n![](/assets/images/COOSATR.SlideIntro.09.png)\n\n\n- ROS: ?\n  - en robotique algo de controle doit agir en temps réel\n\n> Notes du 2022/08/31 - End\n\n---","n":0.085}}},{"i":106,"$":{"0":{"v":"Exemple - Repo GitHub","n":0.5},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\nSupport de cours:\n- [COOSTART.NotesGEA.20220901.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/COOSTART.NotesGEA.20220901.pdf)\n- [Lien vers le Repo GitHub](https://github.com/nim65s/conception-orientee-objet)\n\n---\n\n> Notes du 2022/09/01 - Start\n\n# Introduction\n\n## GitHub\n\nForges = type de logiciel de gestion de version et de projet.\n\nIci on va utiliser GitHub.\n\n### Créer un projet GitHub\n\n- Créer un compte github.com\n- Configurer une clé crypto pour communiquer avec GitHub depuis le terminal\n- Create \"New Repository\"\n- Choisir l'owner\n  - peut etre une personne (compte perso)\n  - mais peut aussi etre une organisation (compte pro)\n- Choisir un nom pour le projet\n  - éviter les noms communs car il sera plus difficile à trouver\n  - ne mettre que des minuscule pour ne pas compliquer le site URL\n- Rajouter une description\n- Choisir si le projet sera privée ou public\n- Rajouter un README\n- Ignorer le gitignore pour maintenant\n- Pour le choix de licence, toute creation a droit a une licence toujours mieux de le faire ici on va choisir BSD 2 clause\n- Lancer le projet\n\nLe projet contiendra automatiquement un fichier license et un readme.\n\n### Commit\n\n- Visiter le lien https://github.com/nim65s/conception-orientee-objet\n\n- Cliquer sur commits\n\n- Lorsqu'on veut ajouter un fichier dans le projet on réalise un commit qui contient un titre et une description pour expliquer quest-ce qui est ajouté/modifié au projet\n\n### Include/SRC\n\nLa structure du git sera expliqué plus tard.\n\n## Adder\n\n???\n\n## Include\n\n`#include file.hpp`\n\ndis au compilateur d'inclure le contenu de la librairie `file.hpp`\n\nCe fichier commence avec un `#ifndef` pour dire au compuilateur que si cette librairie n'a pas déjà été crée alors il l'a définie sinon il ne l'inclut pas car elle a déjà était inclut précédemment.\n\n## CMake\n\n- Créer un fichier `CMakeList.txt`\n- On choisit la version de CMake (à décider avant de créer le projet selon ses besoins)\n  - `cmake_minimum_required(VERSION 3.18)`\n  - ici on prend une version récente pour voir les nouvelles fonctionnalités\n\n\n- Puis on déclare un projet CMake pour faire la bijection avec le projet Git\n  - ```\nproject(\n  Conception-Orientee-Objet\n  VERSION 0.1.0 \\\\ semantic versionning\n  DESCRIPTION \"example project for a class\"\n  HOMEPAGE_URL \"https://github.com/nim65s/conception-orientee-objet\"\n  LANGUAGES CXX\n  )\n  ```\n\n- Il faut ensuite indiquer la librairie\n  - choisir si la lib est static (.a ou .o sur win) ou dynamic (.so)\n    - static on a tout sur le fichier exécutable\n    - dynamic va seulement faire des liens entre lib et exe donc il ne faudra pas à chaque fois recréer un exe\n  - ici on considère du dynamic ici donc on va rajouter `SHARED`\n  - ```\n  add_library(\n    example-adder SHARED include/conception-orientee-objet/example-adder.hpp\n                       src/example-adder.cpp\n    )\n  ```\n\n\n- Finalement il faut indiquer au projet CMake la target \n\n  - ```\n  target_include_directories(\n    example-adder PUBLIC $<BUILD_INTERFACE:${CMAKE_SOURCE_DIR}/include>\n    )\n  ```\n\nMaintenant on peut exécuter CMake avec la commande `cmake -S . -B build`\n  - elle va verifier que le projet a les bonnes versions ainsi que les bons compilateurs et les bonnes dépendances\n  - `-S .` informe CMake le path vers la source\n  - `-B build` créer un dossier build contenant les fichier temporaire sur les versions, compilateurs et dépendances que cmake à trouver\n\n- On lance ensuite la commande `cmake --build build`\n  - ceci va créer la lib dynamic `libexample-adder.so`\n\n\n## Executable\n\n- On crée un fichier main `adder.cpp`\n- ici on choisit d'utiliser `return EXIT_FAILURE;` `return EXIT_SUCCESS;` (donné de base par la lib cpp standard) au lieu de faire un `return 0;`\n\n- `argc` paramètre\n- `argv` _arg vemus_\n\n- si maintenant on lance `./adder 8 8` le compilateur va faire des liens dynamic entre la lib et l'exécutable\n\n- `ldd` va lancer un exécutable et vérifier ce que cette exe a besoin pour se lancer\n\n## PUSH/PULL\n\n- PUSH va synchroniser les modifs faite dans dossier local\n\n- PULL va récuperer les modifs faites par le collaborateur et donc synchroniser les nouveautés sur GitHub en les installant sur mon local\n\n- Commit correspond à unité de changment\n\n# Explication Commits\n\n## Test\n\n- Ctest définie une option `BUILD_TESTING`\n- On crée un main test pour y faire des `assert`\n\n- `assert(coo::add())` on indique a assert de chercher la fct add du **namespace** coo\n- un namespace est un dossier contenant les listes des fct\n\n- En recompilant le dossier build les tests vont etre verifier (si on obtient aucune erreur alors penser un forcer un test false pour verifier que les test ont bien été réalisé)\n\n- On parle de test unitaire car le test va assertifié une partie (une unité) du programme (ou bien fonction par fonction ou classe par classe)\n\n\n## Module Python\n\n- On ajoute au `CMakeLists.txt` un build interface pour python\n  - ici on choisit de faire des bindings python avec `boost`\n    - Boost est une librairie Python contenant les dernières fctionnalités pas encore intégré sur le stable\n  - ici on garde boost mais plus tard on passera sur pybind11\n\n- `Boost` c'est le projet CMake\n- `boost` lui est un nom de fichier (souvent en minuscule)\n\n- `BOOST_PYTHON_MODULE` Macro CPP souvent en maj\n\n> Un jour CPP n'aura plus d'include ou de marco (qui viennent du C et que l'on cherche à supprimer)\n\n- ici on a code python binaire donc exe que sur un pc avec une architecture précise\n\n\n\n> Notes du 2022/09/01 - End\n\n---\n\n> Notes du 2022/09/07 - Start\n\n\n\n\n## Commit: \"CMake: minimal project\"\n\n> [lien vers le commit \"CMake: minimal project\"](https://github.com/nim65s/conception-orientee-objet/commit/f5de5b63f91cbd9e50193c0accfe246d49bd961a)\n\n- semantic versioning\n  - majeur\n  - mineur\n  - patch\n\n- on incremente le num majeur pour indique de grosse modification comme changer le type d'une variable\n\n- on reste en version 0 tant que le projet n'est pas stable\n\n- certains mette l'annee au lieu de 0 dans le majeur\n\n## Commit: \"add an executable\"\n\n> [lien vers le commit \"add an executable\"](https://github.com/nim65s/conception-orientee-objet/commit/36d4162c43d634aae59ab36457cc9b46d9eecd44)\n\nle code faite la somme et retourne le resultat\n\nil verifie aussi si on lui donne 2 param avec:\n```\nstd::cerr << \"This program needs 2 integers\\n\";\n  return EXIT_FAILURE;\n```\n\n## Commit: \"add a test\"\n\n> [lien vers le commit \"add a test\"](https://github.com/nim65s/conception-orientee-objet/commit/b433b44d7b2ada9a538944dda4dd144b683ce928)\n\n- le fichier CMakeLists.txt est construit de façon modulaire\n  - dans le root on indique au CMakeLists.txt les sousfichiers CMakeLists.txt\n      ```\n      if(BUILD_TESTING)\n        add_subdirectory(tests)\n      endif()\n      ```\n  - on peut aussi avoir un CMakeLists pour src et ainsi de suite\n\n> Lien utile: [ccpreference.com](ccpreference.com)\n\n## Commit: \"add python module\"\n\n> [lien vers le commit \"add python module\"](https://github.com/nim65s/conception-orientee-objet/commit/2f4cd4a786e2ce7e2e242fce5dba685e06496fd1)\n\n- on indique a python comment compiler du cpp by linking la lib ainsi\n```\npython_add_library(conception_orientee_objet MODULE WITH_SOABI\n                    conception_orientee_objet.cpp)\ntarget_link_libraries(conception_orientee_objet PUBLIC example-adder\n                                                        Boost::python)\n```\n\n## Commit: \"add python wrapper function\"\n\n> [lien vers le commit \"add python wrapper function\"](https://github.com/nim65s/conception-orientee-objet/commit/9522846c446151b9d87cf583b3b269425e4de479)\n\n- attention 3 methodes quand on fait des import\n    - fichier `adder.py`\n    - lib `adder.[...].so`\n    - dossier `adder/__init__.py`\n\n- ici on a importer un dossier\n  ```\n  from .binary_module import add as binary_add\n  ```\n\n- cette fct va s'assurer d'adapter les params au type de la fct add pour que meme si on lui donne des params en `string` il les convertisse en `int`\n\n- `ipython` lance un terminal python\n  - on y test la fct add avec les param `3` et `\"-4\"` et avec le wrapper on a plus l'erreur de compatibilite de type et add retourne `-1`\n  - on peut aussi demander à `ipython` de donner des indications sur la fct en remplaçant les params par `?`\n\n- on utilise le mot `wrapper` pour indiquer qu'on encapsule des fonctionnalités supplémentaires sur la fct principal\n  - c'est comme rajouter des _features_ à un système\n\n## Commit: \"add python unittests \"\n\n> [lien vers le commit \"add python unittests \"](https://github.com/nim65s/conception-orientee-objet/commit/41ce3e0fbdf70dad0d81e3d598d94b0996202573)\n\n- on ajoute un fichier test pour vérifier si la fonction retourne les bons résultats\n\n- l'execution de `test_add.py` retourne 0 si aucune erreur n'est trouver dans la liste de test et retourne 1 si un des tests de la liste n'est pas vérifié\n\n## Commit: \"let CTest run python unittests\"\n\n> [lien vers le commit \"let CTest run python unittests\"](https://github.com/nim65s/conception-orientee-objet/commit/e155b740f31e0d9ad48f22d3c2b2dc4b68799825)\n\n- on rajoute un fichier qui va executer tous les tests unitaires\n\n- du coup il faut faire attention à comment on va importer les fichiers/dossiers\n\n- se rappeler que les imports se font sur 3 méthodes\n\n- pour bien indiquer où chercher les fichiers/dossiers à importer on donne au compilateur un `PYTHONPATH` (une liste de paths)\n  ```\n  set_tests_properties(test-python PROPERTIES ENVIRONMENT\n                                              PYTHONPATH=${CMAKE_BINARY_DIR})\n  ```\n\n## Commit: \"add doctest examples and checks\"\n\n> [lien vers le commit \"add doctest examples and checks\"](https://github.com/nim65s/conception-orientee-objet/commit/998c571a2785550406ab29efa74b9fa48a2b0d9e)\n\n- on donne un paragraphe contenant les tests à vérifier\n\n- advantage: on peut faire d'une pierre 2 coups car on donne la documentation dans les listes tests et ainsi la doc est utile pour l'utilisateur et la machine (plus besoin d'avoir une doc que pour les utilisateurs et une liste d'appel de fcts pour les tests)\n\n- une ligne `...` sera comprise par doctest comme ignorer un bloc de ligne sur le résultat du terminal\n\n## Commit: \"setup pre-commit\"\n\n> [lien vers le commit \"setup pre-commit\"](https://github.com/nim65s/conception-orientee-objet/commit/85bda769d361aaf3aa450698f8d8bb194461403d)\n\n- il est conseillé de rajouter les outils au départ d'un projet meme si ici cela a été rajouté pour rendre le cours plus fluide\n\n## Commit: \"setup github actions\"\n\n> [lien vers le commit \"setup github actions\"](https://github.com/nim65s/conception-orientee-objet/commit/e54277a90fe8996c676cb38d6b6e27e511a1c20a)\n\n- on fait le push et pre-commit.ci va s'occuper de faire les tests pre-commit pour nous avons de publier\n\n- pour ce faire on ecrit un fichier `yaml` pour executer des GitHub Actions\n  - premier job fait le build pour voir que tout fonctionne en faisant un `checkout` puis plusieurs executions:\n  ```\n    build:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n\n    - name: install Ubuntu dependencies\n      run: sudo apt install libboost-python-dev python-is-python3 python3-pip\n\n    - name: install PyPI dependencies\n      run: pip install -U pip && pip install -U cmake\n\n    - name: configure the project\n      run: cmake -B build -S .\n\n    - name: build the project\n      run: cmake --build build\n\n    - uses: actions/upload-artifact@v3\n      with:\n        name: build\n        path: build\n  ```\n  - intégration continue: important de run ces actions sur plusieurs OS (ici on a fait les actions pour Ubuntu seulement)\n  - on rajoute une liste d'actions pour les tests\n    ```\n      test:\n    runs-on: ubuntu-latest\n    needs: \"build\"\n    steps:\n    - uses: actions/checkout@v3\n\n    - name: install Ubuntu dependencies\n      run: sudo apt install libboost-python-dev python-is-python3 python3-pip\n\n    - name: install PyPI dependencies\n      run: pip install -U pip && pip install -U cmake\n\n    - uses: actions/download-artifact@v3\n      with:\n        name: build\n        path: build\n\n    - run: ls build\n    - run: ls build/tests\n    - run: ls build/conception_orientee_objet\n\n    - name: test the project\n      run: cmake --build build -t test\n      env:\n        CTEST_OUTPUT_ON_FAILURE: \"ON\"\n    ```\n  - Attention: par défaut CTEST n'indique pas d'indice sur les tests failed donc il faut lui demander en paramétrant le suivant sur ON \n  \n    ```CTEST_OUTPUT_ON_FAILURE: \"ON\"```\n\n\n## Commit: \"Boost::python → pybind11 \"\n\n> [lien vers le commit \"Boost::python → pybind11 \"](https://github.com/nim65s/conception-orientee-objet/commit/d21be5053db17a34c6eef44faac814a9922f7fe6)\n\npuisque la lib pythonboost n'est pas facilement installable on decide d'utiliser une autre lib pybind11 du coup on implémente tous les changements nécessaires\n\n\n## Commit: \"CI: upgrade python\"\n\n> [lien vers le commit \"CI: upgrade python\"](https://github.com/nim65s/conception-orientee-objet/commit/ffb2a8c5f7947de3cc9ff6645c060e6f5af75f72)\n\nUn changement à ne pas oublier c'est d'adapter les actions\n\n## Templates\n\nil est possible d'utiliser un répertoire comme template pour créer des projets contenant déjà du contenu\n\n  \n\n## Extra: ET Logique\n- `&`: et logique\n- `and`: equivalant du `&&` en C\n\n\n\n> Notes du 2022/09/07 - End\n\n---\n\n> Notes du 2022/09/14 - Start\n\n\n\n\n# Deployement\n\n## Structure et Gestion des dossiers\n\n### Contexte\n\nCOOSATR.GitHubExemple.PicTree\n\n### Bonne pratique\n\nAttention:\n- éviter de tous mettre dans le root `\\`\n- git est hierarchique du coup on va plutot utiliser des préfixes `$PREFIX`\n- 3 prefix par défaut: `\\` `\\usr\\` ou `\\usr\\local\\`\n- pb par securite pas tout le monde ne peut ecrire directe dans ces prefix => on prefere travailler sur `\\tmp\\` un dossier temporaire git n'est present que sur la RAM et s'efface quand on eteint l'ordi\n\npar convention on prefere mettre les binaires dans un dossier `\\bin\\` et les librairies dans un dossier `\\lib\\`\n\n### How to\n\n`export PATH=/tmp/install/bin:$PATH` rajoute le path `/tmp/install/bin` dans la liste de tous les path (ici en debut de liste)\n\n## Utiliser CMake pour lancer le deployment\n\n### Commit: \" install targets & files \"\n\n> [lien vers le commit \" install targets & files \"](https://github.com/nim65s/conception-orientee-objet/commit/7e670ce3b115695668dcd23cb15cd575a654f569)\n\n```CMake\ninstall(TARGETS example-adder adder)\ninstall(FILES include/conception-orientee-objet/example-adder.hpp\n        DESTINATION include/conception-orientee-objet)\n```\n\n- lancer `cmake --install build` retournera une erreur car il va vouloir installer le build dans `/usr/local/` or ce dossier necessite les droits admin pour y modifier le contenu\n- pour eviter de casser son ordi on va faire l'install dans `/tmp/` comme preciser ci-dessus\n- du coup on lance la commande `cmake -B buil -S. -DCMAKE_INSTALL_PREFIX=${{ github.workspace }}/install`\n\n\n## Packaging\n\n- mettre un dossier dans un zip ou tar pour partager ce dossier à d'autres coequipier\n- on peut par exemple creer ainsi des packet binaire `deb`\n\n## CMake Export\n\n> Comment permettre à d'autres d'utiliser mon projet\n\nC'est la pierre angulaire de cmake car il automatise la routine de gestion des depandonces\n\n### Commit: \"install exports \"\n\n> [lien vers le commit \"install exports \"](https://github.com/nim65s/conception-orientee-objet/commit/3f5152ec477b11e6984c05cfd147d696b29bdfa4)\n\n- Dans cmakelist principal on rajoute ces lignes pour indiquer où chercher mes header\n  ```CMake\n  example-adder PUBLIC $<BUILD_INTERFACE:${CMAKE_SOURCE_DIR}/include>\n                        $<INSTALL_INTERFACE:include>)\n  ```\n- puis on rajoute les bons exports aux autres fichiers\n\n- install ce fait sur un des 9 dossiers conventionnels de cmake (le plus connu etant `/lib/cmake/`)\n  ```CMake\n  install(\n    EXPORT Conception-Orientee-ObjetTargets\n    NAMESPACE Conception-Orientee-Objet::\n    DESTINATION lib/cmake/Conception-Orientee-Objet)\n\n  include(CMakePackageConfigHelpers)\n  configure_package_config_file(\n    Config.cmake.in Conception-Orientee-ObjetConfig.cmake\n    INSTALL_DESTINATION lib/cmake/Conception-Orientee-Objet)\n  write_basic_package_version_file(Conception-Orientee-ObjetConfigVersion.cmake\n                                  COMPATIBILITY AnyNewerVersion)\n\n  install(FILES \"${CMAKE_BINARY_DIR}/Conception-Orientee-ObjetConfig.cmake\"\n                \"${CMAKE_BINARY_DIR}/Conception-Orientee-ObjetConfigVersion.cmake\"\n          DESTINATION lib/cmake/Conception-Orientee-Objet)\n  ```\n\n- `...target-release.cmake` compile en essayant d'optimiser le code (par defaut set at -03)\n  - optimisation -01 bof -02 bien\n  -03 et plus commence optimiser au point de ne plus rendre des resultats si exact\n\n### Commit: \"CMake: set PROJECT_NAME\"\n\n> [lien vers le commit \"CMake: set PROJECT_NAME\"](https://github.com/nim65s/conception-orientee-objet/commit/0426aa11ad7823d5adcb44c0a67fd2fcf1189e4f)\n\nDans ce commit on a simplifier les noms de variable pour eviter de s'y perdre avec le \"-\" et \"_\" ou les majuscules et minuscule en utilisant la syntax `${...}` pour remplacer une chaine de `char` comme sur `bash`.\n\n### Commit: \"test packaging \"\n\n> [lien vers le commit \"test packaging \"](https://github.com/nim65s/conception-orientee-objet/commit/78256ef172ce96a23a0a4849a465b1fa8ac76c6e)\n\n- on rajoute un code pour faire les multiplications et on test le code\n- donc on va vouloir faire un build dans ce dossier multiplier\n- mais la commande cmake ne fonctionnera pas car il ne trouvera pas les fichiers .cmake\n- du coup on va rajouter le path vers les .cmake dans la variable `CMAKE_PREFIX_PATH`\n  - similaire a `sys.path` de chez python ou encore `PTYHON_PATH`\n  - pour cela on fait `export CMAKE_PREFIX_PATH = /tmp/install`\n- on relance le build puis compiler et lancer les tests\n\n\n\n\n### Commit: \"ci: test packaging \"\n\n> [lien vers le commit \"ci: test packaging \"](https://github.com/nim65s/conception-orientee-objet/commit/7f63ead9eaf19036e4320d25618ef312a9fe6046)\n\nl'idée est d'automatiser les tests\n  \nOn rajoute le job `packaging`:\n```YML\n  packaging:\n    runs-on: ubuntu-latest\n    needs: \"build\"\n    steps:\n    - uses: actions/checkout@v3\n    - uses: actions/download-artifact@v3\n      with:\n        name: build\n        path: build\n\n    - name: install the project\n      run: cmake --install build\n\n    - name: test packaging\n      run: cmake -B test-packaging -S tests/multiply\n      env:\n        CMAKE_PREFIX_PATH: \"${{ github.workspace }}/install\"\n\n    - name: build subproject\n      run: cmake --build test-packaging\n```\n\nCeci va creer une action\n\n> un fichier ML est un standard avec langage markup qui organise des donnees variables\n\n\n### Commit: \"set RPATH\"\n\n> [lien vers le commit \"set RPATH\"](https://github.com/nim65s/conception-orientee-objet/commit/e0d1188d0c249845ed94f065a29a007617886a86)\n\nLorsqu'une erreur est cause parce que l'interpreteur ne trouve pas la lib alros mettre à jour la variable `LD_LIBRARY_PATH = /tmp/install/lib`.\n\nCes noms de variables sont important pour que des users puissent lancer le projet et adapter ces variables a leur context.\n\nMais apres avoir bcp de projet sur l'ordi on peut commencer a s'y perdre on va chercher a optimiser ces noms de variables avec `RPATH`\n\nPour cela on rajoute dans le cmakelist principal cette ligne\n```\nset_target_properties(adder PROPERTIES INSTALL_RPATH \"$ORIGIN/../lib\")\n```\noù `$Origin`\n\n`/tmp/install/bin/../lib/` == `/tmp/install/lib/` \n\n## Commande pour modifier le PATH\n\n- `exprt $PATH=Path1:Path2:${PATH}` où par exemple PATH etait egal avant l'expor à `Path3:Path4:Path5`\n  - du coup `echo $PATH` retournera : `Path1:Path2:Path3:Path4:Path5`\n\n- `objdump -x /tmp/install/bin/adder`\n  - pour explorer du code binaire\n  - indique des informations utiles liée à cette executable comme la lib, l'architecture, ...\n\n> Notes du 2022/09/14 - End\n\n---\n","n":0.02}}},{"i":107,"$":{"0":{"v":"GitForges","n":1},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\nSupport de cours:\n- [git-forges.pdf](https://homepages.laas.fr/gsaurel/talks/git-forges.pdf)\n- ...\n\n---\n\n\n> Notes du 2022/09/14 - Start\n\n\n# Git Forges\n![](/assets/images/COOSATR.SlideGitForges-01.png)\n\n## This presentation\n\n![](/assets/images/COOSATR.SlideGitForges-02.png)\n\n![](/assets/images/COOSATR.SlideGitForges-03.png)\n\n## Outline\n\n![](/assets/images/COOSATR.SlideGitForges-04.png)\n\n## Introduction \n\n![](/assets/images/COOSATR.SlideGitForges-05.png)\n\n### What are software forges\n\n![](/assets/images/COOSATR.SlideGitForges-06.png)\n\n### Hiearchy\n\n![](/assets/images/COOSATR.SlideGitForges-07.png)\n\n### Issues\n\n![](/assets/images/COOSATR.SlideGitForges-08.png)\n\n## Branches\n\n![](/assets/images/COOSATR.SlideGitForges-09.png)\n\n### Goal\n\n![](/assets/images/COOSATR.SlideGitForges-10.png)\n\n[nvie](https://nvie.com/posts/a‑successful‑git‑branching‑model/) un utilisateur a proposé d'utiliser les branches d'une certaine façon pour traiter les issues \n\n### Usual branches\n\n![](/assets/images/COOSATR.SlideGitForges-11.png)\n\n`issue/5` dossier pour fixer issue 5 (idéalement le dernier commit devienne le fix)\n\naprès il n'y a pas de convention imposer/dominante sur comment gerer les branches pour traiter les issues\n\n## Forks\n\n![](/assets/images/COOSATR.SlideGitForges-12.png)\n\n### 2 types of fork\n\n![](/assets/images/COOSATR.SlideGitForges-13.png)\n\nHistoire de Scission:\n- SUN company super open soure createur MySQL, openoffice, langage java\n- autre companie oracle plus orientee business profit \n- puis google a atteint une certaine taille\n- le langage java etait en partie libre donc google avait surrement utilise des parties de code non libre\n- du coup oracle veut acheter le langage java pour mettre en justice google\n- mais sun n'a pas voulu vendre le code\n- du coup oracle a racheté la compagnie sun en entière\n- du coup openoffice et mysql n'etait plus du tout utilisé et maintenu\n- donc les fondateurs de SUN ont crée une fork pour reprendre le projet\n\n![](/assets/images/COOSATR.SlideGitForges-14.png)\n\n### Work locally with multiple forks\n\n![](/assets/images/COOSATR.SlideGitForges-15.png)\n\n### SSH shortcut\n\n![](/assets/images/COOSATR.SlideGitForges-16.png)\n\n```\n# ~/.ssh/config\nHost gl\n    HostName gitlab.laas.fr\n    User git\n```\n\n## Requests\n\n![](/assets/images/COOSATR.SlideGitForges-17.png)\n\n### Gitlab\n\n![](/assets/images/COOSATR.SlideGitForges-18.png)\n\n### Gitlab from command line\n\n![](/assets/images/COOSATR.SlideGitForges-19.png)\n\n### Github\n\n![](/assets/images/COOSATR.SlideGitForges-20.png)\n\n### Github from command line\n\n\n![](/assets/images/COOSATR.SlideGitForges-21.png)\n\n## CI\n\n![](/assets/images/COOSATR.SlideGitForges-22.png)\n\n### Gitlab\n\n![](/assets/images/COOSATR.SlideGitForges-23.png)\n\n### Gitlab shortcut\n\n![](/assets/images/COOSATR.SlideGitForges-24.png)\n\n### Github\n\n![](/assets/images/COOSATR.SlideGitForges-25.png)\n\n## Workflows\n\n![](/assets/images/COOSATR.SlideGitForges-26.png)\n\n### Example\n\n![](/assets/images/COOSATR.SlideGitForges-27.png)\n\n## End notes\n\n![](/assets/images/COOSATR.SlideGitForges-28.png)\n\n## References\n\n![](/assets/images/COOSATR.SlideGitForges-29.png)\n\nhttps://learngitbranching.js.org/\nhttps://nvie.com/posts/a‑successful‑git‑branching‑model/\nhttps://docs.github.com/en/get‑started/quickstart/github‑flow\n\n## Questions\n\n![](/assets/images/COOSATR.SlideGitForges-30.png)\n\n\n\n> Notes du 2022/09/14 - End\n\n---","n":0.065}}},{"i":108,"$":{"0":{"v":"Code Management","n":0.707},"1":{"v":"\n\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\nSupport de cours :\n- [Lien vers les slides](https://homepages.laas.fr/matthieu/talks/git.pdf)\n\nLien utile :\n- [Bac à Sable pour apprendre Git](https://learngitbranching.js.org/)\n\n---\n\n\n> Notes du 2022/09/08 - Start\n\n# Code Management\n\n![](/assets/images/COOSATR.SlideCodeMgmt-01.png)\n> git a été developpe pour le noyau linux\n\n![](/assets/images/COOSATR.SlideCodeMgmt-02.png)\n\n## Agenda\n![](/assets/images/COOSATR.SlideCodeMgmt-03.png)\n\n## Introduction\n![](/assets/images/COOSATR.SlideCodeMgmt-04.png)\n\n![](/assets/images/COOSATR.SlideCodeMgmt-05.png)\n\n### Version Control Concepts\n![](/assets/images/COOSATR.SlideCodeMgmt-06.png)\n\n- un commit = un freeze de l'état d'un dossier\n  - prend la version parent\n  - regarde ce qui est nouveau\n  - en fait un hash\n  - lors de la creation avec `git init` on cree un revision parente ici A puis chaque commit donne l'etat B puis C\n  \n\n![](/assets/images/COOSATR.SlideCodeMgmt-07.png)\n\n- possibilité de revenir sur un parent et faire une nouvelle branche\n- historiquement la branche principale en Forge était appelé `master` puis elle a été corrigé à `main`\n- dans projet on essais d'éviter de créer trop de branches\n\n### Handling branches\n\n![](/assets/images/COOSATR.SlideCodeMgmt-08.png)\n\n### Working in teams\n\n![](/assets/images/COOSATR.SlideCodeMgmt-09.png)\n\n### Centralized model\n\n![](/assets/images/COOSATR.SlideCodeMgmt-10.png)\n\n### Distributed model\n\n![](/assets/images/COOSATR.SlideCodeMgmt-11.png)\n\n- Advantage plus besoin d'etre directement connecter au serveur (donc transfert de fichier plus rapide)\n\n## Git Concepts\n\n![](/assets/images/COOSATR.SlideCodeMgmt-12.png)\n\n**Def:** Repository / diff or patch / commit (verb and noun) / branch / tag \n\n![](/assets/images/COOSATR.SlideCodeMgmt-13.png)\n\n- tag reste à jamais sur un commit alors que la branch change à chaque commit\n  - interface tig\n    - `[]` branches du pc local (en bold pour la branch current)\n    - `{}` branches sur le serveur\n\n**Def:** Working Tree / Index / Blob\n\n![](/assets/images/COOSATR.SlideCodeMgmt-14.png)\n\n### Git Interfaces\n\n![](/assets/images/COOSATR.SlideCodeMgmt-15.png)\n\nAutre interface: `git gui`\n\n### Git Forges\n\n![](/assets/images/COOSATR.SlideCodeMgmt-16.png)\n\n### Initial Setup\n\n![](/assets/images/COOSATR.SlideCodeMgmt-17.png)\n\n- `--global` configuration appliquée sur le pc\n- set favorite editor: `git config --global --add core.editor emacs -nw`\n- configuration stockée dans `~/.gitconfig`\n\n## Individual Developper\n\n![](/assets/images/COOSATR.SlideCodeMgmt-18.png)\n\n### Creating repository\n\n![](/assets/images/COOSATR.SlideCodeMgmt-19.png)\n\n### Adding files\n\n![](/assets/images/COOSATR.SlideCodeMgmt-20.png)\n\n### Querying Status\n\n![](/assets/images/COOSATR.SlideCodeMgmt-21.png)\n\n> Pour montrer le status du dossier\n\n### Committing changes\n\n![](/assets/images/COOSATR.SlideCodeMgmt-22.png)\n\n- `git commit -a` réalise un `add` et puis `commit` en une seule ligne\n- `-m` pour attacher un message au commit\n\n### Git Index\n\n![](/assets/images/COOSATR.SlideCodeMgmt-23.png)\n\n### Commits\n\n![](/assets/images/COOSATR.SlideCodeMgmt-24.png)\n\n- digital signature\n  - permet de comparer un clone en l'identifier avec une cle\n\n### Interactive add\n\n![](/assets/images/COOSATR.SlideCodeMgmt-25.png)\n\n- `-i` permet de visualiser quels fichiers selectionner pour le commit\n\n### Looking Back\n\n![](/assets/images/COOSATR.SlideCodeMgmt-26.png)\n\n- `index 6bd8f3c..c0ee9ab 100644` indique qu'on compare commit 6bd8f3c avec c0ee9ab et donne l'attribut de c0ee9ab avec 100644 pour indiquer si les permissions sont read/write/exe\n\n### Examining Changes\n\n![](/assets/images/COOSATR.SlideCodeMgmt-27.png)\n\n### Marking a version\n\n![](/assets/images/COOSATR.SlideCodeMgmt-28.png)\n\n### Fixing mistakes\n\n![](/assets/images/COOSATR.SlideCodeMgmt-29.png)\n\n## Using Branches\n\n![](/assets/images/COOSATR.SlideCodeMgmt-30.png)\n\n### Branches\n\n![](/assets/images/COOSATR.SlideCodeMgmt-31.png)\n\n### Switching branches\n\n![](/assets/images/COOSATR.SlideCodeMgmt-32.png)\n\n### Listing available branches\n\n![](/assets/images/COOSATR.SlideCodeMgmt-33.png)\n\n### Merging changes from another branche\n\n![](/assets/images/COOSATR.SlideCodeMgmt-34.png)\n\n- fast forward vs normal merge\n- software meld montre bien le principe des \"3 way merge\"\n\n### Handling conflicts\n\n![](/assets/images/COOSATR.SlideCodeMgmt-35.png)\n\n### Tools to help with merge\n\n![](/assets/images/COOSATR.SlideCodeMgmt-36.png)\n\n### Picking individual changes\n\n![](/assets/images/COOSATR.SlideCodeMgmt-37.png)\n\n- cherry-pick\n\n### Replaying changes from a branch\n\n![](/assets/images/COOSATR.SlideCodeMgmt-38.png)\n\n### Rebase\n\n![](/assets/images/COOSATR.SlideCodeMgmt-39.png)\n\n### Interactive Rebase\n\n![](/assets/images/COOSATR.SlideCodeMgmt-40.png)\n\n> DON'T USE after pushing ! Why ?\n\n## Working together\n\n![](/assets/images/COOSATR.SlideCodeMgmt-41.png)\n\n### Copying a repository\n\n![](/assets/images/COOSATR.SlideCodeMgmt-42.png)\n\n- le protocol GIT n'existe plus car n'est pas sécurisé\n\n### Remote repository\n\n![](/assets/images/COOSATR.SlideCodeMgmt-43.png)\n\n> La remote s'appelle par défaut `origin`\n\n### Updating from a repository\n\n![](/assets/images/COOSATR.SlideCodeMgmt-44.png)\n\n### Remote branches\n\n![](/assets/images/COOSATR.SlideCodeMgmt-45.png)\n\n`git branch -r`: va lister toutes les branche\n\n\n\n> Notes du 2022/09/08 - End\n\n---\n\n> Notes du 2022/09/14 - Start\n\n\n\n\n\n### Using rebase with remote branches\n\n![](/assets/images/COOSATR.SlideCodeMgmt-46.png)\n\n`git pull --rebase` \n- fait un `git fetch` comme le pull\n- puis un `git rebase` au lieu du `merge` que pull fait par défaut\n\n### Sending changes to a repository\n\n![](/assets/images/COOSATR.SlideCodeMgmt-47.png)\n\n### Managing remote repositories\n\n![](/assets/images/COOSATR.SlideCodeMgmt-48.png)\n\n## Other goodies\n\n![](/assets/images/COOSATR.SlideCodeMgmt-49.png)\n\n### Identifying authors\n\n![](/assets/images/COOSATR.SlideCodeMgmt-50.png)\n\n### Making a relase with git\n\n![](/assets/images/COOSATR.SlideCodeMgmt-51.png)\n\n### Submodules\n\n![](/assets/images/COOSATR.SlideCodeMgmt-52.png)\n\n`git clone --recursive` pour cloner aussi les submodules s'il y en a\n\n## Appendix\n\n![](/assets/images/COOSATR.SlideCodeMgmt-53.png)\n\n### Git for CTS User\n\n![](/assets/images/COOSATR.SlideCodeMgmt-54.png)\n\n\n\n\n> Notes du 2022/09/14 - End\n\n---","n":0.044}}},{"i":109,"$":{"0":{"v":"COO 101","n":0.707},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par G. Saurel\n\nSupport de cours:\n- [conception-orientee-objet-101.pdf](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-101.pdf)\n- [COOSTART.NotesGEA.20220831.pdf](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/COOSTART.NotesGEA.20220831.pdf)\n\n\n---\n\n> Notes du 2022/08/31 - Start\n\n![](/assets/images/COOSATR.SlideCours101.01.png)\n\n![](/assets/images/COOSATR.SlideCours101.02.png)\n\n![](/assets/images/COOSATR.SlideCours101.03.png)\n\n## Hello World\n\n![](/assets/images/COOSATR.SlideCours101.04.png)\n\n### Hello World: C++\n![](/assets/images/COOSATR.SlideCours101.05.png)\n\n```\n#include <iostream>\nauto main() -> int {\nstd::cout << \"hello\\n\";\nreturn 0;\n}\n```\n\n- a.out:\n  - fichier binaire directement compréhensible par l'ordinateur\n- ```g++ hello.cpp && ./a.out```\n  - ecriture shell -> langague unix\n  - commande de compilation\n  - puis excecute le fichier a.out\n\n- `true && echo \"Hello\"` -> affiche\n- `false && echo \"Hello\"` -> n'affiche pas\n\n\n\n### Hello World: Python\n![](/assets/images/COOSATR.SlideCours101.06.png)\n\n```\n#!/usr/bin/env python\n\nif __name__ == \"__main__\":\nprint(\"hello\")\n```\n\n- `#!` shybang indique à l'OS le type de fichier\n  - comportement différent selon l'OS\n\n```\nchmod +x hello.py && ./hello.py\n```\n\n### Data Types\n\n![](/assets/images/COOSATR.SlideCours101.07.png)\n\n- compilateur choisit pour nous le type\n\n- `auto ga{3}; // int`\n  - prends 4 places dans la mémoire\n\n\n- `auto bu{3.14}; // double`\n  - prends 8 places dans la mémoire\n\n\n- `auto to{\"tau\"};` devient automatiquement `const auto *const zo{\"tau\"}; // const char *const`\n  - magnière compliquée de corriger l'input \n  - `const` empêche toute modification de la variable (sinon retourne variable en lecture seule donc pas d'affectation)\n\n\n- `std::string meu{\"pi\"};`\n  - manière plus propre/optimale pour créer un string\n\n\n- **Attention**: ne pas optimiser avant d'avoir un programme lisible\n\n\n- concepts similaire en Python\n\n```\nga: int = 3\nbu: float = 3.14\nzo: str = \"pi\"\n```\n\n> Python et C++ sont des langages **fortement typés** (ecriture restrictive)\n\n\n## Counter Flow\n\n![](/assets/images/COOSATR.SlideCours101.08.png)\n\n### Functions\n\n![](/assets/images/COOSATR.SlideCours101.09.png)\n\n\n\n`auto add(int first, int second) -> int {`\n  - auto pour choisir le type de la fonction\n  - add nom de la fct\n  - deux parametres\n  - retourne un int\n\n`return first + second;`\n  - réalise la somme\n\n`}`\n\n> L'execution est linéaire mais le compilateur lui regarde le code par unité de compilation (de façon plus globale que linéaire)\n\n### Conditions: C++\n\n![](/assets/images/COOSATR.SlideCours101.10.png)\n\n### Conditions: Python\n\n![](/assets/images/COOSATR.SlideCours101.11.png)\n\n### Loops: While\n\n![](/assets/images/COOSATR.SlideCours101.12.png)\n\n#### C++\n\n```\nauto user_input{0};\nwhile (user_input != 42) {\nstd::cout << \"guess: \";\nstd::cin >> user_input;\n}\n```\n\nTODO: Rajouter un indice chaud/froid à l'utilisateur\n\n#### Python\n\n```\nuser_input: int = 0\nwhile user_input != 42:\nuser_input = int(input(\"guess: \"))\n```\n\n- `int(input(...))` sur python il faut lui indiquer le type\n\n#### Walrus\n\n```\nwhile (user_input := int(input(\"guess: \"))) != 42:\nprint(\"it's not\", user_input)\n```\n\n- `:=` symbol/technique _walrus_\n\n> Contrairement au C++, Python \"_impose_\" une manière de coder selon que cela soit plus convenable pour la communauté donc Walrus n'est pas recommandé puisqu'il est plus difficile à lire\n\n\n### Loops: Break C++\n\n![](/assets/images/COOSATR.SlideCours101.13.png)\n\n### Loops: Break Python\n\n![](/assets/images/COOSATR.SlideCours101.14.png)\n\n### Loops: for/break C++\n\n![](/assets/images/COOSATR.SlideCours101.15.png)\n\n> pas obliger d'avoir un break dans une boucle for\n\n### Loops: for/break Python\n\n![](/assets/images/COOSATR.SlideCours101.16.png)\n\n### Loops: continue\n\n![](/assets/images/COOSATR.SlideCours101.17.png)\n\n> `continue` fait retourner au début de la boucle et ne s'applique que sur la boucle la plus proche\n\n> CPU ne sait pas faire de boucle mais fait des **saut conditionnel**\n\n### Loops: containers\n\n![](/assets/images/COOSATR.SlideCours101.18.png)\n\n- sur C++ peu de types primitifs le reste c'est des objets\n\n- sur python il n'y a que des objets\n\n- containers est un type d'objet (i.e. de type vecteur)\n\n#### C++\n\n`using Colors = std::vector<std::string>;`\n\n`Colors colors{\"orange\", \"blue\", \"pink\"};`\n  - ici on ne peut pas utiliser `auto`\n\n`for (const auto &color: colors) {`\n  - ici le compilateur propose de rajouter `&` à colors\n  - on définit une variable `color` comme indice\n\n`std::cout << color << \"\\n\";`\n\n`}`\n\n#### Python\n\n```\ncolors = [\"orange\", \"blue\", \"pink\"]\nfor color in colors:\nprint(color)\n```\n> plus facile qu'en C++\n\n## Objects\n\n![](/assets/images/COOSATR.SlideCours101.19.png)\n\n### C++\n\n![](/assets/images/COOSATR.SlideCours101.20.png)\n\n```\nclass Robot {\n  public:\n    auto work() { battery -= 5; }\n    \\\\ methode pour changer le niveau de la batterie\n    auto get_battery() const -> int { return battery; }\n    \\\\ methode pour donner la valeur de la batterie a d autre partie du code\n    \\\\ methode avec effet de bord constant elle ne modifie pas le contenu de la classe\n  protected:\n    int battery{100}; \\\\ initialise la batterie a 100\n};\n\nauto main() -> int {\n  auto robot = Robot{};\n  std::cout << robot.get_battery() << \"%remaining\\n\";\n  robot.work();\n  std::cout << robot.get_battery() << \"%remaining\\n\";\n  return 0;\n}\n```\n\n- L'objet \"correspond\" à la variable et la méthode \"correspond\" à la fonction\n\n- On ne peut pas faire une méthode charge avec une entete contenant `const` puisqu'on veut modifier la valeur d'un attribut de la classe mais const nous en empêche.\n\n  exemple: `auto charge(int new_value) const -> {battery +=1:}` ce code retournera une erreur\n\n### Python\n\n![](/assets/images/COOSATR.SlideCours101.21.png)\n\n```\nclass Robot:\n  battery = 100\n\n  def work(self):\n    self.battery -= 5\n  def get_battery(self) -> int:\n    return self.battery\n\nif __name__ == \"__main__\":\n  robot = Robot()\n  print(robot.get_battery(), \"% remaining\")\n  robot.work()\n  print(robot.get_battery(), \"% remaining\")\n```\n\n- Sur Python il n'existe pas de type `const` du coup l'utilisateur peut toujours modifier donc sur python il n'y a pas de protection des variables\n\n- `robot = Robot()` instancie une variable robot de type Robot\n\n### Inheritance: C++\n\n![](/assets/images/COOSATR.SlideCours101.22.png)\n\n```\nclass LeggedRobot : public Robot {\n  public:\n    auto walk() { battery -= 10; }\n};\n\nauto main() -> int {\n  auto robot = LeggedRobot{};\n  std::cout << robot.get_battery() << \"% remaining\\n\";\n  robot.work();\n  robot.walk();\n  std::cout << robot.get_battery() << \"% remaining\\n\";\n  return 0;\n}\n```\n\n### Inheritance: Python\n\n![](/assets/images/COOSATR.SlideCours101.23.png)\n\n```\nclass LeggedRobot(Robot):\n  def walk(self):\n    self.battery -= 10\n\nif __name__ == \"__main__\":\n  robot = LeggedRobot()\n  print(robot.get_battery(), \"% remaining\")\n  robot.work()\n  robot.walk()\n  print(robot.get_battery(), \"% remaining\")\n```\n\n> Notes du 2022/08/31 - End\n\n---","n":0.036}}},{"i":110,"$":{"0":{"v":"BackUpTalks20221001","n":1}}},{"i":111,"$":{"0":{"v":"Tooling","n":1},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\nid: s2xc4iwmfsims2gvoxlr37k\ntitle: Tooling\ndesc: ''\nupdated: 1664628178122\ncreated: 1664628178122\nsubtitle: for Python & C++\ntheme: laas\nauthor: Guilhem Saurel\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n-->\n\n## This presentation\n\n### Available at\n\n\\centering\n\n[`https://homepages.laas.fr/gsaurel/talks/\ntooling.pdf`](https://homepages.laas.fr/gsaurel/talks/tooling.pdf)\n\n### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n## This presentation (continued)\n\n### Source\n\n\\centering\n\n[`https://gitlab.laas.fr/gsaurel/talks :\ntooling.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/tooling.md)\n\n### Discussions\n\n\\centering\n\n\\url{https://im.laas.fr/\\#/room/\\#python-tooling:laas.fr}\n\n## Outline\n\n\\tableofcontents\n\n# Motivation\n\n## Write readable code\n\n> Code is read much more often than it is written\n\n\\hfill --- Guido Van Rossum\n\n. . .\n\n- read → write\n- teamwork\n- future self\n\n# Style\n\n## PEP 8\n\n### Style Guide for Python Code\n\n[https://peps.python.org/pep-0008/](https://peps.python.org/pep-0008/)\n\n- indentation: 4 spaces\n- maximum line length: 79\n- whitespaces\n- comments\n- naming\n\n## pep8 → pycodestyle\n\n[https://github.com/PyCQA/pycodestyle](https://github.com/PyCQA/pycodestyle)\n\n. . .\n\n```\n$ pycodestyle --first optparse.py\noptparse.py:69:11: E401 multiple imports on one line\noptparse.py:347:31: E211 whitespace before '('\noptparse.py:357:17: E201 whitespace after '{'\noptparse.py:472:29: E221 multiple spaces before operator\n```\n\n## flake8\n\n[https://github.com/PyCQA/flake8](https://github.com/PyCQA/flake8)\n\npycodestyle + pyflakes + mccabe\n\n## clang-format\n\n[https://clang.llvm.org/docs/ClangFormat.html](https://clang.llvm.org/docs/ClangFormat.html)\n\n```bash\n$ clang-format -i QGVCore/QGVScene.cpp\n```\n```diff\n@@ -173,14 +173,11 @@\n   // Update items layout\n-  foreach( QGVNode* node, _nodes ) {\n-    node->updateLayout();\n-  }\n+  foreach (QGVNode *node, _nodes) node->updateLayout();\n```\n\n## yapf\n\n[https://github.com/google/yapf](https://github.com/google/yapf)\n\nbased on clang-format / gofmt, but for python\n\n\n```python\nx = {  'a':37,'b':42,\n\n'c':927}\n```\n\n. . .\n\n```python\nx = {'a': 37, 'b': 42, 'c': 927}\n```\n\n## black\n\n[https://github.com/psf/black](https://github.com/psf/black)\n\n![black](media/black.png)\n\n\n\n## black main caveat\n\n```python\nsuper_long_line.with_small_argument = [0]  # some comment\n```\n\n. . .\n\n\n```python\nsuper_long_line.with_small_argument = [\n    0\n]  # some comment\n```\n\n. . .\n\n```python\n# some comment\nsuper_long_line.with_small_argument = [0]\n```\n\n# Static analysis\n\n## Mypy: motivation\n\n```python\ndef add(a: int, b: int) -> int:\n    \"\"\"Performs addition on integers.\n\n    >>> add(3, 4)\n    7\n    \"\"\"\n    return a + b\n\n\nif __name__ == \"__main__\":\n    import sys\n\n    print(add(sys.argv[1], sys.argv[2]))\n```\n\n## Mypy\n\n```\n$ python add.py 3 4\n34\n```\n\n. . .\n\n\n```\n$ mypy add.py\nadd.py:13: error: Argument 1 to \"add\" has incompatible\n                  type \"str\"; expected \"int\"\nadd.py:13: error: Argument 2 to \"add\" has incompatible\n                  type \"str\"; expected \"int\"\nFound 2 errors in 1 file (checked 1 source file)\n```\n\n## pyupgrade\n\n[https://github.com/asottile/pyupgrade](https://github.com/asottile/pyupgrade)\n\n```diff\n class C(Base):\n     def f(self):\n-        super(C, self).f()\n+        super().f()\n```\n\n. . .\n\nFor C++: `clang-tidy`\n\n# Meta\n\n## Editor / IDE integration\n\nBring your own ;)\n\n## pre-commit\n\n[https://github.com/pre-commit/pre-commit](https://github.com/pre-commit/pre-commit)\n\n```bash\n$ cat .pre-commit-config.yaml\n```\n\n```yaml\nrepos:\n-   repo: https://github.com/psf/black\n    rev: 22.3.0\n    hooks:\n    -   id: black\n-   repo: https://github.com/pre-commit/mirrors-clang-format\n    rev: v14.0.3\n    hooks:\n    -   id: clang-format\n        args: [-i, --style=Google]\n```\n\n## pre-commit usage\n\n```\npre-commit run -a\n```\n\n. . .\n\n```\npre-commit install\n```\n\n## pre-commit CI\n\n[https://pre-commit.ci/](https://pre-commit.ci/)\n\n## That's all folks !\n\nThanks for your time :)","n":0.057}}},{"i":112,"$":{"0":{"v":"Python Tooling","n":0.707},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\nid: u5fiyqsnwvglqvwg3zc12kv\ntitle: Python Tooling\ndesc: ''\nupdated: 1664628178095\ncreated: 1664628178095\ntheme: laas\nauthor: Guilhem Saurel\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n-->\n\n## This presentation\n\n### Available at\n\n\\centering\n\n[`https://homepages.laas.fr/gsaurel/talks/\npython-tooling.pdf`](https://homepages.laas.fr/gsaurel/talks/python-tooling.pdf)\n\n### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n## This presentation (continued)\n\n### Source\n\n\\centering\n\n[`https://gitlab.laas.fr/gsaurel/talks :\npython-tooling.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/python-tooling.md)\n\n### Discussions\n\n\\centering\n\n\\url{https://im.laas.fr/\\#/room/\\#python-tooling:laas.fr}\n\n## Outline\n\n\\tableofcontents\n\n# Motivation\n\n## `import this`\n\nThe Zen of Python, by Tim Peters (extracts)\n\n- Beautiful is better than ugly.\n- Readability counts.\n- There should be one-- and preferably only one --obvious way to do it.\n\n## Write readable code\n\n> Code is read much more often than it is written\n\n\\hfill --- Guido\n\n. . .\n\n- read → write\n- teamwork\n- future self\n\n\n# Style\n\n## PEP 8\n\n### Style Guide for Python Code\n\n[https://peps.python.org/pep-0008/](https://peps.python.org/pep-0008/)\n\n- indentation: 4 spaces\n- maximum line length: 79\n- whitespaces\n- comments\n- naming\n\n## pep8 → pycodestyle\n\n[https://github.com/PyCQA/pycodestyle](https://github.com/PyCQA/pycodestyle)\n\n. . .\n\n```\n$ pycodestyle --first optparse.py\noptparse.py:69:11: E401 multiple imports on one line\noptparse.py:77:1: E302 expected 2 blank lines, found 1\noptparse.py:88:5: E301 expected 1 blank line, found 0\noptparse.py:347:31: E211 whitespace before '('\noptparse.py:357:17: E201 whitespace after '{'\noptparse.py:472:29: E221 multiple spaces before operator\n```\n\n## PEP 257 / pydocstyle\n\n[https://github.com/PyCQA/pydocstyle](https://github.com/PyCQA/pydocstyle)\n\nMostly helps as a reminder to write some doc\n\n```\n$ pydocstyle test.py\ntest.py:18 in private nested class `meta`:\n        D101: Docstring missing\ntest.py:27 in public function `get_user`:\n    D300: Use \"\"\"triple double quotes\"\"\" (found '''-quotes)\ntest:75 in public function `init_database`:\n    D201: No blank lines allowed before function docstring (found 1)\n```\n\n## flake8\n\n[https://github.com/PyCQA/flake8](https://github.com/PyCQA/flake8)\n\npycodestyle  + pyflakes + mccabe\n\n## yapf\n\n[https://github.com/google/yapf](https://github.com/google/yapf)\n\nclang-format / gofmt\n\n\n```python\nx = {  'a':37,'b':42,\n\n'c':927}\n```\n\n. . .\n\n```python\nx = {'a': 37, 'b': 42, 'c': 927}\n```\n\n## black\n\n[https://github.com/psf/black](https://github.com/psf/black)\n\n![black](media/black.png)\n\n\n\n## black main caveat\n\n```python\nsuper_long_line.with_small_argument = [0]  # some comment\n```\n\n. . .\n\n\n```python\nsuper_long_line.with_small_argument = [\n    0\n]  # some comment\n```\n\n. . .\n\n```python\n# some comment\nsuper_long_line.with_small_argument = [0]\n```\n\n## isort\n\n[https://github.com/PyCQA/isort](https://github.com/PyCQA/isort)\n\nsorts imports.\n\n# Packaging\n\n## Poetry\n\n[https://github.com/python-poetry/poetry](https://github.com/python-poetry/poetry)\n\n- `poetry init`\n- `pyproject.toml`\n- minimal python version\n- dependencies / dev-dependencies\n- virtualenv\n- sdist / wheel builder\n\n## Others\n\nref. \"[Managing Python Packages](https://homepages.laas.fr/gsaurel/talks/managing-python-packages.pdf)\"\n\n# Tests\n\n## unittest\n\n[https://docs.python.org/3/library/unittest.html](https://docs.python.org/3/library/unittest.html)\n\n```python\nimport unittest\n\nclass TestStringMethods(unittest.TestCase):\n\n    def test_upper(self):\n        self.assertEqual('foo'.upper(), 'FOO')\n\n    def test_isupper(self):\n        self.assertTrue('FOO'.isupper())\n        self.assertFalse('Foo'.isupper())\n\n\nif __name__ == '__main__':\n    unittest.main()\n```\n\n## unittest launch\n\n```\n$ python test_string.py\n..\n--------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\n\n```\n\n. . .\n\nou\n\n```\n$ python -m unittest\n..\n--------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\n```\n\n## doctest\n\n[https://docs.python.org/3/library/doctest.html](https://docs.python.org/3/library/doctest.html)\n\n```python\ndef factorial(n):\n    \"\"\"Return the factorial of n, an exact integer >= 0.\n\n    >>> [factorial(n) for n in range(6)]\n    [1, 1, 2, 6, 24, 120]\n    >>> factorial(30)\n    265252859812191058636308480000000\n    >>> factorial(-1)\n    Traceback (most recent call last):\n        ...\n    ValueError: n must be >= 0\n    \"\"\"\n\n```\n\n## doctest launch\n\n```python\nif __name__ == \"__main__\":\n    import doctest\n    doctest.testmod()\n```\n\n## Others\n\n- pytest\n- tox\n\n# Coverage\n\n## Coverage.py\n\n[https://github.com/nedbat/coveragepy](https://github.com/nedbat/coveragepy)\n\n```\n$ coverage run -m unittest discover\n$ coverage report -m\nName                  Stmts   Miss  Cover   Missing\n---------------------------------------------------\nmy_program.py            20      4    80%   33-35, 39\nmy_other_module.py       56      6    89%   17-23\n---------------------------------------------------\nTOTAL                    76     10    87%\n```\n. . .\n\n```\n$ coverage html\n```\n[sample](https://nedbatchelder.com/files/sample_coverage_html/index.html)\n\n## online\n\n- https://coveralls.io/\n- https://about.codecov.io/\n\n## Gitlab\n\nSettings → CI/CD → General pipelines → Test coverage parsing\n\n# Static analysis\n\n## Mypy: motivation\n\n```python\ndef add(a: int, b: int) -> int:\n    \"\"\"Performs addition on integers.\n\n    >>> add(3, 4)\n    7\n    \"\"\"\n    return a + b\n\n\nif __name__ == \"__main__\":\n    import sys\n\n    print(add(sys.argv[1], sys.argv[2]))\n```\n\n## Mypy\n\n```\n$ python add.py 3 4\n34\n```\n\n. . .\n\n\n```\n$ mypy add.py\nadd.py:13: error: Argument 1 to \"add\" has incompatible\n                  type \"str\"; expected \"int\"\nadd.py:13: error: Argument 2 to \"add\" has incompatible\n                  type \"str\"; expected \"int\"\nFound 2 errors in 1 file (checked 1 source file)\n```\n\n## pyupgrade\n\n[https://github.com/asottile/pyupgrade](https://github.com/asottile/pyupgrade)\n\n```diff\n class C(Base):\n     def f(self):\n-        super(C, self).f()\n+        super().f()\n```\n\n## Pylint\n\npass…\n\n# Meta\n\n## Editor / IDE integration\n\nBring your own ;)\n\n## pre-commit\n\n[https://github.com/pre-commit/pre-commit](https://github.com/pre-commit/pre-commit)\n\n`.pre-commit-config.yaml`\n\n```yaml\nrepos:\n-   repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.2.0\n    hooks:\n    -   id: check-yaml\n    -   id: end-of-file-fixer\n    -   id: trailing-whitespace\n-   repo: https://github.com/psf/black\n    rev: 22.3.0\n    hooks:\n    -   id: black\n```\n\n## pre-commit usage\n\n```\npre-commit run -a\n```\n\n. . .\n\n```\npre-commit install\n```\n\n. . .\n\ndemo\n\n## pre-commit CI\n\n[https://pre-commit.ci/](https://pre-commit.ci/)\n\n## Badges\n\n- ![](media/codecov.png)\n- ![](media/pre-commit-ci.png)\n- ![](media/badge-black.png)\n- ![](media/gitlab.png)\n\n## Questions ?\n\nThanks for your time :)\n\n## Proposition\n\n- flake8\n- black\n- isort\n- pyupgrade\n- pre-commit","n":0.044}}},{"i":113,"$":{"0":{"v":"Introduction to Modern CMake","n":0.5},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\nid: trraffztts6499imvn5e1q0\ntitle: Introduction to Modern CMake\ndesc: ''\nupdated: 1664628178080\ncreated: 1664628178080\nsubtitle: C++ dependency tutorial\ntheme: laas\nauthor: Guilhem Saurel\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n-->\n\n## This presentation\n\n### Available at\n\n\\centering\n\n[`https://homepages.laas.fr/gsaurel/talks/\nmodern-cmake.pdf`](https://homepages.laas.fr/gsaurel/talks/modern-cmake.pdf)\n\n### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n## This presentation (continued)\n\n### Source\n\n\\centering\n\n[`https://gitlab.laas.fr/gsaurel/talks :\nmodern-cmake.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/modern-cmake.md)\n\n### Discussions\n\n\\centering\n\n\\url{https://im.laas.fr/\\#/room/\\#modern-cmake:laas.fr}\n\n## C++ Workflow\n\n### Configure\n\n- Find the dependencies you need\n- Declare the options you want\n\n. . .\n\n### Compile\n\n- Generate the right arguments for your compiler\n- Run it\n\n. . .\n\n### Run\n\n- Start your executable with its associated `*.so`\n\n## Example\n\n- You develop a library called \"my-lib\"\n- It needs a dependency from someone else called \"a-dep\"\n\n. . .\n\n```\n└── $A_DEP_INSTALL_PREFIX\n    ├── include\n    │   └── a-dep\n    │       └── fwd.hpp\n    └── lib\n        └── liba-dep.so\n```\n\n## Legacy CMake\n\n### `FindA-dep.cmake`\n\n```cmake\nfind_path(a_dep_INCLUDE_DIRS NAMES a-dep/fwd.hpp)\nfind_library(a_dep_LIBRARIES NAMES liba-dep.so)\n```\n\n. . .\n\n### `CMakeLists.txt`\n\n```cmake\nfind_package(a-dep REQUIRED)\ninclude_directories(${a_dep_INCLUDE_DIRS})\nlink_libraries(${a_dep_LIBRARIES})\nadd_library(my-prog main.cpp include/my-proj/fwd.hpp)\n```\n\n## Modern CMake\n\n### `CMakeLists.txt`\n\n```cmake\nfind_package(a-dep REQUIRED)\nadd_library(my-lib main.cpp include/my-prog/fwd.hpp)\ntarget_link_libraries(my-prog PUBLIC a-dep::a-dep)\n```\n\n### `a-dep-config.cmake`\n\n```cmake\nadd_library(a-dep::a-dep SHARED IMPORTED)\nset_target_properties(a-dep::a-dep PROPERTIES\n  LINK_LIBRARIES \"liba-dep.so\"\n  INCLUDE_DIRECTORIES \"${_IMPORTED_PREFIX}/include\")\n```\n\n## Advantages\n\n1. `a-dep` can change whatever it needs\n\n. . .\n\n2. No more naming issues like\n\n```cmake\nset(A_DEP_INCLUDE_DIRS ${a_dep_INCLUDE_DIRS})\nset(A_DEP_INCLUDE_DIR ${a_dep_INCLUDE_DIRS})\nset(a_dep_INCLUDE_DIR ${a_dep_INCLUDE_DIRS})\n```\n\n. . .\n\n3. Relocatable packages\n\n## Relocation\n\n### `my-lib-config.cmake` from legacy a-dep\n\n```cmake\nadd_library(my-lib::my-lib SHARED IMPORTED)\nset_target_properties(my-lib::my-lib PROPERTIES\n  LINK_LIBRARIES \"libmy-lib.so;/usr/lib/liba-dep.so\"\n  INCLUDE_DIRECTORIES\n  \"${_IMPORTED_PREFIX}/include;/usr/include\")\n```\n\n. . .\n\n### `my-lib-config.cmake` from modern a-dep\n\n```cmake\nfind_dependency(a-dep REQUIRED)\nadd_library(my-lib::my-lib SHARED IMPORTED)\nset_target_properties(my-lib::my-lib PROPERTIES\n  LINK_DEPENDENT_LIBRARIES \"a-dep::a-dep\"\n  LINK_LIBRARIES \"libmy-lib.so\"\n  INCLUDE_DIRECTORIES \"${_IMPORTED_PREFIX}/include\")\n```\n\n\n## That's all folks !\n\nThanks for your time :)","n":0.073}}},{"i":114,"$":{"0":{"v":"Quick MarkDown Reference","n":0.577},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\nid: rvlr05jhkulo1uzm2rg9vy4\ntitle: Quick MarkDown Reference\ndesc: ''\nupdated: 1664628178061\ncreated: 1664628178061\nsubtitle: Beamer presentation with Pandoc\ntheme: laas\nauthor: Guilhem Saurel\ndate: '2021-10-08T00:00:00.000Z'\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n-->\n\n## This presentation\n\n### Available at\n\n- [`gitlab.laas.fr/gsaurel/talks : howto.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/howto.md)\n- [`homepages.laas.fr/gsaurel/talks/howto.pdf`](https://homepages.laas.fr/gsaurel/talks/howto.pdf)\n\n### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n## Table of contents\n\n\\tableofcontents\n\n# First Part\n\n## Slide title\n\nHow-to Slides\n\nFormating: *em* **bold** `mono` ~~strikethrough~~\ntext~subscript~^superscript^\n\n## {Un,}ordered Lists, pause\n\n- eggs\n- butter\n- ham\n\n. . .\n\n1. Thing\n2. Do\n3. Words\n4. You\n\n## Code\n```python\n#!/usr/bin/env python3\nfrom math import pi as π\n\nclass Circle:\n    \"\"\"Define a circle from its radius.\"\"\"\n    def __init__(self, r):\n        # such maths, very difficult, wow\n        if r < 0:\n            raise AttributeError('wrong radius')\n        self.P = 2 * π * r\n        self.S = π * r ** 2\n```\n\n# Second Part\n\n## Maths\n\n$\\begin{aligned}\n\\vec{\\nabla} \\cdot  \\vec{\\mathcal{E}} & = \\frac{\\rho}{\\epsilon_0} \\\\\n\\vec{\\nabla} \\times \\vec{\\mathcal{E}} & = -\\frac{\\partial \\vec{\\mathcal{B}}}{\\partial t} \\\\\n\\vec{\\nabla} \\cdot  \\vec{\\mathcal{B}} & = 0 \\\\\n\\vec{\\nabla} \\times \\vec{\\mathcal{B}} & = \\mu_0\\vec{\\mathcal{J}} + \\epsilon_0\\frac{\\partial \\vec{\\mathcal{E}}}{\\partial t}\n\\end{aligned}$\n\n## Tables\n\n| Right | Left | Default | Center |\n|------:|:-----|---------|:------:|\n|   12  |  12  |    12   |    12  |\n|  123  |  123 |   123   |   123  |\n|  *1*  |  `1` |  **1**  |  ~~1~~ |\n\n## Images\n\n![Doc](media/doc.jpg){width=5cm}\n\n## Citations\n\n> Look ! The trees… They're moving !\n\n\\hfill --- @transhumus\n\n## References","n":0.075}}},{"i":115,"$":{"0":{"v":"Git Forges","n":0.707},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\ntitle: \"Git: Forges\"\nsubtitle: Issues, Branches, Forks, Requests, CI, and Workflows\ntheme: laas\nauthor: Guilhem Saurel\ndate: 25/01/2022\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n...\n-->\n\n## This presentation\n\n### Available at\n\n\\centering\n\n[`https://homepages.laas.fr/gsaurel/talks/\ngit-forges.pdf`](https://homepages.laas.fr/gsaurel/talks/git-forges.pdf)\n\n### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n## This presentation (continued)\n\n### Source\n\n\\centering\n\n[`https://gitlab.laas.fr/gsaurel/talks :\ngit-forges.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/git-forges.md)\n\n### Discussions\n\n\\centering\n\n<!-- \\href doesn't like #, so let's directly use \\url -->\n\\url{https://im.laas.fr/\\#/room/\\#git-forges:laas.fr}\n\n## Outline\n\n\\tableofcontents\n\n# Introduction\n\n## What are software forges\n\n- Software management\n    - git repository (web, HTTPS, SSH)\n    - authorizations\n    - issue tracker\n\n## Hirarchy\n\n1. domain\n2. username *OR* group (organization)\n3. project\n\n\n- `https:// gitlab.laas.fr / gsaurel / talks`\n- `https:// github.com / gepetto / example-adder`\n\n\n## Issues\n\n- bug fix / feature request\n- Github / Gitlab: `#4`\n- referencable from git:\n    - `git commit -m \"add test for user input, ref #4\"`\n    - `git commit -m \"sanitize user input, fix #4\"`\n\n# Branches\n\n## Goal\n\n![nvie](media/nvie.png)\n\n## Usual branches\n\n- default: `master` or `main`\n- `devel`, `stable`\n- `issue/5`\n- `topic/something`\n\n# Forks\n\n## 2 types of fork\n\n- scission (software development)\n    - document motivations\n    - rename\n    - change logo / website etc.\n    - ensure compatibility\n- collaboration (git forges)\n    - try to keep synchronized\n\n\n## 2 types of fork\n\n- scission (software development)\n    - document motivations\n    - rename\n    - change logo / website etc.\n    - ensure compatibility\n- **collaboration (git forges)**\n    - try to keep synchronized\n\n## Work locally with multiple forks\n\n```\ngit clone --recursive \\\n        git@gitlab.laas.fr:gsaurel/example-adder.git\ncd example-adder\ngit remote add gepetto \\\n        git@gitlab.laas.fr:gepetto/example-adder.git\n```\n\n. . .\n\n```\ngit pull gepetto master\ngit push origin master\n```\n\n## SSH shortcut\n\n```ini\n# ~/.ssh/config\nHost gl\n    HostName gitlab.laas.fr\n    User git\n```\n\n```\ngit clone --recursive gl:gsaurel/example-adder\n```\n\n# Requests\n\n## Gitlab\n\n![Merge Request](media/mr.png)\n\n## Gitlab from command line\n\n```\ngit push -o merge_request.create \\\n         -o merge_request.target=devel \\\n         origin topic/something\n```\n\n## Github\n\n![Pull Request](media/pr.png)\n\n## Github from command line\n\nRequired: https://cli.github.com/\n\n```\ngh pr create\n```\n\n# CI\n\n## Gitlab\n\n```yml\n# .gitlab-ci.yml\nimage: gitlab.laas.fr:4567/gsaurel/talks\n\nbuild:\n  script:\n    - make\n\ntest:\n  script:\n    - make test\n```\n\n## Gitlab shortcut\n\n```\ngit config --global alias.mwps \"push \\\n        -o merge_request.create \\\n        -o merge_request.target=devel \\\n        -o merge_request.merge_when_pipeline_succeeds \\\n        -o merge_request.remove_source_branch\"\n```\n\n```\ngit mwps origin topic/something\n```\n\n## Github\n\n```yml\n# .github/workflows/build.yml\nname: Build\non: [push,pull_request]\n\njobs:\n  build:\n    name: Transpile markdown sources into PDF\n    runs-on: nim65s/talks\n    steps:\n      - uses: actions/checkout@v2\n      - run: make\n```\n\n# Workflows\n\n## Example\n\n![nvie](media/nvie.png)\n\n# End notes\n\n## References\n\nhttps://learngitbranching.js.org/\nhttps://nvie.com/posts/a-successful-git-branching-model/\nhttps://docs.github.com/en/get-started/quickstart/github-flow\n\n## Questions ?\n\nThanks for your time :)","n":0.057}}},{"i":116,"$":{"0":{"v":"Conception Orientée Objet, Outils","n":0.5},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\nid: c0u829x8bg2xjzo8phnwq5h\ntitle: 'Conception Orientée Objet, Outils'\ndesc: ''\nupdated: 1664628178011\ncreated: 1664628178011\nsubtitle: Université Toulouse Paul Sabatier - KEAR9RA1\ntheme: laas\nauthor: Guilhem Saurel\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n-->\n\n## This presentation\n\n### Available at\n\n\\centering\n\n[`https://homepages.laas.fr/gsaurel/talks/\nconception-orientee-objet-outils.pdf`](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-outils.pdf)\n\n### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n## This presentation (continued)\n\n### Source\n\n\\centering\n\n[`https://gitlab.laas.fr/gsaurel/talks :\nconception-orientee-objet-outils.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/conception-orientee-objet-outils.md)\n\n### Discussions\n\n\\centering\n\n\\url{https://im.laas.fr/\\#/room/\\#conception-orientee-objet:laas.fr}\n\n# Vous\n\n## Ergonomie\n\n- hauteurs\n- position\n- distances\n\n. . .\n\nAdaptez votre environement\n\n## Clavier\n\n![bépo](media/bépo.png)\n[`https://bépo.fr`](https://bepo.fr)\n\n# Style\n\n## Écrire du code lisible\n\n> Code is read much more often than it is written\n\n\\hfill --- Guido Van Rossum\n\n\n## PEP 8\n\n[`https://peps.python.org/pep-0008/`](https://peps.python.org/pep-0008/)\n\n```python\nprint ( \"hello\" )\n```\n\n. . .\n\n```\n╰─>$ flake8 hello-spaces.py\nhello-spaces.py:1:6: E211 whitespace before '('\nhello-spaces.py:1:8: E201 whitespace after '('\nhello-spaces.py:1:16: E202 whitespace before ')'\n```\n\n## black\n\n[`https://github.com/psf/black`](https://github.com/psf/black)\n\n```\n╰─>$ black hello-spaces.py\nreformatted hello-spaces.py\n\nAll done!\n1 file reformatted.\n```\n\n. . .\n\n```diff\n-print ( \"hello\" )\n+print(\"hello\")\n```\n\n## clang-format\n\n[https://clang.llvm.org/docs/ClangFormat.html](https://clang.llvm.org/docs/ClangFormat.html)\n\n```bash\n╰─>$ clang-format -i QGVScene.cpp\n```\n\n```diff\n-for( auto node : _nodes ) {\n-  node->update_layout();\n-}\n+for (auto *node : _nodes) node->update_layout();\n```\n\n# Analyse Statique\n\n## Mypy: motivation\n\n```python\ndef add(a: int, b: int) -> int:\n    \"\"\"Performs addition on integers.\n\n    >>> add(3, 4)\n    7\n    \"\"\"\n    return a + b\n\n\nif __name__ == \"__main__\":\n    import sys\n\n    print(add(sys.argv[1], sys.argv[2]))\n```\n\n## Mypy\n\n```\n╰─>$ python add.py 3 4\n34\n```\n\n. . .\n\n\n```\n╰─>$ mypy add.py\nadd.py:13: error: Argument 1 to \"add\" has incompatible\n                  type \"str\"; expected \"int\"\nadd.py:13: error: Argument 2 to \"add\" has incompatible\n                  type \"str\"; expected \"int\"\nFound 2 errors in 1 file (checked 1 source file)\n```\n\n## pyupgrade\n\n[https://github.com/asottile/pyupgrade](https://github.com/asottile/pyupgrade)\n\n```diff\n class C(Base):\n     def f(self):\n-        super(C, self).f()\n+        super().f()\n```\n\n. . .\n\nEn C++: `clang-tidy`\n\n# Méta\n\n## Éditeur de texte / IDE\n\nBring your own ;)\n\n## pre-commit\n\n[https://github.com/pre-commit/pre-commit](https://github.com/pre-commit/pre-commit)\n\n```bash\n╰─>$ cat .pre-commit-config.yaml\n```\n\n```yaml\nrepos:\n-   repo: https://github.com/psf/black\n    rev: 22.8.0\n    hooks:\n    -   id: black\n-   repo: https://github.com/pre-commit/mirrors-clang-format\n    rev: v14.0.6\n    hooks:\n    -   id: clang-format\n```\n\n## pre-commit: utilisation\n\n[https://github.com/pre-commit/pre-commit](https://github.com/pre-commit/pre-commit)\n\n```\n╰─>$ pre-commit run -a\n```\n\n. . .\n\n```\n╰─>$ pre-commit install\n```\n\n## pre-commit CI\n\n[https://pre-commit.ci/](https://pre-commit.ci/)","n":0.065}}},{"i":117,"$":{"0":{"v":"Conception Orientée Objet, Intro","n":0.5},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\nid: nvf12dbqg08g7yxn0p0fqz5\ntitle: 'Conception Orientée Objet, Intro'\ndesc: ''\nupdated: 1664628177992\ncreated: 1664628177992\nsubtitle: Université Toulouse Paul Sabatier - KEAR9RA1\ntheme: laas\ndate: '2022-08-31T00:00:00.000Z'\nauthor: Guilhem Saurel\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n-->\n\n## This presentation\n\n### Available at\n\n\\centering\n\n[`https://homepages.laas.fr/gsaurel/talks/\nconception-orientee-objet-intro.pdf`](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-intro.pdf)\n\n### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n## This presentation (continued)\n\n### Source\n\n\\centering\n\n[`https://gitlab.laas.fr/gsaurel/talks :\nconception-orientee-objet-intro.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/conception-orientee-objet-intro.md)\n\n### Discussions\n\n\\centering\n\n\\url{https://matrix.to/\\#/\\#conception-orientee-objet:laas.fr}\n\n# Présentations\n\n## Moi\n\n![Ingénieur de recherche en robotique humanoïde](media/robots.jpg){width=60%}\n\n## Moi (encore)\n\n- Responsable de 100+ logiciels C++ et/ou Python:\n    - Conseil\n    - Pérennisation\n    - Diffusion\n- Développement d’exemples\n- Formations techniques\n- Web\n\n. . .\n\n- Perso / Asso:\n    - Developpements Python / Rust\n    - Réseau\n    - Web\n\n## Vous\n\n- C++\n\n. . .\n\n- Python\n\n. . .\n\n- Git\n\n. . .\n\n- Forges (github, gitlab, …)\n\n. . .\n\n- Packaging (CMake, setuptools, …)\n\n## Vous (encore)\n\n- Documentation (doxygen, sphinx, …)\n\n. . .\n\n- formattage automatique (black, clang-format, …)\n\n. . .\n\n- analyse statique (flake8, SonarQube, clang-tidy, …)\n\n. . .\n\n- test unitaires (unittests, Boost UTF, gtest, pytest, …)\n\n. . .\n\n- intégration continue (gitlab-ci, github actions, travis, …)\n\n\n## Le cours\n\n### Contenu\n\n- Block 1: C++ & Python\n- Block 2: ROS & Temps Réel\n\n. . .\n\n- Outils\n\n. . .\n\n### Évaluation\n\n- 15% Compte rendu TP Block 1 (Python)\n- 15% Compte rendu TP Block 2 (Python & C++)\n- 70% Contrôle Terminal (2h)","n":0.074}}},{"i":118,"$":{"0":{"v":"Conception Orientée Objet, 101","n":0.5},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\nid: gzwe38pthzigt8bfmhe7e8q\ntitle: 'Conception Orientée Objet, 101'\ndesc: ''\nupdated: 1664628177972\ncreated: 1664628177972\nsubtitle: Université Toulouse Paul Sabatier - KEAR9RA1\ntheme: laas\ndate: '2022-08-31T00:00:00.000Z'\nauthor: Guilhem Saurel\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n-->\n\n## This presentation\n\n### Available at\n\n\\centering\n\n[`https://homepages.laas.fr/gsaurel/talks/\nconception-orientee-objet-101.pdf`](https://homepages.laas.fr/gsaurel/talks/conception-orientee-objet-101.pdf)\n\n### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n## This presentation (continued)\n\n### Source\n\n\\centering\n\n[`https://gitlab.laas.fr/gsaurel/talks :\nconception-orientee-objet-101.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/conception-orientee-objet-101.md)\n\n### Discussions\n\n\\centering\n\n\\url{https://matrix.to/\\#/\\#conception-orientee-objet:laas.fr}\n\n# Hello world\n\n## Hello world: C++\n\n```cpp\n#include <iostream>\nauto main() -> int {\n  std::cout << \"hello\\n\";\n  return 0;\n}\n```\n\n. . .\n\n```\n╰─>$ g++ hello.cpp && ./a.out\nhello\n```\n\n## Hello world: Python\n\n```python\n#!/usr/bin/env python\n\nif __name__ == \"__main__\":\n    print(\"hello\")\n```\n\n. . .\n\n```\n╰─>$ chmod +x hello.py && ./hello.py\nhello\n```\n\n## Data types\n\n### C++\n\n```cpp\nauto ga{3};                  // int\nauto bu{3.14};               // double\nconst auto *const zo{\"tau\"}; // const char *const\nstd::string meu{\"pi\"};\n```\n\n. . .\n\n### Python\n\n```python\nga: int = 3\nbu: float = 3.14\nzo: str = \"pi\"\n```\n\n# Control flow\n\n## Functions\n\n### C++\n\n```cpp\nauto add(int first, int second) -> int {\n  return first + second;\n}\n```\n\n. . .\n\n### Python\n\n```python\ndef add(first: int, second: int) -> int:\n    return first + second\n```\n\n\n## Conditions: C++\n\n```cpp\nif (temperature > 26) {\n  std::cout << \"Too hot\\n\";\n  turn_cooler_on();\n} else if (temperature < 16) {\n  std::cout << \"Too cold\\n\";\n  turn_heater_on();\n} else {\n  std::cout << \"Lucky people !\\n\";\n}\n```\n\n## Conditions: Python\n\n```python\nif temperature > 26:\n    print(\"Too hot\")\n    turn_cooler_on()\nelif temperature < 16:\n    print(\"Too cold\")\n    turn_heater_on()\nelse:\n    print(\"Lucky people !\")\n```\n\n## Loops: while\n\n### C++\n\n```cpp\nauto user_input{0};\nwhile (user_input != 42) {\n  std::cout << \"guess: \";\n  std::cin >> user_input;\n}\n```\n\n. . .\n\n### Python\n\n```python\nuser_input: int = 0\nwhile user_input != 42:\n    user_input = int(input(\"guess: \"))\n```\n\n. . .\n\n### Walrus\n\n```python\nwhile (user_input := int(input(\"guess: \"))) != 42:\n    print(\"it's not\", user_input)\n```\n\n## Loops: break - C++\n\n```cpp\nauto user_input{0};\nwhile (true) {\n  std::cout << \"guess: \";\n  std::cin >> user_input;\n  if (user_input == 42) {\n    std::cout << \"Yes !\" << \"\\n\";\n    break;\n  }\n  std::cout << \"I's not \" << user_input << \"\\n\";\n}\n```\n\n## Loops: break - Python\n\n```python\nuser_input: int = 0\nwhile True:\n    user_input = int(input(\"guess: \"))\n    if user_input == 42:\n        print(\"Yes !\")\n        break\n    print(\"It's not\", user_input)\n```\n\n## Loops: for / break - C++\n\n```cpp\n#include <cstdlib>\n\nfor (auto i{0}; i < 10000; i++) {\n  std::cout << \"iteration \" << i << \"\\n\";\n  auto rand = static_cast<double>(std::rand());\n  if (rand / RAND_MAX > 0.95) {\n    break;\n  }\n}\n```\n\n\n## Loops: for / break - Python\n\n```python\nfrom random import random\n\nfor i in range(10000):\n    print(\"iteration\", i)\n    if random() > 0.95:\n        break\n```\n\n## Loops: continue\n\n### C++\n\n```cpp\nfor (auto i{0}; i < 10; i++) {\n  if (i % 2 == 0) {\n    continue;\n  }\n  std::cout << \"iteration \" << i << \"\\n\";\n}\n```\n\n. . .\n\n### Python\n\n```python\nfor i in range(10):\n    if i % 2 == 0:\n        continue\n    print(\"iteration\", i)\n```\n\n## Loops: containers\n\n### C++\n\n```cpp\nusing Colors = std::vector<std::string>;\nColors colors{\"orange\", \"blue\", \"pink\"};\nfor (const auto &color: colors) {\n  std::cout << color << \"\\n\";\n}\n```\n\n. . .\n\n### Python\n\n```python\ncolors = [\"orange\", \"blue\", \"pink\"]\nfor color in colors:\n    print(color)\n```\n\n# Objects\n\n## C++\n\n```cpp\n\nclass Robot {\npublic:\n  auto work() { battery -= 5; }\n  auto get_battery() const -> int { return battery; }\n\nprotected:\n  int battery{100};\n};\n\nauto main() -> int {\n  auto robot = Robot{};\n  std::cout << robot.get_battery() << \"% remaining\\n\";\n  robot.work();\n  std::cout << robot.get_battery() << \"% remaining\\n\";\n  return 0;\n}\n```\n\n## Python\n\n```python\nclass Robot:\n    battery = 100\n\n    def work(self):\n        self.battery -= 5\n\n    def get_battery(self) -> int:\n        return self.battery\n\n\nif __name__ == \"__main__\":\n    robot = Robot()\n    print(robot.get_battery(), \"% remaining\")\n    robot.work()\n    print(robot.get_battery(), \"% remaining\")\n```\n\n## Inheritance: C++\n\n```cpp\n\nclass LeggedRobot : public Robot {\npublic:\n  auto walk() { battery -= 10; }\n};\n\nauto main() -> int {\n  auto robot = LeggedRobot{};\n  std::cout << robot.get_battery() << \"% remaining\\n\";\n  robot.work();\n  robot.walk();\n  std::cout << robot.get_battery() << \"% remaining\\n\";\n  return 0;\n}\n```\n\n## Python\n\n```python\nclass LeggedRobot(Robot):\n    def walk(self):\n        self.battery -= 10\n\nif __name__ == \"__main__\":\n    robot = LeggedRobot()\n    print(robot.get_battery(), \"% remaining\")\n    robot.work()\n    robot.walk()\n    print(robot.get_battery(), \"% remaining\")\n```","n":0.043}}},{"i":119,"$":{"0":{"v":"Containers","n":1},"1":{"v":"\n**Source:** [GitLab Repo 'Talks'](https://gitlab.laas.fr/gsaurel/talks)\n\n---\n\n<!--\ntitle: Containers\nsubtitle: what, how, which and when\ntheme: laas\nauthor: Guilhem Saurel\ndate: 10/02/2022\nmainfont: Source Serif 4\nmonofont: Source Code Pro\n...\n-->\n\n\n### This presentation\n\n#### Available at\n\n\\centering\n\n[`https://homepages.laas.fr/gsaurel/talks/\ncontainers.pdf`](https://homepages.laas.fr/gsaurel/talks/containers.pdf)\n\n#### Under License\n\n\\centering\n\n![CC](media/cc.png){width=1cm}\n![BY](media/by.png){width=1cm}\n![SA](media/sa.png){width=1cm}\n\n<https://creativecommons.org/licenses/by-sa/4.0/>\n\n### This presentation (continued)\n\n#### Source\n\n\\centering\n\n[`https://gitlab.laas.fr/gsaurel/talks :\ncontainers.md`](https://gitlab.laas.fr/gsaurel/talks/-/blob/main/containers.md)\n\n#### Discussions\n\n\\centering\n\n<!-- \\href doesn't like #, so let's directly use \\url -->\n\\url{https://im.laas.fr/\\#/room/\\#containers:laas.fr}\n\n### Outline\n\n\\setcounter{tocdepth}{1}\n\\tableofcontents\n\n# Concepts\n\n## Filesystem\n\n### Image\n\n- A read-only tar of the filesystem\n\n. . .\n\n- Metadata\n    - ID, Checksum, Size\n    - Author, creation date\n    - Environment variables\n    - Working directory, User\n    - Architecture, OS\n    - Entrypoint and/or default command\n    - History\n\n### Layers\n\n![docs.docker.com](media/container-layers.jpg)\n\n### Internals\n\n```bash\n$ docker pull ubuntu:20.04\n$ docker save ubuntu:20.04 | tar x\n$ cat 54c9d8*.json | jq .history\n```\n\n```json\n[\n  {\n    \"created\": \"2022-02-02T02:14:45.667699167Z\",\n    \"created_by\": \"ADD file:3ccf74… in / \"\n  },\n  {\n    \"created\": \"2022-02-02T02:14:46.177066251Z\",\n    \"created_by\": \"CMD [\\\"bash\\\"]\",\n    \"empty_layer\": true\n  }\n]\n```\n\n### History\n\n```bash\n$ docker history ubuntu:20.04\nIMAGE          CREATED      CREATED BY         SIZE\n54c9d81cbb44   6 days ago   CMD [\"bash\"]       0B\n<missing>      6 days ago   ADD file:3ccf74…   72.8MB\n```\n\n### Copy on Write\n\n```bash\n$ docker inspect ubuntu:20.04 | jq .[0].Size\n$ docker run --rm -it ubuntu:20.04 du -sxB1 /\n```\n\n. . .\n\nImage          docker inspect  docker run\n------------- --------------- -----------\nubuntu:20.04         72775208    81620992\n\n### Copy on Write (Continued)\n\n```Dockerfile\nFROM ubuntu:20.04\nRUN rm -rf /usr/share/doc\n```\n\n. . .\n\nImage          docker inspect  docker run\n------------- --------------- -----------\nubuntu:20.04         72775208    81620992\ncustom               72775208    80019456\n\n### From the host\n\n```bash\n$ mount\n[…]\noverlay on /var/lib/docker/overlay2/eeaff…/merged …\n```\n. . .\n```bash\n$ sudo ls /var/lib/docker/overlay2/eeaff*/merged\nbin   etc   lib32   media  proc  sbin  tmp\nboot  home  lib64   mnt    root  srv   usr\ndev   lib   libx32  opt    run   sys   var\n```\n\n## Network\n\n### Container side\n\n```bash\n$ docker run --rm -it ubuntu:20.04\nroot@a4c1089933e0:/# apt update && apt install iproute2\n[…]\nroot@a4c1089933e0:/# ip address\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n359: eth0@if360: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu\n    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.2/16 brd 172.17.255.255 scope global\n```\n\n### Host side\n\n```bash\n359: eth0@if360: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu\n    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.2/16 brd 172.17.255.255 scope global\n```\n. . .\n```bash\n$ ip address show docker0\n[…]\n4: docker0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500\n    link/ether 02:42:19:c7:ea:42 brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.1/16 brd 172.17.255.255 scope global\n    inet6 fe80::42:19ff:fec7:ea42/64 scope link\n360: veth80c16b5@if359: <BROADCAST,MULTICAST,UP,LOWER_UP>\n    link/ether de:9b:10:58:45:70 brd ff:ff:ff:ff:ff:ff\n    inet6 fe80::dc9b:10ff:fe58:4570/64 scope link\n```\n\n### Network Namespaces\n\n```bash\n$ pid=$(docker inspect -f '{{.State.Pid}}' $cont)\n$ sudo mkdir -p /var/run/netns/\n$ sudo ln -sT /proc/$pid/ns/net /var/run/netns/$cont\n$ sudo ip netns exec \"$cont\" ip address\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n359: eth0@if360: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu\n    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.2/16 brd 172.17.255.255 scope global\n```\n\n\n### Network drivers\n\n- `bridge`: default, with NAT\n- `host`: remove isolation\n- `none`: remove network\n- `ipvlan`, `macvlan`: advanced use cases\n\n## Other isolations\n\n### ENV\n\n```bash\n$ docker run --rm -it ubuntu:20.04 env\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nHOSTNAME=14e30a0c1bc7\nTERM=xterm\nHOME=/root\n```\n\n### Cgroups\n\n```bash\n$ docker run --rm -it ubuntu:20.04\nroot@a4c1089933e0:/# apt update && apt install stress\n[…]\nroot@a4c1089933e0:/# stress --cpu 3\n```\n\n. . .\n\n```bash\n$ top\n PID UTIL PR NI VIRT RES SHR S  %CPU %MEM  TEMPS+ COM.\n3694 root 20  0 3856 100   0 R 100,0  0,0 1:52.95 stress\n3692 root 20  0 3856 100   0 R  99,7  0,0 1:52.94 stress\n3693 root 20  0 3856 100   0 R  99,7  0,0 1:52.94 stress\n[…]\n```\n\n## Performances\n\n### Performances\n\n- processes, CPU, RAM: native\n\n. . .\n\n- network: NAT by default / native with `host`\n\n. . .\n\n- filesystem: CoW, bind mounts\n\n. . .\n\n- size: ubuntu: 72M, debian: 12M, alpine: 5M\n\n. . .\n\n- isolation: namespaces\n\n# Usage\n\n## Run a container\n\n### Hello World\n\n```bash\n$ docker run --rm -it hello-world\nUnable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\n2db29710123e: Pull complete\nDigest: sha256:97a379f4f88575512824f3b352bc03cd75e23917…\nStatus: Downloaded newer image for hello-world:latest\n\nHello from Docker!\n[…]\n```\n\n### Where is my work ?\n\n```bash\n$ docker run -it my-project\nroot@ad2955960ee7:/# vim my-script.sh\nroot@ad2955960ee7:/# exit\n$ docker run -it my-project bash ./my-script.sh\n```\n. . .\n```bash\nbash: ./my-script.sh: No such file or directory\n```\n\n### How you could find your work back…\n\n```bash\n$ docker ps\nCONTAINER ID IMAGE      COMMAND CREATED        STATUS\n$ docker ps -a\nCONTAINER ID IMAGE      COMMAND CREATED        STATUS\nad2955960ee7 my-project \"bash\"  15 seconds ago Exited\n$ docker start ad2955960ee7\nad2955960ee7\n$ docker ps\nCONTAINER ID IMAGE      COMMAND CREATED        STATUS\nad2955960ee7 my-project \"bash\"  42 seconds ago Up 4 sec…\n$ docker attach ad2955960ee7\nroot@ad2955960ee7:/# bash ./my-script.sh\nHi ! ./my-script.sh is starting...\n```\n\n### Volumes\n\n```bash\n$ docker volume create my-workspace\nmy-workspace\n$ docker run --rm -it -v my-workspace:/ws ubuntu:20.04\nroot@1ab7b3188c76:/# ls /ws\nroot@1ab7b3188c76:/# touch /ws/hello\nroot@1ab7b3188c76:/# exit\n$ docker run --rm -it -v my-workspace:/ws ubuntu:20.04\nroot@0994f95db805:/# ls /ws\nhello\n```\n\n### Bind Mounts\n\n```bash\n$ docker run --rm -it -v ~/my-ws:/ws ubuntu:20.04\nroot@1ab7b3188c76:/# ls /ws\nDockerfile  README.md  requirements.txt  script.py\nroot@1ab7b3188c76:/# touch /ws/hi\nroot@1ab7b3188c76:/# exit\n$ ls ~/my-ws\nDockerfile  hi  README.md  requirements.txt  script.py\n```\n\n### Other run arguments\n\n#### Name\n```bash\n$ docker run --rm -it --name my-container ubuntu:20.04\n```\n. . .\n\n#### Network\n```bash\n$ docker run --rm -it -p 8000:8000 ubuntu:20.04\n$ docker run --rm -it --net host ubuntu:20.04\n```\n. . .\n\n#### Detach\n```bash\n$ docker run --rm -it -d ubuntu:20.04\n```\n. . .\n\n#### Ressources\n```bash\n$ docker run --rm -it --cpus 2 ubuntu:20.04\n$ docker run --rm -it --gpus all ubuntu:20.04\n```\n\n### Share images\n\n#### Tag\n\n```bash\ndocker tag my-project \\\n    gitlab.laas.fr:4567/my-name/my-project\n```\n. . .\n\n#### Push\n\n```bash\ndocker push gitlab.laas.fr:4567/my-name/my-project\n```\n. . .\n\n#### Pull\n\n```bash\ndocker pull gitlab.laas.fr:4567/my-name/my-project\n```\n. . .\n\nNB: <https://hub.docker.com> by default\n\n## Build an image\n\n### Dockerfile\n\n```bash\n$ cat Dockerfile\n```\n\n```Dockerfile\nFROM python:3.10\nWORKDIR /app\nADD requirements.txt .\nRUN python -m pip install -r requirements.txt\nADD . .\nCMD ./manage.py test\nENV PYTHONUNBUFFERED=1\n```\n\n. . .\n\n```bash\n$ docker build -t my-app .\n```\n\n. . .\n\nNB: Build context\n\n### Commit\n\n```bash\n$ docker run --rm -it ubuntu:20.04\nroot@40e14372a5b9:/# apt update\nroot@40e14372a5b9:/# apt install python3-pip\nroot@40e14372a5b9:/# pip install django numpy\nroot@40e14372a5b9:/# vim script.py\n```\n\n```bash\n$ docker commit 42491f28c1f6 my-app\n```\n\n## Tips\n\n### Buildkit\n\n```bash\n$ export DOCKER_BUILDKIT=1\n```\n. . .\n```Dockerfile\nFROM python:3.10\nRUN --mount=type=cache,target=/var/cache/apt \\\n    --mount=type=cache,target=/var/lib/apt \\\n    --mount=type=cache,target=/root/.cache \\\n    apt-get update -y && apt-get install -qqy \\\n    gcc \\\n    libpq-dev \\\n && python -m pip install -U pip \\\n && python -m pip install \\\n    psycopg2 \\\n && apt-get autoremove -qqy gcc\n```\n\n### Dockerignore\n\n```bash\n$ echo 'build' >> .dockerignore\n$ echo '*.tar.gz' >> .dockerignore\n```\n\n### Prune\n\n```bash\n$ docker system prune\n```\n\n. . .\n\n```bash\n$ docker system prune -a --volumes\n```\n\n### Compose file\n\n```bash\n$ cat docker-compose.yml\n```\n\n```yaml\nversion: \"3\"\nservices:\n  worker:\n    build: .\n    volumes:\n      - .:/code\n      - worker-vol:/data\n  cache:\n    image: redis\nvolumes:\n  worker-vol: {}\n```\n\n### Compose usage\n\n```bash\n$ docker compose up -d\n$ docker compose logs\n$ docker compose down\n```\n\n# Container platforms\n\n### Cloud Native Computing Foundation\n\n<https://cncf.io>\n\n![Cloud Native Landscape](media/cncf.jpg)\n\n### Podman\n\n- Daemonless container engine\n- Root is not required\n\n. . .\n\n```bash\n$ alias docker=podman\n```\n\n### Singularity / Apptainer\n\n- Secure container platform\n- Made for use on HPC / large clusters\n- Use Singularity files (`.sif`)\n\n. . .\n```bash\n$ singularity pull docker://ubuntu:20.04\n$ singularity shell ubuntu_20.04.sif\nSingularity> whoami\ngsaurel\nSingularity> pwd\n/home/gsaurel/talks\nSingularity> ls\nDockerfile  Makefile  README.md  containers.md\tcontainers.pdf\n```\n\n### Singularity / Apptainer Definition Files\n\n```\nBootstrap: docker\nFrom: python:3.10\n\n%post\n    apt-get update\n    apt-get -qy install gcc libpq-dev\n    python -m pip install psycopg2\n\n%environment\n    export PYTHONUNBUFFERED=1\n\n%runscript\n    ./manage.py test\n```\n\n```bash\n$ singularity build my-container.sif my-container.def\n```\n\n# Use cases\n\n### Reproducible environment\n\n- continuous integration\n- complex dependency setup\n- software debugging\n\n. . .\n\n- reproducible science\n\n### Production\n\n- HPC\n- host web services\n- run single statically linked binary with metadata\n\n### Questions ?\n\nThanks for your time :)","n":0.032}}},{"i":120,"$":{"0":{"v":"COI - Commande Optimale I","n":0.447},"1":{"v":"\n<!--has_collection: true-->\n\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par S. Fergani\n\n---\n\n# Liens Utiles\n\n- [moodle](https://moodle.univ-tlse3.fr/course/view.php?id=9158)\n\n<!--\n# À Retenir\n\n- ...\n-->\n\n# Cours Magistraux\n\n- [[B1.COI.Chap1]]\n- [[B1.COI.Chap2]]\n\n<!--\n# Travaux Dirigés\n\n- ...\n\n# Travaux Pratiques\n\n- ...\n-->","n":0.158}}},{"i":121,"$":{"0":{"v":"Chap 2 - Poursuite Optimale","n":0.447},"1":{"v":"> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par S. Fergani\n\n---\n\n> Notes du 2022/11/25 - Start\n\n\n\n\n# Introduction\n\nSoit un système \n$$\n\\begin{cases}\n\\dot x = A\\;x + B\\;u\\\\\ny = C\\;x\n\\end{cases}\n$$\n\nPosons\n$$\ne = y_{ref} - y\n$$\noù $y_{ref}$ est la référence/trajectoire à suivre sur $[0,T_f]$.\n\nSi $y_{ref} = 0$, alors il s'agit d'un problème de régulation donc se référer aux cours du M1.\n\nSi $y_{ref} \\neq 0$ (ou bien constante ou bien variable), alors il faut ajouter un **précompensateur** et il s'agit donc d'un **problème de poursuite**.\n\n# Problème de poursuite optimale\n\n## Horizon Infini avec $y_{ref}\\;cste$\n\n### Pose du problème\n\nOn considère la commande $\\quad u_t = - L_t\\;x_t + h\\;v_{ref} \\quad$ où :\n- $L = R^{-1}\\;B^T\\;P \\quad$ est la solution de l'équation de Ricatti pour la commande LQ ;\n\n    Pour trouver la matrice $P$, aplliquer :\n    $$\n    0 = Q + A^T\\;P + P\\;A - P\\;B\\;R^{-1}\\;B^T\\;P\n    $$\n- $h\\;$ est le précompensateur calculé de façon à amener une erreur de poursuite nulle.\n\n### Synthèse du précompensateur\n\nCette commande stabilise le système en boucle fermée.\n\nEn régime permanent, on a $\\quad\\dot x = 0\\quad$ et donc :\n$$\n\\begin{matrix}\n&\\begin{cases}\n\\dot x = 0 = \\big(\\;A - B\\;L\\;\\big)\\;x_t + B\\;h\\;v_{ref}\\\\\ny = C\\;x_t\n\\end{cases}\\\\\n\\iff&\n\\begin{cases}\n\\dot x_t = -\\big(\\;A - B\\;L\\;\\big)^{-1}\\;B\\;h\\;v_{ref}\\\\\ny = C\\;x_t\n\\end{cases}\\\\\n\\iff&\n\\begin{cases}\n\\dot x_t = -\\big(\\;A - B\\;L\\;\\big)^{-1}\\;B\\;h\\;v_{ref}\\\\\ny = -C\\;\\big(\\;A - B\\;L\\;\\big)^{-1}\\;B\\;h\\;v_{ref}\n\\end{cases}\\\\\n\\end{matrix}\n$$\n\nÀ noter que pour avoir l'inversibilité, il ne faut pas que les valeurs propres soient pas nulles.\n\nAinsi, on obtient la fonction de transfert suivante :\n$$\n\\dfrac{\\;y(\\infty)\\;}{\\;v_{ref}\\;} = -C\\;\\big(\\;A - B\\;L\\;\\big)^{-1}\\;B\\;h\n$$\n\nOr,\n$$\n\\dfrac{\\;y(\\infty)\\;}{\\;v_{ref}\\;} = 1\n$$\n\nDonc, on a :\n$$\nh = -\\Big(\\;C\\;\\big(\\;A - B\\;L\\;\\big)^{-1}\\;B\\;\\Big)^{-1}\n$$\n\n### Minimisation du critère\n\nPosons, $\\quad e_t = \\big(y_{ref} - y_t\\big)\\quad$\n\n$$\n\\begin{matrix}\n\\min_u J(u) &=& \\lim_{T_f\\rightarrow\\infty}\\;\\frac{1}{2}\\;\\int_{T_i}^{T_f} \\Big( e_t^T\\,Q\\,e_t + u_t^T\\,R\\,u_t \\Big) dt\\\\\n&=& \\lim_{T_f\\rightarrow\\infty}\\;\\frac{1}{2}\\;\\int_{T_i}^{T_f} \\Big( \\big(y_{ref} - y_t\\big)^T\\,Q\\,\\big(y_{ref} - y_t\\big) + u_t^T\\,R\\,u_t \\Big) dt \\\\\n&=& \\lim_{T_f\\rightarrow\\infty}\\;\\frac{1}{2}\\;\\int_{T_i}^{T_f} \\Big( \\big(y_{ref} - (C\\;x_t)\\big)^T\\,Q\\,\\big(y_{ref} - (C\\;x_t)\\big) + u_t^T\\,R\\,u_t \\Big) dt \\\\\n&=& \\lim_{T_f\\rightarrow\\infty}\\;\\frac{1}{2}\\;\\int_{T_i}^{T_f} \\Big( (C\\;x_t)^T\\,Q\\,(C\\;x_t) + u_t^T\\,R\\,u_t \\Big) dt - \\lim_{T_f\\rightarrow\\infty}\\;\\frac{1}{2}\\;\\int_{T_i}^{T_f} \\Big( (C\\;x_t)^T\\,Q\\,(C\\;x_t) + u_t^T\\,R\\,u_t \\Big) dt ....\\\\\n...\\\\\n\n\\end{matrix}\n$$\n\nOn prend la fonctionnelle :\n$$\nV\\big(\\;x(t),t\\;\\big) = \\frac{1}{2}\\;\\big(\\; x_t^T\\,P\\,x_t + y_t^T\\,x_t + h_t\\;\\big)\n$$\nsous la contrainte de\n$$\n\\begin{cases}\n\\dot x = A\\;x + B\\;u\\\\\ny = C\\;x\n\\end{cases}\n$$\n\nOn cherche à avoir l'équation $HJB$ suivante :\n$$\n-\\dot V\\big(\\;x(t),t\\;\\big) = \\textcolor{red}{\\frac{1}{2}\\;\\big(\\; x_t^T\\,C^T\\,Q\\,C\\,x_t + u_t^T\\,R\\,u_t \\;\\big)} - \\textcolor{green}{y_{ref}^T\\,Q\\,C\\,x_t} + \\textcolor{blue}{\\frac{1}{2}\\;y_{ref}^T\\,Q\\,y_{ref}}\n$$\noù les termes représentent respectivement le $\\textcolor{red}{\\text{coût état+commande}}$, le  $\\textcolor{green}{\\text{coût de poursuite}}$ et le  $\\textcolor{blue}{\\text{coût final}}$.\n\nMaintenant, utilisant la `chain rule` pour calculer $\\dot V$, on obtient :\n$$\n-\\dot V\\big(\\;x(t),t\\;\\big) = -\\frac{1}{2}\\;\\big(\\; \\dot x_t^T\\,P\\,x_t\\;\\big) -\\frac{1}{2}\\;\\big(\\; x_t^T\\,P\\,\\dot x_t\\;\\big) -\\frac{1}{2}\\;\\big(\\; x_t^T\\,\\dot P\\,x_t\\;\\big) - y_t^T\\,\\dot x_t - \\dot h_t\n$$\n\nOr,\n- $h$ est constante donc $\\dot h = 0$ (précompensateur de trajectoire constante)\n- $y_t$ est constante donc $\\dot y_t = 0$ (pondération de trajectoire constante)\n- $\\dot P = 0$ (car on est à horizon fini)\n\nIl vient que :\n$$\n-\\dot V\\big(\\;x(t),t\\;\\big) = -\\frac{1}{2}\\;\\big(\\; \\dot x_t^T\\,P\\,x_t\\;\\big) -\\frac{1}{2}\\;\\big(\\; x_t^T\\,P\\,\\dot x_t\\;\\big)  - y_t^T\\,\\dot x_t\n$$\n$$\n-\\dot V\\big(\\;x(t),t\\;\\big) = -\\frac{1}{2}\\;\\big(\\; x_t^T\\,\\big(\\; A^T\\,P_t + P_t\\,A \\;)\\,x_t\\;\\big) - u_t^T\\,B^T\\,P_t\\,x_t - y^T\\,A\\,x_t - y_t^T\\,B\\,u_t\n$$\n\nOn peut maintenant comparer les deux membres de l'équation $HJB$:\n$$\n-\\frac{1}{2}\\;\\big(\\; x_t^T\\,\\big(\\; A^T\\,P_t + P_t\\,A \\;)\\,x_t\\;\\big) - u_t^T\\,B^T\\,P_t\\,x_t - y^T\\,A\\,x_t - y_t^T\\,B\\,u_t = \\textcolor{red}{\\frac{1}{2}\\;\\big(\\; x_t^T\\,C^T\\,Q\\,C\\,x_t + u_t^T\\,R\\,u_t \\;\\big)} - \\textcolor{green}{y_{ref}^T\\,Q\\,C\\,x_t} + \\textcolor{blue}{\\frac{1}{2}\\;y_{ref}^T\\,Q\\,y_{ref}}\n$$\n\nCeci nous donne bien $0$.\n\nOn peut alors poursuivre en imposons que :\n$$\n\\partial_u HJB |_{u=u^*} = -R\\,u^* - y^T\\,B - B^T\\,P_t\\,x_t = 0\n$$\n\nAinsi, on en déduit la commande optimale :\n$$\nu^* = R^{-1}\\,y^T\\,B - R^{-1}\\,B^T\\,P_t\\,x_t\n$$\n\nIl ne reste plus qu'à vérifier qu'il s'agisse bien d'un minimum. En effet,\n$$\n\\partial_{u^2}^2 HJB |_{u=u^*} = -R < 0\n$$\n\nÀ présent que nous avons la commande optimale, nous pouvons injecter $u^*$ dans $HJB$ ce qui nous donne :\n$$\n...\n$$\n\nOn en déduit le système suivant\n$$\n\\begin{cases}\n...\n\\end{cases}\n$$\n\nRésolvons :\n- de $(1)$, on tire la matrice $P_t$ ;\n- de $(2)$, on trouve $g_t = y^T\\,Q\\,C\\,\\big(\\;A-B\\,L_t\\;\\big)^{-1}$ ; et\n- de $(3)$, on obtient la condition nécessaire pour la poursuite optimale :\n$$\ng^T\\,B\\,R^{-1}\\,B^T\\,g_t = y_{ref}^T\\,Q\\,y_{ref}\n$$\n\nConclusion:\n\nOn a trouvé une commande optimale pour suivre une trajectoire constante :\n$$\nu^* = - R^{-1}\\,B^T\\,P_t\\,x_t - R^{-1}\\,B^T\\,g_t\n$$\n\n## Horizon Infini avec $y_{ref}\\;variable$\n\n> À faire à la maison\n\n","n":0.04}}},{"i":122,"$":{"0":{"v":"Chap 1 - Commande LQ","n":0.447},"1":{"v":"\n> **Avertissement:**\nCette page peut contenir des fautes ! Envoyez-moi un message sur [`#UT3-AURO-M2-2223-Request:matrix.org`](https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org) si vous en trouvez, merci.\n\n> Cours donné par S. Fergani\n\n---\n\n> Notes du 2022/09/15 - Start\n\n\n...\n\n\n> Notes du 2022/09/15 - End\n\n---\n\n> Notes du 2022/09/16 - Start \n\nApplication\n\n**Equation Générale de Bellman :**\n\n($\\;d$ le nombre de division de l'intervalle $[t_0,t_f]\\;$)\n\n$$\n\\tilde J (x_0,t_0,\\tilde u) =\n\\min_{u_{[t_0,t_f]}} \\Big[ \n    \\sum_{j=1}^{d} \\Big[\\; \n        \\min_{u_{[t_0,t_f]}} \\big(\\; \n            \\int_{t_0}^{t_{i_j}} \\phi(x,t,u)\\,dt\n        \\;\\big)\n        +\n        \\tilde J (x_{i_j},t_{i_j},\\tilde u_j)\n    \\;\\Big] \\;\\Big]\n$$\n\n## Commande LQ\n\n### Horizon fini et infini\n\n**Cas discret:**\n- Si $x(k)$ est un point intermédiaire de la trajectoire optimale allant de $x(k_0)$ à $x(t_f)$ alors la portion terminale $x(k)$ à $x(t_f)$ de cette trajectoire est **optimale**\n- D'après le principe de Bellman, la portion de la trajectoire $x(k)$ à $x(t_f)$ est d'écrite par : $x(k+1) = f(x_k,u_k)$ est **optimale** au sens du critère : \n$$\n\\min_u J(u_k) = J(x_k,u_k)=\\frac{1}{2} \\sum_{i=t_k}^{t_{f-1}}\\big( x_i^T\\,Q_i\\,x_i + u_i^T\\,R_i\\,u_i \\big) + \\frac{1}{2} \\, x_{t_f}^T\\,P_{t_f}\\,x_{t_f}\n$$\n- le coût **immédiat** est $J=k$\n- le coût **intermédiaire** est $\\frac{1}{2} \\sum_{i=t_k}^{t_{f-1}}\\big( x_i^T\\,Q_i\\,x_i + u_i^T\\,R_i\\,u_i \\big)$\n\n> Les matrices $Q_i$ , $R_i$ et $P_i$ sont choisis par le designer selon les objectifs du système\n\n> u^*_{t_k} c'est la commande **optimale** entre $(x_k,t_k)$ et $(x_f,t_f)$ !\n\n!!!\n\n### Problématique\n\nOn cherche la commande $u$ qui minimise :\n$$\n\\min_u J(u) = J(x_k,t_k) = \\frac{1}{2} \\sum_{i=t_k}^{t_{f-1}} \\big( x_i^T\\,Q_i\\,x_i + u_i^T\\,R_i\\,u_i \\big) + \\frac{1}{2} \\, x_{t_f}^T\\,P_{t_f}\\,x_{t_f}\n$$\nsous la contrainte\n$$\n\\begin{matrix}\nx_{k+1} &=& Ax_k + Bu_k\\\\\ny_k &=& Cx_k\n\\end{matrix}\n$$\n\n### Idée \n\nOn part du point **optimale** $x(t_f)$ **connu** au point précédent $x(t_{f-1})$\n\nLa trajectoire à minimiser est donnée par le coût :\n$$\n\\min_u J(u) = J(x_k,t_k) = \\frac{1}{2} \\sum_{i=t_k}^{t_{f-1}} \\big( x_i^T\\,Q_i\\,x_i + u_i^T\\,R_i\\,u_i \\big) + \\frac{1}{2} \\, x_{t_f}^T\\,P_{t_f}\\,x_{t_f}\n$$\navec le coût **immédiat** $\\frac{1}{2} \\sum_{i=t_k}^{t_{f-1}} \\big( x_i^T\\,Q_i\\,x_i + u_i^T\\,R_i\\,u_i \\big)\\;$ et le coût final $\\;\\frac{1}{2} \\, x_{t_f}^T\\,P_{t_f}\\,x_{t_f}$\n\n> Les matrices $Q_i$ , $R_i$ et $P_i$ sont choisis par le designer selon les objectifs du système\n\n### Comment trouver cette commande optimale ?\n\n1. Pour minimiser, on dérive $J(x_{t_{f-1}},u_{t_{f-1}})$ p.r.à $u_{t_{f-1}}$ soit :\n$$\n\\partial_{u_{t_{f-1}}}J(x_{t_{f-1}},u_{t_{f-1}})\n$$\n\n2. On annule la dérivée, la solution est la **commande optimale** $u^*$ soit : \n$$\n\\partial_{u_{t_{f-1}}}J(x_{t_{f-1}},u_{t_{f-1}}) = 0\n$$\n\n3. On vérifie que la solution optimale $u^*$ minimise $J$ :\n$$\n\\partial_{u_{t_{f-1}}}J(x_{t_{f-1}},u_{t_{f-1}}) > 0\n$$\n> On peut montrer qu'il faut que la dérivée seconde soit positive en utilisant les développements limités.\n\n4. On remplace la solution optimale $u^*$ dans le critère $J(x_{t_{f-1}},u_{t_{f-1}})$ soit :\n$$\nJ^*(x_{t_{f-1}},u_{t_{f-1}}) = \\frac{1}{2} \\Big( x_{t_{f-1}}^T\\,Q_{t_{f-1}}\\,x_{t_{f-1}} + u_{t_{f-1}}^{*T}\\,R_{t_{f-1}}\\,u_{t_{f-1}}^{*} \\big) + \\frac{1}{2} \\, x_{t_f}^T\\,P_{t_f}\\,x_{t_f} = \\frac{1}{2} \\, x_{t_{f-1}}^T\\,P_{t_{f-1}}\\,x_{t_{f-1}}\n$$\n\n\n\n\n\n> Notes du 2022/09/16 - End\n\n---\n\n> Notes du 2022/09/23 - Start\n\n\n\n\n### Application\n\n1. On dérive $J$ p.r.à $u$\n\n    $\\partial_{u_{t_{f-1}}}J(x_{t_{f-1}},u_{t_{f-1}}) =\\\\[0.2cm] \\partial_{u_{t_{f-1}}} \\Big[\\frac{1}{2} \\Big( x_{t_{f-1}}^T\\,Q_{t_{f-1}}\\,x_{t_{f-1}} + u_{t_{f-1}}^{*T}\\,R_{t_{f-1}}\\,u_{t_{f-1}}^{*} \\big) + \\frac{1}{2} \\, \\textcolor{red}{x_{t_f}^T}\\,P_{t_f}\\,\\textcolor{orange}{x_{t_f}}\\Big]=\\\\[0.2cm]\n    \\partial_{u_{t_{f-1}}} \\Big[\\frac{1}{2} \\Big( x_{t_{f-1}}^T\\,Q_{t_{f-1}}\\,x_{t_{f-1}} + u_{t_{f-1}}^{*T}\\,R_{t_{f-1}}\\,u_{t_{f-1}}^{*} \\big) + \\frac{1}{2} \\, \\textcolor{red}{\\big(x_{t_{f-1}}^T\\,A^T+u_{t_{f-1}}^T\\,B^T\\big)}\\,P_{t_f}\\,\\textcolor{orange}{\\big(Ax_{t_{f-1}}+Bu_{t_{f-1}}\\big)}\\Big]\\\\$\n\n    Du coût minimal désirée, on obtient une equation analytique de Riccati aux différences (EARD)\n\n    **N.B.:**\n    $$\n    k^T = k\\\\\n    \\partial_x x^TA = A\\\\\n    \\partial_x x^TAx = (A+A^T)x\n    $$\n\n    Donc, on a :\n\n    $\\partial_{u_{t_{f-1}}} \\Big[\\frac{1}{2} \\Big( x_{t_{f-1}}^T\\,Q_{t_{f-1}}\\,x_{t_{f-1}} + u_{t_{f-1}}^{*T}\\,R_{t_{f-1}}\\,u_{t_{f-1}}^{*} \\big) + \\frac{1}{2} \\, \\big(\\textcolor{red}{x_{t_{f-1}}^T\\,A^T}+\\textcolor{orange}{u_{t_{f-1}}^T\\,B^T}\\big)\\,P_{t_f}\\,\\big(\\textcolor{red}{Ax_{t_{f-1}}}+\\textcolor{orange}{Bu_{t_{f-1}}}\\big)\\Big]=\\\\[0.2cm]\n    \\partial_{u_{t_{f-1}}} \\Big[\\frac{1}{2} \\Big( x_{t_{f-1}}^T\\,Q_{t_{f-1}}\\,x_{t_{f-1}} + u_{t_{f-1}}^{*T}\\,R_{t_{f-1}}\\,u_{t_{f-1}}^{*} \\Big) +\n    \\frac{1}{2} \\, \\big(\\textcolor{red}{x_{t_{f-1}}^T\\,A^T}\\,P_{t_f}\\,\\textcolor{red}{Ax_{t_{f-1}}}\\big)+\\big(\\textcolor{orange}{u_{t_{f-1}}^T\\,B^T\\,P_{t_f}}\\,+\\textcolor{orange}{Bu_{t_{f-1}}}\\big)\\Big]=\\\\[0.2cm]\n    !!!\n    $\n\n    **N.B.:**\n    $$\n    Q=Q^T\\\\\n    R=R^T\\\\\n    P=P^T\n    $$\n\n2. On annule la première dérivée\n    \n    $\n    \\partial_{u_{t_{f-1}}}J(x_{t_{f-1}},u_{t_{f-1}}) = 0 = \\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)\\, u_{T_{f-1}}^* + B^T\\,P_{T_{f}}\\,A\\,x_{T_{f-1}} \n    $\n\n    avec\n\n    $\n    u_{T_{f-1}}^* = - \\textcolor{green}{\\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)^{-1}\\;B^T\\,P_{T_{f}}\\,A}\\,x_{T_{f-1}}\n    $\n\n    Ainsi, sous reserve que $\\;\\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)\\;$ soit inversible, une commande linéaire en fonction de l'état est :\n\n    $\n    u_{T_{f-1}}^* = -\\textcolor{green}{L_{T_{f-1}}}\\,x_{T_{f-1}}\n    \\quad$\n    avec\n    $\\quad\n    \\textcolor{green}{L_{T_{f-1}} = \\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)^{-1}\\;B^T\\,P_{T_{f}}\\,A}\n    $\n\n3. On vérifie que c'est bien un minimum\n\n    $\n    \\partial_{u_{t_{f-1}}}^2J(x_{t_{f-1}},u_{t_{f-1}}) > 0\\\\\n    = \\partial_{u_{t_{f-1}}} \\Big[ \\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)\\, u_{T_{f-1}}^* + B^T\\,P_{T_{f}}\\,A\\,x_{T_{f-1}} \\Big]\\\\\n    = \\Big( R_{t_{f-1}} + B^T\\,P_{t_{f}}\\,B \\Big)' > 0\n    \\quad$\n    car\n    $\\quad B^T > 0$\n\n    donc $u^*$ est la commande optimale qui minimise le critère $J$ sous la contrainte de la dynamique du système **sous reserve que** $\\;\\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)\\;$ soit inversible !\n\n4. On remplace la solution optimale $u^*$ dans le critère $J(x_{t_{f-1}},u_{t_{f-1}})$ pour identifier le résultat avec le coût minimal désirée :\n\n    $\n    J^*(x_{t_{f-1}},u_{t_{f-1}}) = \\frac{1}{2} \\Big( x_{t_{f-1}}^T\\,Q_{t_{f-1}}\\,x_{t_{f-1}} + u_{t_{f-1}}^{*T}\\,R_{t_{f-1}}\\,u_{t_{f-1}}^{*} \\Big) + \\frac{1}{2} \\, x_{t_f}^T\\,P_{t_f}\\,x_{t_f} = \\frac{1}{2} \\, x_{t_{f-1}}^T\\,P_{t_{f-1}}\\,x_{t_{f-1}}\\\\[0.2cm]\n    = \\frac{1}{2} \\Big( x_{t_{f-1}}^T\\,Q_{t_{f-1}}\\,x_{t_{f-1}} + u_{t_{f-1}}^{*T}\\,R_{t_{f-1}}\\,u_{t_{f-1}}^{*} \\Big) + \\frac{1}{2} \\, \\big(\\textcolor{red}{x_{t_{f-1}}^T\\,A^T}+\\textcolor{orange}{u_{t_{f-1}}^T\\,B^T}\\big)\\,P_{t_f}\\,\\big(\\textcolor{red}{Ax_{t_{f-1}}}+\\textcolor{orange}{Bu_{t_{f-1}}}\\big)\\\\[0.2cm]\n    = \\frac{1}{2} \\Big( x_{t_{f-1}}^T\\,Q_{t_{f-1}}\\,x_{t_{f-1}} + \\big( \\textcolor{green}{-L_{T_{f-1}}\\,x_{T_{f-1}}} \\big)^T \\,R_{t_{f-1}}\\, \\big( \\textcolor{green}{-L_{T_{f-1}}\\,x_{T_{f-1}}} \\big) \\Big)\\\\[0.2cm] + \\; \\frac{1}{2} \\, \\big(\\textcolor{red}{x_{t_{f-1}}^T\\,A^T}+\\textcolor{orange}{ ( \\textcolor{green}{-L_{T_{f-1}}\\,x_{T_{f-1}}} )^T\\,B^T}\\big)\\,P_{t_f}\\,\\big(\\textcolor{red}{Ax_{t_{f-1}}}+\\textcolor{orange}{B ( \\textcolor{green}{-L_{T_{f-1}}\\,x_{T_{f-1}}} )} \\big)\\\\[0.2cm]\n    = \\frac{1}{2} x_{T_{f-1}} \\big[ !!! \\big]\n    $\n\n    Ainsi,\n\n    $\n    P_{T_{f-1}} = Q_{T_{f-1}} + A^T\\,P_{T_{f}}\\,A - L_{T_{f-1}}^T B^T \\,P_{T_{f}}\\, A\\\\[0.2cm]\n    = Q_{T_{f-1}} + A^T\\,P_{T_{f}}\\,A - \\Big( \\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)^{-1}\\;B^T\\,P_{T_{f}}\\,A \\Big)^T B^T \\,P_{T_{f}}\\, A\\\\[0.2cm]\n    = Q_{T_{f-1}} + A^T\\,P_{T_{f}}\\,A - A^T\\,P_{T_{f}}\\, B \\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)^{-1}\\;B^T\\,P_{T_{f}}\\,A \\\\[0.2cm]\n    $\n\n    On obtient une equation analytique de Riccati aux différences (EARD)\n\n    $L$ est un gain construit qu'avec des sommes de termes calculable facilement $\\\\[1cm]$\n\nC'est une equation une **equation à temps rétrograde** \n\n$$\nQ_{T_{f}} \\longrightarrow P_{T_{f}} \\longrightarrow P_{T_{f-1}} \\longrightarrow L_{T_{f-1}} \\longrightarrow u^*_{T_{f-1}} \\longrightarrow P_{T_{f-2}} \\longrightarrow L_{T_{f-2}} \\longrightarrow u^*_{T_{f-2}} \\longrightarrow \\dots\\\\[0.7cm]\n$$\n\nÀ $\\;t=t_f\\;$, on a :\n\n$\nP_{T_{f}} \\;\\; = Q_{T_{f}}\\\\[0.2cm]\nL_{T_{f-1}} = \\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)^{-1}\\;B^T\\,P_{T_{f}}\\,A\\\\[0.2cm]\nP_{T_{f-1}} = Q_{T_{f-1}} + A^T\\,P_{T_{f}}\\,A - L_{T_{f-1}}^T B^T \\,P_{T_{f}}\\, A\\\\[0.7cm]\n$\n\nÀ $\\;t=t_{f-1}\\;$, on a :\n\n$\nL_{T_{f-2}} = \\big( R_{T_{f-2}} + B^T\\,P_{T_f-1}\\,B \\big)^{-1}\\;B^T\\,P_{T_{f-1}}\\,A\\\\[0.2cm]\nP_{T_{f-2}} = Q_{T_{f-2}} + A^T\\,P_{T_{f-1}}\\,A - L_{T_{f-2}}^T B^T \\,P_{T_{f-1}}\\, A\\\\[0.7cm]\n$\n\n### Problème Général\n\nTrouver $u^*(x,t)$ telle que le critère suivant soit **minimal** :\n\n$$\nJ(u_0, \\dots, u_{f-1}) = \\sum_{i=t_k}^{t_{f-1}}\\big( !!!\n$$\n\nCeci sous la contrainte de la dynamique du système $x_{k+1} = F(x_k,k,u_k)$.\n\n#### Solution\n\nLe problème se réduit à trouver une fonctionnelle optimisée $V(x(t),t)$ (notée en discret $\\;V(x(k),k)\\;$) sur $[t_0,t_f]$ de $\\R^n \\rightarrow \\R$ solution aux différences retrograde :\n\n$$\nV(x(t),t) = \\min_u \\Big[ L\\big(x(t),t,u_t\\big) + V\\big(x(t+1),t+1\\big) \\Big]\\\\[0.2cm]\n= \\min_u \\Big[ L\\big(x(t),t,u_t\\big) + V\\Big(F\\big(x(t),t,u_t\\big),t+1\\Big) \\Big]\n$$\n\nOr $L\\big(x(t),t,u_t\\big)$ est le coût ??? indirect à minimiser et $V\\Big(F\\big(x(t),t,u_t\\big),t+1\\Big)$ le coût précédent optimisié\n\nDe ce fait,$\\; V\\big(x(k),k\\big) = \\sum_{t=k}^{T_f} L_t\\big(x_t,t,u_t) \\;$ représente bien la somme de l'ensemble des coûts intermédiaire sur la trajectoire optimal\n\nLa solution de ce problème au sens de _Bellman_ est donnée :\n$$\nu^* = arg \\min_u \\Big[ L\\big(x(t),t,u_t\\big) + V\\Big(F\\big(x(t),t,u_t\\big),t+1\\Big) \\Big]\n$$\nc.à.d. $\\quad \\partial_u V\\big(x(t),t\\big)|_{u=u^*} = 0 \\quad$ et $\\quad \\partial_u^2 V\\big(x(t),t\\big)|_{u=u^*} > 0 \\quad$\n\n\n#### Application\n\nConsidérons le système suivant :\n$$\n\\begin{matrix}\nx_{k+1} &=& Ax_k + Bu_k\\\\\ny_k &=& Cx_k\n\\end{matrix}\n$$\n\navec un coût à minimiser :\n\n$$\n\\min_u J(u_k) = J(x_k,u_k)=\\frac{1}{2} \\sum_{i=t_k}^{t_{f-1}}\\big( x_i^T\\,Q_i\\,x_i + u_i^T\\,R_i\\,u_i \\big) + \\frac{1}{2} \\, x_{t_f}^T\\,P_{t_f}\\,x_{t_f}\n$$\n\n**Problème:**\n\nDéterminer une fonctionnelle $V\\big(x(t_{f-1}),t_{f-1}\\big)$ solution de l'équation aux différences suivante :\n$$\nV\\big(x(t_{f-1}),t_{f-1}\\big) = \\Big[ L\\big(x(t_{f-1})),t_{f-1}),u_{t_{f-1})}\\big) + V\\Big(x(t_f),t_f\\Big) \\Big]\n$$\n\nDu coup, on cherche :\n$$\nV^*\\big(x(t_{f-1}),t_{f-1}\\big) = \\frac{1}{2} x_{t_{f-1}}^T\\,P_{t_{f-1}}\\,x_{t_{f-1}}\n$$\n\nOn trouve :\n$$\nu_{T_{f-1}}^* = - \\big( R_{T_{f-1}} + B^T\\,P_{T_f}\\,B \\big)^{-1}\\;B^T\\,P_{T_{f}}\\,A\\,x_{T_{f-1}}\n$$\n\nEn général, la commande LQ est une commande linéaire en fonction de l'état\n$$\nu_t = -L_t x_t\n$$\navec \n$$\nL_t = \\big( R_{t} + B^T\\,P_{t+1}\\,B \\big)^{-1}\\;B^T\\,P_{t+1}\n$$\net\n$$\nP_t = Q_t + A^T\\,P_{t+1}\\,A - A^T\\,P_{t+1}\\,B \\big( R_t + B^T\\,P_{t+1}\\,B \\big)^{-1} B^T\\,P_{t+1}\\,A\n$$\n\nLa solution d'équation de Riccati aux différemces obtenue d'une manière retrograde : $P_t = Q_{t_f}$\n\n### Discusion\n\nÀ n'importe quel instant $J^*$ est un coût optimisé\n\n$u^* \\rightarrow k$\n\n$J(u_k) = \\frac{1}{2} x_0^TP_0x_0$\n\n**Comment ce système se comporte à l'infini ?**\n\nBut est de stabiliser le système\n\nSauf qu'à l'infini la dynamique du système va \"s'éteindre\" car à l'infini le système perd toute son energie\n\nDu coup, $\\quad\\lim_{t\\rightarrow\\infty}P_{t_f} = 0$\n\n\n\n\n\n> Notes du 2022/09/23 - End\n\n---\n\n> Notes du 2022/09/28 - Start\n\n\n\n\n## Synthèse de régulateur LQ\n\n### Horizon fini\n\n**Problème:**\n\nDéterminer $u^*$ tq\n$$\n\\min_u J(u) = \\frac{1}{2} \\sum_{i=0}^{t_{f-1}}\\big( x_i^T\\,Q_i\\,x_i + u_i^T\\,R_i\\,u_i \\big) + \\frac{1}{2} \\, x_{t_f}^T\\,P_{t_f}\\,x_{t_f}\n$$\nsous la contrainte\n$$\n\\begin{matrix}\nx_{k+1} &=& Ax_k + Bu_k\\\\\ny_k &=& Cx_k\n\\end{matrix}\n$$\noù $\\quad Q_k = Q_k^T \\geq 0 \\quad R_k = R_k^T > 0 \\quad P_{T_f} = Q_{T_f} \\geq 0$ (matrices choisies par le designer)\n\n**Solution:** $u^*_k = -L_k\\;x_k$\n\n$L_k$ est la solution de l'équation de Riccati à temps retrograde??? initialisé par $P_{T_f} = Q_{T_f}$ :\n\n$$\nL_k = (R_k + B_k^T\\;P_{k+1}\\;B_k)^{-1}\\;B^T\\;P_{k+1}\\;A_k\\\\\nP_k = Q_k + A_k^T\\;P_{k+1}\\;A_k - A_k^T\\;P_{k+1}\\;B_k\\;L_k\n$$\n\nLe minimum du critère est alors donné par :\n$$\n\\min_u J(u) = \\frac{1}{2} x_0^T\\;P_0\\;x_0\n$$\navec $P_0$ obtenue par l'équation précédente.\n\n### Horizon infini\n\n**Problème:**\n\nDéterminer $u^*$ tq\n$$\n\\min_u J(u) = \\frac{1}{2} \\sum_{i=0}^{\\infty}\\big( x_i^T\\,\\textcolor{red}{Q}\\,x_i + u_i^T\\,\\textcolor{red}{R}\\,u_i \\big)\n$$\nsous la contrainte\n$$\n\\begin{matrix}\nx_{k+1} &=& Ax_k + Bu_k\\\\\ny_k &=& Cx_k\n\\end{matrix}\n$$\noù $\\quad Q_k = Q_k^T \\geq 0 \\quad R_k = R_k^T > 0$ (matrices connues par le designer)\n\nAttention: $P_{T_f}$ est nul (le coût final dans le cas d'un horizon infini est nul [consommation de toute l'énergie]) !\n\n**Solution:**\n\nLe système bouclé est **assymptotiquement stable** sous reserve que le système dynamique soit **stationnaire, stabilisable** et le couple $(A, Q^{1/2})$ **détectable**\n\n> Notions Fondamentales d'Automatique\n- Système stationnaire = gain/dynamique/paramètre non variant dans le temps\n- Système stabilisable = mode non cmble convergent\n- Système détectable = modes non obsble convergent\n- Pole dominant = dynamique la plus lente !\n- Critère de Kalman pour Cmblité et Obsbilité\n- Critère de PBH pour Stabilisable et Détectable\n\n> ATTENTION:\n- Cmmble $\\Longrightarrow$ Stabilisable (pas d'équivlance)\n- Obsble $\\Longrightarrow$ Détectable (pas d'équivlance)\n\n$Q^{1/2}$ : n'importe qu'elle matrice rectangulaire qui vérifie \n$$\n(Q^{1/2})^T \\cdot Q^{1/2} = Q\n$$\n\n> Matrice $Q$ est choisie par \n\n---\n\n### $\\textcolor{red}{\\textbf{\\underline{Théorème :}}}$\n\n1. Si le système dynamique est **stabilisable** alors :\n    - $P_{k+1} = P_k = \\dots = P$ admet une limite constante semi définie positive qui est la solution de l'équation :\n    $$\n    P = Q + A^T\\;P\\;A = A^T\\;P\\;B\\;(R+B^T\\;P\\;B)^{-1}\\;B^T\\;P\\;A\n    $$\n    - La commande optimale est donnée par $u^* = -L\\;x_k$ avec $L = (R+B^T\\;P\\;B)^{-1}\\;B^T\\;P\\;A$\n    - Le coût optimale est : $\\quad \\min_u J(u) = \\frac{1}{2} x_0^T\\;P\\;x_0$\n2. Si le système est **stabilisable** et le couple $(A,Q^{1/2})$ est **détectable** alors :\n    - $P$ est l'**unique solution** semi définie positive de l'équation algébraique de Riccati :\n    $$\n    P = Q + A^T\\;P\\;A = A^T\\;P\\;B\\;(R+B^T\\;P\\;B)^{-1}\\;B^T\\;P\\;A\n    $$\n    - Le système bouclé est **assymptotiquement stable**\n    - En plus, si $(A,Q^{1/2})$ est **observalbe** alors $P$ est définie positive\n\n---\n\n> Importance de la notion définie positive : il faut avoir cette notion pour permettre à la commande d'exister car il nous faut une matrice 'positive' pour pouvoir l'inverser et ainsi calculer la solution\n\n\n### Exercice\n\nPour $x_{k+1} = 2 x_k + u_k$, déterminer la commande optimale $u^*$ qui stabilise $x$ et minimise :\n$$\nJ(x_k,k) = \\frac{1}{2} \\sum_{k=0}^{T_{f-1}} \\Big( x_k^T\\;x_k + u_k^T\\;R\\;u_k \\Big) + \\frac{1}{2}\\;x_{T_f}^T\\;P_{T_f}\\;x_{T_f}\n$$\n1. avec $T_f = 3$ et $P_{T_f} = 1$ montrer respectivement pour $R=1$, $R=10$ et $R=1000$ l'influence de la ponderation $R$ sur les pôles du système\n2. avec $T_f = 3$ et $R = 1$ et respectivement pour $P_{T_f}=0.1$, $P_{T_f}=10$ et $P_{T_f}=1000$ déterminer $x_3$ en fonction de $L_0$,$L_1$, $L_2$ et $x_0$\n3. Reprendre la question 1 avec $T_f \\longrightarrow \\infty$\n\n#### Solution Q1\n\nPour $x_{k+1} = 2 x_k + u_k$, déterminer la commande optimale $u^*$ qui stabilise $x$ et minimise :\n$$\nJ(x_k,k) = \\frac{1}{2} \\sum_{k=0}^{T_{f-1}} \\Big( x_k^T\\;x_k + u_k^T\\;R\\;u_k \\Big) + \\frac{1}{2}\\;x_{T_f}^T\\;P_{T_f}\\;x_{T_f}\n$$\n\navec $T_f = 3$ et $P_{T_f} = 1$ montrer respectivement pour $R=1$, $R=10$ et $R=1000$ l'influence de la ponderation $R$ sur les pôles du système\n\n##### Deux méthodes de résolutions pour la question 1\n\n- Avec le critère optimale\n    1. Calculer les $J(x_k,k)$\n    2. Dériver ces $J(x_k,k)$ et trouver les racines \n    3. Vérifier que la dérivée seconde > 0\n        >![](/assets/images/B1.COI.Chap1.SecondDerivativeForMaxMin.png)\n        > [source](https://www.hec.ca/cams/rubriques/La_derivee_seconde.pdf)\n- Avec le formules du cours (selon horizon fini/infini)\n    1. Commencer par $u_{t_f}$\n    2. Appliquer la formule $u^*_k = -L_k\\;x_k$\n    3. Calculer $L_k$ (attention dépend de $P_k$) avec \n    $$\n    L_k = (R_k + B_k^T\\;P_{k+1}\\;B_k)^{-1}\\;B_k^T\\;P_{k+1}\\;A_k\n    $$\n    4. Calculer $P_k$ avec\n    $$\n    P_k = Q_k + A_k^T\\;P_{k+1}\\;A_k - A_k^T\\;P_{k+1}\\;B_k\\;L_k\n    $$\n\n\n\n\n> Notes du 2022/09/28 - End\n\n---\n\n> Notes du 2022/10/05 - Start\n\n\n\n\n\n##### Réponse\n\nPour $T_f=3$, $R=1$ et $P_f=P_3=1$ :\n1. Déterminer les commandes $u_0^*$, $u_1^*$, $u_2^*$ avec la méthode de Bellman\n\n    Pour $u_2^*$,\n\n    - On a sous la contrainte de $x_3=2x_2+u_2$\n    $$\n    J(x(2),2)\n    = \\frac{1}{2} x_2^2 + \\frac{1}{2} u_2^2 + J^*(x(3),3)\n    = \\frac{1}{2} x_2^2 + \\frac{1}{2} u_2^2 + \\frac{1}{2} x_3^2\n    $$\n\n    - La commande est donnée par:\n    $$\n    \\partial_{u_2} J(x(2),2) = \\partial_{u_2} \\frac{1}{2} x_2^2 + \\frac{1}{2} u_2^2 + \\frac{1}{2} \\big(2x_2+u_2\\big)^2 = 0\n    $$\n    Il vient que $u_2 + (2x_2+u_2)=0$ donc $$u_2^*=-x_2$$\n\n    > Attention: pour être rigoureux, il faut vérifier que $\\partial_{u_2}^2J(x(2),2)>0$\n\n    - On calcule alors le coût optimal :\n    $$\n    J^*(x(2),2) = \\frac{1}{2} x_2^2 + \\frac{1}{2} u_2^{*2} + J^*(x(3),3) = \\frac{1}{2} x_2^2 + \\frac{1}{2} \\big(-x_2\\big)^2 + \\frac{1}{2} \\big(2x_2-u_2^*\\big)^2 \n    $$\n    Ainsi,\n    $$\n    J^*(x(2),2) = \\frac{3}{2} x_2^2\n    $$\n\n    Pour $u_1^*$,\n\n    - On a sous la contrainte de $x_2=2x_1+u_1$\n    $$\n    J(x(1),1)\n    = \\frac{1}{2} x_1^2 + \\frac{1}{2} u_1^2 + J^*(x(1),1)\n    $$\n\n    - La commande est donnée par:\n    $$\n    \\partial_{u_1} J(x(1),1) = \\partial_{u_1} \\frac{1}{2} x_1^2 + \\frac{1}{2} u_1^2 + \\frac{1}{2} \\big(2x_1+u_1\\big)^2 = 0\n    $$\n    Il vient que \n    $$u_1^*=-\\frac{3}{2}x_1$$\n\n    - On calcule alors le coût optimal :\n    $$\n    J^*(x(2),2) = 2x_1^2\n    $$\n\n    Pour $u_0^*$,\n    \n    - On a sous la contrainte de $x_0=2x_0+u_0$\n    $$\n    J(x(0),0)\n    = \\frac{1}{2} x_0^2 + \\frac{1}{2} u_0^2 + J^*(x(1),1)\n    $$\n\n    - La commande est donnée par:\n    $$\n    \\partial_{u_0} J(x(1),1) = \\partial_{u_0} \\frac{1}{2} x_0^2 + \\frac{1}{2} u_0^2 + \\frac{1}{2} \\big(2x_0+u_0\\big)^2 = 0\n    $$\n    Il vient que \n    $$u_0^*=-\\frac{8}{5}x_0$$\n\n    - On calcule alors le coût optimal :\n    $$\n    J^*(x(2),2) = \\frac{21}{10}x_0^2 = \\frac{1}{2}\\;x_0^T\\;\\frac{21}{5}\\;x_0\n    $$\n\n##### Discussion\n\nOn constate que si l'on choisit **$R$ grand la commande optimale $u^*$ sera 'petite'**.\n\nRappel :\n**On cherche à minimiser le $u$** donc il fait du sens de choisir un $R$ grand pour le sélectionner que des commandes petites\n\n**Probleme :** \n**Si on force $u$ 'petit' alors on peut manquer d'énergie** pour amener notre système d'un état donné à un état final désiré\n\n**Advantage :** \nAvoir un **$R$ grand garantie la non saturation** mais au prix d'avoir **moins d'influence sur la dynamique du système**\n\n#### Solution Q2\n\nPour $x_{k+1} = 2 x_k + u_k$, déterminer la commande optimale $u^*$ qui stabilise $x$ et minimise :\n$$\nJ(x_k,k) = \\frac{1}{2} \\sum_{k=0}^{T_{f-1}} \\Big( x_k^T\\;x_k + u_k^T\\;R\\;u_k \\Big) + \\frac{1}{2}\\;x_{T_f}^T\\;P_{T_f}\\;x_{T_f}\n$$\navec $T_f = 3$ et $R = 1$ et respectivement pour $P_{T_f}=0.1$, $P_{T_f}=10$ et $P_{T_f}=1000$ \n\nDéterminer $x_3$ en fonction de $L_0$,$L_1$, $L_2$ et $x_0$\n\n##### Méthodes\n\n1. Écrire les $u_k^*=-L_k\\;x_k$\n2. De $x_{k+1} = 2\\;x_k + u_k$, calculer $x_3$ en fonction de $x_2$ et $x_1$\n3. le 2. nous donne alors une formule pour calculer $x_3$ en fonction des $L_k$ et de $x_0$\n\n\n##### Réponse\n\nOn a :\n$$\nx_3 = (2-L_2)\\;x_2\\\\[0.2cm]\nx_2 = (2-L_1)\\;x_1\\\\[0.2cm]\nx_1 = (2-L_0)\\;x_0\n$$\n\nD'où,\n$$\nx_3 = (2-L_2)\\;(2-L_1)\\;(2-L_0)\\;x_0\n$$\n\nIl ne reste plus qu'à faire les calculs selon les valeurs de $P_{t_f}$\n\n\n\n\n> Notes du 2022/10/05 - End\n\n---\n\n> Notes du 2022/11/08 - Start\n\n\n\n\n![](/assets/images/B1.COI.CM.BB20221107-01.png)\n\n##### Discussion\n\nPlus $P_{T_f}$ est grand, plus on converge vite (et aussi plus on consomme d'énergie).\n\n## Commande LQ - Cas Continue\n\n### Objectif\n\nTrouver $u^*(x(t),t)$ qui minimise \n$$\n\\min_u J(u) = J(x_k,t_k) = \\frac{1}{2} \\int_{t_i}^{T_{f}} \\big( x_t^T\\,Q\\,x_t + u_t^T\\,R\\,u_t \\big)\\;dt + \\frac{1}{2} \\, x_{T_f}^T\\,P_{T_f}\\,x_{T_f}\n$$\nsous la contrainte dynamique\n$$\n\\begin{cases}\n\\dot x(t) &=& Ax(t) + Bu(t)\\\\\ny(t) &=& Cx(t)\n\\end{cases}\n$$\n\n### Problème\n\n$$\n\\min_u J(u) = \\int_{t_i}^{T_f} L(x(t),u(t),t) dt + L_{T_f}(x_{T_f},T_f)\n$$\nsous la contrainte\n$$\n\\dot x = F(x,u,t)\n$$\n\nD'après le principe de Bellman, ce problème se réduit à trouver une fonctionnelle $V(x(t),t)$ définie sur $[0,T_f]$ de $\\mathbb{R}^n \\rightarrow \\mathbb{R}$ solution de l'équation de **Hamilton-Jacobi-Bellman (HJB)** :\n\n$$\n\\begin{matrix}\n& -\\dot V(x(t),t) &=& \\min_u L(x,u,t) &\\\\[0.2cm]\n\\iff & -\\partial_t V &=& \\min_u L(x,u,t) + \\partial_x V\\;F(x,u,t) & \\textbf{HJB}  \n\\end{matrix}\n$$\n\nEn effet,\n$$\n\\dot V(x(t),t) = \\partial_t V + \\partial_x V\\cdot\\partial_t x = \\partial_t V + \\partial_x V \\cdot\\dot x = \\partial_t V + \\partial_x V \\cdot F(x,u,t)\n$$\n\nDans le cas général,\n$$\nV(x(t),t) = \\int_{t_i}^{T_f} L(x,u,t) dt\n$$\n\nDans le cas LQ,\n$$\nV(x(t),t) = \\frac{1}{2} x_t^T\\,P_t\\,x_t = \\frac{1}{2} \\int_{t_i}^{T_{f}} \\big( x_t^T\\,Q\\,x_t + u_t^T\\,R\\,u_t \\big)\\;dt + \\frac{1}{2} \\, x_{T_f}^T\\,P_{T_f}\\,x_{T_f}\n$$\n\n\n### Horizon fini\n\nOn considère $\\dot x = A x + B u$ et un coût à minimiser : \n$$\nJ(u) = \\frac{1}{2} \\int_{t_i}^{T_{f}} \\big( x_t^T\\,Q\\,x_t + u_t^T\\,R\\,u_t \\big)\\;dt + \\frac{1}{2} \\, x_{T_f}^T\\,P_{T_f}\\,x_{T_f}\n$$\n\n#### Problème\n\nDéterminer une fonctionnelle définie sur $[0,T_f]$ solution de l'équation de **Hamilton-Jacobi-Bellman (HJB)** :\n$$\n-\\dot V(x(t),t) = \\frac{1}{2} \\Big[\\; x_t^T\\,Q\\,x_t + u_t^T\\,R\\,u_t \\;\\Big]\n$$\noù\n$$\nV(t)=\\frac{1}{2} \\int_{t_i}^{T_{f}} \\big( x_t^T\\,Q\\,x_t + u_t^T\\,R\\,u_t \\big)\\;dt + \\frac{1}{2} \\, x_{T_f}^T\\,P_{T_f}\\,x_{T_f}\n$$\n\n#### Résolution\n\nOn pose: $V(x(t),t) = \\frac{1}{2}\\;x_{T_f}^T\\,P_{T_f}\\,x_{T_f}$\n\n**HJB**\n\n$$\n\\dot V(x(t),t) = -\\frac{1}{2} x_{t}^T\\,\\dot P_{t}\\,x_{t} -\\frac{1}{2} \\textcolor{purple}{\\dot x_{t}}^T\\,P_{t}\\,x_{t} -\\frac{1}{2} x_{t}^T\\,P_{t}\\,\\textcolor{orange}{\\dot x_{t}} = \\frac{1}{2} \\big(\\; x_t^T\\,Q\\,x_t + u_t^T\\,R\\,u_t \\;\\big)\\\\[0.2cm]\n\\iff -\\frac{1}{2} x_{t}^T\\,\\dot P_{t}\\,x_{t} = \\frac{1}{2} \\big(\\; x_t^T\\,Q\\,x_t + u_t^T\\,R\\,u_t \\;\\big) \\textcolor{red}{+}\\frac{1}{2} \\textcolor{purple}{(Ax_t+Bu_t)}^T\\,P_{t}\\,x_{t} \\textcolor{red}{+}\\frac{1}{2} x_t^T\\,P_{t}\\,\\textcolor{orange}{(Ax_t+Bu_t)}\n$$\n\nOn regroupe les termes\n\n...\n\npuis on dérive **HJB** p.r.à $u$ pour trouver sa racine (c.à.d. résoudre en 0)\n\n...\n\nIl vient que \n$$\n\\begin{matrix}\n&\\partial_u \\textbf{HJB} &=& 0\\\\[0.2cm]\n\\iff& \\frac{1}{2} B^T\\,P_t\\,x_t + \\frac{1}{2} x_t^{T}\\,P_t\\,B + R\\,u_t &=& 0\\\\[0.2cm]\n\\iff& B^T\\,P_t\\,x_t + R\\,u_t &=& 0\n\\end{matrix}\n$$\n\nOn en déduit la solution suivante \n$$\nu_t^* = - R^{-1}\\,B^T\\,P_t\\,x_t\n$$\n\nOn a obtenu un extremum maintenant il faut déterminer la condition sur pour que $u_t^*$ soit un minimum en dérivant **HJB** une deuxième fois :\n$$\n\\partial_{u^2}^2 \\textbf{HJB} = R > 0\n$$\n\nRemarque:\n- Pour etre un min, il faut en plus que $R$ soit positive\n- Or $R$ doit aussi être inversible et donc ne peut pas etre semi positive donc au max strictement positive (mais seuls qlqs matrices stric positive peuvent etre inversible)\n    - si $R$ n'est pas inversible, il faudra appliquer un changement de base à l'aide de bonne matrice de passage pour obtenir la pseudo-inverse de $R$\n    - mais dans ce cas il faudra refaire la preuve pour le nouveau critère $P^TRP$\n- À noter que l'on a fait un choix au départ pour conditionner le critere selon la maximisation ou la minisation en mettant un **-** dehors ou dedans la fonctionnelle\n\nMaintenant que l'on a $u_t^*$, il faut calculer $P_t$ directement (et non plus récursivement comme en discret) à l'aide de l'équation différentielle de Riccatti suivante :\n\n$$\n-\\dot P_t = Q + A^T\\,P_t + P_t\\,A - P_t\\,B\\,R^{-1}\\,B^T\\,P_t\n$$\n\n\n...\n\n\nLa commande optimale est fonction linéaire de l'état :\n$$\nu_t^* = - R^{-1}\\,B^T\\,P_t\\,x_t = -L_t\\,x_t\n$$\nAvec $L_t$ le gain variable dans le temps où $P_t$ est solution de l'équation différentielle de Riccatti avec $P_t=Q_{T_f}$\n\n\n### Horizon Infini\n\n#### Problème\n\nMinimiser le critère\n$$\n\\min_u J(u) = \\lim_{T_f\\rightarrow\\infty} \\frac{1}{2}\\, ...\n$$\n\nDans le cas infini, la solution $P_t$ converge vers une constante P\n\n\n\n\n> Notes du 2022/11/08 - End\n\n---\n\n> Notes du 2022/11/09 - Start\n\n\n\n> À Rattraper !!! Voir les [Notes GEA du 2022/11/09](https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B1.COI.CM.NotesGEA.20221109.pdf)\n\n\n\n\n> Notes du 2022/11/09 - End\n\n---\n\n> Notes du 2022/11/15 - Start\n\nVendredi 25 17h45\n\n\n## Principe de maximisation de l'Hamiltonien (Pontryaguie)\n\n### Cas Continue\n\nTrouver $u^*(x(t),t)$ qui maximise l'Hamiltonien\n$$\nH(x(t),u,\\lambda) = - L(x,u,t)+\\lambda^T\\;F(x,u,t)\n$$\navec $\\dot x = F(x,u,t)$\n\n### Cas Discret\n\n$$\nH_{k+1} = - L(x,u,t)+\\lambda^T_{k+1}\\;F(x,u,t)\n$$\navec $x_{k+1} = F(x,u,t)$\n\n## Optimalité\n\n### Cas Continue\n\nConditions d'optimalité $\\iff$ minimiser le critère $J$ $\\iff$ maximiser l'Hamiltonien\n\n1. Condition finale $\\quad \\lambda^T_{T_f} = -x_{T_f}\\;P_{T_f}$\n2. $\\dot\\lambda = - \\partial_x H$\n3. $\\dot x = \\partial_\\lambda H$\n\nRecherche d'une commande optimale $\\iff$ maximiser le $H$\n\n1. $\\partial_u H |_{u=u^*} = 0$\n2. $\\partial^2_{u^2} H |_{u=u^*} < 0$\n\n### Cas Discret\n\nConditions d'optimalité (conditions du premier ordre d'Hamilton)\n\n1. Condition finale $\\quad \\lambda_{T_f}^T = - x_{T_f}\\;P_{T_f}$\n2. $\\lambda_k = - \\partial_{x_{k}} H_{k+1}$\n3. $x_{k+1} = \\partial_{\\lambda_{k+1}} H_{k+1}$\n\nCommande optimale\n\n1. $\\partial_{u_k} H_{k+1} |_{u=u^*} = 0$\n2. $\\partial^2_{u_k^2} H_{k+1} |_{u=u^*} < 0$\n\n### Horizon fini/infini\n\n$$\n\\forall t, H = cste\n$$\n\n$$\n\\lim_{t\\longrightarrow\\infty} H = 0\n$$\n\n\n## Application PMP à la commande LQ\n\nSoit un système $x_{k+1} = Ax_k + Bu_k$, on recherche la commande optimale LQ qui minimise le critère suivant :\n$$\nL(x,u,k) = \\frac{1}{2}\\Big( x_k^TQ_kx_k + u_k^TR_ku_k \\Big)\n$$\navec $Q_j = Q_j^T\\geq 0 \\quad P_j=P_j^T\\geq 0 \\quad R_j=R_j^T> 0$\n\nOn pose l'Hamiltonien :\n$$\nH(x,u,k+1) = -\\frac{1}{2}\\Big( x_k^TQ_kx_k + u_k^TR_ku_k \\Big) + \\lambda_k^T(Ax_k + Bu_k)\n$$\n\nConditions d'optimalités vérifiées :\n\n1. Condition finale $\\quad \\lambda_{T_f}^T = - x_{T_f}\\;P_{T_f}$\n2. Conditon extremum $\\quad \\partial_{u_k} H_{k+1} |_{u=u^*} = 0$\n3. Conditon maximum $\\quad \\partial^2_{u_k^2} H_{k+1} |_{u=u^*} < 0$\n4. Resultat $\\quad \\lambda_k = - \\partial_{x_{k}} H_{k+1}$\n5. Resultat $\\quad x_{k+1} = \\partial_{\\lambda_{k+1}} H_{k+1}$\n\nIl vient que\n$$\nx_{k+1} = \\partial_{\\lambda_{k+1}} H_{k+1} = Ax_k + Bu_k\\\\[0.2cm]\n\\lambda_k = - \\partial_{x_{k}} H_{k+1} = A^T\\lambda_{k+1}-Q_k x_k\n$$\n\nOr\n$$\n\\partial_{u_k} H_{k+1} |_{u=u^*} = 0 \\implies -R_k u_k + B^T\\lambda_{k+1} |_{u=u^*} = 0\n$$\nDonc\n$$\nu_k^* = R_k^{-1}B^T\\lambda_{k+1}\\\\[0.2cm]\n\\partial^2_{u_k^2} H_{k+1}= -R_k < 0\n$$\n\nOn s'assure d'avoir la commande optimale :\n$$\nu^* = R_k^{-1}B^T\\lambda_{k+1}\\\\[0.2cm]\n\\lambda_{T_f} = - P_{T_f}x_{T_f}\n$$\n\nOn pose $\\lambda_k = -P_kx_k$\n$$\nu_k^* = R_k^{-1}B^T\\lambda_{k+1} = R_k^{-1}B^TP_{k+1}x_{k+1}\n$$\nDu coup,\n$$\nRu_k^* = -B^TP_{k+1}x_{k+1} = -B^TP_{k+1}(Ax_k+Bu_k^*)\n$$\nAinsi,\n$$\n(R+B^TP_{k+1}B)u_k^* = -B^TP_{k+1}Ax_k\n$$\nIl vient que\n$$\nu_k^* = -\\textcolor{orange}{(R+B^TP_{k+1}B)\\cdot(B^TP_{k+1}A)}\\;x_k = - \\textcolor{orange}{L_{k+1}}\\;x_k\n$$\n\nMaintenant, il nous reste à calculer $P_k$, or nous savons que \n$\\quad\\lambda_k = A^T\\lambda_{k+1} - Q_kx_k\\quad$ et on avait posé $\\quad\\lambda_k = -P_kx_k\\quad$ et $\\quad\\lambda_{T_f} = -P_{T_f}x_{T_f}$\n\nDonc,\n$$\n\\begin{matrix}\n- P_kx_k &=& A^T\\lambda_{k+1} - Q_kx_k\\\\[0.2cm]\n- P_kx_k &=& A^T\\big(P_{k+1}x_{k+1}\\big) - Q_kx_k\\\\[0.2cm]\n- P_kx_k &=& A^T\\Big(P_{k+1}(Ax_k + Bu_k^*)\\Big) - Q_kx_k\\\\[0.2cm]\n- P_kx_k &=& A^T\\Big(P_{k+1}\\big(Ax_k + B(-L_{k+1}x_k)\\big)\\Big) - Q_kx_k\\\\[0.2cm]\n\\end{matrix}\n$$\n\nAinsi,\n$$\nP_k = A^TP_{k+1}A - A^TP_{k+1}BL_{k+1}+Q_k\n$$\n\n\n## Exercice\n\nSoit $\\quad\\dot x = -x+u\\quad$,\n\nDéterminer la commande optimale qui minimise\n$$\nJ=\\frac{1}{2}\\int_{0}^1\\big(3x^2+u^2\\big)dt\n$$\nsous la contrainte de la dynamique du système sachant que le système évolue de $x=0$ à $t_0$ vers $x=2$ à $t=1$\n\n> Si plusieurs critère, alors la solution sera une intersection des solutions de chaque critère\n\n![](/assets/images/B1.COI.CM.NotesRKA.20221114.SolExo.png)\n\n\n\n> Notes du 2022/11/15 - End\n\n---\n","n":0.018}}},{"i":123,"$":{"0":{"v":"AOH - Project Management","n":0.5},"1":{"v":"\n\n![](/assets/images/AOH.SlidePoly.01.TableOfContent.png)\n\n- Plannification : Chap 1 à Chap 6\n- Monitoring : Chap 7 et plus\n\n# Introduction\n\n![](/assets/images/AOH.SlidePoly.02.Introduction.png)\n\n- ici pas de pratique pour le moment\n\n# Chap 1 - Definition of a Project\n\n![](/assets/images/AOH.SlidePoly.03.TitleDefProject.png)\n\n## Definition\n\n![](/assets/images/AOH.SlidePoly.04.DefProject.png)\n\n- specifique\n- process progressif ! et avec méthode\n- future réalité sans equivalent exact\n- accomplissant des objectifs technique et economic\n- à un début et une fin\n\n- possède un aspect innovative\n\n> Tout devrer être un projet car tout devrer être organisé\n\n> **La gestion de projet est un _outils_ !!!**\n\n![](/assets/images/AOH.SlidePoly.05.DefProject.png)\n\n## Application\n\n![](/assets/images/AOH.SlidePoly.06.Application.png)\n\n- **Strategic Direction**\n- exemple: developement web et bonne utilisation des emails\n\n\n## Importance\n\n![](/assets/images/AOH.SlidePoly.07.Importance.png)\n\n- Project Managment Institute\n  - Chapitre = représentant dans un pays\n\n## Timeline\n\n![](/assets/images/AOH.SlidePoly.08.DiagDefProject.png)\n\n- **Indicators**\n  - données **mesurables**\n  - pour permettre de comparer avec les objectifs\n\n- Développer **modulairement** pour backup/reuse et ainsi garantir/optimiser l'utilité du travail\n\n- Identification strength/weakness\n  - **SWOT Analysis** [Strengths/Weaknesses/Opportunities/Threats]\n\n- Pendant le projet on planifie chaque tâches qui seront chacunes traiter comme un 'mini-projet' avec **un** responsable\n\n## Objectives\n\n![](/assets/images/AOH.SlidePoly.09.Objectives.png)\n\n> Importance to satisfy both the client and the team for max success\n\n### Magic Triangle\n\nQuality vs Time vs Cost\n\n- JURAN 1er à chercher à définir la qualité\n  - \"Qualité = Aptitude à l'usage\" -> Client Satisfaction\n  - Aujourd'hui Norme ISO 9001 (! c'est une specs donc un What et pas un How)\n- Qualité = 100% de satisfaction de la Specs\n\n\n### Client Statisfaction\n\n![](/assets/images/AOH.SlidePoly.10.ClientSatisfaction.png)\n\n- Milestones = Jalons en français\n- Stakeholders = acteurs\n- Minutes of Meetings = Notes des meetings/Comptes Rendus\n\n### Team Satisfaction\n\n#### Herzberg/Maslow - Hierarchy of Needs\n![](/assets/images/AOH.SlidePoly.11.TeamSatisfaction.png)\n\n\n### Success Factors\n\n![](/assets/images/AOH.SlidePoly.12.SuccessFactor.png)\n\n- 3 types de Ressources\n  - matérielles\n  - humaines\n  - financières\n\n- Structure de découpage du projet\n  > WBS = Work Breakdown Structure \n\n- Leadership a été définie initialement par la qualité\n  - Leadership = \"la direction a une vision\" (Top/Down)\n\n### Changing Environments\n\n![](/assets/images/AOH.SlidePoly.13.ChangingEnvironments.png)\n\n> Satisfaire les besoins explicites ET implicites\n\n- Implicites => poser les questions et ne pas assumer du non dit\n\n> **Project Management est bcp plus transverse que hierarchique**\n\n### Bilan\n\n![](/assets/images/AOH.SlidePoly.14.Bilan.png)\n\n> **ATTENTION:** Il NE faut PAS surpasser les besoins ! Les atteindres est le plus important !\n\n# Chap 2 - Life Cycle\n\n![](/assets/images/AOH.SlidePoly.15.TitleLifeCycle.png)\n\n## Definition Life Cycle\n\n![](/assets/images/AOH.SlidePoly.16.DefLifeCycle.png)\n\n> Simplistic View ! Car il manque l'organisation du projet qui se fait en amant.\n\n## Phases Life Cycle\n\n![](/assets/images/AOH.SlidePoly.17.PhaseLifeCycle.png)\n\n- Bleu = Gestion de projet\n- Jaune = Aspect Technique\n\n\n- Selon la litérature, on peut décomposer un projet en 4 ou 5 phases\n\n- Attention:\n  - Bouclé un process demande  quand meme que la boucle sâche quand finir et ne pas s'éterniser\n  - Ne pas backler la finalisation d'une phase avant de passer à une autre\n\n- Plannifier en même temps que la définition à lieu car on peut tj \n\n- Completion = finaliser les rapports donc ne pas commencer à la fin d'écrire la doc ni trop temps mais progressivment\n\n\n## Type of Process\n\n![](/assets/images/AOH.SlidePoly.18.TypeProcess.png)\n\n### Structure\n\n![](/assets/images/AOH.SlidePoly.19.Structure.png)\n\n### 5 Process Types\n\n![](/assets/images/AOH.SlidePoly.20.5Process.png)\n\n# Chap 3 - Scope\n\n![](/assets/images/AOH.SlidePoly.21.TitleScope.png)\n\n> **Nécessaire pour définir la Specs**\n\n## Process Overview : Diagramme de GANTT\n\n![](/assets/images/AOH.SlidePoly.22.ProcessOverview.png)\n\n- Diagramme de Gantt = Répartition des tâches dans le temps\n- Priority Matrix\n- Network Logic\n- PERT\n\n## SMART Objectives\n\n![](/assets/images/AOH.SlidePoly.23.SMART.png)\n\n- S: Specific\n- **M**: **Measurable**\n- A: Attrative/Attainable\n- **R**: **Reachable**/Reasonable\n- **T**: **Temporal**\n\nLes exemples donnés ne sont pas \n\n> Finir une tâche dans un état **stable** et **finalisé**\n\n\nPrécision métrique: mieux entre tech optic et mechanique ?\n  - la méca est plus précise en métrologie\n  - la précision optic est relative au champ de vision\n    - cam de tel à 16M est précise pour scanner une feuille mais pas pour prendre en photo les alpes\n\n\n## Client/Stakeholders\n\n![](/assets/images/AOH.SlidePoly.24.ClientStakeholders.png)\n\n- Liste de questions non exaustive !\n\n## Deliverables\n\n![](/assets/images/AOH.SlidePoly.25.DeliverablesMilestones.png)\n\n- Lottisement:\n  - Software.Doc + Hardware.Doc\n  - Hardware + Software.Doc\n\n> **Deliverables = Name VS Task = Action (so verb)**\n\n## Requirements & Exclusions\n\n> Supprimer _Technical_ et le remplacer par _projet_\n\n![](/assets/images/AOH.SlidePoly.26.RequirementsExclusions.png)\n\nExemple:\n- Système de métrologie en centrale nucléaire en mouvement\n- comme mouvement nécessité d'un arret d'urgence\n- client n'a pas le budget \n- donc indique dans le contrat:\n  \n  > \"À la demande du client, le bouton d'arrêt d'urgence pourra être dans un autre projet future\"\n\n\n## Risks (5M) & Review\n\n![](/assets/images/AOH.SlidePoly.27.5M.png)\n\n![](/assets/images/AOH.SlidePoly.28.5MReview.png)\n\n## Priority Matrix\n\n![](/assets/images/AOH.SlidePoly.29.PriorityMatrix.png)\n\n# Chap 4 - Project Planning\n\n![](/assets/images/AOH.SlidePoly.30.TitleProjectPlanning.png)\n\n## WBS\n\n![](/assets/images/AOH.SlidePoly.31.WBS.png)\n\n> **WBS** = Convertir a list of deliverables into a list of tasks\n\n> **Critical Step of a project**\n\n- On s'arrête à un sous-livrable lorsque ce sous-livrable possède un agent spécifique\n\n![](/assets/images/AOH.TemplateSignatureDoc.png)\n\n### Project Structure\n\n![](/assets/images/AOH.SlidePoly.32.Structure.png)\n\n### Exemple: Laptop\n\n![](/assets/images/AOH.SlidePoly.33.WBSExempleLaptop.png)\n\n### Work Packages\n\n![](/assets/images/AOH.SlidePoly.34.WBSWorkPackages.png)\n\n### RAM Responsability Assignment Matrix\n\n![](/assets/images/AOH.SlidePoly.35.RAM.png)\n\n> Cost Center = Où il faut suivre le cout car les membres ont été assigné et donc les couts suivent\n\n## Estimating Duration\n\n![](/assets/images/AOH.SlidePoly.36.EstimateDuration.png)\n\n\n- Exemple:\n  - Workload : 10j\n  - Disponibility: 100%\n  - Delay: best case 12j (depends on working days and holidays)\n\n\n- L'important est de chiffré le worklaod\n  - si en interne alors c'est à **travail-fixe**\n  - si en externe alors on chiffre en **durée-fixe** (delay and cost)\n\n## Cost/Time Relation\n\n> **!!! Missing CURVE !!!**\n\n![](/assets/images/AOH.SlidePoly.37.CostTime.png)\n\n> **!!! Missing CURVE !!!**\n\n# Chap 5 - Time Managment Tools\n\n![](/assets/images/AOH.SlidePoly.38.TimeManagTools.png)\n\n## Precedence Table\n\n![](/assets/images/AOH.SlidePoly.39.PrecedenceTable.png)\n\n## Dependencies Types\n\n![](/assets/images/AOH.SlidePoly.40.DependenciesTypes.png)\n\n> **IMPORTANT: Finish to Start / Start to Finish / Start to Start / Finish to Finish / Start to Delayed Start**\n\n## Logical Network\n\n![](/assets/images/AOH.SlidePoly.41.LogicalNetwork.png)\n\n## Temporal Network\n\n> Slide modified -> Check Polycope V11\n\n![](/assets/images/AOH.SlidePoly.42.TemporalNetwork.png)\n\n## Critical Path\n\n![](/assets/images/AOH.SlidePoly.43.CriticalPath.png)\n\n- On est dans un Critical Path dès lors qu'une tache retardé retard tout le projet\n\n## Temporal Network\n\n![](/assets/images/AOH.SlidePoly.44.TemporalNetwork.png)\n\n## Potential Methods\n\n### Exemple 1\n\n![](/assets/images/AOH.SlidePoly.45.PotentialMethods1.png)\n\n\n### Exemple 2\n\n![](/assets/images/AOH.SlidePoly.46.PotentialMethods2.png)\n\n### Solution Exemple 1\n\n![](/assets/images/AOH.SlidePoly.47.PotentialMethods3.png)\n\n### More Examples\n\n![](/assets/images/AOH.SlidePoly.48.png)\n\n![](/assets/images/AOH.SlidePoly.49.png)\n\n![](/assets/images/AOH.SlidePoly.50.png)\n\n![](/assets/images/AOH.SlidePoly.51.png)\n\n![](/assets/images/AOH.SlidePoly.52.png)\n\n## Gantt Chart\n\n### Principle\n![](/assets/images/AOH.SlidePoly.53.GanttChartPrinciple.png)\n\n### Types\n\n![](/assets/images/AOH.SlidePoly.54.GanttChartTypes.png)\n\n### Setting Milestones\n\n![](/assets/images/AOH.SlidePoly.55.GanttChartMilestones.png)\n\n\n### Man Power\n\n![](/assets/images/AOH.SlidePoly.56.GanttChartManPower.png)\n\n### Monitoring\n\n![](/assets/images/AOH.SlidePoly.57.GanntChartMonitoring.png)\n\n### Monitoring Milestiones\n\n![](/assets/images/AOH.SlidePoly.58.GanttChartMonitoringMilestone.png)\n\n## Chap 6 - Scheduling & Smoothing\n\n![](/assets/images/AOH.SlidePoly.59.TitleScheduling.png)\n\n### Scheduling Ressources\n\n![](/assets/images/AOH.SlidePoly.60.SchedulingRessources.png)\n\n![](/assets/images/AOH.SlidePoly.61.SchedulingRessources2.png)\n\n- Heuristic: moves small tasks because it is easier to manage in order to minimize delays\n\n![](/assets/images/AOH.SlidePoly.62.SchedulingRessources3.png)\n\n## Chap 7 - Project Monitoring\n\n![](/assets/images/AOH.SlidePoly.63.TitleProjectMonitoring.png)\n\n### Why monitoring a project ?\n\n![](/assets/images/AOH.SlidePoly.64.WhyMonitoring.png)\n\n> Set performance is PLANNING not monitoring\n\n### Report Format\n\n![](/assets/images/AOH.SlidePoly.65.ReportFormat.png)\n\n> Updated Schedule not the planning\n\nQUESTION How often for quick projects ?\n\n### Dealing with conflicts\n\n![](/assets/images/AOH.SlidePoly.66.DealingConflicts.png)\n\n- Anecdote:\n  - délégue 2 projets\n  - chaque projet donne la faute à l'autre\n  - demande aux deux de revenir en ayant discuté entre eux avant de venir le voir\n\n### Plan of communication\n\n![](/assets/images/AOH.SlidePoly.67.PlanCom.png)\n\n### Meetings\n\n![](/assets/images/AOH.SlidePoly.68.Meetings.png)\n\n### Follow-up\n\n![](/assets/images/AOH.SlidePoly.69.FollowUp.png)\n\n### Team\n\n![](/assets/images/AOH.SlidePoly.70.Team.png)\n\n### Progress\n\n![](/assets/images/AOH.SlidePoly.71.Progress.png)\n\n### Production\n\n![](/assets/images/AOH.SlidePoly.72.Production.png)\n\n> Seul le chef de projet peut lancer le projet avant la fin de la specs (seulement sur la partie de la specs qui déjà figée)\n\n### Research Project\n\n![](/assets/images/AOH.SlidePoly.73.ResearchProject.png)\n\n### Cascade Cycle\n\n![](/assets/images/AOH.SlidePoly.74.CascadeCycle.png)\n\n> Seuls revue avec le client lors de la specs puis durant la reception (si le client achète la conception alors là aussi il faut une review)\n\n### V Cycle\n\n![](/assets/images/AOH.SlidePoly.75.VCycle.png)\n\n### Prototyping\n\n![](/assets/images/AOH.SlidePoly.76.Prototyping.png)\n\n### Monitoring Approaches\n\n![](/assets/images/AOH.SlidePoly.77.MonitoringApproaches.png)\n\n#### Using Duration\n\n![](/assets/images/AOH.SlidePoly.78.MonitoringApproachesDuration.png)\n\n#### Using Worklaod\n\n![](/assets/images/AOH.SlidePoly.79.MonitoringApproachesWorkload.png)\n\n> La relation entre charge et duree est proportionnelle seulement si l'effort est constant !\n\n> Attention commencer par entrer les congés et formations (soit vu comme des absences) puis suivre avec les taches.\n\n### Monitoring Costs\n\n![](/assets/images/AOH.SlidePoly.80.MonitoringCost.png)\n\n![](/assets/images/AOH.SlidePoly.81.MonitoringCost2.png)\n\n![](/assets/images/AOH.SlidePoly.82.MonitoringCost3.png)\n\n![](/assets/images/AOH.SlidePoly.83.MonitoringCost4.png)\n\n![](/assets/images/AOH.SlidePoly.84.MonitoringCost5.png)\n\n![](/assets/images/AOH.SlidePoly.85.MonitoringCost6.png)\n\n\n#### PHF Indicators\n\n\n![](/assets/images/AOH.SlidePoly.86.IndicatorsPHF.png)\n\n**DATA SERIES:**\n  - BCWS: **planned cost** of **work planned**\n  - ACWP: **real cost** of **real work**\n  - BCWP: **planned cost** of **real work**\n\n**INDICATORS:**\n  - Schedule Variance (SV) = BCWP - BCWS\n  - Cost Variance (CV) = BCWP - ACWP\n    - si positif alors on a pas dépassé le budget\n  - Schedule Perfomance Index (SPI) = BCWP/BCWS\n    - cout budgeté dans les deux cas donc si plus de travail fait que planifié alors en avance d'où le lien avec la perfomance de planning\n\n![](/assets/images/AOH.SlidePoly.86bis.png)\n\n![](/assets/images/AOH.SlidePoly.87.MonitoringCost7.png)\n\n### Log File\n\n![](/assets/images/AOH.SlidePoly.88.LogFile.png)\n\n## Chap 8 - SUMMARY\n\n![](/assets/images/AOH.SlidePoly.89.png)\n\n![](/assets/images/AOH.SlidePoly.90.png)\n\n![](/assets/images/AOH.SlidePoly.91.png)\n\n![](/assets/images/AOH.SlidePoly.92.png)\n\n![](/assets/images/AOH.SlidePoly.93.png)\n\n![](/assets/images/AOH.SlidePoly.94.png)\n\n![](/assets/images/AOH.SlidePoly.95.png)\n\n![](/assets/images/AOH.SlidePoly.96.png)\n\n## Chap 9 - False Ideas\n\n![](/assets/images/AOH.SlidePoly.97.png)\n\n![](/assets/images/AOH.SlidePoly.98.png)\n\n![](/assets/images/AOH.SlidePoly.99.png)\n\n![](/assets/images/AOH.SlidePoly.100.png)\n\n![](/assets/images/AOH.SlidePoly.101.png)\n\n## Chap 10 - Conclusion\n\n![](/assets/images/AOH.SlidePoly.102.png)\n\n![](/assets/images/AOH.SlidePoly.103.png)\n\n![](/assets/images/AOH.SlidePoly.104.png)\n\n","n":0.03}}}]}
