<h1 id="tp2---logiciel-aphelion">TP2 - Logiciel Aphelion<a aria-hidden="true" class="anchor-heading icon-link" href="#tp2---logiciel-aphelion"></a></h1>
<blockquote>
<p><strong>Avertissement:</strong>
Cette page peut contenir des fautes ! Envoyez-moi un message sur <a href="https://matrix.to/#/#UT3-AURO-M2-2223-Request:matrix.org"><code>#UT3-AURO-M2-2223-Request:matrix.org</code></a> si vous en trouvez, merci.</p>
</blockquote>
<blockquote>
<p>Cours donné par C. Eqouy  </p>
</blockquote>
<p>Support de cours :</p>
<ul>
<li><a href="https://raw.githubusercontent.com/TunnARK/UT3-AURO-2223-S10-Dendron/main/vault/assets/B1.VIRCRV.TP2.Sujet.pdf">B1.VIRCRV.TP2.Sujet.pdf</a></li>
</ul>
<hr>
<p>Ouverture = Erosion + Dilatation</p>
<p>Fermeture = Dilatation + Erosion</p>
<h1 id="exercice-2---contrôle-de-conformité-sur-grille">Exercice 2 - Contrôle de conformité sur grille<a aria-hidden="true" class="anchor-heading icon-link" href="#exercice-2---contrôle-de-conformité-sur-grille"></a></h1>
<p><img src="/UT3-AURO-2223-S10-Dendron/assets/images/B1.VIRCRV.TP2.Ex-02.png"></p>
<h2 id="21-vignettage">2.1) Vignettage<a aria-hidden="true" class="anchor-heading icon-link" href="#21-vignettage"></a></h2>
<p>Confusion entre la grille et le fond dû aux problemes de luminosité du coup on fait une <strong>fermeture</strong> pour supprimer totalement la grille et ainsi récuperer le fond.</p>
<p>On a appliqué une fermeture ainsi :</p>
<ol>
<li>Traitement>Image>Morphologie>Ouverture/Fermeture>Close</li>
<li>Prendre <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mi>m</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>R</mi><mi>e</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">ImageRef</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">ma</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span></span> puis choisir un carré comme <strong>structuring element</strong> avec une taille de 70</li>
</ol>
<p>Une fois le fond isolé on peut faire une soustraction <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>o</mi><mi>n</mi><mi>d</mi><mo>−</mo><mi>I</mi><mi>m</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>R</mi><mi>e</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">Fond-ImageRef</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">ma</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span></span> pour obtenir une image de la grille avec un fond uniforme.</p>
<p>Pour faire la soustraction :</p>
<ol>
<li>Traitement>Image>Arithmétique>Substract</li>
<li>Input1 = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>o</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">Fond</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span></span> et Input2 = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mi>m</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>R</mi><mi>e</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">ImageRef</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">ma</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span></span></li>
</ol>
<p>Maintenant on va pouvoir appliquer une segmentation pour extraire la grille (mettre tous le fond à 0 et ne garder que la grille en la mettant à 1).</p>
<p>Pour faire la segmentation :</p>
<ol>
<li>Traitement>Semgmentation>Treshold</li>
<li>Choisir le seuil qui affiche toute la grille (ici on avait 13->57)</li>
<li>On a obtenu des pixels en bordure d'image à enlever</li>
<li>Pour enlever ces pixels de trop on a fait
Traitement>Image>Morphologie>Géodésie>BorderKill</li>
</ol>
<p>Il peut être plus advantageux d'inverser l'image pour mettre le fond à 1 et la grille à 0 pour ce faire :</p>
<ol>
<li>Traitement>Image>Logique>Not</li>
</ol>
<h2 id="22-labélisation">2.2) Labélisation<a aria-hidden="true" class="anchor-heading icon-link" href="#22-labélisation"></a></h2>
<ol>
<li>Ouvrir l'outils de labélisation :
"extraction d'objets" sur la barre d'outils de gauche</li>
<li>Laisser "automatique" et appuyer sur suivant</li>
<li>Choisir "seuillage" et vérifier que les seuils sont de 1 à 1</li>
<li>Appuyer sur suivant puis appliquer le modifications</li>
</ol>
<p>On obtient dans la gallerie d'"ObjectSet" un labelisation possèdant en propriété 206 objets que l'on peut afficher sur l'<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mi>m</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>R</mi><mi>e</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">ImageRef</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">ma</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span></span> en sélectionnant "Afficher/Masquer">Bitmap.</p>
<h2 id="23-filtrage">2.3) Filtrage<a aria-hidden="true" class="anchor-heading icon-link" href="#23-filtrage"></a></h2>
<ol>
<li>Traitement>ObjectSet>Filtrage</li>
<li>Choisir un critère de filtrage (élongation ou périmètre)</li>
<li>Donner un range ne contenant pas les caractéristiques nominales 
<ul>
<li>pour l'élongation mettre min à 0 et max en à 0.75 -> le nominal étant autour de 0.8</li>
<li>pour le périmètre mettre min à 125 et max à 500 ou plus (le nominal étant plus petit que 125)</li>
</ul>
</li>
<li>Vérifier les propriétés de l'objectset (il doit contenir que la zone défectueuse)</li>
</ol>
<h2 id="24-approche-à-privilégier-">2.4) Approche à privilégier ?<a aria-hidden="true" class="anchor-heading icon-link" href="#24-approche-à-privilégier-"></a></h2>
<p>La méthode de filtrage est plus intéressante car elle permet de n'isoler que l'objet défectueux tout en facilitant son automatisation via l'usage du tableau de caractéristiques.</p>
<h1 id="exercice-1---contrôle-de-conformité-sur-circuit-imprimé">Exercice 1 - Contrôle de conformité sur circuit imprimé<a aria-hidden="true" class="anchor-heading icon-link" href="#exercice-1---contrôle-de-conformité-sur-circuit-imprimé"></a></h1>
<p><img src="/UT3-AURO-2223-S10-Dendron/assets/images/B1.VIRCRV.TP2.Ex-01.png"></p>
<h2 id="11-augmenter-la-dynamique">1.1) Augmenter la dynamique<a aria-hidden="true" class="anchor-heading icon-link" href="#11-augmenter-la-dynamique"></a></h2>
<ol>
<li>Traitement>Image>Arithméique>LinearScale</li>
<li>Ajuster l'output range pour couvrir tous le spectre <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">;</mo><mn>255</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0;255]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">255</span><span class="mclose">]</span></span></span></span></span></li>
</ol>
<h2 id="12-détection-des-défauts">1.2) Détection des défauts<a aria-hidden="true" class="anchor-heading icon-link" href="#12-détection-des-défauts"></a></h2>
<ol>
<li>Appliquer des segmentations sur la conforme et la défectueuse
Traitement>Semgmentation>Treshold</li>
<li>Faire une soustraction <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mi>e</mi><mo>−</mo><mi>d</mi><mi>e</mi><mi>f</mi><mi>e</mi><mi>c</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">conforme-defect</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span></span></span></span></span> cela donne les parties manquantes de la piece defectueuse</li>
<li>Possiblement appliquer une ouverture/fermeture pour améliore l'image obtenue en 2</li>
</ol>
<h2 id="13-identification-des-défauts">1.3) Identification des défauts<a aria-hidden="true" class="anchor-heading icon-link" href="#13-identification-des-défauts"></a></h2>
<ol>
<li>Appliquer la labelisation et l'afficher sur l'image défectueuse pour faire apparaitre les pieces manquantes</li>
<li>Filtrer pour ne garder que le segment (en utilisant le citere de compacité par exemple)</li>
</ol>
<h2 id="14-ségmenter-les-lignes-de-soudure">1.4) Ségmenter les lignes de soudure<a aria-hidden="true" class="anchor-heading icon-link" href="#14-ségmenter-les-lignes-de-soudure"></a></h2>
<p>...</p>
<h1 id="exercice-4---analyse-de-microstructure">Exercice 4 - Analyse de microstructure<a aria-hidden="true" class="anchor-heading icon-link" href="#exercice-4---analyse-de-microstructure"></a></h1>
<p><img src="/UT3-AURO-2223-S10-Dendron/assets/images/B1.VIRCRV.TP2.Ex-04.png"></p>
<h2 id="41-identification-avec-histogramme-de-niveaux-de-gris">4.1) Identification avec histogramme de niveaux de gris<a aria-hidden="true" class="anchor-heading icon-link" href="#41-identification-avec-histogramme-de-niveaux-de-gris"></a></h2>
<h3 id="histogramme">Histogramme<a aria-hidden="true" class="anchor-heading icon-link" href="#histogramme"></a></h3>
<ol>
<li>Clic droit sur l'image puis Histogramme</li>
<li>ou Traitement>Image>Mesures>Histogramme</li>
</ol>
<p><img src="/UT3-AURO-2223-S10-Dendron/assets/images/B1.VIRCRV.TP2.Ex-04.Im-01.png"></p>
<p>L'Histogramme montre trois pics à :</p>
<ul>
<li>autour de <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>254</mn></mrow><annotation encoding="application/x-tex">254</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">254</span></span></span></span></span> correspondant à la matrice en blanc</li>
<li>entre <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>70</mn><mo separator="true">;</mo><mn>185</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[70;185]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">70</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">185</span><span class="mclose">]</span></span></span></span></span> correspondant à la couche superficielle en gris</li>
<li>autour de <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span> correspondant à la couche discontinue en noir</li>
</ul>
<h3 id="segmentation">Segmentation<a aria-hidden="true" class="anchor-heading icon-link" href="#segmentation"></a></h3>
<ol>
<li>Traitement>Images>Segmentation>Treshold</li>
<li>Choisir le seuil qui affiche juste la couche grise (ici on a pris 70->185)</li>
<li>On a obtenu des contours de la couche discontinue à enlever
<ol>
<li>Traitement>Image>Morphologie>Ouverture/Fermeture>Close avec Disque et size à 5
pour enlever les trous ; puis</li>
<li>Traitement>Image>Morphologie>Ouverture/Fermeture>Open avec Disque et size à 5
pour remplir les trous de la couche grise</li>
</ol>
</li>
</ol>
<h3 id="epaisseur">Epaisseur<a aria-hidden="true" class="anchor-heading icon-link" href="#epaisseur"></a></h3>
<ol>
<li>Traitement>Images>Morphologie>Squelette>ThinSkeleton
pour extraire la structure de la couche grise</li>
<li>Choisir Structure Type 1 avec 4 connexité</li>
</ol>
<!--
# Exercice 3 - Comptage de Tuyaux

![](/assets/images/B1.VIRCRV.TP2.Ex-03.png)

# Exercice 5 - Contrôle conformité circuit imprimé (sans apprentissage)

![](/assets/images/B1.VIRCRV.TP2.Ex-05.png)

# Exercice 6 - Analyse Endommagement

![](/assets/images/B1.VIRCRV.TP2.Ex-06.png)

# Exercice 7 - Détection d'objets mobiles

![](/assets/images/B1.VIRCRV.TP2.Ex-07.png)

-->
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/UT3-AURO-2223-S10-Dendron/notes/j66qa3o2x0soxuxfoihdhs0">VIRCRV - Vision Industrielle</a></li>
</ul>